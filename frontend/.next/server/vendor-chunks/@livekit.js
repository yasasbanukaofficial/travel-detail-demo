"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@livekit";
exports.ids = ["vendor-chunks/@livekit"];
exports.modules = {

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/components-BeK2vIib.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/components-BeK2vIib.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (/* binding */ wa),\n/* harmony export */   B: () => (/* binding */ Xt),\n/* harmony export */   C: () => (/* binding */ ra),\n/* harmony export */   D: () => (/* binding */ ca),\n/* harmony export */   E: () => (/* binding */ vt),\n/* harmony export */   F: () => (/* binding */ ha),\n/* harmony export */   G: () => (/* binding */ va),\n/* harmony export */   H: () => (/* binding */ ie),\n/* harmony export */   I: () => (/* binding */ Et),\n/* harmony export */   J: () => (/* binding */ pt),\n/* harmony export */   K: () => (/* binding */ wt),\n/* harmony export */   L: () => (/* binding */ pa),\n/* harmony export */   M: () => (/* binding */ ua),\n/* harmony export */   N: () => (/* binding */ kt),\n/* harmony export */   O: () => (/* binding */ Rt),\n/* harmony export */   P: () => (/* binding */ Bt),\n/* harmony export */   Q: () => (/* binding */ Mt),\n/* harmony export */   R: () => (/* binding */ Ra),\n/* harmony export */   S: () => (/* binding */ la),\n/* harmony export */   T: () => (/* binding */ fa),\n/* harmony export */   U: () => (/* binding */ yt),\n/* harmony export */   V: () => (/* binding */ Ft),\n/* harmony export */   W: () => (/* binding */ bt),\n/* harmony export */   X: () => (/* binding */ Me),\n/* harmony export */   Y: () => (/* binding */ St),\n/* harmony export */   Z: () => (/* binding */ oe),\n/* harmony export */   _: () => (/* binding */ Ct),\n/* harmony export */   a: () => (/* binding */ Sa),\n/* harmony export */   b: () => (/* binding */ Pt),\n/* harmony export */   c: () => (/* binding */ sa),\n/* harmony export */   d: () => (/* binding */ ia),\n/* harmony export */   e: () => (/* binding */ oa),\n/* harmony export */   f: () => (/* binding */ ma),\n/* harmony export */   g: () => (/* binding */ Ea),\n/* harmony export */   h: () => (/* binding */ ga),\n/* harmony export */   i: () => (/* binding */ ba),\n/* harmony export */   j: () => (/* binding */ Ie),\n/* harmony export */   k: () => (/* binding */ ya),\n/* harmony export */   l: () => (/* binding */ $t),\n/* harmony export */   m: () => (/* binding */ Ca),\n/* harmony export */   n: () => (/* binding */ aa),\n/* harmony export */   o: () => (/* binding */ na),\n/* harmony export */   p: () => (/* binding */ It),\n/* harmony export */   q: () => (/* binding */ da),\n/* harmony export */   r: () => (/* binding */ be),\n/* harmony export */   s: () => (/* binding */ ne),\n/* harmony export */   t: () => (/* binding */ K),\n/* harmony export */   u: () => (/* binding */ Se),\n/* harmony export */   v: () => (/* binding */ ka),\n/* harmony export */   w: () => (/* binding */ Ma),\n/* harmony export */   x: () => (/* binding */ Zt),\n/* harmony export */   y: () => (/* binding */ Ht),\n/* harmony export */   z: () => (/* binding */ gt)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hooks-OJtwh4jO.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/hooks-OJtwh4jO.mjs\");\n/* harmony import */ var _room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./room-889cObLb.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/room-889cObLb.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contexts-Cm1aSBTs.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/contexts-Cm1aSBTs.mjs\");\n\n\n\n\n\n\nconst aa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(n, a) {\n    const { buttonProps: r } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(n);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: a, ...r }, n.children);\n  }\n), na = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ room: n, ...a }, r) {\n    const c = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(n);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: r, ...a }, c);\n  }\n), ra = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(n, a) {\n    const { mergedProps: r } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.b)({ props: n });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: a, ...r }, n.children);\n  }\n), ca = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function(n, a) {\n    const { buttonProps: r } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(n);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: a, ...r }, n.children);\n  }\n), gt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" })), vt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z\" })), la = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, viewBox: \"0 0 24 24\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"#FFF\",\n    d: \"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z\"\n  }\n)), sa = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 18, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z\",\n    clipRule: \"evenodd\"\n  }\n)), ie = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z\",\n    clipRule: \"evenodd\"\n  }\n)), Et = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9\" }))), ia = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z\",\n    clipRule: \"evenodd\"\n  }\n)), oa = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z\",\n    clipRule: \"evenodd\"\n  }\n)), pt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentcolor\",\n    fillRule: \"evenodd\",\n    d: \"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z\",\n    clipRule: \"evenodd\"\n  }\n)), wt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z\" })), kt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z\" })), Rt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" })), Mt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }))), yt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentcolor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z\" }))), bt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"currentColor\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { opacity: 0.25 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z\" }))), Me = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z\",\n    clipRule: \"evenodd\"\n  }\n)), St = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 20, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { fill: \"currentColor\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z\" }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fillRule: \"evenodd\",\n    d: \"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z\",\n    clipRule: \"evenodd\"\n  }\n))), oe = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.7\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.6\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.5\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z\",\n    clipRule: \"evenodd\"\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.4\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.9\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.3\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.8\n  }\n), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"path\",\n  {\n    fill: \"currentColor\",\n    fillRule: \"evenodd\",\n    d: \"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z\",\n    clipRule: \"evenodd\",\n    opacity: 0.2\n  }\n)), Ct = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: 16, height: 16, fill: \"none\", ...t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"g\", { stroke: \"currentColor\", strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 1.5 }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { d: \"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25\" }))), It = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: n, ...a }, r) {\n    const c = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ab)(), { mergedProps: s, inFocus: o } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.d)({\n      trackRef: n ?? c,\n      props: a\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ac.Consumer, null, (l) => l !== void 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: r, ...s }, a.children ? a.children : o ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ct, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Et, null)));\n  }\n), ua = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    kind: n,\n    initialSelection: a,\n    onActiveDeviceChange: r,\n    onDeviceListChange: c,\n    onDeviceSelectError: s,\n    exactMatch: o,\n    track: l,\n    requestPermissions: i,\n    onError: u,\n    ...d\n  }, g) {\n    const f = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.w)(), w = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (E) => {\n        f && f.emit(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, E), u == null || u(E);\n      },\n      [f, u]\n    ), { devices: p, activeDeviceId: m, setActiveMediaDevice: v, className: b } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.e)({\n      kind: n,\n      room: f,\n      track: l,\n      requestPermissions: i,\n      onError: w\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      a !== void 0 && v(a);\n    }, [v]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      typeof c == \"function\" && c(p);\n    }, [c, p]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      m && m !== \"\" && (r == null || r(m));\n    }, [m]);\n    const C = async (E) => {\n      try {\n        await v(E, { exact: o ?? !0 });\n      } catch (k) {\n        if (k instanceof Error)\n          s == null || s(k);\n        else\n          throw k;\n      }\n    }, T = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(d, { className: b }, { className: \"lk-list\" }),\n      [b, d]\n    ), A = !!p.find((E) => E.label.toLowerCase().startsWith(\"default\"));\n    function h(E, k, I) {\n      return E === k || !A && I === 0 && k === \"default\";\n    }\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"ul\", { ref: g, ...T }, p.map((E, k) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"li\",\n      {\n        key: E.deviceId,\n        id: E.deviceId,\n        \"data-lk-active\": h(E.deviceId, m, k),\n        \"aria-selected\": h(E.deviceId, m, k),\n        role: \"option\"\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: () => C(E.deviceId) }, E.label)\n    )));\n  }\n), da = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ label: n = \"Allow Audio\", ...a }, r) {\n    const c = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.f)(), { mergedProps: s } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.f)({ room: c, props: a });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: r, ...s }, n);\n  }\n), ma = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ label: n, ...a }, r) {\n    const c = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.f)(), { mergedProps: s, canPlayAudio: o } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.f)({ room: c, props: a }), { mergedProps: l, canPlayVideo: i } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.g)({ room: c, props: s }), { style: u, ...d } = l;\n    return u.display = o && i ? \"none\" : \"block\", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: r, style: u, ...d }, n ?? `Start ${o ? \"Video\" : \"Audio\"}`);\n  }\n);\nfunction ye(t, n) {\n  switch (t) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone:\n      return n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(kt, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(wt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera:\n      return n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(vt, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(gt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare:\n      return n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(St, null) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Me, null);\n    default:\n      return;\n  }\n}\nfunction xt(t) {\n  switch (t) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Excellent:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Rt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Good:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Mt, null);\n    case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Poor:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(yt, null);\n    default:\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(bt, null);\n  }\n}\nconst fa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function({ showIcon: n, ...a }, r) {\n  const { buttonProps: c, enabled: s } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.h)(a), [o, l] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    l(!0);\n  }, []), o && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { ref: r, ...c }, (n ?? !0) && ye(a.source, s), a.children);\n}), be = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(n, a) {\n  const { className: r, quality: c } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(n), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({ ...(0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(n, { className: r }), \"data-lk-quality\": c }), [c, n, r]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: a, ...s }, n.children ?? xt(c));\n}), K = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ participant: n, ...a }, r) {\n    const c = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.c)(n), { className: s, infoObserver: o } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ad)(c), [c]), { identity: l, name: i } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.j)(o, {\n      name: c.name,\n      identity: c.identity,\n      metadata: c.metadata\n    }), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(a, { className: s, \"data-lk-participant-name\": i }), [a, s, i]);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { ref: r, ...u }, i !== \"\" ? i : l, a.children);\n  }\n), Se = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: n, show: a = \"always\", ...r }, c) {\n    const { className: s, isMuted: o } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.k)(n), l = a === \"always\" || a === \"muted\" && o || a === \"unmuted\" && !o, i = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n      () => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(r, {\n        className: s\n      }),\n      [s, r]\n    );\n    return l ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: c, ...i, \"data-lk-muted\": o }, r.children ?? ye(n.source, !o)) : null;\n  }\n), Pt = (t) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n  \"svg\",\n  {\n    width: 320,\n    height: 320,\n    viewBox: \"0 0 320 320\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ...t\n  },\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  ),\n  /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    \"path\",\n    {\n      d: \"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z\",\n      fill: \"white\",\n      fillOpacity: 0.25\n    }\n  )\n);\nfunction Ce(t, n = {}) {\n  const [a, r] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.X)(t)), [c, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(a == null ? void 0 : a.isMuted), [o, l] = react__WEBPACK_IMPORTED_MODULE_0__.useState(a == null ? void 0 : a.isSubscribed), [i, u] = react__WEBPACK_IMPORTED_MODULE_0__.useState(a == null ? void 0 : a.track), [d, g] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\"landscape\"), f = react__WEBPACK_IMPORTED_MODULE_0__.useRef(), { className: w, trackObserver: p } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.Y)(t), [\n    t.participant.sid ?? t.participant.identity,\n    t.source,\n    (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(t) && t.publication.trackSid\n  ]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const m = p.subscribe((v) => {\n      _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"update track\", v), r(v), s(v == null ? void 0 : v.isMuted), l(v == null ? void 0 : v.isSubscribed), u(v == null ? void 0 : v.track);\n    });\n    return () => m == null ? void 0 : m.unsubscribe();\n  }, [p]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var m, v;\n    return i && (f.current && i.detach(f.current), (m = n.element) != null && m.current && !(t.participant.isLocal && (i == null ? void 0 : i.kind) === \"audio\") && i.attach(n.element.current)), f.current = (v = n.element) == null ? void 0 : v.current, () => {\n      f.current && (i == null || i.detach(f.current));\n    };\n  }, [i, n.element]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var m, v;\n    if (typeof ((m = a == null ? void 0 : a.dimensions) == null ? void 0 : m.width) == \"number\" && typeof ((v = a == null ? void 0 : a.dimensions) == null ? void 0 : v.height) == \"number\") {\n      const b = a.dimensions.width > a.dimensions.height ? \"landscape\" : \"portrait\";\n      g(b);\n    }\n  }, [a]), {\n    publication: a,\n    isMuted: c,\n    isSubscribed: o,\n    track: i,\n    elementProps: (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(n.props, {\n      className: w,\n      \"data-lk-local-participant\": t.participant.isLocal,\n      \"data-lk-source\": a == null ? void 0 : a.source,\n      ...(a == null ? void 0 : a.kind) === \"video\" && { \"data-lk-orientation\": d }\n    })\n  };\n}\nvar Y, ue;\nfunction Tt() {\n  if (ue) return Y;\n  ue = 1;\n  var t = \"Expected a function\", n = NaN, a = \"[object Symbol]\", r = /^\\s+|\\s+$/g, c = /^[-+]0x[0-9a-f]+$/i, s = /^0b[01]+$/i, o = /^0o[0-7]+$/i, l = parseInt, i = typeof _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ae == \"object\" && _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ae && _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ae.Object === Object && _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ae, u = typeof self == \"object\" && self && self.Object === Object && self, d = i || u || Function(\"return this\")(), g = Object.prototype, f = g.toString, w = Math.max, p = Math.min, m = function() {\n    return d.Date.now();\n  };\n  function v(h, E, k) {\n    var I, V, O, N, M, P, F = 0, re = !1, Z = !1, D = !0;\n    if (typeof h != \"function\")\n      throw new TypeError(t);\n    E = A(E) || 0, b(k) && (re = !!k.leading, Z = \"maxWait\" in k, O = Z ? w(A(k.maxWait) || 0, E) : O, D = \"trailing\" in k ? !!k.trailing : D);\n    function U(R) {\n      var x = I, H = V;\n      return I = V = void 0, F = R, N = h.apply(H, x), N;\n    }\n    function Pe(R) {\n      return F = R, M = setTimeout(W, E), re ? U(R) : N;\n    }\n    function Te(R) {\n      var x = R - P, H = R - F, se = E - x;\n      return Z ? p(se, O - H) : se;\n    }\n    function ce(R) {\n      var x = R - P, H = R - F;\n      return P === void 0 || x >= E || x < 0 || Z && H >= O;\n    }\n    function W() {\n      var R = m();\n      if (ce(R))\n        return le(R);\n      M = setTimeout(W, Te(R));\n    }\n    function le(R) {\n      return M = void 0, D && I ? U(R) : (I = V = void 0, N);\n    }\n    function Ae() {\n      M !== void 0 && clearTimeout(M), F = 0, I = P = V = M = void 0;\n    }\n    function Ne() {\n      return M === void 0 ? N : le(m());\n    }\n    function G() {\n      var R = m(), x = ce(R);\n      if (I = arguments, V = this, P = R, x) {\n        if (M === void 0)\n          return Pe(P);\n        if (Z)\n          return M = setTimeout(W, E), U(P);\n      }\n      return M === void 0 && (M = setTimeout(W, E)), N;\n    }\n    return G.cancel = Ae, G.flush = Ne, G;\n  }\n  function b(h) {\n    var E = typeof h;\n    return !!h && (E == \"object\" || E == \"function\");\n  }\n  function C(h) {\n    return !!h && typeof h == \"object\";\n  }\n  function T(h) {\n    return typeof h == \"symbol\" || C(h) && f.call(h) == a;\n  }\n  function A(h) {\n    if (typeof h == \"number\")\n      return h;\n    if (T(h))\n      return n;\n    if (b(h)) {\n      var E = typeof h.valueOf == \"function\" ? h.valueOf() : h;\n      h = b(E) ? E + \"\" : E;\n    }\n    if (typeof h != \"string\")\n      return h === 0 ? h : +h;\n    h = h.replace(r, \"\");\n    var k = s.test(h);\n    return k || o.test(h) ? l(h.slice(2), k ? 2 : 8) : c.test(h) ? n : +h;\n  }\n  return Y = v, Y;\n}\nvar At = Tt();\nconst de = /* @__PURE__ */ (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.af)(At);\nfunction Nt(t) {\n  const n = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(t);\n  n.current = t, (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(\n    () => () => {\n      n.current();\n    },\n    []\n  );\n}\nfunction Lt(t, n = 500, a) {\n  const r = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  Nt(() => {\n    r.current && r.current.cancel();\n  });\n  const c = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    const s = de(t, n, a), o = (...l) => s(...l);\n    return o.cancel = () => {\n      s.cancel();\n    }, o.isPending = () => !!r.current, o.flush = () => s.flush(), o;\n  }, [t, n, a]);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    r.current = de(t, n, a);\n  }, [t, n, a]), c;\n}\nfunction zt(t, n, a) {\n  const r = (u, d) => u === d, c = t instanceof Function ? t() : t, [s, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(c), l = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(c), i = Lt(\n    o,\n    n,\n    a\n  );\n  return r(l.current, c) || (i(c), l.current = c), [s, i];\n}\nfunction Vt({\n  threshold: t = 0,\n  root: n = null,\n  rootMargin: a = \"0%\",\n  freezeOnceVisible: r = !1,\n  initialIsIntersecting: c = !1,\n  onChange: s\n} = {}) {\n  var o;\n  const [l, i] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null), [u, d] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(() => ({\n    isIntersecting: c,\n    entry: void 0\n  })), g = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n  g.current = s;\n  const f = ((o = u.entry) == null ? void 0 : o.isIntersecting) && r;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (!l || !(\"IntersectionObserver\" in window) || f)\n      return;\n    const m = new IntersectionObserver(\n      (v) => {\n        const b = Array.isArray(m.thresholds) ? m.thresholds : [m.thresholds];\n        v.forEach((C) => {\n          const T = C.isIntersecting && b.some((A) => C.intersectionRatio >= A);\n          d({ isIntersecting: T, entry: C }), g.current && g.current(T, C);\n        });\n      },\n      { threshold: t, root: n, rootMargin: a }\n    );\n    return m.observe(l), () => {\n      m.disconnect();\n    };\n  }, [\n    l,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    JSON.stringify(t),\n    n,\n    a,\n    f,\n    r\n  ]);\n  const w = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    var m;\n    !l && ((m = u.entry) != null && m.target) && !r && !f && w.current !== u.entry.target && (w.current = u.entry.target, d({ isIntersecting: c, entry: void 0 }));\n  }, [l, u.entry, r, f, c]);\n  const p = [\n    i,\n    !!u.isIntersecting,\n    u.entry\n  ];\n  return p.ref = p[0], p.isIntersecting = p[1], p.entry = p[2], p;\n}\nconst Ft = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    onTrackClick: n,\n    onClick: a,\n    onSubscriptionStatusChanged: r,\n    trackRef: c,\n    manageSubscription: s,\n    ...o\n  }, l) {\n    const i = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(c), u = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(l, () => u.current);\n    const d = Vt({ root: u.current }), [g] = zt(d, 3e3);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      s && i.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication && (g == null ? void 0 : g.isIntersecting) === !1 && (d == null ? void 0 : d.isIntersecting) === !1 && i.publication.setSubscribed(!1);\n    }, [g, i, s]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      s && i.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication && (d == null ? void 0 : d.isIntersecting) === !0 && i.publication.setSubscribed(!0);\n    }, [d, i, s]);\n    const {\n      elementProps: f,\n      publication: w,\n      isSubscribed: p\n    } = Ce(i, {\n      element: u,\n      props: o\n    });\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      r == null || r(!!p);\n    }, [p, r]);\n    const m = (v) => {\n      a == null || a(v), n == null || n({ participant: i == null ? void 0 : i.participant, track: w });\n    };\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"video\", { ref: u, ...f, muted: !0, onClick: m });\n  }\n), ne = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: n, onSubscriptionStatusChanged: a, volume: r, ...c }, s) {\n    const o = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(n), l = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null);\n    react__WEBPACK_IMPORTED_MODULE_0__.useImperativeHandle(s, () => l.current);\n    const {\n      elementProps: i,\n      isSubscribed: u,\n      track: d,\n      publication: g\n    } = Ce(o, {\n      element: l,\n      props: c\n    });\n    return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      a == null || a(!!u);\n    }, [u, a]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      d === void 0 || r === void 0 || (d instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteAudioTrack ? d.setVolume(r) : _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.l.warn(\"Volume can only be set on remote audio tracks.\"));\n    }, [r, d]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n      g === void 0 || c.muted === void 0 || (g instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.RemoteTrackPublication ? g.setEnabled(!c.muted) : _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.l.warn(\"Can only call setEnabled on remote track publications.\"));\n    }, [c.muted, g, d]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"audio\", { ref: l, ...i });\n  }\n);\nfunction Zt(t) {\n  const n = !!(0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.B)();\n  return t.participant && !n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ag.Provider, { value: t.participant }, t.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.children);\n}\nfunction Ht(t) {\n  const n = !!(0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ab)();\n  return t.trackRef && !n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ah.Provider, { value: t.trackRef }, t.children) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.children);\n}\nconst Bt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    trackRef: n,\n    children: a,\n    onParticipantClick: r,\n    disableSpeakingIndicator: c,\n    ...s\n  }, o) {\n    var w, p;\n    const l = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(n), { elementProps: i } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.l)({\n      htmlProps: s,\n      disableSpeakingIndicator: c,\n      onParticipantClick: r,\n      trackRef: l\n    }), u = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.m)(l.participant), d = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.j)(), g = (w = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ai)()) == null ? void 0 : w.autoSubscription, f = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n      (m) => {\n        l.source && !m && d && d.pin.dispatch && (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(l, d.pin.state) && d.pin.dispatch({ msg: \"clear_pin\" });\n      },\n      [l, d]\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: o, style: { position: \"relative\" }, ...i }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ht, { trackRef: l }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Zt, { participant: l.participant }, a ?? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && (((p = l.publication) == null ? void 0 : p.kind) === \"video\" || l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera || l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare) ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      Ft,\n      {\n        trackRef: l,\n        onSubscriptionStatusChanged: f,\n        manageSubscription: g\n      }\n    ) : (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      ne,\n      {\n        trackRef: l,\n        onSubscriptionStatusChanged: f\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-placeholder\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Pt, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, u && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(pt, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      Se,\n      {\n        trackRef: {\n          participant: l.participant,\n          source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone\n        },\n        show: \"muted\"\n      }\n    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(K, null)) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Me, { style: { marginRight: \"0.25rem\" } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(K, null, \"'s screen\"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(be, { className: \"lk-participant-metadata-item\" }))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(It, { trackRef: l }))));\n  }\n);\nfunction ha(t) {\n  const n = (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(t, { className: \"lk-focus-layout\" });\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...n }, t.children);\n}\nfunction ga({ trackRef: t, ...n }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Bt, { trackRef: t, ...n });\n}\nfunction Ie({ tracks: t, ...n }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.map((a) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ah.Provider,\n    {\n      value: a,\n      key: (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.p)(a)\n    },\n    (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.c)(n.children)\n  )));\n}\nfunction jt({\n  totalPageCount: t,\n  nextPage: n,\n  prevPage: a,\n  currentPage: r,\n  pagesContainer: c\n}) {\n  const [s, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(!1);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    let l;\n    return c && (l = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.aj)(c.current, 2e3).subscribe(\n      o\n    )), () => {\n      l && l.unsubscribe();\n    };\n  }, [c]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-pagination-control\", \"data-lk-user-interaction\": s }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: a }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ie, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-pagination-count\" }, `${r} of ${t}`), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", { className: \"lk-button\", onClick: n }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ie, null)));\n}\nconst _t = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ totalPageCount: n, currentPage: a }, r) {\n    const c = new Array(n).fill(\"\").map((s, o) => o + 1 === a ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { \"data-lk-active\": !0, key: o }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { key: o }));\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: r, className: \"lk-pagination-indicator\" }, c);\n  }\n);\nfunction va({ tracks: t, ...n }) {\n  const a = react__WEBPACK_IMPORTED_MODULE_0__.createRef(), r = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(n, { className: \"lk-grid-layout\" }),\n    [n]\n  ), { layout: c } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(a, t.length), s = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.o)(c.maxTiles, t);\n  return (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(a, {\n    onLeftSwipe: s.nextPage,\n    onRightSwipe: s.prevPage\n  }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: a, \"data-lk-pagination\": s.totalPageCount > 1, ...r }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ie, { tracks: s.tracks }, n.children), t.length > c.maxTiles && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    _t,\n    {\n      totalPageCount: s.totalPageCount,\n      currentPage: s.currentPage\n    }\n  ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(jt, { pagesContainer: a, ...s })));\n}\nconst Ot = 130, Wt = 140, me = 1, xe = 16 / 10, qt = (1 - xe) * -1;\nfunction Ea({ tracks: t, orientation: n, ...a }) {\n  const r = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), [c, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0), { width: o, height: l } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.q)(r), i = n || (l >= o ? \"vertical\" : \"horizontal\"), u = i === \"vertical\" ? Math.max(o * qt, Ot) : Math.max(l * xe, Wt), d = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ak)(), g = Math.max(i === \"vertical\" ? (l - d) / u : (o - d) / u, me);\n  let f = Math.round(g);\n  Math.abs(g - c) < 0.5 ? f = Math.round(c) : c !== g && s(g);\n  const w = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.r)(t, f);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    r.current && (r.current.dataset.lkOrientation = i, r.current.style.setProperty(\"--lk-max-visible-tiles\", f.toString()));\n  }, [f, i]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"aside\", { key: i, className: \"lk-carousel\", ref: r, ...a }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Ie, { tracks: w }, a.children));\n}\nfunction pa({\n  value: t,\n  onPinChange: n,\n  onWidgetChange: a,\n  children: r\n}) {\n  const c = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.al)(t);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"PinState Updated\", { state: c.pin.state }), n && c.pin.state && n(c.pin.state);\n  }, [c.pin.state, n]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.l.debug(\"Widget Updated\", { widgetState: c.widget.state }), a && c.widget.state && a(c.widget.state);\n  }, [a, c.widget.state]), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ac.Provider, { value: c }, r);\n}\nconst wa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ trackRef: n, ...a }, r) {\n    const d = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(n), g = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.s)(d, { bands: 7, loPass: 300 });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"svg\",\n      {\n        ref: r,\n        width: \"100%\",\n        height: \"100%\",\n        viewBox: \"0 0 200 90\",\n        ...a,\n        className: \"lk-audio-visualizer\"\n      },\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"rect\", { x: \"0\", y: \"0\", width: \"100%\", height: \"100%\" }),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n        \"g\",\n        {\n          style: {\n            transform: `translate(${(200 - 7 * 10) / 2}px, 0)`\n          }\n        },\n        g.map((f, w) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n          \"rect\",\n          {\n            key: w,\n            x: w * 10,\n            y: 90 / 2 - f * 50 / 2,\n            width: 6,\n            height: f * 50\n          }\n        ))\n      )\n    );\n  }\n);\nfunction ka({ participants: t, ...n }) {\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, t.map((a) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ag.Provider, { value: a, key: a.identity }, (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.c)(n.children))));\n}\nfunction Ra({ volume: t, muted: n }) {\n  const a = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShareAudio, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown],\n    {\n      updateOnlyOn: [],\n      onlySubscribed: !0\n    }\n  ).filter((r) => !r.participant.isLocal && r.publication.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Kind.Audio);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { style: { display: \"none\" } }, a.map((r) => /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n    ne,\n    {\n      key: (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.p)(r),\n      trackRef: r,\n      volume: t,\n      muted: n\n    }\n  )));\n}\nconst Ma = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function({ childrenPosition: n = \"before\", children: a, ...r }, c) {\n  const { name: s } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.v)();\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { ref: c, ...r }, n === \"before\" && a, s, n === \"after\" && a);\n});\nfunction $t(t) {\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(t, { className: \"lk-toast\" }), [t]);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ...n }, t.children);\n}\nconst Dt = (t) => {\n  const n = [];\n  for (let a = 0; a < t; a++)\n    n.push([a, t - 1 - a]);\n  return n;\n}, fe = (t) => [[Math.floor(t / 2)], [-1]], Ut = (t, n, a) => {\n  const [r, c] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0), [s, o] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([[]]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (t === \"thinking\")\n      o(fe(n));\n    else if (t === \"connecting\" || t === \"initializing\") {\n      const i = [...Dt(n)];\n      o(i);\n    } else o(t === \"listening\" ? fe(n) : t === void 0 || t === \"speaking\" ? [new Array(n).fill(0).map((i, u) => u)] : [[]]);\n    c(0);\n  }, [t, n]);\n  const l = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    let i = performance.now();\n    const u = (d) => {\n      d - i >= a && (c((f) => f + 1), i = d), l.current = requestAnimationFrame(u);\n    };\n    return l.current = requestAnimationFrame(u), () => {\n      l.current !== null && cancelAnimationFrame(l.current);\n    };\n  }, [a, n, t, s.length]), s[r % s.length];\n}, Gt = /* @__PURE__ */ new Map([\n  [\"connecting\", 2e3],\n  [\"initializing\", 2e3],\n  [\"listening\", 500],\n  [\"thinking\", 150]\n]), Qt = (t, n) => {\n  if (t === void 0)\n    return 1e3;\n  let a = Gt.get(t);\n  if (a)\n    switch (t) {\n      case \"connecting\":\n        a /= n;\n        break;\n    }\n  return a;\n}, Xt = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ state: n, options: a, barCount: r = 15, trackRef: c, children: s, ...o }, l) {\n    const i = (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.a)(o, { className: \"lk-audio-bar-visualizer\" });\n    let u = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ab)();\n    c && (u = c);\n    const d = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.s)(u, {\n      bands: r,\n      loPass: 100,\n      hiPass: 200\n    }), g = (a == null ? void 0 : a.minHeight) ?? 20, f = (a == null ? void 0 : a.maxHeight) ?? 100, w = Ut(\n      n,\n      r,\n      Qt(n, r) ?? 100\n    );\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: l, ...i, \"data-lk-va-state\": n }, d.map(\n      (p, m) => s ? (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_4__.c)(s, {\n        \"data-lk-highlighted\": w.includes(m),\n        \"data-lk-bar-index\": m,\n        className: \"lk-audio-bar\",\n        style: { height: `${Math.min(f, Math.max(g, p * 100 + 5))}%` }\n      }) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n        \"span\",\n        {\n          key: m,\n          \"data-lk-highlighted\": w.includes(m),\n          \"data-lk-bar-index\": m,\n          className: `lk-audio-bar ${w.includes(m) && \"lk-highlighted\"}`,\n          style: {\n            // TODO transform animations would be more performant, however the border-radius gets distorted when using scale transforms. a 9-slice approach (or 3 in this case) could work\n            // transform: `scale(1, ${Math.min(maxHeight, Math.max(minHeight, volume))}`,\n            height: `${Math.min(f, Math.max(g, p * 100 + 5))}%`\n          }\n        }\n      )\n    ));\n  }\n), ya = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({\n    children: n,\n    disableSpeakingIndicator: a,\n    onParticipantClick: r,\n    trackRef: c,\n    ...s\n  }, o) {\n    const l = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.i)(c), { elementProps: i } = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.l)({\n      trackRef: l,\n      htmlProps: s,\n      disableSpeakingIndicator: a,\n      onParticipantClick: r\n    });\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: o, style: { position: \"relative\", minHeight: \"160px\" }, ...i }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.ah.Provider, { value: l }, n ?? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.a1)(l) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ne, { trackRef: l }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Xt, { barCount: 7, options: { minHeight: 8 } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"lk-participant-metadata-item\" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(Se, { trackRef: l }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(K, null)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(be, { className: \"lk-participant-metadata-item\" })))));\n  }\n);\nfunction ba(t) {\n  const [n, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0), r = (0,_hooks_OJtwh4jO_mjs__WEBPACK_IMPORTED_MODULE_2__.a)(t.room);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    switch (r) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Reconnecting:\n        a(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(oe, { className: \"lk-spinner\" }), \" Reconnecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting:\n        a(\n          /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(oe, { className: \"lk-spinner\" }), \" Connecting\")\n        );\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected:\n        a(/* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, \"Disconnected\"));\n        break;\n      default:\n        a(void 0);\n        break;\n    }\n  }, [r]), n ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement($t, { className: \"lk-toast-connection-state\" }, n) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null);\n}\nconst Sa = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(\n  function({ entry: n, hideName: a = !1, hideTimestamp: r = !1, messageFormatter: c, ...s }, o) {\n    var f, w, p, m;\n    const l = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => c ? c(n.message) : n.message, [n.message, c]), i = !!n.editTimestamp, u = new Date(n.timestamp), d = typeof navigator < \"u\" ? navigator.language : \"en-US\", g = ((f = n.from) == null ? void 0 : f.name) ?? ((w = n.from) == null ? void 0 : w.identity);\n    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      \"li\",\n      {\n        ref: o,\n        className: \"lk-chat-entry\",\n        title: u.toLocaleTimeString(d, { timeStyle: \"full\" }),\n        \"data-lk-message-origin\": (p = n.from) != null && p.isLocal ? \"local\" : \"remote\",\n        ...s\n      },\n      (!r || !a || i) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-meta-data\" }, !a && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"strong\", { className: \"lk-participant-name\" }, g), (!r || i) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-timestamp\" }, i && \"edited \", u.toLocaleTimeString(d, { timeStyle: \"short\" }))),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-message-body\" }, l),\n      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { className: \"lk-message-attachements\" }, (m = n.attachedFiles) == null ? void 0 : m.map(\n        (v) => v.type.startsWith(\"image/\") && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n          \"img\",\n          {\n            style: { maxWidth: \"300px\", maxHeight: \"300px\" },\n            key: v.name,\n            src: URL.createObjectURL(v),\n            alt: v.name\n          }\n        )\n      ))\n    );\n  }\n);\nfunction Ca(t) {\n  return (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.am)(t, (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_3__.an)()).map((n, a) => {\n    if (typeof n == \"string\")\n      return n;\n    {\n      const r = n.content.toString(), c = n.type === \"url\" ? /^http(s?):\\/\\//.test(r) ? r : `https://${r}` : `mailto:${r}`;\n      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"a\", { className: \"lk-chat-link\", key: a, href: c, target: \"_blank\", rel: \"noreferrer\" }, r);\n    }\n  });\n}\n\n//# sourceMappingURL=components-BeK2vIib.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2NvbXBvbmVudHMtQmVLMnZJaWIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkI7QUFDdUQ7QUFDMEo7QUFDdEw7QUFDMEc7QUFDb0g7QUFDcFIsMkJBQTJCLDZDQUFZO0FBQ3ZDO0FBQ0EsWUFBWSxpQkFBaUIsRUFBRSxzREFBRTtBQUNqQywyQkFBMkIsZ0RBQWUsYUFBYSxjQUFjO0FBQ3JFO0FBQ0Esd0JBQXdCLDZDQUFZO0FBQ3BDLGFBQWEsZUFBZTtBQUM1QixjQUFjLHNEQUFFO0FBQ2hCLDJCQUEyQixnREFBZSxVQUFVLGNBQWM7QUFDbEU7QUFDQSx3QkFBd0IsNkNBQVk7QUFDcEM7QUFDQSxZQUFZLGlCQUFpQixFQUFFLHNEQUFFLEdBQUcsVUFBVTtBQUM5QywyQkFBMkIsZ0RBQWUsYUFBYSxjQUFjO0FBQ3JFO0FBQ0Esd0JBQXdCLDZDQUFZO0FBQ3BDO0FBQ0EsWUFBWSxpQkFBaUIsRUFBRSxzREFBRTtBQUNqQywyQkFBMkIsZ0RBQWUsYUFBYSxjQUFjO0FBQ3JFO0FBQ0EsK0JBQStCLGdEQUFlLFVBQVUsd0ZBQXdGLGtCQUFrQixnREFBZSxXQUFXLHVNQUF1TSxtQkFBbUIsZ0RBQWUsV0FBVyxxR0FBcUcsZ0NBQWdDLGdEQUFlLFVBQVUsd0ZBQXdGLGtCQUFrQixnREFBZSxXQUFXLHVNQUF1TSxnQ0FBZ0MsZ0RBQWUsVUFBVSx3RkFBd0Ysa0JBQWtCLGdEQUFlO0FBQzNrQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGdEQUFlLFVBQVUsZ0ZBQWdGLGtCQUFrQixnREFBZTtBQUMxSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnREFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDBEQUFFLElBQUksMERBQUU7QUFDakI7QUFDQTtBQUNBO0FBQ0EsdUdBQXVHLEVBQUUsY0FBYyxFQUFFO0FBQ3pILDZCQUE2QixnREFBZSxRQUFRLGlGQUFpRjtBQUNySTtBQUNBLEdBQUc7QUFDSDtBQXVERTtBQUNGIiwic291cmNlcyI6WyJEOlxcUHl0aG9uXFx0cmF2ZWwtZGV0YWlsLWRlbW9cXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBsaXZla2l0XFxjb21wb25lbnRzLXJlYWN0XFxkaXN0XFxjb21wb25lbnRzLUJlSzJ2SWliLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBlIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlU3RhdGUgYXMgQiwgdXNlUmVmIGFzIEwsIHVzZUVmZmVjdCBhcyB6LCB1c2VNZW1vIGFzIExlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1IGFzIHplLCBhIGFzIGhlLCBiIGFzIFZlLCBjIGFzIEZlLCBkIGFzIFplLCBlIGFzIEhlLCBmIGFzIGdlLCBnIGFzIEJlLCBoIGFzIGplLCBpIGFzIF9lLCBqIGFzIE9lLCBrIGFzIFdlLCBsIGFzIHZlLCBtIGFzIHFlLCBuIGFzICRlLCBvIGFzIERlLCBwIGFzIFVlLCBxIGFzIEdlLCByIGFzIFFlLCBzIGFzIEVlLCB0IGFzIFhlLCB2IGFzIFllIH0gZnJvbSBcIi4vaG9va3MtT0p0d2g0ak8ubWpzXCI7XG5pbXBvcnQgeyBhIGFzIFMsIGMgYXMgZWUgfSBmcm9tIFwiLi9yb29tLTg4OWNPYkxiLm1qc1wiO1xuaW1wb3J0IHsgUm9vbUV2ZW50IGFzIEplLCBUcmFjayBhcyB5LCBDb25uZWN0aW9uUXVhbGl0eSBhcyBRLCBSZW1vdGVUcmFja1B1YmxpY2F0aW9uIGFzIEosIFJlbW90ZUF1ZGlvVHJhY2sgYXMgS2UsIENvbm5lY3Rpb25TdGF0ZSBhcyBYIH0gZnJvbSBcImxpdmVraXQtY2xpZW50XCI7XG5pbXBvcnQgeyBhYiBhcyB0ZSwgYWMgYXMgcGUsIHcgYXMgZXQsIGYgYXMgd2UsIGMgYXMgdHQsIGFkIGFzIGF0LCBYIGFzIG50LCBZIGFzIHJ0LCBhMSBhcyAkLCBsIGFzIGosIGFlIGFzIHEsIGFmIGFzIGN0LCBpIGFzIF8sIEIgYXMgbHQsIGFnIGFzIGtlLCBhaCBhcyBhZSwgaiBhcyBzdCwgYWkgYXMgaXQsIG0gYXMgb3QsIHAgYXMgUmUsIGFqIGFzIHV0LCBhayBhcyBkdCwgYWwgYXMgbXQsIGFtIGFzIGZ0LCBhbiBhcyBodCB9IGZyb20gXCIuL2NvbnRleHRzLUNtMWFTQlRzLm1qc1wiO1xuY29uc3QgYWEgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbihuLCBhKSB7XG4gICAgY29uc3QgeyBidXR0b25Qcm9wczogciB9ID0gemUobik7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IGEsIC4uLnIgfSwgbi5jaGlsZHJlbik7XG4gIH1cbiksIG5hID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyByb29tOiBuLCAuLi5hIH0sIHIpIHtcbiAgICBjb25zdCBjID0gaGUobik7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHIsIC4uLmEgfSwgYyk7XG4gIH1cbiksIHJhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24obiwgYSkge1xuICAgIGNvbnN0IHsgbWVyZ2VkUHJvcHM6IHIgfSA9IFZlKHsgcHJvcHM6IG4gfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IGEsIC4uLnIgfSwgbi5jaGlsZHJlbik7XG4gIH1cbiksIGNhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24obiwgYSkge1xuICAgIGNvbnN0IHsgYnV0dG9uUHJvcHM6IHIgfSA9IEZlKG4pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgcmVmOiBhLCAuLi5yIH0sIG4uY2hpbGRyZW4pO1xuICB9XG4pLCBndCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMS4zNTQuNjQ2YS41LjUgMCAxIDAtLjcwOC43MDhsMTQgMTRhLjUuNSAwIDAgMCAuNzA4LS43MDhMMTEgMTAuMjkzVjQuNUExLjUgMS41IDAgMCAwIDkuNSAzSDMuNzA3ek0wIDQuNWExLjUgMS41IDAgMCAxIC45NDMtMS4zOTNsOS41MzIgOS41MzNjLS4yNjIuMjI0LS42MDMuMzYtLjk3NS4zNmgtOEExLjUgMS41IDAgMCAxIDAgMTEuNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIm0xNS4yIDMuNi0yLjggMi4xYTEgMSAwIDAgMC0uNC44djNhMSAxIDAgMCAwIC40LjhsMi44IDIuMWEuNS41IDAgMCAwIC44LS40VjRhLjUuNSAwIDAgMC0uOC0uNHpcIiB9KSksIHZ0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDQuNUExLjUgMS41IDAgMCAxIDEuNSAzaDhBMS41IDEuNSAwIDAgMSAxMSA0LjV2N0ExLjUgMS41IDAgMCAxIDkuNSAxM2gtOEExLjUgMS41IDAgMCAxIDAgMTEuNXpNMTUuMiAzLjZsLTIuOCAyLjFhMSAxIDAgMCAwLS40Ljh2M2ExIDEgMCAwIDAgLjQuOGwyLjggMi4xYS41LjUgMCAwIDAgLjgtLjRWNGEuNS41IDAgMCAwLS44LS40elwiIH0pKSwgbGEgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgdmlld0JveDogXCIwIDAgMjQgMjRcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiI0ZGRlwiLFxuICAgIGQ6IFwiTTQuOTkgMy45OWExIDEgMCAwIDAtLjY5NyAxLjcxN0wxMC41ODYgMTJsLTYuMjkzIDYuMjkzYTEgMSAwIDEgMCAxLjQxNCAxLjQxNEwxMiAxMy40MTRsNi4yOTMgNi4yOTNhMSAxIDAgMSAwIDEuNDE0LTEuNDE0TDEzLjQxNCAxMmw2LjI5My02LjI5M2ExIDEgMCAwIDAtLjcyNy0xLjcxNyAxIDEgMCAwIDAtLjY4Ny4zMDNMMTIgMTAuNTg2IDUuNzA3IDQuMjkzYTEgMSAwIDAgMC0uNzE3LS4zMDN6XCJcbiAgfVxuKSksIHNhID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTgsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMCAyLjc1QTIuNzUgMi43NSAwIDAgMSAyLjc1IDBoMTAuNUEyLjc1IDIuNzUgMCAwIDEgMTYgMi43NXYxMy41OTRhLjc1Ljc1IDAgMCAxLTEuMjM0LjU3MmwtMy42OTEtMy4xMmExLjI1IDEuMjUgMCAwIDAtLjgwNy0uMjk2SDIuNzVBMi43NSAyLjc1IDAgMCAxIDAgMTAuNzV2LThaTTIuNzUgMS41Yy0uNjkgMC0xLjI1LjU2LTEuMjUgMS4yNXY4YzAgLjY5LjU2IDEuMjUgMS4yNSAxLjI1aDcuNTE4Yy42NSAwIDEuMjc5LjIzIDEuNzc1LjY1bDIuNDU3IDIuMDc3VjIuNzVjMC0uNjktLjU2LTEuMjUtMS4yNS0xLjI1SDIuNzVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMyA0LjVhLjUuNSAwIDAgMSAuNS0uNWg5YS41LjUgMCAwIDEgMCAxaC05YS41LjUgMCAwIDEtLjUtLjVabTAgMmEuNS41IDAgMCAxIC41LS41aDlhLjUuNSAwIDAgMSAwIDFoLTlhLjUuNSAwIDAgMS0uNS0uNVptMCAyYS41LjUgMCAwIDEgLjUtLjVoNWEuNS41IDAgMCAxIDAgMWgtNWEuNS41IDAgMCAxLS41LS41WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKSwgaWUgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRjb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk01LjI5MyAyLjI5M2ExIDEgMCAwIDEgMS40MTQgMGw0LjgyMyA0LjgyM2ExLjI1IDEuMjUgMCAwIDEgMCAxLjc2OGwtNC44MjMgNC44MjNhMSAxIDAgMCAxLTEuNDE0LTEuNDE0TDkuNTg2IDggNS4yOTMgMy43MDdhMSAxIDAgMCAxIDAtMS40MTR6XCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpLCBFdCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IHN0cm9rZTogXCJjdXJyZW50Q29sb3JcIiwgc3Ryb2tlTGluZWNhcDogXCJyb3VuZFwiLCBzdHJva2VMaW5lam9pbjogXCJyb3VuZFwiLCBzdHJva2VXaWR0aDogMS41IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMTAgMS43NWg0LjI1bTAgMFY2bTAtNC4yNUw5IDdNNiAxNC4yNUgxLjc1bTAgMFYxMG0wIDQuMjVMNyA5XCIgfSkpKSwgaWEgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRjb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk04Ljk2MS44OTRDOC44NzUtLjI5OCA3LjEyNS0uMjk4IDcuMDQuODk0Yy0uMDY2LjkxMi0xLjI0NiAxLjIyOC0xLjc2LjQ3Mi0uNjctLjk5LTIuMTg2LS4xMTUtMS42NjQuOTYuMzk5LjgyNC0uNDY1IDEuNjg4LTEuMjg4IDEuMjg5LTEuMDc2LS41MjItMS45NS45OTQtLjk2MSAxLjY2NS43NTYuNTEzLjQ0IDEuNjkzLS40NzIgMS43NTktMS4xOTIuMDg2LTEuMTkyIDEuODM2IDAgMS45MjIuOTEyLjA2NiAxLjIyOCAxLjI0Ni40NzIgMS43Ni0uOTkuNjctLjExNSAyLjE4Ni45NiAxLjY2NC44MjQtLjM5OSAxLjY4OC40NjUgMS4yODkgMS4yODgtLjUyMiAxLjA3Ni45OTQgMS45NSAxLjY2NS45NjEuNTEzLS43NTYgMS42OTMtLjQ0IDEuNzU5LjQ3Mi4wODYgMS4xOTIgMS44MzYgMS4xOTIgMS45MjIgMCAuMDY2LS45MTIgMS4yNDYtMS4yMjggMS43Ni0uNDcyLjY3Ljk5IDIuMTg2LjExNSAxLjY2NC0uOTYtLjM5OS0uODI0LjQ2NS0xLjY4OCAxLjI4OC0xLjI4OSAxLjA3Ni41MjIgMS45NS0uOTk0Ljk2MS0xLjY2NS0uNzU2LS41MTMtLjQ0LTEuNjkzLjQ3Mi0xLjc1OSAxLjE5Mi0uMDg2IDEuMTkyLTEuODM2IDAtMS45MjItLjkxMi0uMDY2LTEuMjI4LTEuMjQ2LS40NzItMS43Ni45OS0uNjcuMTE1LTIuMTg2LS45Ni0xLjY2NC0uODI0LjM5OS0xLjY4OC0uNDY1LTEuMjg5LTEuMjg4LjUyMi0xLjA3Ni0uOTk0LTEuOTUtMS42NjUtLjk2MS0uNTEzLjc1Ni0xLjY5My40NC0xLjc1OS0uNDcyWk04IDEzQTUgNSAwIDEgMCA4IDNhNSA1IDAgMCAwIDAgMTBaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpLCBvYSA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIgMi43NUEyLjc1IDIuNzUgMCAwIDEgNC43NSAwaDYuNUEyLjc1IDIuNzUgMCAwIDEgMTQgMi43NXYxMC41QTIuNzUgMi43NSAwIDAgMSAxMS4yNSAxNmgtNi41QTIuNzUgMi43NSAwIDAgMSAyIDEzLjI1di0uNWEuNzUuNzUgMCAwIDEgMS41IDB2LjVjMCAuNjkuNTYgMS4yNSAxLjI1IDEuMjVoNi41Yy42OSAwIDEuMjUtLjU2IDEuMjUtMS4yNVYyLjc1YzAtLjY5LS41Ni0xLjI1LTEuMjUtMS4yNWgtNi41Yy0uNjkgMC0xLjI1LjU2LTEuMjUgMS4yNXYuNWEuNzUuNzUgMCAwIDEtMS41IDB2LS41WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTguNzggNy40N2EuNzUuNzUgMCAwIDEgMCAxLjA2bC0yLjI1IDIuMjVhLjc1Ljc1IDAgMSAxLTEuMDYtMS4wNmwuOTctLjk3SDEuNzVhLjc1Ljc1IDAgMCAxIDAtMS41aDQuNjlsLS45Ny0uOTdhLjc1Ljc1IDAgMCAxIDEuMDYtMS4wNmwyLjI1IDIuMjVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpLCBwdCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTQgNi4xMDRWNGE0IDQgMCAxIDEgOCAwdjIuMTA0YzEuMTU0LjMyNiAyIDEuMzg3IDIgMi42NDZ2NC41QTIuNzUgMi43NSAwIDAgMSAxMS4yNSAxNmgtNi41QTIuNzUgMi43NSAwIDAgMSAyIDEzLjI1di00LjVjMC0xLjI1OS44NDYtMi4zMiAyLTIuNjQ2Wk01LjUgNGEyLjUgMi41IDAgMCAxIDUgMHYyaC01VjRaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpLCB3dCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcImN1cnJlbnRDb2xvclwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMTIuMjI3IDExLjUyYTUuNDc3IDUuNDc3IDAgMCAwIDEuMjQ2LTIuOTcuNS41IDAgMCAwLS45OTUtLjEgNC40NzggNC40NzggMCAwIDEtLjk2MiAyLjM1OWwtMS4wNy0xLjA3QzEwLjc5NCA5LjI0NyAxMSA4LjY0NyAxMSA4VjNhMyAzIDAgMCAwLTYgMHYxLjI5M0wxLjM1NC42NDZhLjUuNSAwIDEgMC0uNzA4LjcwOGwxNCAxNGEuNS41IDAgMCAwIC43MDgtLjcwOHpNOCAxMi41Yy42ODMgMCAxLjMzLS4xNTIgMS45MTEtLjQyNWwuNzQzLjc0M2MtLjY0OS4zNTktMS4zNzguNTktMi4xNTQuNjZWMTVoMmEuNS41IDAgMCAxIDAgMWgtNWEuNS41IDAgMCAxIDAtMWgydi0xLjUyMmE1LjUwMiA1LjUwMiAwIDAgMS00Ljk3My00LjkyOS41LjUgMCAwIDEgLjk5NS0uMDk4QTQuNSA0LjUgMCAwIDAgOCAxMi41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTguNzQzIDEwLjkwNyA1IDcuMTY0VjhhMyAzIDAgMCAwIDMuNzQzIDIuOTA3elwiIH0pKSwga3QgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAxNiwgaGVpZ2h0OiAxNiwgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0yLjk3NSA4LjAwMmEuNS41IDAgMCAxIC41NDcuNDQ5IDQuNSA0LjUgMCAwIDAgOC45NTYgMCAuNS41IDAgMSAxIC45OTUuMDk4QTUuNTAyIDUuNTAyIDAgMCAxIDguNSAxMy40NzhWMTVoMmEuNS41IDAgMCAxIDAgMWgtNWEuNS41IDAgMCAxIDAtMWgydi0xLjUyMmE1LjUwMiA1LjUwMiAwIDAgMS00Ljk3My00LjkyOS41LjUgMCAwIDEgLjQ0OC0uNTQ3elwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTUgM2EzIDMgMCAxIDEgNiAwdjVhMyAzIDAgMCAxLTYgMHpcIiB9KSksIFJ0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSksIE10ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudGNvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTAgMTEuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djRhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6bTYtNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgb3BhY2l0eTogMC4yNSB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGQ6IFwiTTEyIC41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMTIgLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSkpLCB5dCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDE2LCBoZWlnaHQ6IDE2LCBmaWxsOiBcImN1cnJlbnRjb2xvclwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0wIDExLjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY0YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IG9wYWNpdHk6IDAuMjUgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk02IDYuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djlhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjV6XCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNNiA2LjVhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXY5YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41em02LTZhLjUuNSAwIDAgMSAuNS0uNWgzYS41LjUgMCAwIDEgLjUuNXYxNWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXpcIiB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMiAuNWEuNS41IDAgMCAxIC41LS41aDNhLjUuNSAwIDAgMSAuNS41djE1YS41LjUgMCAwIDEtLjUuNWgtM2EuNS41IDAgMCAxLS41LS41elwiIH0pKSksIGJ0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwiY3VycmVudENvbG9yXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImdcIiwgeyBvcGFjaXR5OiAwLjI1IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXYtNFptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXYtOVptNi02YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjVWLjVaXCIgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZDogXCJNMCAxMS41YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2NGEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXYtNFptNi01YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2OWEuNS41IDAgMCAxLS41LjVoLTNhLjUuNSAwIDAgMS0uNS0uNXYtOVptNi02YS41LjUgMCAwIDEgLjUtLjVoM2EuNS41IDAgMCAxIC41LjV2MTVhLjUuNSAwIDAgMS0uNS41aC0zYS41LjUgMCAwIDEtLjUtLjVWLjVaXCIgfSkpKSwgTWUgPSAodCkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInN2Z1wiLCB7IHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHdpZHRoOiAyMCwgaGVpZ2h0OiAxNiwgZmlsbDogXCJub25lXCIsIC4uLnQgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0wIDIuNzVBMi43NSAyLjc1IDAgMCAxIDIuNzUgMGgxNC41QTIuNzUgMi43NSAwIDAgMSAyMCAyLjc1djEwLjVBMi43NSAyLjc1IDAgMCAxIDE3LjI1IDE2SDIuNzVBMi43NSAyLjc1IDAgMCAxIDAgMTMuMjVWMi43NVpNMi43NSAxLjVjLS42OSAwLTEuMjUuNTYtMS4yNSAxLjI1djEwLjVjMCAuNjkuNTYgMS4yNSAxLjI1IDEuMjVoMTQuNWMuNjkgMCAxLjI1LS41NiAxLjI1LTEuMjVWMi43NWMwLS42OS0uNTYtMS4yNS0xLjI1LTEuMjVIMi43NVpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk05LjQ3IDQuMjJhLjc1Ljc1IDAgMCAxIDEuMDYgMGwyLjI1IDIuMjVhLjc1Ljc1IDAgMCAxLTEuMDYgMS4wNmwtLjk3LS45N3Y0LjY5YS43NS43NSAwIDAgMS0xLjUgMFY2LjU2bC0uOTcuOTdhLjc1Ljc1IDAgMCAxLTEuMDYtMS4wNmwyLjI1LTIuMjVaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbikpLCBTdCA9ICh0KSA9PiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IDIwLCBoZWlnaHQ6IDE2LCBmaWxsOiBcIm5vbmVcIiwgLi4udCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZ1wiLCB7IGZpbGw6IFwiY3VycmVudENvbG9yXCIgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk03LjI4IDQuMjJhLjc1Ljc1IDAgMCAwLTEuMDYgMS4wNkw4Ljk0IDhsLTIuNzIgMi43MmEuNzUuNzUgMCAxIDAgMS4wNiAxLjA2TDEwIDkuMDZsMi43MiAyLjcyYS43NS43NSAwIDEgMCAxLjA2LTEuMDZMMTEuMDYgOGwyLjcyLTIuNzJhLjc1Ljc1IDAgMCAwLTEuMDYtMS4wNkwxMCA2Ljk0elwiIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0yLjc1IDBBMi43NSAyLjc1IDAgMCAwIDAgMi43NXYxMC41QTIuNzUgMi43NSAwIDAgMCAyLjc1IDE2aDE0LjVBMi43NSAyLjc1IDAgMCAwIDIwIDEzLjI1VjIuNzVBMi43NSAyLjc1IDAgMCAwIDE3LjI1IDB6TTEuNSAyLjc1YzAtLjY5LjU2LTEuMjUgMS4yNS0xLjI1aDE0LjVjLjY5IDAgMS4yNS41NiAxLjI1IDEuMjV2MTAuNWMwIC42OS0uNTYgMS4yNS0xLjI1IDEuMjVIMi43NWMtLjY5IDAtMS4yNS0uNTYtMS4yNS0xLjI1elwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pKSksIG9lID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNOCAwYS43NS43NSAwIDAgMSAuNzUuNzV2Mi41YS43NS43NSAwIDAgMS0xLjUgMFYuNzVBLjc1Ljc1IDAgMCAxIDggMFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCJcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk04IDEyYS43NS43NSAwIDAgMSAuNzUuNzV2Mi41YS43NS43NSAwIDAgMS0xLjUgMHYtMi41QS43NS43NSAwIDAgMSA4IDEyWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjdcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xMiAxLjA3MmEuNzUuNzUgMCAwIDEgLjI3NCAxLjAyNGwtMS4yNSAyLjE2NWEuNzUuNzUgMCAwIDEtMS4yOTktLjc1bDEuMjUtMi4xNjVBLjc1Ljc1IDAgMCAxIDEyIDEuMDcyWlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTYgMTEuNDY0YS43NS43NSAwIDAgMSAuMjc0IDEuMDI1bC0xLjI1IDIuMTY1YS43NS43NSAwIDAgMS0xLjI5OS0uNzVsMS4yNS0yLjE2NUEuNzUuNzUgMCAwIDEgNiAxMS40NjRaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuNlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTE0LjkyOCA0YS43NS43NSAwIDAgMS0uMjc0IDEuMDI1bC0yLjE2NSAxLjI1YS43NS43NSAwIDEgMS0uNzUtMS4zbDIuMTY1LTEuMjVBLjc1Ljc1IDAgMCAxIDE0LjkyOCA0WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIlxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTQuNTM2IDEwYS43NS43NSAwIDAgMS0uMjc1IDEuMDI0bC0yLjE2NSAxLjI1YS43NS43NSAwIDAgMS0uNzUtMS4yOThsMi4xNjUtMS4yNUEuNzUuNzUgMCAwIDEgNC41MzYgMTBaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuNVxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTE2IDhhLjc1Ljc1IDAgMCAxLS43NS43NWgtMi41YS43NS43NSAwIDAgMSAwLTEuNWgyLjVBLjc1Ljc1IDAgMCAxIDE2IDhaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiXG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNNCA4YS43NS43NSAwIDAgMS0uNzUuNzVILjc1YS43NS43NSAwIDAgMSAwLTEuNWgyLjVBLjc1Ljc1IDAgMCAxIDQgOFpcIixcbiAgICBjbGlwUnVsZTogXCJldmVub2RkXCIsXG4gICAgb3BhY2l0eTogMC40XG4gIH1cbiksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwicGF0aFwiLFxuICB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBmaWxsUnVsZTogXCJldmVub2RkXCIsXG4gICAgZDogXCJNMTQuOTI4IDEyYS43NS43NSAwIDAgMS0xLjAyNC4yNzRsLTIuMTY1LTEuMjVhLjc1Ljc1IDAgMCAxIC43NS0xLjI5OWwyLjE2NSAxLjI1QS43NS43NSAwIDAgMSAxNC45MjggMTJaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuOVxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTQuNTM2IDZhLjc1Ljc1IDAgMCAxLTEuMDI1LjI3NWwtMi4xNjUtMS4yNWEuNzUuNzUgMCAxIDEgLjc1LTEuM2wyLjE2NSAxLjI1QS43NS43NSAwIDAgMSA0LjUzNiA2WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjNcbiAgfVxuKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgXCJwYXRoXCIsXG4gIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGZpbGxSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBkOiBcIk0xMiAxNC45MjhhLjc1Ljc1IDAgMCAxLTEuMDI0LS4yNzRsLTEuMjUtMi4xNjVhLjc1Ljc1IDAgMCAxIDEuMjk4LS43NWwxLjI1IDIuMTY1QS43NS43NSAwIDAgMSAxMiAxNC45MjhaXCIsXG4gICAgY2xpcFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIG9wYWNpdHk6IDAuOFxuICB9XG4pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICBcInBhdGhcIixcbiAge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTYgNC41MzZhLjc1Ljc1IDAgMCAxLTEuMDI0LS4yNzVsLTEuMjUtMi4xNjVhLjc1Ljc1IDAgMSAxIDEuMjk5LS43NWwxLjI1IDIuMTY1QS43NS43NSAwIDAgMSA2IDQuNTM2WlwiLFxuICAgIGNsaXBSdWxlOiBcImV2ZW5vZGRcIixcbiAgICBvcGFjaXR5OiAwLjJcbiAgfVxuKSksIEN0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogMTYsIGhlaWdodDogMTYsIGZpbGw6IFwibm9uZVwiLCAuLi50IH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJnXCIsIHsgc3Ryb2tlOiBcImN1cnJlbnRDb2xvclwiLCBzdHJva2VMaW5lY2FwOiBcInJvdW5kXCIsIHN0cm9rZUxpbmVqb2luOiBcInJvdW5kXCIsIHN0cm9rZVdpZHRoOiAxLjUgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInBhdGhcIiwgeyBkOiBcIk0xMy4yNSA3SDltMCAwVjIuNzVNOSA3bDUuMjUtNS4yNU0yLjc1IDlIN20wIDB2NC4yNU03IDlsLTUuMjUgNS4yNVwiIH0pKSksIEl0ID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyB0cmFja1JlZjogbiwgLi4uYSB9LCByKSB7XG4gICAgY29uc3QgYyA9IHRlKCksIHsgbWVyZ2VkUHJvcHM6IHMsIGluRm9jdXM6IG8gfSA9IFplKHtcbiAgICAgIHRyYWNrUmVmOiBuID8/IGMsXG4gICAgICBwcm9wczogYVxuICAgIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHBlLkNvbnN1bWVyLCBudWxsLCAobCkgPT4gbCAhPT0gdm9pZCAwICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IHIsIC4uLnMgfSwgYS5jaGlsZHJlbiA/IGEuY2hpbGRyZW4gOiBvID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChDdCwgbnVsbCkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEV0LCBudWxsKSkpO1xuICB9XG4pLCB1YSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHtcbiAgICBraW5kOiBuLFxuICAgIGluaXRpYWxTZWxlY3Rpb246IGEsXG4gICAgb25BY3RpdmVEZXZpY2VDaGFuZ2U6IHIsXG4gICAgb25EZXZpY2VMaXN0Q2hhbmdlOiBjLFxuICAgIG9uRGV2aWNlU2VsZWN0RXJyb3I6IHMsXG4gICAgZXhhY3RNYXRjaDogbyxcbiAgICB0cmFjazogbCxcbiAgICByZXF1ZXN0UGVybWlzc2lvbnM6IGksXG4gICAgb25FcnJvcjogdSxcbiAgICAuLi5kXG4gIH0sIGcpIHtcbiAgICBjb25zdCBmID0gZXQoKSwgdyA9IGUudXNlQ2FsbGJhY2soXG4gICAgICAoRSkgPT4ge1xuICAgICAgICBmICYmIGYuZW1pdChKZS5NZWRpYURldmljZXNFcnJvciwgRSksIHUgPT0gbnVsbCB8fCB1KEUpO1xuICAgICAgfSxcbiAgICAgIFtmLCB1XVxuICAgICksIHsgZGV2aWNlczogcCwgYWN0aXZlRGV2aWNlSWQ6IG0sIHNldEFjdGl2ZU1lZGlhRGV2aWNlOiB2LCBjbGFzc05hbWU6IGIgfSA9IEhlKHtcbiAgICAgIGtpbmQ6IG4sXG4gICAgICByb29tOiBmLFxuICAgICAgdHJhY2s6IGwsXG4gICAgICByZXF1ZXN0UGVybWlzc2lvbnM6IGksXG4gICAgICBvbkVycm9yOiB3XG4gICAgfSk7XG4gICAgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgYSAhPT0gdm9pZCAwICYmIHYoYSk7XG4gICAgfSwgW3ZdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgdHlwZW9mIGMgPT0gXCJmdW5jdGlvblwiICYmIGMocCk7XG4gICAgfSwgW2MsIHBdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgbSAmJiBtICE9PSBcIlwiICYmIChyID09IG51bGwgfHwgcihtKSk7XG4gICAgfSwgW21dKTtcbiAgICBjb25zdCBDID0gYXN5bmMgKEUpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHYoRSwgeyBleGFjdDogbyA/PyAhMCB9KTtcbiAgICAgIH0gY2F0Y2ggKGspIHtcbiAgICAgICAgaWYgKGsgaW5zdGFuY2VvZiBFcnJvcilcbiAgICAgICAgICBzID09IG51bGwgfHwgcyhrKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IGs7XG4gICAgICB9XG4gICAgfSwgVCA9IGUudXNlTWVtbyhcbiAgICAgICgpID0+IFMoZCwgeyBjbGFzc05hbWU6IGIgfSwgeyBjbGFzc05hbWU6IFwibGstbGlzdFwiIH0pLFxuICAgICAgW2IsIGRdXG4gICAgKSwgQSA9ICEhcC5maW5kKChFKSA9PiBFLmxhYmVsLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChcImRlZmF1bHRcIikpO1xuICAgIGZ1bmN0aW9uIGgoRSwgaywgSSkge1xuICAgICAgcmV0dXJuIEUgPT09IGsgfHwgIUEgJiYgSSA9PT0gMCAmJiBrID09PSBcImRlZmF1bHRcIjtcbiAgICB9XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCB7IHJlZjogZywgLi4uVCB9LCBwLm1hcCgoRSwgaykgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIFwibGlcIixcbiAgICAgIHtcbiAgICAgICAga2V5OiBFLmRldmljZUlkLFxuICAgICAgICBpZDogRS5kZXZpY2VJZCxcbiAgICAgICAgXCJkYXRhLWxrLWFjdGl2ZVwiOiBoKEUuZGV2aWNlSWQsIG0sIGspLFxuICAgICAgICBcImFyaWEtc2VsZWN0ZWRcIjogaChFLmRldmljZUlkLCBtLCBrKSxcbiAgICAgICAgcm9sZTogXCJvcHRpb25cIlxuICAgICAgfSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uXCIsIG9uQ2xpY2s6ICgpID0+IEMoRS5kZXZpY2VJZCkgfSwgRS5sYWJlbClcbiAgICApKSk7XG4gIH1cbiksIGRhID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyBsYWJlbDogbiA9IFwiQWxsb3cgQXVkaW9cIiwgLi4uYSB9LCByKSB7XG4gICAgY29uc3QgYyA9IHdlKCksIHsgbWVyZ2VkUHJvcHM6IHMgfSA9IGdlKHsgcm9vbTogYywgcHJvcHM6IGEgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyByZWY6IHIsIC4uLnMgfSwgbik7XG4gIH1cbiksIG1hID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyBsYWJlbDogbiwgLi4uYSB9LCByKSB7XG4gICAgY29uc3QgYyA9IHdlKCksIHsgbWVyZ2VkUHJvcHM6IHMsIGNhblBsYXlBdWRpbzogbyB9ID0gZ2UoeyByb29tOiBjLCBwcm9wczogYSB9KSwgeyBtZXJnZWRQcm9wczogbCwgY2FuUGxheVZpZGVvOiBpIH0gPSBCZSh7IHJvb206IGMsIHByb3BzOiBzIH0pLCB7IHN0eWxlOiB1LCAuLi5kIH0gPSBsO1xuICAgIHJldHVybiB1LmRpc3BsYXkgPSBvICYmIGkgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIiwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHJlZjogciwgc3R5bGU6IHUsIC4uLmQgfSwgbiA/PyBgU3RhcnQgJHtvID8gXCJWaWRlb1wiIDogXCJBdWRpb1wifWApO1xuICB9XG4pO1xuZnVuY3Rpb24geWUodCwgbikge1xuICBzd2l0Y2ggKHQpIHtcbiAgICBjYXNlIHkuU291cmNlLk1pY3JvcGhvbmU6XG4gICAgICByZXR1cm4gbiA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoa3QsIG51bGwpIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudCh3dCwgbnVsbCk7XG4gICAgY2FzZSB5LlNvdXJjZS5DYW1lcmE6XG4gICAgICByZXR1cm4gbiA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQodnQsIG51bGwpIDogLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChndCwgbnVsbCk7XG4gICAgY2FzZSB5LlNvdXJjZS5TY3JlZW5TaGFyZTpcbiAgICAgIHJldHVybiBuID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChTdCwgbnVsbCkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KE1lLCBudWxsKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuO1xuICB9XG59XG5mdW5jdGlvbiB4dCh0KSB7XG4gIHN3aXRjaCAodCkge1xuICAgIGNhc2UgUS5FeGNlbGxlbnQ6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChSdCwgbnVsbCk7XG4gICAgY2FzZSBRLkdvb2Q6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChNdCwgbnVsbCk7XG4gICAgY2FzZSBRLlBvb3I6XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudCh5dCwgbnVsbCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGJ0LCBudWxsKTtcbiAgfVxufVxuY29uc3QgZmEgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKGZ1bmN0aW9uKHsgc2hvd0ljb246IG4sIC4uLmEgfSwgcikge1xuICBjb25zdCB7IGJ1dHRvblByb3BzOiBjLCBlbmFibGVkOiBzIH0gPSBqZShhKSwgW28sIGxdID0gZS51c2VTdGF0ZSghMSk7XG4gIHJldHVybiBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbCghMCk7XG4gIH0sIFtdKSwgbyAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgcmVmOiByLCAuLi5jIH0sIChuID8/ICEwKSAmJiB5ZShhLnNvdXJjZSwgcyksIGEuY2hpbGRyZW4pO1xufSksIGJlID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihmdW5jdGlvbihuLCBhKSB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lOiByLCBxdWFsaXR5OiBjIH0gPSBfZShuKSwgcyA9IGUudXNlTWVtbygoKSA9PiAoeyAuLi5TKG4sIHsgY2xhc3NOYW1lOiByIH0pLCBcImRhdGEtbGstcXVhbGl0eVwiOiBjIH0pLCBbYywgbiwgcl0pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogYSwgLi4ucyB9LCBuLmNoaWxkcmVuID8/IHh0KGMpKTtcbn0pLCBLID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyBwYXJ0aWNpcGFudDogbiwgLi4uYSB9LCByKSB7XG4gICAgY29uc3QgYyA9IHR0KG4pLCB7IGNsYXNzTmFtZTogcywgaW5mb09ic2VydmVyOiBvIH0gPSBlLnVzZU1lbW8oKCkgPT4gYXQoYyksIFtjXSksIHsgaWRlbnRpdHk6IGwsIG5hbWU6IGkgfSA9IE9lKG8sIHtcbiAgICAgIG5hbWU6IGMubmFtZSxcbiAgICAgIGlkZW50aXR5OiBjLmlkZW50aXR5LFxuICAgICAgbWV0YWRhdGE6IGMubWV0YWRhdGFcbiAgICB9KSwgdSA9IGUudXNlTWVtbygoKSA9PiBTKGEsIHsgY2xhc3NOYW1lOiBzLCBcImRhdGEtbGstcGFydGljaXBhbnQtbmFtZVwiOiBpIH0pLCBbYSwgcywgaV0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IHJlZjogciwgLi4udSB9LCBpICE9PSBcIlwiID8gaSA6IGwsIGEuY2hpbGRyZW4pO1xuICB9XG4pLCBTZSA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgdHJhY2tSZWY6IG4sIHNob3c6IGEgPSBcImFsd2F5c1wiLCAuLi5yIH0sIGMpIHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZTogcywgaXNNdXRlZDogbyB9ID0gV2UobiksIGwgPSBhID09PSBcImFsd2F5c1wiIHx8IGEgPT09IFwibXV0ZWRcIiAmJiBvIHx8IGEgPT09IFwidW5tdXRlZFwiICYmICFvLCBpID0gZS51c2VNZW1vKFxuICAgICAgKCkgPT4gUyhyLCB7XG4gICAgICAgIGNsYXNzTmFtZTogc1xuICAgICAgfSksXG4gICAgICBbcywgcl1cbiAgICApO1xuICAgIHJldHVybiBsID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogYywgLi4uaSwgXCJkYXRhLWxrLW11dGVkXCI6IG8gfSwgci5jaGlsZHJlbiA/PyB5ZShuLnNvdXJjZSwgIW8pKSA6IG51bGw7XG4gIH1cbiksIFB0ID0gKHQpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gIFwic3ZnXCIsXG4gIHtcbiAgICB3aWR0aDogMzIwLFxuICAgIGhlaWdodDogMzIwLFxuICAgIHZpZXdCb3g6IFwiMCAwIDMyMCAzMjBcIixcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiBcInhNaWRZTWlkIG1lZXRcIixcbiAgICBmaWxsOiBcIm5vbmVcIixcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICAgIC4uLnRcbiAgfSxcbiAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk0xNjAgMTgwQzIwNC4xODIgMTgwIDI0MCAxNDQuMTgzIDI0MCAxMDBDMjQwIDU1LjgxNzIgMjA0LjE4MiAyMCAxNjAgMjBDMTE1LjgxNyAyMCA3OS45OTk3IDU1LjgxNzIgNzkuOTk5NyAxMDBDNzkuOTk5NyAxNDQuMTgzIDExNS44MTcgMTgwIDE2MCAxODBaXCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICBmaWxsT3BhY2l0eTogMC4yNVxuICAgIH1cbiAgKSxcbiAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBcInBhdGhcIixcbiAgICB7XG4gICAgICBkOiBcIk05Ny42NTQyIDE5NC42MTRDMTAzLjI2NyAxOTEuODE4IDEwOS44NDEgMTkyLjQ4MSAxMTUuNTE5IDE5NS4xNDFDMTI5LjAyNSAyMDEuNDY2IDE0NC4xIDIwNSAxNTkuOTk5IDIwNUMxNzUuODk5IDIwNSAxOTAuOTczIDIwMS40NjYgMjA0LjQ4IDE5NS4xNDFDMjEwLjE1OCAxOTIuNDgxIDIxNi43MzIgMTkxLjgxOCAyMjIuMzQ1IDE5NC42MTRDMjYyLjcwMyAyMTQuNzE5IDI5MS45ODUgMjUzLjczNiAyOTguNTkxIDMwMC4wNjJDMzAwLjE1IDMxMC45OTcgMjkxLjA0NSAzMjAgMjgwIDMyMEgzOS45OTk3QzI4Ljk1NCAzMjAgMTkuODQ5NSAzMTAuOTk3IDIxLjQwODcgMzAwLjA2MkMyOC4wMTQgMjUzLjczNiA1Ny4yOTY2IDIxNC43MiA5Ny42NTQyIDE5NC42MTRaXCIsXG4gICAgICBmaWxsOiBcIndoaXRlXCIsXG4gICAgICBmaWxsT3BhY2l0eTogMC4yNVxuICAgIH1cbiAgKVxuKTtcbmZ1bmN0aW9uIENlKHQsIG4gPSB7fSkge1xuICBjb25zdCBbYSwgcl0gPSBlLnVzZVN0YXRlKG50KHQpKSwgW2MsIHNdID0gZS51c2VTdGF0ZShhID09IG51bGwgPyB2b2lkIDAgOiBhLmlzTXV0ZWQpLCBbbywgbF0gPSBlLnVzZVN0YXRlKGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEuaXNTdWJzY3JpYmVkKSwgW2ksIHVdID0gZS51c2VTdGF0ZShhID09IG51bGwgPyB2b2lkIDAgOiBhLnRyYWNrKSwgW2QsIGddID0gZS51c2VTdGF0ZShcImxhbmRzY2FwZVwiKSwgZiA9IGUudXNlUmVmKCksIHsgY2xhc3NOYW1lOiB3LCB0cmFja09ic2VydmVyOiBwIH0gPSBlLnVzZU1lbW8oKCkgPT4gcnQodCksIFtcbiAgICB0LnBhcnRpY2lwYW50LnNpZCA/PyB0LnBhcnRpY2lwYW50LmlkZW50aXR5LFxuICAgIHQuc291cmNlLFxuICAgICQodCkgJiYgdC5wdWJsaWNhdGlvbi50cmFja1NpZFxuICBdKTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBtID0gcC5zdWJzY3JpYmUoKHYpID0+IHtcbiAgICAgIGouZGVidWcoXCJ1cGRhdGUgdHJhY2tcIiwgdiksIHIodiksIHModiA9PSBudWxsID8gdm9pZCAwIDogdi5pc011dGVkKSwgbCh2ID09IG51bGwgPyB2b2lkIDAgOiB2LmlzU3Vic2NyaWJlZCksIHUodiA9PSBudWxsID8gdm9pZCAwIDogdi50cmFjayk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IG0gPT0gbnVsbCA/IHZvaWQgMCA6IG0udW5zdWJzY3JpYmUoKTtcbiAgfSwgW3BdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBtLCB2O1xuICAgIHJldHVybiBpICYmIChmLmN1cnJlbnQgJiYgaS5kZXRhY2goZi5jdXJyZW50KSwgKG0gPSBuLmVsZW1lbnQpICE9IG51bGwgJiYgbS5jdXJyZW50ICYmICEodC5wYXJ0aWNpcGFudC5pc0xvY2FsICYmIChpID09IG51bGwgPyB2b2lkIDAgOiBpLmtpbmQpID09PSBcImF1ZGlvXCIpICYmIGkuYXR0YWNoKG4uZWxlbWVudC5jdXJyZW50KSksIGYuY3VycmVudCA9ICh2ID0gbi5lbGVtZW50KSA9PSBudWxsID8gdm9pZCAwIDogdi5jdXJyZW50LCAoKSA9PiB7XG4gICAgICBmLmN1cnJlbnQgJiYgKGkgPT0gbnVsbCB8fCBpLmRldGFjaChmLmN1cnJlbnQpKTtcbiAgICB9O1xuICB9LCBbaSwgbi5lbGVtZW50XSksIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICB2YXIgbSwgdjtcbiAgICBpZiAodHlwZW9mICgobSA9IGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEuZGltZW5zaW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IG0ud2lkdGgpID09IFwibnVtYmVyXCIgJiYgdHlwZW9mICgodiA9IGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEuZGltZW5zaW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IHYuaGVpZ2h0KSA9PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBiID0gYS5kaW1lbnNpb25zLndpZHRoID4gYS5kaW1lbnNpb25zLmhlaWdodCA/IFwibGFuZHNjYXBlXCIgOiBcInBvcnRyYWl0XCI7XG4gICAgICBnKGIpO1xuICAgIH1cbiAgfSwgW2FdKSwge1xuICAgIHB1YmxpY2F0aW9uOiBhLFxuICAgIGlzTXV0ZWQ6IGMsXG4gICAgaXNTdWJzY3JpYmVkOiBvLFxuICAgIHRyYWNrOiBpLFxuICAgIGVsZW1lbnRQcm9wczogUyhuLnByb3BzLCB7XG4gICAgICBjbGFzc05hbWU6IHcsXG4gICAgICBcImRhdGEtbGstbG9jYWwtcGFydGljaXBhbnRcIjogdC5wYXJ0aWNpcGFudC5pc0xvY2FsLFxuICAgICAgXCJkYXRhLWxrLXNvdXJjZVwiOiBhID09IG51bGwgPyB2b2lkIDAgOiBhLnNvdXJjZSxcbiAgICAgIC4uLihhID09IG51bGwgPyB2b2lkIDAgOiBhLmtpbmQpID09PSBcInZpZGVvXCIgJiYgeyBcImRhdGEtbGstb3JpZW50YXRpb25cIjogZCB9XG4gICAgfSlcbiAgfTtcbn1cbnZhciBZLCB1ZTtcbmZ1bmN0aW9uIFR0KCkge1xuICBpZiAodWUpIHJldHVybiBZO1xuICB1ZSA9IDE7XG4gIHZhciB0ID0gXCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIsIG4gPSBOYU4sIGEgPSBcIltvYmplY3QgU3ltYm9sXVwiLCByID0gL15cXHMrfFxccyskL2csIGMgPSAvXlstK10weFswLTlhLWZdKyQvaSwgcyA9IC9eMGJbMDFdKyQvaSwgbyA9IC9eMG9bMC03XSskL2ksIGwgPSBwYXJzZUludCwgaSA9IHR5cGVvZiBxID09IFwib2JqZWN0XCIgJiYgcSAmJiBxLk9iamVjdCA9PT0gT2JqZWN0ICYmIHEsIHUgPSB0eXBlb2Ygc2VsZiA9PSBcIm9iamVjdFwiICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmLCBkID0gaSB8fCB1IHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSwgZyA9IE9iamVjdC5wcm90b3R5cGUsIGYgPSBnLnRvU3RyaW5nLCB3ID0gTWF0aC5tYXgsIHAgPSBNYXRoLm1pbiwgbSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkLkRhdGUubm93KCk7XG4gIH07XG4gIGZ1bmN0aW9uIHYoaCwgRSwgaykge1xuICAgIHZhciBJLCBWLCBPLCBOLCBNLCBQLCBGID0gMCwgcmUgPSAhMSwgWiA9ICExLCBEID0gITA7XG4gICAgaWYgKHR5cGVvZiBoICE9IFwiZnVuY3Rpb25cIilcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IodCk7XG4gICAgRSA9IEEoRSkgfHwgMCwgYihrKSAmJiAocmUgPSAhIWsubGVhZGluZywgWiA9IFwibWF4V2FpdFwiIGluIGssIE8gPSBaID8gdyhBKGsubWF4V2FpdCkgfHwgMCwgRSkgOiBPLCBEID0gXCJ0cmFpbGluZ1wiIGluIGsgPyAhIWsudHJhaWxpbmcgOiBEKTtcbiAgICBmdW5jdGlvbiBVKFIpIHtcbiAgICAgIHZhciB4ID0gSSwgSCA9IFY7XG4gICAgICByZXR1cm4gSSA9IFYgPSB2b2lkIDAsIEYgPSBSLCBOID0gaC5hcHBseShILCB4KSwgTjtcbiAgICB9XG4gICAgZnVuY3Rpb24gUGUoUikge1xuICAgICAgcmV0dXJuIEYgPSBSLCBNID0gc2V0VGltZW91dChXLCBFKSwgcmUgPyBVKFIpIDogTjtcbiAgICB9XG4gICAgZnVuY3Rpb24gVGUoUikge1xuICAgICAgdmFyIHggPSBSIC0gUCwgSCA9IFIgLSBGLCBzZSA9IEUgLSB4O1xuICAgICAgcmV0dXJuIFogPyBwKHNlLCBPIC0gSCkgOiBzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2UoUikge1xuICAgICAgdmFyIHggPSBSIC0gUCwgSCA9IFIgLSBGO1xuICAgICAgcmV0dXJuIFAgPT09IHZvaWQgMCB8fCB4ID49IEUgfHwgeCA8IDAgfHwgWiAmJiBIID49IE87XG4gICAgfVxuICAgIGZ1bmN0aW9uIFcoKSB7XG4gICAgICB2YXIgUiA9IG0oKTtcbiAgICAgIGlmIChjZShSKSlcbiAgICAgICAgcmV0dXJuIGxlKFIpO1xuICAgICAgTSA9IHNldFRpbWVvdXQoVywgVGUoUikpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsZShSKSB7XG4gICAgICByZXR1cm4gTSA9IHZvaWQgMCwgRCAmJiBJID8gVShSKSA6IChJID0gViA9IHZvaWQgMCwgTik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEFlKCkge1xuICAgICAgTSAhPT0gdm9pZCAwICYmIGNsZWFyVGltZW91dChNKSwgRiA9IDAsIEkgPSBQID0gViA9IE0gPSB2b2lkIDA7XG4gICAgfVxuICAgIGZ1bmN0aW9uIE5lKCkge1xuICAgICAgcmV0dXJuIE0gPT09IHZvaWQgMCA/IE4gOiBsZShtKCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBHKCkge1xuICAgICAgdmFyIFIgPSBtKCksIHggPSBjZShSKTtcbiAgICAgIGlmIChJID0gYXJndW1lbnRzLCBWID0gdGhpcywgUCA9IFIsIHgpIHtcbiAgICAgICAgaWYgKE0gPT09IHZvaWQgMClcbiAgICAgICAgICByZXR1cm4gUGUoUCk7XG4gICAgICAgIGlmIChaKVxuICAgICAgICAgIHJldHVybiBNID0gc2V0VGltZW91dChXLCBFKSwgVShQKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBNID09PSB2b2lkIDAgJiYgKE0gPSBzZXRUaW1lb3V0KFcsIEUpKSwgTjtcbiAgICB9XG4gICAgcmV0dXJuIEcuY2FuY2VsID0gQWUsIEcuZmx1c2ggPSBOZSwgRztcbiAgfVxuICBmdW5jdGlvbiBiKGgpIHtcbiAgICB2YXIgRSA9IHR5cGVvZiBoO1xuICAgIHJldHVybiAhIWggJiYgKEUgPT0gXCJvYmplY3RcIiB8fCBFID09IFwiZnVuY3Rpb25cIik7XG4gIH1cbiAgZnVuY3Rpb24gQyhoKSB7XG4gICAgcmV0dXJuICEhaCAmJiB0eXBlb2YgaCA9PSBcIm9iamVjdFwiO1xuICB9XG4gIGZ1bmN0aW9uIFQoaCkge1xuICAgIHJldHVybiB0eXBlb2YgaCA9PSBcInN5bWJvbFwiIHx8IEMoaCkgJiYgZi5jYWxsKGgpID09IGE7XG4gIH1cbiAgZnVuY3Rpb24gQShoKSB7XG4gICAgaWYgKHR5cGVvZiBoID09IFwibnVtYmVyXCIpXG4gICAgICByZXR1cm4gaDtcbiAgICBpZiAoVChoKSlcbiAgICAgIHJldHVybiBuO1xuICAgIGlmIChiKGgpKSB7XG4gICAgICB2YXIgRSA9IHR5cGVvZiBoLnZhbHVlT2YgPT0gXCJmdW5jdGlvblwiID8gaC52YWx1ZU9mKCkgOiBoO1xuICAgICAgaCA9IGIoRSkgPyBFICsgXCJcIiA6IEU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaCAhPSBcInN0cmluZ1wiKVxuICAgICAgcmV0dXJuIGggPT09IDAgPyBoIDogK2g7XG4gICAgaCA9IGgucmVwbGFjZShyLCBcIlwiKTtcbiAgICB2YXIgayA9IHMudGVzdChoKTtcbiAgICByZXR1cm4gayB8fCBvLnRlc3QoaCkgPyBsKGguc2xpY2UoMiksIGsgPyAyIDogOCkgOiBjLnRlc3QoaCkgPyBuIDogK2g7XG4gIH1cbiAgcmV0dXJuIFkgPSB2LCBZO1xufVxudmFyIEF0ID0gVHQoKTtcbmNvbnN0IGRlID0gLyogQF9fUFVSRV9fICovIGN0KEF0KTtcbmZ1bmN0aW9uIE50KHQpIHtcbiAgY29uc3QgbiA9IEwodCk7XG4gIG4uY3VycmVudCA9IHQsIHooXG4gICAgKCkgPT4gKCkgPT4ge1xuICAgICAgbi5jdXJyZW50KCk7XG4gICAgfSxcbiAgICBbXVxuICApO1xufVxuZnVuY3Rpb24gTHQodCwgbiA9IDUwMCwgYSkge1xuICBjb25zdCByID0gTCgpO1xuICBOdCgoKSA9PiB7XG4gICAgci5jdXJyZW50ICYmIHIuY3VycmVudC5jYW5jZWwoKTtcbiAgfSk7XG4gIGNvbnN0IGMgPSBMZSgoKSA9PiB7XG4gICAgY29uc3QgcyA9IGRlKHQsIG4sIGEpLCBvID0gKC4uLmwpID0+IHMoLi4ubCk7XG4gICAgcmV0dXJuIG8uY2FuY2VsID0gKCkgPT4ge1xuICAgICAgcy5jYW5jZWwoKTtcbiAgICB9LCBvLmlzUGVuZGluZyA9ICgpID0+ICEhci5jdXJyZW50LCBvLmZsdXNoID0gKCkgPT4gcy5mbHVzaCgpLCBvO1xuICB9LCBbdCwgbiwgYV0pO1xuICByZXR1cm4geigoKSA9PiB7XG4gICAgci5jdXJyZW50ID0gZGUodCwgbiwgYSk7XG4gIH0sIFt0LCBuLCBhXSksIGM7XG59XG5mdW5jdGlvbiB6dCh0LCBuLCBhKSB7XG4gIGNvbnN0IHIgPSAodSwgZCkgPT4gdSA9PT0gZCwgYyA9IHQgaW5zdGFuY2VvZiBGdW5jdGlvbiA/IHQoKSA6IHQsIFtzLCBvXSA9IEIoYyksIGwgPSBMKGMpLCBpID0gTHQoXG4gICAgbyxcbiAgICBuLFxuICAgIGFcbiAgKTtcbiAgcmV0dXJuIHIobC5jdXJyZW50LCBjKSB8fCAoaShjKSwgbC5jdXJyZW50ID0gYyksIFtzLCBpXTtcbn1cbmZ1bmN0aW9uIFZ0KHtcbiAgdGhyZXNob2xkOiB0ID0gMCxcbiAgcm9vdDogbiA9IG51bGwsXG4gIHJvb3RNYXJnaW46IGEgPSBcIjAlXCIsXG4gIGZyZWV6ZU9uY2VWaXNpYmxlOiByID0gITEsXG4gIGluaXRpYWxJc0ludGVyc2VjdGluZzogYyA9ICExLFxuICBvbkNoYW5nZTogc1xufSA9IHt9KSB7XG4gIHZhciBvO1xuICBjb25zdCBbbCwgaV0gPSBCKG51bGwpLCBbdSwgZF0gPSBCKCgpID0+ICh7XG4gICAgaXNJbnRlcnNlY3Rpbmc6IGMsXG4gICAgZW50cnk6IHZvaWQgMFxuICB9KSksIGcgPSBMKCk7XG4gIGcuY3VycmVudCA9IHM7XG4gIGNvbnN0IGYgPSAoKG8gPSB1LmVudHJ5KSA9PSBudWxsID8gdm9pZCAwIDogby5pc0ludGVyc2VjdGluZykgJiYgcjtcbiAgeigoKSA9PiB7XG4gICAgaWYgKCFsIHx8ICEoXCJJbnRlcnNlY3Rpb25PYnNlcnZlclwiIGluIHdpbmRvdykgfHwgZilcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBtID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgKHYpID0+IHtcbiAgICAgICAgY29uc3QgYiA9IEFycmF5LmlzQXJyYXkobS50aHJlc2hvbGRzKSA/IG0udGhyZXNob2xkcyA6IFttLnRocmVzaG9sZHNdO1xuICAgICAgICB2LmZvckVhY2goKEMpID0+IHtcbiAgICAgICAgICBjb25zdCBUID0gQy5pc0ludGVyc2VjdGluZyAmJiBiLnNvbWUoKEEpID0+IEMuaW50ZXJzZWN0aW9uUmF0aW8gPj0gQSk7XG4gICAgICAgICAgZCh7IGlzSW50ZXJzZWN0aW5nOiBULCBlbnRyeTogQyB9KSwgZy5jdXJyZW50ICYmIGcuY3VycmVudChULCBDKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgeyB0aHJlc2hvbGQ6IHQsIHJvb3Q6IG4sIHJvb3RNYXJnaW46IGEgfVxuICAgICk7XG4gICAgcmV0dXJuIG0ub2JzZXJ2ZShsKSwgKCkgPT4ge1xuICAgICAgbS5kaXNjb25uZWN0KCk7XG4gICAgfTtcbiAgfSwgW1xuICAgIGwsXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIEpTT04uc3RyaW5naWZ5KHQpLFxuICAgIG4sXG4gICAgYSxcbiAgICBmLFxuICAgIHJcbiAgXSk7XG4gIGNvbnN0IHcgPSBMKG51bGwpO1xuICB6KCgpID0+IHtcbiAgICB2YXIgbTtcbiAgICAhbCAmJiAoKG0gPSB1LmVudHJ5KSAhPSBudWxsICYmIG0udGFyZ2V0KSAmJiAhciAmJiAhZiAmJiB3LmN1cnJlbnQgIT09IHUuZW50cnkudGFyZ2V0ICYmICh3LmN1cnJlbnQgPSB1LmVudHJ5LnRhcmdldCwgZCh7IGlzSW50ZXJzZWN0aW5nOiBjLCBlbnRyeTogdm9pZCAwIH0pKTtcbiAgfSwgW2wsIHUuZW50cnksIHIsIGYsIGNdKTtcbiAgY29uc3QgcCA9IFtcbiAgICBpLFxuICAgICEhdS5pc0ludGVyc2VjdGluZyxcbiAgICB1LmVudHJ5XG4gIF07XG4gIHJldHVybiBwLnJlZiA9IHBbMF0sIHAuaXNJbnRlcnNlY3RpbmcgPSBwWzFdLCBwLmVudHJ5ID0gcFsyXSwgcDtcbn1cbmNvbnN0IEZ0ID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oe1xuICAgIG9uVHJhY2tDbGljazogbixcbiAgICBvbkNsaWNrOiBhLFxuICAgIG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZDogcixcbiAgICB0cmFja1JlZjogYyxcbiAgICBtYW5hZ2VTdWJzY3JpcHRpb246IHMsXG4gICAgLi4ub1xuICB9LCBsKSB7XG4gICAgY29uc3QgaSA9IF8oYyksIHUgPSBlLnVzZVJlZihudWxsKTtcbiAgICBlLnVzZUltcGVyYXRpdmVIYW5kbGUobCwgKCkgPT4gdS5jdXJyZW50KTtcbiAgICBjb25zdCBkID0gVnQoeyByb290OiB1LmN1cnJlbnQgfSksIFtnXSA9IHp0KGQsIDNlMyk7XG4gICAgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgcyAmJiBpLnB1YmxpY2F0aW9uIGluc3RhbmNlb2YgSiAmJiAoZyA9PSBudWxsID8gdm9pZCAwIDogZy5pc0ludGVyc2VjdGluZykgPT09ICExICYmIChkID09IG51bGwgPyB2b2lkIDAgOiBkLmlzSW50ZXJzZWN0aW5nKSA9PT0gITEgJiYgaS5wdWJsaWNhdGlvbi5zZXRTdWJzY3JpYmVkKCExKTtcbiAgICB9LCBbZywgaSwgc10pLCBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBzICYmIGkucHVibGljYXRpb24gaW5zdGFuY2VvZiBKICYmIChkID09IG51bGwgPyB2b2lkIDAgOiBkLmlzSW50ZXJzZWN0aW5nKSA9PT0gITAgJiYgaS5wdWJsaWNhdGlvbi5zZXRTdWJzY3JpYmVkKCEwKTtcbiAgICB9LCBbZCwgaSwgc10pO1xuICAgIGNvbnN0IHtcbiAgICAgIGVsZW1lbnRQcm9wczogZixcbiAgICAgIHB1YmxpY2F0aW9uOiB3LFxuICAgICAgaXNTdWJzY3JpYmVkOiBwXG4gICAgfSA9IENlKGksIHtcbiAgICAgIGVsZW1lbnQ6IHUsXG4gICAgICBwcm9wczogb1xuICAgIH0pO1xuICAgIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIHIgPT0gbnVsbCB8fCByKCEhcCk7XG4gICAgfSwgW3AsIHJdKTtcbiAgICBjb25zdCBtID0gKHYpID0+IHtcbiAgICAgIGEgPT0gbnVsbCB8fCBhKHYpLCBuID09IG51bGwgfHwgbih7IHBhcnRpY2lwYW50OiBpID09IG51bGwgPyB2b2lkIDAgOiBpLnBhcnRpY2lwYW50LCB0cmFjazogdyB9KTtcbiAgICB9O1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwidmlkZW9cIiwgeyByZWY6IHUsIC4uLmYsIG11dGVkOiAhMCwgb25DbGljazogbSB9KTtcbiAgfVxuKSwgbmUgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IHRyYWNrUmVmOiBuLCBvblN1YnNjcmlwdGlvblN0YXR1c0NoYW5nZWQ6IGEsIHZvbHVtZTogciwgLi4uYyB9LCBzKSB7XG4gICAgY29uc3QgbyA9IF8obiksIGwgPSBlLnVzZVJlZihudWxsKTtcbiAgICBlLnVzZUltcGVyYXRpdmVIYW5kbGUocywgKCkgPT4gbC5jdXJyZW50KTtcbiAgICBjb25zdCB7XG4gICAgICBlbGVtZW50UHJvcHM6IGksXG4gICAgICBpc1N1YnNjcmliZWQ6IHUsXG4gICAgICB0cmFjazogZCxcbiAgICAgIHB1YmxpY2F0aW9uOiBnXG4gICAgfSA9IENlKG8sIHtcbiAgICAgIGVsZW1lbnQ6IGwsXG4gICAgICBwcm9wczogY1xuICAgIH0pO1xuICAgIHJldHVybiBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBhID09IG51bGwgfHwgYSghIXUpO1xuICAgIH0sIFt1LCBhXSksIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGQgPT09IHZvaWQgMCB8fCByID09PSB2b2lkIDAgfHwgKGQgaW5zdGFuY2VvZiBLZSA/IGQuc2V0Vm9sdW1lKHIpIDogai53YXJuKFwiVm9sdW1lIGNhbiBvbmx5IGJlIHNldCBvbiByZW1vdGUgYXVkaW8gdHJhY2tzLlwiKSk7XG4gICAgfSwgW3IsIGRdKSwgZS51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgZyA9PT0gdm9pZCAwIHx8IGMubXV0ZWQgPT09IHZvaWQgMCB8fCAoZyBpbnN0YW5jZW9mIEogPyBnLnNldEVuYWJsZWQoIWMubXV0ZWQpIDogai53YXJuKFwiQ2FuIG9ubHkgY2FsbCBzZXRFbmFibGVkIG9uIHJlbW90ZSB0cmFjayBwdWJsaWNhdGlvbnMuXCIpKTtcbiAgICB9LCBbYy5tdXRlZCwgZywgZF0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIiwgeyByZWY6IGwsIC4uLmkgfSk7XG4gIH1cbik7XG5mdW5jdGlvbiBadCh0KSB7XG4gIGNvbnN0IG4gPSAhIWx0KCk7XG4gIHJldHVybiB0LnBhcnRpY2lwYW50ICYmICFuID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChrZS5Qcm92aWRlciwgeyB2YWx1ZTogdC5wYXJ0aWNpcGFudCB9LCB0LmNoaWxkcmVuKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgdC5jaGlsZHJlbik7XG59XG5mdW5jdGlvbiBIdCh0KSB7XG4gIGNvbnN0IG4gPSAhIXRlKCk7XG4gIHJldHVybiB0LnRyYWNrUmVmICYmICFuID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChhZS5Qcm92aWRlciwgeyB2YWx1ZTogdC50cmFja1JlZiB9LCB0LmNoaWxkcmVuKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgdC5jaGlsZHJlbik7XG59XG5jb25zdCBCdCA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHtcbiAgICB0cmFja1JlZjogbixcbiAgICBjaGlsZHJlbjogYSxcbiAgICBvblBhcnRpY2lwYW50Q2xpY2s6IHIsXG4gICAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yOiBjLFxuICAgIC4uLnNcbiAgfSwgbykge1xuICAgIHZhciB3LCBwO1xuICAgIGNvbnN0IGwgPSBfKG4pLCB7IGVsZW1lbnRQcm9wczogaSB9ID0gdmUoe1xuICAgICAgaHRtbFByb3BzOiBzLFxuICAgICAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yOiBjLFxuICAgICAgb25QYXJ0aWNpcGFudENsaWNrOiByLFxuICAgICAgdHJhY2tSZWY6IGxcbiAgICB9KSwgdSA9IHFlKGwucGFydGljaXBhbnQpLCBkID0gc3QoKSwgZyA9ICh3ID0gaXQoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IHcuYXV0b1N1YnNjcmlwdGlvbiwgZiA9IGUudXNlQ2FsbGJhY2soXG4gICAgICAobSkgPT4ge1xuICAgICAgICBsLnNvdXJjZSAmJiAhbSAmJiBkICYmIGQucGluLmRpc3BhdGNoICYmIG90KGwsIGQucGluLnN0YXRlKSAmJiBkLnBpbi5kaXNwYXRjaCh7IG1zZzogXCJjbGVhcl9waW5cIiB9KTtcbiAgICAgIH0sXG4gICAgICBbbCwgZF1cbiAgICApO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBvLCBzdHlsZTogeyBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiIH0sIC4uLmkgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChIdCwgeyB0cmFja1JlZjogbCB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFp0LCB7IHBhcnRpY2lwYW50OiBsLnBhcnRpY2lwYW50IH0sIGEgPz8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCAkKGwpICYmICgoKHAgPSBsLnB1YmxpY2F0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogcC5raW5kKSA9PT0gXCJ2aWRlb1wiIHx8IGwuc291cmNlID09PSB5LlNvdXJjZS5DYW1lcmEgfHwgbC5zb3VyY2UgPT09IHkuU291cmNlLlNjcmVlblNoYXJlKSA/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBGdCxcbiAgICAgIHtcbiAgICAgICAgdHJhY2tSZWY6IGwsXG4gICAgICAgIG9uU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZDogZixcbiAgICAgICAgbWFuYWdlU3Vic2NyaXB0aW9uOiBnXG4gICAgICB9XG4gICAgKSA6ICQobCkgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIG5lLFxuICAgICAge1xuICAgICAgICB0cmFja1JlZjogbCxcbiAgICAgICAgb25TdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkOiBmXG4gICAgICB9XG4gICAgKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1wbGFjZWhvbGRlclwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoUHQsIG51bGwpKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YVwiIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbWV0YWRhdGEtaXRlbVwiIH0sIGwuc291cmNlID09PSB5LlNvdXJjZS5DYW1lcmEgPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIHUgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChwdCwgeyBzdHlsZTogeyBtYXJnaW5SaWdodDogXCIwLjI1cmVtXCIgfSB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgIFNlLFxuICAgICAge1xuICAgICAgICB0cmFja1JlZjoge1xuICAgICAgICAgIHBhcnRpY2lwYW50OiBsLnBhcnRpY2lwYW50LFxuICAgICAgICAgIHNvdXJjZTogeS5Tb3VyY2UuTWljcm9waG9uZVxuICAgICAgICB9LFxuICAgICAgICBzaG93OiBcIm11dGVkXCJcbiAgICAgIH1cbiAgICApLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEssIG51bGwpKSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChNZSwgeyBzdHlsZTogeyBtYXJnaW5SaWdodDogXCIwLjI1cmVtXCIgfSB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChLLCBudWxsLCBcIidzIHNjcmVlblwiKSkpLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGJlLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YS1pdGVtXCIgfSkpKSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChJdCwgeyB0cmFja1JlZjogbCB9KSkpKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIGhhKHQpIHtcbiAgY29uc3QgbiA9IFModCwgeyBjbGFzc05hbWU6IFwibGstZm9jdXMtbGF5b3V0XCIgfSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgLi4ubiB9LCB0LmNoaWxkcmVuKTtcbn1cbmZ1bmN0aW9uIGdhKHsgdHJhY2tSZWY6IHQsIC4uLm4gfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChCdCwgeyB0cmFja1JlZjogdCwgLi4ubiB9KTtcbn1cbmZ1bmN0aW9uIEllKHsgdHJhY2tzOiB0LCAuLi5uIH0pIHtcbiAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgdC5tYXAoKGEpID0+IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgYWUuUHJvdmlkZXIsXG4gICAge1xuICAgICAgdmFsdWU6IGEsXG4gICAgICBrZXk6IFJlKGEpXG4gICAgfSxcbiAgICBlZShuLmNoaWxkcmVuKVxuICApKSk7XG59XG5mdW5jdGlvbiBqdCh7XG4gIHRvdGFsUGFnZUNvdW50OiB0LFxuICBuZXh0UGFnZTogbixcbiAgcHJldlBhZ2U6IGEsXG4gIGN1cnJlbnRQYWdlOiByLFxuICBwYWdlc0NvbnRhaW5lcjogY1xufSkge1xuICBjb25zdCBbcywgb10gPSBlLnVzZVN0YXRlKCExKTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbDtcbiAgICByZXR1cm4gYyAmJiAobCA9IHV0KGMuY3VycmVudCwgMmUzKS5zdWJzY3JpYmUoXG4gICAgICBvXG4gICAgKSksICgpID0+IHtcbiAgICAgIGwgJiYgbC51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtjXSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibGstcGFnaW5hdGlvbi1jb250cm9sXCIsIFwiZGF0YS1say11c2VyLWludGVyYWN0aW9uXCI6IHMgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGNsYXNzTmFtZTogXCJsay1idXR0b25cIiwgb25DbGljazogYSB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGllLCBudWxsKSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhZ2luYXRpb24tY291bnRcIiB9LCBgJHtyfSBvZiAke3R9YCksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBjbGFzc05hbWU6IFwibGstYnV0dG9uXCIsIG9uQ2xpY2s6IG4gfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChpZSwgbnVsbCkpKTtcbn1cbmNvbnN0IF90ID0gLyogQF9fUFVSRV9fICovIGUuZm9yd2FyZFJlZihcbiAgZnVuY3Rpb24oeyB0b3RhbFBhZ2VDb3VudDogbiwgY3VycmVudFBhZ2U6IGEgfSwgcikge1xuICAgIGNvbnN0IGMgPSBuZXcgQXJyYXkobikuZmlsbChcIlwiKS5tYXAoKHMsIG8pID0+IG8gKyAxID09PSBhID8gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBcImRhdGEtbGstYWN0aXZlXCI6ICEwLCBrZXk6IG8gfSkgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGtleTogbyB9KSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHIsIGNsYXNzTmFtZTogXCJsay1wYWdpbmF0aW9uLWluZGljYXRvclwiIH0sIGMpO1xuICB9XG4pO1xuZnVuY3Rpb24gdmEoeyB0cmFja3M6IHQsIC4uLm4gfSkge1xuICBjb25zdCBhID0gZS5jcmVhdGVSZWYoKSwgciA9IGUudXNlTWVtbyhcbiAgICAoKSA9PiBTKG4sIHsgY2xhc3NOYW1lOiBcImxrLWdyaWQtbGF5b3V0XCIgfSksXG4gICAgW25dXG4gICksIHsgbGF5b3V0OiBjIH0gPSAkZShhLCB0Lmxlbmd0aCksIHMgPSBEZShjLm1heFRpbGVzLCB0KTtcbiAgcmV0dXJuIFVlKGEsIHtcbiAgICBvbkxlZnRTd2lwZTogcy5uZXh0UGFnZSxcbiAgICBvblJpZ2h0U3dpcGU6IHMucHJldlBhZ2VcbiAgfSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IGEsIFwiZGF0YS1say1wYWdpbmF0aW9uXCI6IHMudG90YWxQYWdlQ291bnQgPiAxLCAuLi5yIH0sIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoSWUsIHsgdHJhY2tzOiBzLnRyYWNrcyB9LCBuLmNoaWxkcmVuKSwgdC5sZW5ndGggPiBjLm1heFRpbGVzICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBfdCxcbiAgICB7XG4gICAgICB0b3RhbFBhZ2VDb3VudDogcy50b3RhbFBhZ2VDb3VudCxcbiAgICAgIGN1cnJlbnRQYWdlOiBzLmN1cnJlbnRQYWdlXG4gICAgfVxuICApLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGp0LCB7IHBhZ2VzQ29udGFpbmVyOiBhLCAuLi5zIH0pKSk7XG59XG5jb25zdCBPdCA9IDEzMCwgV3QgPSAxNDAsIG1lID0gMSwgeGUgPSAxNiAvIDEwLCBxdCA9ICgxIC0geGUpICogLTE7XG5mdW5jdGlvbiBFYSh7IHRyYWNrczogdCwgb3JpZW50YXRpb246IG4sIC4uLmEgfSkge1xuICBjb25zdCByID0gZS51c2VSZWYobnVsbCksIFtjLCBzXSA9IGUudXNlU3RhdGUoMCksIHsgd2lkdGg6IG8sIGhlaWdodDogbCB9ID0gR2UociksIGkgPSBuIHx8IChsID49IG8gPyBcInZlcnRpY2FsXCIgOiBcImhvcml6b250YWxcIiksIHUgPSBpID09PSBcInZlcnRpY2FsXCIgPyBNYXRoLm1heChvICogcXQsIE90KSA6IE1hdGgubWF4KGwgKiB4ZSwgV3QpLCBkID0gZHQoKSwgZyA9IE1hdGgubWF4KGkgPT09IFwidmVydGljYWxcIiA/IChsIC0gZCkgLyB1IDogKG8gLSBkKSAvIHUsIG1lKTtcbiAgbGV0IGYgPSBNYXRoLnJvdW5kKGcpO1xuICBNYXRoLmFicyhnIC0gYykgPCAwLjUgPyBmID0gTWF0aC5yb3VuZChjKSA6IGMgIT09IGcgJiYgcyhnKTtcbiAgY29uc3QgdyA9IFFlKHQsIGYpO1xuICByZXR1cm4gZS51c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIHIuY3VycmVudCAmJiAoci5jdXJyZW50LmRhdGFzZXQubGtPcmllbnRhdGlvbiA9IGksIHIuY3VycmVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tbGstbWF4LXZpc2libGUtdGlsZXNcIiwgZi50b1N0cmluZygpKSk7XG4gIH0sIFtmLCBpXSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJhc2lkZVwiLCB7IGtleTogaSwgY2xhc3NOYW1lOiBcImxrLWNhcm91c2VsXCIsIHJlZjogciwgLi4uYSB9LCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KEllLCB7IHRyYWNrczogdyB9LCBhLmNoaWxkcmVuKSk7XG59XG5mdW5jdGlvbiBwYSh7XG4gIHZhbHVlOiB0LFxuICBvblBpbkNoYW5nZTogbixcbiAgb25XaWRnZXRDaGFuZ2U6IGEsXG4gIGNoaWxkcmVuOiByXG59KSB7XG4gIGNvbnN0IGMgPSBtdCh0KTtcbiAgcmV0dXJuIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBqLmRlYnVnKFwiUGluU3RhdGUgVXBkYXRlZFwiLCB7IHN0YXRlOiBjLnBpbi5zdGF0ZSB9KSwgbiAmJiBjLnBpbi5zdGF0ZSAmJiBuKGMucGluLnN0YXRlKTtcbiAgfSwgW2MucGluLnN0YXRlLCBuXSksIGUudXNlRWZmZWN0KCgpID0+IHtcbiAgICBqLmRlYnVnKFwiV2lkZ2V0IFVwZGF0ZWRcIiwgeyB3aWRnZXRTdGF0ZTogYy53aWRnZXQuc3RhdGUgfSksIGEgJiYgYy53aWRnZXQuc3RhdGUgJiYgYShjLndpZGdldC5zdGF0ZSk7XG4gIH0sIFthLCBjLndpZGdldC5zdGF0ZV0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KHBlLlByb3ZpZGVyLCB7IHZhbHVlOiBjIH0sIHIpO1xufVxuY29uc3Qgd2EgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IHRyYWNrUmVmOiBuLCAuLi5hIH0sIHIpIHtcbiAgICBjb25zdCBkID0gXyhuKSwgZyA9IEVlKGQsIHsgYmFuZHM6IDcsIGxvUGFzczogMzAwIH0pO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJzdmdcIixcbiAgICAgIHtcbiAgICAgICAgcmVmOiByLFxuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgIHZpZXdCb3g6IFwiMCAwIDIwMCA5MFwiLFxuICAgICAgICAuLi5hLFxuICAgICAgICBjbGFzc05hbWU6IFwibGstYXVkaW8tdmlzdWFsaXplclwiXG4gICAgICB9LFxuICAgICAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInJlY3RcIiwgeyB4OiBcIjBcIiwgeTogXCIwXCIsIHdpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiB9KSxcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFwiZ1wiLFxuICAgICAgICB7XG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgkeygyMDAgLSA3ICogMTApIC8gMn1weCwgMClgXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBnLm1hcCgoZiwgdykgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBcInJlY3RcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBrZXk6IHcsXG4gICAgICAgICAgICB4OiB3ICogMTAsXG4gICAgICAgICAgICB5OiA5MCAvIDIgLSBmICogNTAgLyAyLFxuICAgICAgICAgICAgd2lkdGg6IDYsXG4gICAgICAgICAgICBoZWlnaHQ6IGYgKiA1MFxuICAgICAgICAgIH1cbiAgICAgICAgKSlcbiAgICAgIClcbiAgICApO1xuICB9XG4pO1xuZnVuY3Rpb24ga2EoeyBwYXJ0aWNpcGFudHM6IHQsIC4uLm4gfSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCB0Lm1hcCgoYSkgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChrZS5Qcm92aWRlciwgeyB2YWx1ZTogYSwga2V5OiBhLmlkZW50aXR5IH0sIGVlKG4uY2hpbGRyZW4pKSkpO1xufVxuZnVuY3Rpb24gUmEoeyB2b2x1bWU6IHQsIG11dGVkOiBuIH0pIHtcbiAgY29uc3QgYSA9IFhlKFxuICAgIFt5LlNvdXJjZS5NaWNyb3Bob25lLCB5LlNvdXJjZS5TY3JlZW5TaGFyZUF1ZGlvLCB5LlNvdXJjZS5Vbmtub3duXSxcbiAgICB7XG4gICAgICB1cGRhdGVPbmx5T246IFtdLFxuICAgICAgb25seVN1YnNjcmliZWQ6ICEwXG4gICAgfVxuICApLmZpbHRlcigocikgPT4gIXIucGFydGljaXBhbnQuaXNMb2NhbCAmJiByLnB1YmxpY2F0aW9uLmtpbmQgPT09IHkuS2luZC5BdWRpbyk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgc3R5bGU6IHsgZGlzcGxheTogXCJub25lXCIgfSB9LCBhLm1hcCgocikgPT4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcbiAgICBuZSxcbiAgICB7XG4gICAgICBrZXk6IFJlKHIpLFxuICAgICAgdHJhY2tSZWY6IHIsXG4gICAgICB2b2x1bWU6IHQsXG4gICAgICBtdXRlZDogblxuICAgIH1cbiAgKSkpO1xufVxuY29uc3QgTWEgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKGZ1bmN0aW9uKHsgY2hpbGRyZW5Qb3NpdGlvbjogbiA9IFwiYmVmb3JlXCIsIGNoaWxkcmVuOiBhLCAuLi5yIH0sIGMpIHtcbiAgY29uc3QgeyBuYW1lOiBzIH0gPSBZZSgpO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyByZWY6IGMsIC4uLnIgfSwgbiA9PT0gXCJiZWZvcmVcIiAmJiBhLCBzLCBuID09PSBcImFmdGVyXCIgJiYgYSk7XG59KTtcbmZ1bmN0aW9uICR0KHQpIHtcbiAgY29uc3QgbiA9IGUudXNlTWVtbygoKSA9PiBTKHQsIHsgY2xhc3NOYW1lOiBcImxrLXRvYXN0XCIgfSksIFt0XSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgLi4ubiB9LCB0LmNoaWxkcmVuKTtcbn1cbmNvbnN0IER0ID0gKHQpID0+IHtcbiAgY29uc3QgbiA9IFtdO1xuICBmb3IgKGxldCBhID0gMDsgYSA8IHQ7IGErKylcbiAgICBuLnB1c2goW2EsIHQgLSAxIC0gYV0pO1xuICByZXR1cm4gbjtcbn0sIGZlID0gKHQpID0+IFtbTWF0aC5mbG9vcih0IC8gMildLCBbLTFdXSwgVXQgPSAodCwgbiwgYSkgPT4ge1xuICBjb25zdCBbciwgY10gPSBCKDApLCBbcywgb10gPSBCKFtbXV0pO1xuICB6KCgpID0+IHtcbiAgICBpZiAodCA9PT0gXCJ0aGlua2luZ1wiKVxuICAgICAgbyhmZShuKSk7XG4gICAgZWxzZSBpZiAodCA9PT0gXCJjb25uZWN0aW5nXCIgfHwgdCA9PT0gXCJpbml0aWFsaXppbmdcIikge1xuICAgICAgY29uc3QgaSA9IFsuLi5EdChuKV07XG4gICAgICBvKGkpO1xuICAgIH0gZWxzZSBvKHQgPT09IFwibGlzdGVuaW5nXCIgPyBmZShuKSA6IHQgPT09IHZvaWQgMCB8fCB0ID09PSBcInNwZWFraW5nXCIgPyBbbmV3IEFycmF5KG4pLmZpbGwoMCkubWFwKChpLCB1KSA9PiB1KV0gOiBbW11dKTtcbiAgICBjKDApO1xuICB9LCBbdCwgbl0pO1xuICBjb25zdCBsID0gTChudWxsKTtcbiAgcmV0dXJuIHooKCkgPT4ge1xuICAgIGxldCBpID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgdSA9IChkKSA9PiB7XG4gICAgICBkIC0gaSA+PSBhICYmIChjKChmKSA9PiBmICsgMSksIGkgPSBkKSwgbC5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHUpO1xuICAgIH07XG4gICAgcmV0dXJuIGwuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh1KSwgKCkgPT4ge1xuICAgICAgbC5jdXJyZW50ICE9PSBudWxsICYmIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGwuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW2EsIG4sIHQsIHMubGVuZ3RoXSksIHNbciAlIHMubGVuZ3RoXTtcbn0sIEd0ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICBbXCJjb25uZWN0aW5nXCIsIDJlM10sXG4gIFtcImluaXRpYWxpemluZ1wiLCAyZTNdLFxuICBbXCJsaXN0ZW5pbmdcIiwgNTAwXSxcbiAgW1widGhpbmtpbmdcIiwgMTUwXVxuXSksIFF0ID0gKHQsIG4pID0+IHtcbiAgaWYgKHQgPT09IHZvaWQgMClcbiAgICByZXR1cm4gMWUzO1xuICBsZXQgYSA9IEd0LmdldCh0KTtcbiAgaWYgKGEpXG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIFwiY29ubmVjdGluZ1wiOlxuICAgICAgICBhIC89IG47XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgcmV0dXJuIGE7XG59LCBYdCA9IC8qIEBfX1BVUkVfXyAqLyBlLmZvcndhcmRSZWYoXG4gIGZ1bmN0aW9uKHsgc3RhdGU6IG4sIG9wdGlvbnM6IGEsIGJhckNvdW50OiByID0gMTUsIHRyYWNrUmVmOiBjLCBjaGlsZHJlbjogcywgLi4ubyB9LCBsKSB7XG4gICAgY29uc3QgaSA9IFMobywgeyBjbGFzc05hbWU6IFwibGstYXVkaW8tYmFyLXZpc3VhbGl6ZXJcIiB9KTtcbiAgICBsZXQgdSA9IHRlKCk7XG4gICAgYyAmJiAodSA9IGMpO1xuICAgIGNvbnN0IGQgPSBFZSh1LCB7XG4gICAgICBiYW5kczogcixcbiAgICAgIGxvUGFzczogMTAwLFxuICAgICAgaGlQYXNzOiAyMDBcbiAgICB9KSwgZyA9IChhID09IG51bGwgPyB2b2lkIDAgOiBhLm1pbkhlaWdodCkgPz8gMjAsIGYgPSAoYSA9PSBudWxsID8gdm9pZCAwIDogYS5tYXhIZWlnaHQpID8/IDEwMCwgdyA9IFV0KFxuICAgICAgbixcbiAgICAgIHIsXG4gICAgICBRdChuLCByKSA/PyAxMDBcbiAgICApO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBsLCAuLi5pLCBcImRhdGEtbGstdmEtc3RhdGVcIjogbiB9LCBkLm1hcChcbiAgICAgIChwLCBtKSA9PiBzID8gZWUocywge1xuICAgICAgICBcImRhdGEtbGstaGlnaGxpZ2h0ZWRcIjogdy5pbmNsdWRlcyhtKSxcbiAgICAgICAgXCJkYXRhLWxrLWJhci1pbmRleFwiOiBtLFxuICAgICAgICBjbGFzc05hbWU6IFwibGstYXVkaW8tYmFyXCIsXG4gICAgICAgIHN0eWxlOiB7IGhlaWdodDogYCR7TWF0aC5taW4oZiwgTWF0aC5tYXgoZywgcCAqIDEwMCArIDUpKX0lYCB9XG4gICAgICB9KSA6IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgIFwic3BhblwiLFxuICAgICAgICB7XG4gICAgICAgICAga2V5OiBtLFxuICAgICAgICAgIFwiZGF0YS1say1oaWdobGlnaHRlZFwiOiB3LmluY2x1ZGVzKG0pLFxuICAgICAgICAgIFwiZGF0YS1say1iYXItaW5kZXhcIjogbSxcbiAgICAgICAgICBjbGFzc05hbWU6IGBsay1hdWRpby1iYXIgJHt3LmluY2x1ZGVzKG0pICYmIFwibGstaGlnaGxpZ2h0ZWRcIn1gLFxuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAvLyBUT0RPIHRyYW5zZm9ybSBhbmltYXRpb25zIHdvdWxkIGJlIG1vcmUgcGVyZm9ybWFudCwgaG93ZXZlciB0aGUgYm9yZGVyLXJhZGl1cyBnZXRzIGRpc3RvcnRlZCB3aGVuIHVzaW5nIHNjYWxlIHRyYW5zZm9ybXMuIGEgOS1zbGljZSBhcHByb2FjaCAob3IgMyBpbiB0aGlzIGNhc2UpIGNvdWxkIHdvcmtcbiAgICAgICAgICAgIC8vIHRyYW5zZm9ybTogYHNjYWxlKDEsICR7TWF0aC5taW4obWF4SGVpZ2h0LCBNYXRoLm1heChtaW5IZWlnaHQsIHZvbHVtZSkpfWAsXG4gICAgICAgICAgICBoZWlnaHQ6IGAke01hdGgubWluKGYsIE1hdGgubWF4KGcsIHAgKiAxMDAgKyA1KSl9JWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApKTtcbiAgfVxuKSwgeWEgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7XG4gICAgY2hpbGRyZW46IG4sXG4gICAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yOiBhLFxuICAgIG9uUGFydGljaXBhbnRDbGljazogcixcbiAgICB0cmFja1JlZjogYyxcbiAgICAuLi5zXG4gIH0sIG8pIHtcbiAgICBjb25zdCBsID0gXyhjKSwgeyBlbGVtZW50UHJvcHM6IGkgfSA9IHZlKHtcbiAgICAgIHRyYWNrUmVmOiBsLFxuICAgICAgaHRtbFByb3BzOiBzLFxuICAgICAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yOiBhLFxuICAgICAgb25QYXJ0aWNpcGFudENsaWNrOiByXG4gICAgfSk7XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IG8sIHN0eWxlOiB7IHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsIG1pbkhlaWdodDogXCIxNjBweFwiIH0sIC4uLmkgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChhZS5Qcm92aWRlciwgeyB2YWx1ZTogbCB9LCBuID8/IC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgJChsKSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KG5lLCB7IHRyYWNrUmVmOiBsIH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFh0LCB7IGJhckNvdW50OiA3LCBvcHRpb25zOiB7IG1pbkhlaWdodDogOCB9IH0pLCAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW1ldGFkYXRhXCIgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJsay1wYXJ0aWNpcGFudC1tZXRhZGF0YS1pdGVtXCIgfSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChTZSwgeyB0cmFja1JlZjogbCB9KSwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChLLCBudWxsKSksIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoYmUsIHsgY2xhc3NOYW1lOiBcImxrLXBhcnRpY2lwYW50LW1ldGFkYXRhLWl0ZW1cIiB9KSkpKSk7XG4gIH1cbik7XG5mdW5jdGlvbiBiYSh0KSB7XG4gIGNvbnN0IFtuLCBhXSA9IGUudXNlU3RhdGUodm9pZCAwKSwgciA9IGhlKHQucm9vbSk7XG4gIHJldHVybiBlLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc3dpdGNoIChyKSB7XG4gICAgICBjYXNlIFguUmVjb25uZWN0aW5nOlxuICAgICAgICBhKFxuICAgICAgICAgIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoZS5GcmFnbWVudCwgbnVsbCwgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChvZSwgeyBjbGFzc05hbWU6IFwibGstc3Bpbm5lclwiIH0pLCBcIiBSZWNvbm5lY3RpbmdcIilcbiAgICAgICAgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFguQ29ubmVjdGluZzpcbiAgICAgICAgYShcbiAgICAgICAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwsIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQob2UsIHsgY2xhc3NOYW1lOiBcImxrLXNwaW5uZXJcIiB9KSwgXCIgQ29ubmVjdGluZ1wiKVxuICAgICAgICApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgWC5EaXNjb25uZWN0ZWQ6XG4gICAgICAgIGEoLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChlLkZyYWdtZW50LCBudWxsLCBcIkRpc2Nvbm5lY3RlZFwiKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYSh2b2lkIDApO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0sIFtyXSksIG4gPyAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KCR0LCB7IGNsYXNzTmFtZTogXCJsay10b2FzdC1jb25uZWN0aW9uLXN0YXRlXCIgfSwgbikgOiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KGUuRnJhZ21lbnQsIG51bGwpO1xufVxuY29uc3QgU2EgPSAvKiBAX19QVVJFX18gKi8gZS5mb3J3YXJkUmVmKFxuICBmdW5jdGlvbih7IGVudHJ5OiBuLCBoaWRlTmFtZTogYSA9ICExLCBoaWRlVGltZXN0YW1wOiByID0gITEsIG1lc3NhZ2VGb3JtYXR0ZXI6IGMsIC4uLnMgfSwgbykge1xuICAgIHZhciBmLCB3LCBwLCBtO1xuICAgIGNvbnN0IGwgPSBlLnVzZU1lbW8oKCkgPT4gYyA/IGMobi5tZXNzYWdlKSA6IG4ubWVzc2FnZSwgW24ubWVzc2FnZSwgY10pLCBpID0gISFuLmVkaXRUaW1lc3RhbXAsIHUgPSBuZXcgRGF0ZShuLnRpbWVzdGFtcCksIGQgPSB0eXBlb2YgbmF2aWdhdG9yIDwgXCJ1XCIgPyBuYXZpZ2F0b3IubGFuZ3VhZ2UgOiBcImVuLVVTXCIsIGcgPSAoKGYgPSBuLmZyb20pID09IG51bGwgPyB2b2lkIDAgOiBmLm5hbWUpID8/ICgodyA9IG4uZnJvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IHcuaWRlbnRpdHkpO1xuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJsaVwiLFxuICAgICAge1xuICAgICAgICByZWY6IG8sXG4gICAgICAgIGNsYXNzTmFtZTogXCJsay1jaGF0LWVudHJ5XCIsXG4gICAgICAgIHRpdGxlOiB1LnRvTG9jYWxlVGltZVN0cmluZyhkLCB7IHRpbWVTdHlsZTogXCJmdWxsXCIgfSksXG4gICAgICAgIFwiZGF0YS1say1tZXNzYWdlLW9yaWdpblwiOiAocCA9IG4uZnJvbSkgIT0gbnVsbCAmJiBwLmlzTG9jYWwgPyBcImxvY2FsXCIgOiBcInJlbW90ZVwiLFxuICAgICAgICAuLi5zXG4gICAgICB9LFxuICAgICAgKCFyIHx8ICFhIHx8IGkpICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImxrLW1ldGEtZGF0YVwiIH0sICFhICYmIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJzdHJvbmdcIiwgeyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbmFtZVwiIH0sIGcpLCAoIXIgfHwgaSkgJiYgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibGstdGltZXN0YW1wXCIgfSwgaSAmJiBcImVkaXRlZCBcIiwgdS50b0xvY2FsZVRpbWVTdHJpbmcoZCwgeyB0aW1lU3R5bGU6IFwic2hvcnRcIiB9KSkpLFxuICAgICAgLyogQF9fUFVSRV9fICovIGUuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwibGstbWVzc2FnZS1ib2R5XCIgfSwgbCksXG4gICAgICAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJsay1tZXNzYWdlLWF0dGFjaGVtZW50c1wiIH0sIChtID0gbi5hdHRhY2hlZEZpbGVzKSA9PSBudWxsID8gdm9pZCAwIDogbS5tYXAoXG4gICAgICAgICh2KSA9PiB2LnR5cGUuc3RhcnRzV2l0aChcImltYWdlL1wiKSAmJiAvKiBAX19QVVJFX18gKi8gZS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwiaW1nXCIsXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3R5bGU6IHsgbWF4V2lkdGg6IFwiMzAwcHhcIiwgbWF4SGVpZ2h0OiBcIjMwMHB4XCIgfSxcbiAgICAgICAgICAgIGtleTogdi5uYW1lLFxuICAgICAgICAgICAgc3JjOiBVUkwuY3JlYXRlT2JqZWN0VVJMKHYpLFxuICAgICAgICAgICAgYWx0OiB2Lm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICkpXG4gICAgKTtcbiAgfVxuKTtcbmZ1bmN0aW9uIENhKHQpIHtcbiAgcmV0dXJuIGZ0KHQsIGh0KCkpLm1hcCgobiwgYSkgPT4ge1xuICAgIGlmICh0eXBlb2YgbiA9PSBcInN0cmluZ1wiKVxuICAgICAgcmV0dXJuIG47XG4gICAge1xuICAgICAgY29uc3QgciA9IG4uY29udGVudC50b1N0cmluZygpLCBjID0gbi50eXBlID09PSBcInVybFwiID8gL15odHRwKHM/KTpcXC9cXC8vLnRlc3QocikgPyByIDogYGh0dHBzOi8vJHtyfWAgOiBgbWFpbHRvOiR7cn1gO1xuICAgICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBlLmNyZWF0ZUVsZW1lbnQoXCJhXCIsIHsgY2xhc3NOYW1lOiBcImxrLWNoYXQtbGlua1wiLCBrZXk6IGEsIGhyZWY6IGMsIHRhcmdldDogXCJfYmxhbmtcIiwgcmVsOiBcIm5vcmVmZXJyZXJcIiB9LCByKTtcbiAgICB9XG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgd2EgYXMgQSxcbiAgWHQgYXMgQixcbiAgcmEgYXMgQyxcbiAgY2EgYXMgRCxcbiAgdnQgYXMgRSxcbiAgaGEgYXMgRixcbiAgdmEgYXMgRyxcbiAgaWUgYXMgSCxcbiAgRXQgYXMgSSxcbiAgcHQgYXMgSixcbiAgd3QgYXMgSyxcbiAgcGEgYXMgTCxcbiAgdWEgYXMgTSxcbiAga3QgYXMgTixcbiAgUnQgYXMgTyxcbiAgQnQgYXMgUCxcbiAgTXQgYXMgUSxcbiAgUmEgYXMgUixcbiAgbGEgYXMgUyxcbiAgZmEgYXMgVCxcbiAgeXQgYXMgVSxcbiAgRnQgYXMgVixcbiAgYnQgYXMgVyxcbiAgTWUgYXMgWCxcbiAgU3QgYXMgWSxcbiAgb2UgYXMgWixcbiAgQ3QgYXMgXyxcbiAgU2EgYXMgYSxcbiAgUHQgYXMgYixcbiAgc2EgYXMgYyxcbiAgaWEgYXMgZCxcbiAgb2EgYXMgZSxcbiAgbWEgYXMgZixcbiAgRWEgYXMgZyxcbiAgZ2EgYXMgaCxcbiAgYmEgYXMgaSxcbiAgSWUgYXMgaixcbiAgeWEgYXMgayxcbiAgJHQgYXMgbCxcbiAgQ2EgYXMgbSxcbiAgYWEgYXMgbixcbiAgbmEgYXMgbyxcbiAgSXQgYXMgcCxcbiAgZGEgYXMgcSxcbiAgYmUgYXMgcixcbiAgbmUgYXMgcyxcbiAgSyBhcyB0LFxuICBTZSBhcyB1LFxuICBrYSBhcyB2LFxuICBNYSBhcyB3LFxuICBadCBhcyB4LFxuICBIdCBhcyB5LFxuICBndCBhcyB6XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcG9uZW50cy1CZUsydklpYi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/components-BeK2vIib.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/contexts-Cm1aSBTs.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/contexts-Cm1aSBTs.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $: () => (/* binding */ Is),\n/* harmony export */   A: () => (/* binding */ Xo),\n/* harmony export */   B: () => (/* binding */ Lo),\n/* harmony export */   C: () => (/* binding */ lo),\n/* harmony export */   D: () => (/* binding */ ys),\n/* harmony export */   E: () => (/* binding */ as),\n/* harmony export */   F: () => (/* binding */ $s),\n/* harmony export */   G: () => (/* binding */ zo),\n/* harmony export */   H: () => (/* binding */ cs),\n/* harmony export */   I: () => (/* binding */ ls),\n/* harmony export */   J: () => (/* binding */ ts),\n/* harmony export */   K: () => (/* binding */ ns),\n/* harmony export */   L: () => (/* binding */ Io),\n/* harmony export */   M: () => (/* binding */ Jo),\n/* harmony export */   N: () => (/* binding */ xs),\n/* harmony export */   O: () => (/* binding */ Ss),\n/* harmony export */   P: () => (/* binding */ Ts),\n/* harmony export */   Q: () => (/* binding */ gs),\n/* harmony export */   R: () => (/* binding */ Wn),\n/* harmony export */   S: () => (/* binding */ ds),\n/* harmony export */   T: () => (/* binding */ ps),\n/* harmony export */   U: () => (/* binding */ Ki),\n/* harmony export */   V: () => (/* binding */ As),\n/* harmony export */   W: () => (/* binding */ Go),\n/* harmony export */   X: () => (/* binding */ Bt),\n/* harmony export */   Y: () => (/* binding */ Zo),\n/* harmony export */   Z: () => (/* binding */ ws),\n/* harmony export */   _: () => (/* binding */ Rs),\n/* harmony export */   a: () => (/* binding */ Ds),\n/* harmony export */   a0: () => (/* binding */ is),\n/* harmony export */   a1: () => (/* binding */ j),\n/* harmony export */   a2: () => (/* binding */ Os),\n/* harmony export */   a3: () => (/* binding */ Ls),\n/* harmony export */   a4: () => (/* binding */ ks),\n/* harmony export */   a5: () => (/* binding */ Ko),\n/* harmony export */   a6: () => (/* binding */ qo),\n/* harmony export */   a7: () => (/* binding */ fs),\n/* harmony export */   a8: () => (/* binding */ os),\n/* harmony export */   a9: () => (/* binding */ Ms),\n/* harmony export */   aa: () => (/* binding */ ho),\n/* harmony export */   ab: () => (/* binding */ Un),\n/* harmony export */   ac: () => (/* binding */ Nn),\n/* harmony export */   ad: () => (/* binding */ bs),\n/* harmony export */   ae: () => (/* binding */ Mo),\n/* harmony export */   af: () => (/* binding */ Ar),\n/* harmony export */   ag: () => (/* binding */ jn),\n/* harmony export */   ah: () => (/* binding */ Fn),\n/* harmony export */   ai: () => (/* binding */ zs),\n/* harmony export */   aj: () => (/* binding */ _s),\n/* harmony export */   ak: () => (/* binding */ No),\n/* harmony export */   al: () => (/* binding */ Fs),\n/* harmony export */   am: () => (/* binding */ Bo),\n/* harmony export */   an: () => (/* binding */ Wo),\n/* harmony export */   ao: () => (/* binding */ Uo),\n/* harmony export */   ap: () => (/* binding */ jo),\n/* harmony export */   aq: () => (/* binding */ Yo),\n/* harmony export */   ar: () => (/* binding */ Ns),\n/* harmony export */   as: () => (/* binding */ Do),\n/* harmony export */   at: () => (/* binding */ Fo),\n/* harmony export */   au: () => (/* binding */ Vo),\n/* harmony export */   av: () => (/* binding */ Ho),\n/* harmony export */   aw: () => (/* binding */ Ws),\n/* harmony export */   ax: () => (/* binding */ Us),\n/* harmony export */   b: () => (/* binding */ Cs),\n/* harmony export */   c: () => (/* binding */ Bs),\n/* harmony export */   d: () => (/* binding */ ms),\n/* harmony export */   e: () => (/* binding */ es),\n/* harmony export */   f: () => (/* binding */ Vs),\n/* harmony export */   g: () => (/* binding */ mo),\n/* harmony export */   h: () => (/* binding */ vs),\n/* harmony export */   i: () => (/* binding */ js),\n/* harmony export */   j: () => (/* binding */ ko),\n/* harmony export */   k: () => (/* binding */ Es),\n/* harmony export */   l: () => (/* binding */ _),\n/* harmony export */   m: () => (/* binding */ $o),\n/* harmony export */   n: () => (/* binding */ Yi),\n/* harmony export */   o: () => (/* binding */ po),\n/* harmony export */   p: () => (/* binding */ N),\n/* harmony export */   q: () => (/* binding */ ss),\n/* harmony export */   r: () => (/* binding */ ao),\n/* harmony export */   s: () => (/* binding */ Ps),\n/* harmony export */   t: () => (/* binding */ In),\n/* harmony export */   u: () => (/* binding */ Hs),\n/* harmony export */   v: () => (/* binding */ us),\n/* harmony export */   w: () => (/* binding */ _o),\n/* harmony export */   x: () => (/* binding */ rs),\n/* harmony export */   y: () => (/* binding */ hs),\n/* harmony export */   z: () => (/* binding */ Qo)\n/* harmony export */ });\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n\n\nconst De = Math.min, se = Math.max, $e = Math.round, Le = Math.floor, G = (e) => ({\n  x: e,\n  y: e\n}), Yn = {\n  left: \"right\",\n  right: \"left\",\n  bottom: \"top\",\n  top: \"bottom\"\n}, qn = {\n  start: \"end\",\n  end: \"start\"\n};\nfunction Et(e, t, n) {\n  return se(e, De(t, n));\n}\nfunction He(e, t) {\n  return typeof e == \"function\" ? e(t) : e;\n}\nfunction ae(e) {\n  return e.split(\"-\")[0];\n}\nfunction ze(e) {\n  return e.split(\"-\")[1];\n}\nfunction qt(e) {\n  return e === \"x\" ? \"y\" : \"x\";\n}\nfunction Kt(e) {\n  return e === \"y\" ? \"height\" : \"width\";\n}\nfunction he(e) {\n  return [\"top\", \"bottom\"].includes(ae(e)) ? \"y\" : \"x\";\n}\nfunction Gt(e) {\n  return qt(he(e));\n}\nfunction Kn(e, t, n) {\n  n === void 0 && (n = !1);\n  const r = ze(e), i = Gt(e), o = Kt(i);\n  let s = i === \"x\" ? r === (n ? \"end\" : \"start\") ? \"right\" : \"left\" : r === \"start\" ? \"bottom\" : \"top\";\n  return t.reference[o] > t.floating[o] && (s = Ne(s)), [s, Ne(s)];\n}\nfunction Gn(e) {\n  const t = Ne(e);\n  return [it(e), t, it(t)];\n}\nfunction it(e) {\n  return e.replace(/start|end/g, (t) => qn[t]);\n}\nfunction Qn(e, t, n) {\n  const r = [\"left\", \"right\"], i = [\"right\", \"left\"], o = [\"top\", \"bottom\"], s = [\"bottom\", \"top\"];\n  switch (e) {\n    case \"top\":\n    case \"bottom\":\n      return n ? t ? i : r : t ? r : i;\n    case \"left\":\n    case \"right\":\n      return t ? o : s;\n    default:\n      return [];\n  }\n}\nfunction Jn(e, t, n, r) {\n  const i = ze(e);\n  let o = Qn(ae(e), n === \"start\", r);\n  return i && (o = o.map((s) => s + \"-\" + i), t && (o = o.concat(o.map(it)))), o;\n}\nfunction Ne(e) {\n  return e.replace(/left|right|bottom|top/g, (t) => Yn[t]);\n}\nfunction Xn(e) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...e\n  };\n}\nfunction Zn(e) {\n  return typeof e != \"number\" ? Xn(e) : {\n    top: e,\n    right: e,\n    bottom: e,\n    left: e\n  };\n}\nfunction Fe(e) {\n  const {\n    x: t,\n    y: n,\n    width: r,\n    height: i\n  } = e;\n  return {\n    width: r,\n    height: i,\n    top: n,\n    left: t,\n    right: t + r,\n    bottom: n + i,\n    x: t,\n    y: n\n  };\n}\nfunction Ct(e, t, n) {\n  let {\n    reference: r,\n    floating: i\n  } = e;\n  const o = he(t), s = Gt(t), a = Kt(s), c = ae(t), u = o === \"y\", l = r.x + r.width / 2 - i.width / 2, f = r.y + r.height / 2 - i.height / 2, v = r[a] / 2 - i[a] / 2;\n  let d;\n  switch (c) {\n    case \"top\":\n      d = {\n        x: l,\n        y: r.y - i.height\n      };\n      break;\n    case \"bottom\":\n      d = {\n        x: l,\n        y: r.y + r.height\n      };\n      break;\n    case \"right\":\n      d = {\n        x: r.x + r.width,\n        y: f\n      };\n      break;\n    case \"left\":\n      d = {\n        x: r.x - i.width,\n        y: f\n      };\n      break;\n    default:\n      d = {\n        x: r.x,\n        y: r.y\n      };\n  }\n  switch (ze(t)) {\n    case \"start\":\n      d[s] -= v * (n && u ? -1 : 1);\n      break;\n    case \"end\":\n      d[s] += v * (n && u ? -1 : 1);\n      break;\n  }\n  return d;\n}\nconst er = async (e, t, n) => {\n  const {\n    placement: r = \"bottom\",\n    strategy: i = \"absolute\",\n    middleware: o = [],\n    platform: s\n  } = n, a = o.filter(Boolean), c = await (s.isRTL == null ? void 0 : s.isRTL(t));\n  let u = await s.getElementRects({\n    reference: e,\n    floating: t,\n    strategy: i\n  }), {\n    x: l,\n    y: f\n  } = Ct(u, r, c), v = r, d = {}, m = 0;\n  for (let p = 0; p < a.length; p++) {\n    const {\n      name: g,\n      fn: h\n    } = a[p], {\n      x,\n      y: E,\n      data: P,\n      reset: b\n    } = await h({\n      x: l,\n      y: f,\n      initialPlacement: r,\n      placement: v,\n      strategy: i,\n      middlewareData: d,\n      rects: u,\n      platform: s,\n      elements: {\n        reference: e,\n        floating: t\n      }\n    });\n    l = x ?? l, f = E ?? f, d = {\n      ...d,\n      [g]: {\n        ...d[g],\n        ...P\n      }\n    }, b && m <= 50 && (m++, typeof b == \"object\" && (b.placement && (v = b.placement), b.rects && (u = b.rects === !0 ? await s.getElementRects({\n      reference: e,\n      floating: t,\n      strategy: i\n    }) : b.rects), {\n      x: l,\n      y: f\n    } = Ct(u, v, c)), p = -1);\n  }\n  return {\n    x: l,\n    y: f,\n    placement: v,\n    strategy: i,\n    middlewareData: d\n  };\n};\nasync function Qt(e, t) {\n  var n;\n  t === void 0 && (t = {});\n  const {\n    x: r,\n    y: i,\n    platform: o,\n    rects: s,\n    elements: a,\n    strategy: c\n  } = e, {\n    boundary: u = \"clippingAncestors\",\n    rootBoundary: l = \"viewport\",\n    elementContext: f = \"floating\",\n    altBoundary: v = !1,\n    padding: d = 0\n  } = He(t, e), m = Zn(d), g = a[v ? f === \"floating\" ? \"reference\" : \"floating\" : f], h = Fe(await o.getClippingRect({\n    element: (n = await (o.isElement == null ? void 0 : o.isElement(g))) == null || n ? g : g.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(a.floating)),\n    boundary: u,\n    rootBoundary: l,\n    strategy: c\n  })), x = f === \"floating\" ? {\n    x: r,\n    y: i,\n    width: s.floating.width,\n    height: s.floating.height\n  } : s.reference, E = await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(a.floating)), P = await (o.isElement == null ? void 0 : o.isElement(E)) ? await (o.getScale == null ? void 0 : o.getScale(E)) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  }, b = Fe(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements: a,\n    rect: x,\n    offsetParent: E,\n    strategy: c\n  }) : x);\n  return {\n    top: (h.top - b.top + m.top) / P.y,\n    bottom: (b.bottom - h.bottom + m.bottom) / P.y,\n    left: (h.left - b.left + m.left) / P.x,\n    right: (b.right - h.right + m.right) / P.x\n  };\n}\nconst tr = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"flip\",\n    options: e,\n    async fn(t) {\n      var n, r;\n      const {\n        placement: i,\n        middlewareData: o,\n        rects: s,\n        initialPlacement: a,\n        platform: c,\n        elements: u\n      } = t, {\n        mainAxis: l = !0,\n        crossAxis: f = !0,\n        fallbackPlacements: v,\n        fallbackStrategy: d = \"bestFit\",\n        fallbackAxisSideDirection: m = \"none\",\n        flipAlignment: p = !0,\n        ...g\n      } = He(e, t);\n      if ((n = o.arrow) != null && n.alignmentOffset)\n        return {};\n      const h = ae(i), x = he(a), E = ae(a) === a, P = await (c.isRTL == null ? void 0 : c.isRTL(u.floating)), b = v || (E || !p ? [Ne(a)] : Gn(a)), S = m !== \"none\";\n      !v && S && b.push(...Jn(a, p, m, P));\n      const C = [a, ...b], $ = await Qt(t, g), I = [];\n      let z = ((r = o.flip) == null ? void 0 : r.overflows) || [];\n      if (l && I.push($[h]), f) {\n        const K = Kn(i, s, P);\n        I.push($[K[0]], $[K[1]]);\n      }\n      if (z = [...z, {\n        placement: i,\n        overflows: I\n      }], !I.every((K) => K <= 0)) {\n        var T, L;\n        const K = (((T = o.flip) == null ? void 0 : T.index) || 0) + 1, ke = C[K];\n        if (ke)\n          return {\n            data: {\n              index: K,\n              overflows: z\n            },\n            reset: {\n              placement: ke\n            }\n          };\n        let xe = (L = z.filter((fe) => fe.overflows[0] <= 0).sort((fe, te) => fe.overflows[1] - te.overflows[1])[0]) == null ? void 0 : L.placement;\n        if (!xe)\n          switch (d) {\n            case \"bestFit\": {\n              var oe;\n              const fe = (oe = z.filter((te) => {\n                if (S) {\n                  const ne = he(te.placement);\n                  return ne === x || // Create a bias to the `y` side axis due to horizontal\n                  // reading directions favoring greater width.\n                  ne === \"y\";\n                }\n                return !0;\n              }).map((te) => [te.placement, te.overflows.filter((ne) => ne > 0).reduce((ne, Bn) => ne + Bn, 0)]).sort((te, ne) => te[1] - ne[1])[0]) == null ? void 0 : oe[0];\n              fe && (xe = fe);\n              break;\n            }\n            case \"initialPlacement\":\n              xe = a;\n              break;\n          }\n        if (i !== xe)\n          return {\n            reset: {\n              placement: xe\n            }\n          };\n      }\n      return {};\n    }\n  };\n};\nasync function nr(e, t) {\n  const {\n    placement: n,\n    platform: r,\n    elements: i\n  } = e, o = await (r.isRTL == null ? void 0 : r.isRTL(i.floating)), s = ae(n), a = ze(n), c = he(n) === \"y\", u = [\"left\", \"top\"].includes(s) ? -1 : 1, l = o && c ? -1 : 1, f = He(t, e);\n  let {\n    mainAxis: v,\n    crossAxis: d,\n    alignmentAxis: m\n  } = typeof f == \"number\" ? {\n    mainAxis: f,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: f.mainAxis || 0,\n    crossAxis: f.crossAxis || 0,\n    alignmentAxis: f.alignmentAxis\n  };\n  return a && typeof m == \"number\" && (d = a === \"end\" ? m * -1 : m), c ? {\n    x: d * l,\n    y: v * u\n  } : {\n    x: v * u,\n    y: d * l\n  };\n}\nconst rr = function(e) {\n  return e === void 0 && (e = 0), {\n    name: \"offset\",\n    options: e,\n    async fn(t) {\n      var n, r;\n      const {\n        x: i,\n        y: o,\n        placement: s,\n        middlewareData: a\n      } = t, c = await nr(t, e);\n      return s === ((n = a.offset) == null ? void 0 : n.placement) && (r = a.arrow) != null && r.alignmentOffset ? {} : {\n        x: i + c.x,\n        y: o + c.y,\n        data: {\n          ...c,\n          placement: s\n        }\n      };\n    }\n  };\n}, ir = function(e) {\n  return e === void 0 && (e = {}), {\n    name: \"shift\",\n    options: e,\n    async fn(t) {\n      const {\n        x: n,\n        y: r,\n        placement: i\n      } = t, {\n        mainAxis: o = !0,\n        crossAxis: s = !1,\n        limiter: a = {\n          fn: (g) => {\n            let {\n              x: h,\n              y: x\n            } = g;\n            return {\n              x: h,\n              y: x\n            };\n          }\n        },\n        ...c\n      } = He(e, t), u = {\n        x: n,\n        y: r\n      }, l = await Qt(t, c), f = he(ae(i)), v = qt(f);\n      let d = u[v], m = u[f];\n      if (o) {\n        const g = v === \"y\" ? \"top\" : \"left\", h = v === \"y\" ? \"bottom\" : \"right\", x = d + l[g], E = d - l[h];\n        d = Et(x, d, E);\n      }\n      if (s) {\n        const g = f === \"y\" ? \"top\" : \"left\", h = f === \"y\" ? \"bottom\" : \"right\", x = m + l[g], E = m - l[h];\n        m = Et(x, m, E);\n      }\n      const p = a.fn({\n        ...t,\n        [v]: d,\n        [f]: m\n      });\n      return {\n        ...p,\n        data: {\n          x: p.x - n,\n          y: p.y - r,\n          enabled: {\n            [v]: o,\n            [f]: s\n          }\n        }\n      };\n    }\n  };\n};\nfunction Ye() {\n  return typeof window < \"u\";\n}\nfunction be(e) {\n  return Jt(e) ? (e.nodeName || \"\").toLowerCase() : \"#document\";\n}\nfunction U(e) {\n  var t;\n  return (e == null || (t = e.ownerDocument) == null ? void 0 : t.defaultView) || window;\n}\nfunction J(e) {\n  var t;\n  return (t = (Jt(e) ? e.ownerDocument : e.document) || window.document) == null ? void 0 : t.documentElement;\n}\nfunction Jt(e) {\n  return Ye() ? e instanceof Node || e instanceof U(e).Node : !1;\n}\nfunction Y(e) {\n  return Ye() ? e instanceof Element || e instanceof U(e).Element : !1;\n}\nfunction Q(e) {\n  return Ye() ? e instanceof HTMLElement || e instanceof U(e).HTMLElement : !1;\n}\nfunction Pt(e) {\n  return !Ye() || typeof ShadowRoot > \"u\" ? !1 : e instanceof ShadowRoot || e instanceof U(e).ShadowRoot;\n}\nfunction Ae(e) {\n  const {\n    overflow: t,\n    overflowX: n,\n    overflowY: r,\n    display: i\n  } = q(e);\n  return /auto|scroll|overlay|hidden|clip/.test(t + r + n) && ![\"inline\", \"contents\"].includes(i);\n}\nfunction or(e) {\n  return [\"table\", \"td\", \"th\"].includes(be(e));\n}\nfunction qe(e) {\n  return [\":popover-open\", \":modal\"].some((t) => {\n    try {\n      return e.matches(t);\n    } catch {\n      return !1;\n    }\n  });\n}\nfunction ft(e) {\n  const t = dt(), n = Y(e) ? q(e) : e;\n  return [\"transform\", \"translate\", \"scale\", \"rotate\", \"perspective\"].some((r) => n[r] ? n[r] !== \"none\" : !1) || (n.containerType ? n.containerType !== \"normal\" : !1) || !t && (n.backdropFilter ? n.backdropFilter !== \"none\" : !1) || !t && (n.filter ? n.filter !== \"none\" : !1) || [\"transform\", \"translate\", \"scale\", \"rotate\", \"perspective\", \"filter\"].some((r) => (n.willChange || \"\").includes(r)) || [\"paint\", \"layout\", \"strict\", \"content\"].some((r) => (n.contain || \"\").includes(r));\n}\nfunction sr(e) {\n  let t = ie(e);\n  for (; Q(t) && !ve(t); ) {\n    if (ft(t))\n      return t;\n    if (qe(t))\n      return null;\n    t = ie(t);\n  }\n  return null;\n}\nfunction dt() {\n  return typeof CSS > \"u\" || !CSS.supports ? !1 : CSS.supports(\"-webkit-backdrop-filter\", \"none\");\n}\nfunction ve(e) {\n  return [\"html\", \"body\", \"#document\"].includes(be(e));\n}\nfunction q(e) {\n  return U(e).getComputedStyle(e);\n}\nfunction Ke(e) {\n  return Y(e) ? {\n    scrollLeft: e.scrollLeft,\n    scrollTop: e.scrollTop\n  } : {\n    scrollLeft: e.scrollX,\n    scrollTop: e.scrollY\n  };\n}\nfunction ie(e) {\n  if (be(e) === \"html\")\n    return e;\n  const t = (\n    // Step into the shadow DOM of the parent of a slotted node.\n    e.assignedSlot || // DOM Element detected.\n    e.parentNode || // ShadowRoot detected.\n    Pt(e) && e.host || // Fallback.\n    J(e)\n  );\n  return Pt(t) ? t.host : t;\n}\nfunction Xt(e) {\n  const t = ie(e);\n  return ve(t) ? e.ownerDocument ? e.ownerDocument.body : e.body : Q(t) && Ae(t) ? t : Xt(t);\n}\nfunction Ee(e, t, n) {\n  var r;\n  t === void 0 && (t = []), n === void 0 && (n = !0);\n  const i = Xt(e), o = i === ((r = e.ownerDocument) == null ? void 0 : r.body), s = U(i);\n  if (o) {\n    const a = ot(s);\n    return t.concat(s, s.visualViewport || [], Ae(i) ? i : [], a && n ? Ee(a) : []);\n  }\n  return t.concat(i, Ee(i, [], n));\n}\nfunction ot(e) {\n  return e.parent && Object.getPrototypeOf(e.parent) ? e.frameElement : null;\n}\nfunction Zt(e) {\n  const t = q(e);\n  let n = parseFloat(t.width) || 0, r = parseFloat(t.height) || 0;\n  const i = Q(e), o = i ? e.offsetWidth : n, s = i ? e.offsetHeight : r, a = $e(n) !== o || $e(r) !== s;\n  return a && (n = o, r = s), {\n    width: n,\n    height: r,\n    $: a\n  };\n}\nfunction pt(e) {\n  return Y(e) ? e : e.contextElement;\n}\nfunction de(e) {\n  const t = pt(e);\n  if (!Q(t))\n    return G(1);\n  const n = t.getBoundingClientRect(), {\n    width: r,\n    height: i,\n    $: o\n  } = Zt(t);\n  let s = (o ? $e(n.width) : n.width) / r, a = (o ? $e(n.height) : n.height) / i;\n  return (!s || !Number.isFinite(s)) && (s = 1), (!a || !Number.isFinite(a)) && (a = 1), {\n    x: s,\n    y: a\n  };\n}\nconst ar = /* @__PURE__ */ G(0);\nfunction en(e) {\n  const t = U(e);\n  return !dt() || !t.visualViewport ? ar : {\n    x: t.visualViewport.offsetLeft,\n    y: t.visualViewport.offsetTop\n  };\n}\nfunction cr(e, t, n) {\n  return t === void 0 && (t = !1), !n || t && n !== U(e) ? !1 : t;\n}\nfunction ce(e, t, n, r) {\n  t === void 0 && (t = !1), n === void 0 && (n = !1);\n  const i = e.getBoundingClientRect(), o = pt(e);\n  let s = G(1);\n  t && (r ? Y(r) && (s = de(r)) : s = de(e));\n  const a = cr(o, n, r) ? en(o) : G(0);\n  let c = (i.left + a.x) / s.x, u = (i.top + a.y) / s.y, l = i.width / s.x, f = i.height / s.y;\n  if (o) {\n    const v = U(o), d = r && Y(r) ? U(r) : r;\n    let m = v, p = ot(m);\n    for (; p && r && d !== m; ) {\n      const g = de(p), h = p.getBoundingClientRect(), x = q(p), E = h.left + (p.clientLeft + parseFloat(x.paddingLeft)) * g.x, P = h.top + (p.clientTop + parseFloat(x.paddingTop)) * g.y;\n      c *= g.x, u *= g.y, l *= g.x, f *= g.y, c += E, u += P, m = U(p), p = ot(m);\n    }\n  }\n  return Fe({\n    width: l,\n    height: f,\n    x: c,\n    y: u\n  });\n}\nfunction ht(e, t) {\n  const n = Ke(e).scrollLeft;\n  return t ? t.left + n : ce(J(e)).left + n;\n}\nfunction tn(e, t, n) {\n  n === void 0 && (n = !1);\n  const r = e.getBoundingClientRect(), i = r.left + t.scrollLeft - (n ? 0 : (\n    // RTL <body> scrollbar.\n    ht(e, r)\n  )), o = r.top + t.scrollTop;\n  return {\n    x: i,\n    y: o\n  };\n}\nfunction ur(e) {\n  let {\n    elements: t,\n    rect: n,\n    offsetParent: r,\n    strategy: i\n  } = e;\n  const o = i === \"fixed\", s = J(r), a = t ? qe(t.floating) : !1;\n  if (r === s || a && o)\n    return n;\n  let c = {\n    scrollLeft: 0,\n    scrollTop: 0\n  }, u = G(1);\n  const l = G(0), f = Q(r);\n  if ((f || !f && !o) && ((be(r) !== \"body\" || Ae(s)) && (c = Ke(r)), Q(r))) {\n    const d = ce(r);\n    u = de(r), l.x = d.x + r.clientLeft, l.y = d.y + r.clientTop;\n  }\n  const v = s && !f && !o ? tn(s, c, !0) : G(0);\n  return {\n    width: n.width * u.x,\n    height: n.height * u.y,\n    x: n.x * u.x - c.scrollLeft * u.x + l.x + v.x,\n    y: n.y * u.y - c.scrollTop * u.y + l.y + v.y\n  };\n}\nfunction lr(e) {\n  return Array.from(e.getClientRects());\n}\nfunction fr(e) {\n  const t = J(e), n = Ke(e), r = e.ownerDocument.body, i = se(t.scrollWidth, t.clientWidth, r.scrollWidth, r.clientWidth), o = se(t.scrollHeight, t.clientHeight, r.scrollHeight, r.clientHeight);\n  let s = -n.scrollLeft + ht(e);\n  const a = -n.scrollTop;\n  return q(r).direction === \"rtl\" && (s += se(t.clientWidth, r.clientWidth) - i), {\n    width: i,\n    height: o,\n    x: s,\n    y: a\n  };\n}\nfunction dr(e, t) {\n  const n = U(e), r = J(e), i = n.visualViewport;\n  let o = r.clientWidth, s = r.clientHeight, a = 0, c = 0;\n  if (i) {\n    o = i.width, s = i.height;\n    const u = dt();\n    (!u || u && t === \"fixed\") && (a = i.offsetLeft, c = i.offsetTop);\n  }\n  return {\n    width: o,\n    height: s,\n    x: a,\n    y: c\n  };\n}\nfunction pr(e, t) {\n  const n = ce(e, !0, t === \"fixed\"), r = n.top + e.clientTop, i = n.left + e.clientLeft, o = Q(e) ? de(e) : G(1), s = e.clientWidth * o.x, a = e.clientHeight * o.y, c = i * o.x, u = r * o.y;\n  return {\n    width: s,\n    height: a,\n    x: c,\n    y: u\n  };\n}\nfunction At(e, t, n) {\n  let r;\n  if (t === \"viewport\")\n    r = dr(e, n);\n  else if (t === \"document\")\n    r = fr(J(e));\n  else if (Y(t))\n    r = pr(t, n);\n  else {\n    const i = en(e);\n    r = {\n      x: t.x - i.x,\n      y: t.y - i.y,\n      width: t.width,\n      height: t.height\n    };\n  }\n  return Fe(r);\n}\nfunction nn(e, t) {\n  const n = ie(e);\n  return n === t || !Y(n) || ve(n) ? !1 : q(n).position === \"fixed\" || nn(n, t);\n}\nfunction hr(e, t) {\n  const n = t.get(e);\n  if (n)\n    return n;\n  let r = Ee(e, [], !1).filter((a) => Y(a) && be(a) !== \"body\"), i = null;\n  const o = q(e).position === \"fixed\";\n  let s = o ? ie(e) : e;\n  for (; Y(s) && !ve(s); ) {\n    const a = q(s), c = ft(s);\n    !c && a.position === \"fixed\" && (i = null), (o ? !c && !i : !c && a.position === \"static\" && !!i && [\"absolute\", \"fixed\"].includes(i.position) || Ae(s) && !c && nn(e, s)) ? r = r.filter((l) => l !== s) : i = a, s = ie(s);\n  }\n  return t.set(e, r), r;\n}\nfunction vr(e) {\n  let {\n    element: t,\n    boundary: n,\n    rootBoundary: r,\n    strategy: i\n  } = e;\n  const s = [...n === \"clippingAncestors\" ? qe(t) ? [] : hr(t, this._c) : [].concat(n), r], a = s[0], c = s.reduce((u, l) => {\n    const f = At(t, l, i);\n    return u.top = se(f.top, u.top), u.right = De(f.right, u.right), u.bottom = De(f.bottom, u.bottom), u.left = se(f.left, u.left), u;\n  }, At(t, a, i));\n  return {\n    width: c.right - c.left,\n    height: c.bottom - c.top,\n    x: c.left,\n    y: c.top\n  };\n}\nfunction mr(e) {\n  const {\n    width: t,\n    height: n\n  } = Zt(e);\n  return {\n    width: t,\n    height: n\n  };\n}\nfunction gr(e, t, n) {\n  const r = Q(t), i = J(t), o = n === \"fixed\", s = ce(e, !0, o, t);\n  let a = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const c = G(0);\n  if (r || !r && !o)\n    if ((be(t) !== \"body\" || Ae(i)) && (a = Ke(t)), r) {\n      const v = ce(t, !0, o, t);\n      c.x = v.x + t.clientLeft, c.y = v.y + t.clientTop;\n    } else i && (c.x = ht(i));\n  const u = i && !r && !o ? tn(i, a) : G(0), l = s.left + a.scrollLeft - c.x - u.x, f = s.top + a.scrollTop - c.y - u.y;\n  return {\n    x: l,\n    y: f,\n    width: s.width,\n    height: s.height\n  };\n}\nfunction Xe(e) {\n  return q(e).position === \"static\";\n}\nfunction Ot(e, t) {\n  if (!Q(e) || q(e).position === \"fixed\")\n    return null;\n  if (t)\n    return t(e);\n  let n = e.offsetParent;\n  return J(e) === n && (n = n.ownerDocument.body), n;\n}\nfunction rn(e, t) {\n  const n = U(e);\n  if (qe(e))\n    return n;\n  if (!Q(e)) {\n    let i = ie(e);\n    for (; i && !ve(i); ) {\n      if (Y(i) && !Xe(i))\n        return i;\n      i = ie(i);\n    }\n    return n;\n  }\n  let r = Ot(e, t);\n  for (; r && or(r) && Xe(r); )\n    r = Ot(r, t);\n  return r && ve(r) && Xe(r) && !ft(r) ? n : r || sr(e) || n;\n}\nconst br = async function(e) {\n  const t = this.getOffsetParent || rn, n = this.getDimensions, r = await n(e.floating);\n  return {\n    reference: gr(e.reference, await t(e.floating), e.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: r.width,\n      height: r.height\n    }\n  };\n};\nfunction yr(e) {\n  return q(e).direction === \"rtl\";\n}\nconst wr = {\n  convertOffsetParentRelativeRectToViewportRelativeRect: ur,\n  getDocumentElement: J,\n  getClippingRect: vr,\n  getOffsetParent: rn,\n  getElementRects: br,\n  getClientRects: lr,\n  getDimensions: mr,\n  getScale: de,\n  isElement: Y,\n  isRTL: yr\n};\nfunction on(e, t) {\n  return e.x === t.x && e.y === t.y && e.width === t.width && e.height === t.height;\n}\nfunction xr(e, t) {\n  let n = null, r;\n  const i = J(e);\n  function o() {\n    var a;\n    clearTimeout(r), (a = n) == null || a.disconnect(), n = null;\n  }\n  function s(a, c) {\n    a === void 0 && (a = !1), c === void 0 && (c = 1), o();\n    const u = e.getBoundingClientRect(), {\n      left: l,\n      top: f,\n      width: v,\n      height: d\n    } = u;\n    if (a || t(), !v || !d)\n      return;\n    const m = Le(f), p = Le(i.clientWidth - (l + v)), g = Le(i.clientHeight - (f + d)), h = Le(l), E = {\n      rootMargin: -m + \"px \" + -p + \"px \" + -g + \"px \" + -h + \"px\",\n      threshold: se(0, De(1, c)) || 1\n    };\n    let P = !0;\n    function b(S) {\n      const C = S[0].intersectionRatio;\n      if (C !== c) {\n        if (!P)\n          return s();\n        C ? s(!1, C) : r = setTimeout(() => {\n          s(!1, 1e-7);\n        }, 1e3);\n      }\n      C === 1 && !on(u, e.getBoundingClientRect()) && s(), P = !1;\n    }\n    try {\n      n = new IntersectionObserver(b, {\n        ...E,\n        // Handle <iframe>s\n        root: i.ownerDocument\n      });\n    } catch {\n      n = new IntersectionObserver(b, E);\n    }\n    n.observe(e);\n  }\n  return s(!0), o;\n}\nfunction Sr(e, t, n, r) {\n  r === void 0 && (r = {});\n  const {\n    ancestorScroll: i = !0,\n    ancestorResize: o = !0,\n    elementResize: s = typeof ResizeObserver == \"function\",\n    layoutShift: a = typeof IntersectionObserver == \"function\",\n    animationFrame: c = !1\n  } = r, u = pt(e), l = i || o ? [...u ? Ee(u) : [], ...Ee(t)] : [];\n  l.forEach((h) => {\n    i && h.addEventListener(\"scroll\", n, {\n      passive: !0\n    }), o && h.addEventListener(\"resize\", n);\n  });\n  const f = u && a ? xr(u, n) : null;\n  let v = -1, d = null;\n  s && (d = new ResizeObserver((h) => {\n    let [x] = h;\n    x && x.target === u && d && (d.unobserve(t), cancelAnimationFrame(v), v = requestAnimationFrame(() => {\n      var E;\n      (E = d) == null || E.observe(t);\n    })), n();\n  }), u && !c && d.observe(u), d.observe(t));\n  let m, p = c ? ce(e) : null;\n  c && g();\n  function g() {\n    const h = ce(e);\n    p && !on(p, h) && n(), p = h, m = requestAnimationFrame(g);\n  }\n  return n(), () => {\n    var h;\n    l.forEach((x) => {\n      i && x.removeEventListener(\"scroll\", n), o && x.removeEventListener(\"resize\", n);\n    }), f == null || f(), (h = d) == null || h.disconnect(), d = null, c && cancelAnimationFrame(m);\n  };\n}\nconst Tr = rr, Er = ir, Cr = tr, Pr = (e, t, n) => {\n  const r = /* @__PURE__ */ new Map(), i = {\n    platform: wr,\n    ...n\n  }, o = {\n    ...i.platform,\n    _c: r\n  };\n  return er(e, t, {\n    ...i,\n    platform: o\n  });\n};\nvar Mo = typeof globalThis < \"u\" ? globalThis : typeof window < \"u\" ? window : typeof global < \"u\" ? global : typeof self < \"u\" ? self : {};\nfunction Ar(e) {\n  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, \"default\") ? e.default : e;\n}\nvar Re = { exports: {} }, Or = Re.exports, kt;\nfunction kr() {\n  return kt || (kt = 1, function(e) {\n    (function(t, n) {\n      e.exports ? e.exports = n() : t.log = n();\n    })(Or, function() {\n      var t = function() {\n      }, n = \"undefined\", r = typeof window !== n && typeof window.navigator !== n && /Trident\\/|MSIE /.test(window.navigator.userAgent), i = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n      ], o = {}, s = null;\n      function a(p, g) {\n        var h = p[g];\n        if (typeof h.bind == \"function\")\n          return h.bind(p);\n        try {\n          return Function.prototype.bind.call(h, p);\n        } catch {\n          return function() {\n            return Function.prototype.apply.apply(h, [p, arguments]);\n          };\n        }\n      }\n      function c() {\n        console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();\n      }\n      function u(p) {\n        return p === \"debug\" && (p = \"log\"), typeof console === n ? !1 : p === \"trace\" && r ? c : console[p] !== void 0 ? a(console, p) : console.log !== void 0 ? a(console, \"log\") : t;\n      }\n      function l() {\n        for (var p = this.getLevel(), g = 0; g < i.length; g++) {\n          var h = i[g];\n          this[h] = g < p ? t : this.methodFactory(h, p, this.name);\n        }\n        if (this.log = this.debug, typeof console === n && p < this.levels.SILENT)\n          return \"No console available for logging\";\n      }\n      function f(p) {\n        return function() {\n          typeof console !== n && (l.call(this), this[p].apply(this, arguments));\n        };\n      }\n      function v(p, g, h) {\n        return u(p) || f.apply(this, arguments);\n      }\n      function d(p, g) {\n        var h = this, x, E, P, b = \"loglevel\";\n        typeof p == \"string\" ? b += \":\" + p : typeof p == \"symbol\" && (b = void 0);\n        function S(T) {\n          var L = (i[T] || \"silent\").toUpperCase();\n          if (!(typeof window === n || !b)) {\n            try {\n              window.localStorage[b] = L;\n              return;\n            } catch {\n            }\n            try {\n              window.document.cookie = encodeURIComponent(b) + \"=\" + L + \";\";\n            } catch {\n            }\n          }\n        }\n        function C() {\n          var T;\n          if (!(typeof window === n || !b)) {\n            try {\n              T = window.localStorage[b];\n            } catch {\n            }\n            if (typeof T === n)\n              try {\n                var L = window.document.cookie, oe = encodeURIComponent(b), K = L.indexOf(oe + \"=\");\n                K !== -1 && (T = /^([^;]+)/.exec(\n                  L.slice(K + oe.length + 1)\n                )[1]);\n              } catch {\n              }\n            return h.levels[T] === void 0 && (T = void 0), T;\n          }\n        }\n        function $() {\n          if (!(typeof window === n || !b)) {\n            try {\n              window.localStorage.removeItem(b);\n            } catch {\n            }\n            try {\n              window.document.cookie = encodeURIComponent(b) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n            } catch {\n            }\n          }\n        }\n        function I(T) {\n          var L = T;\n          if (typeof L == \"string\" && h.levels[L.toUpperCase()] !== void 0 && (L = h.levels[L.toUpperCase()]), typeof L == \"number\" && L >= 0 && L <= h.levels.SILENT)\n            return L;\n          throw new TypeError(\"log.setLevel() called with invalid level: \" + T);\n        }\n        h.name = p, h.levels = {\n          TRACE: 0,\n          DEBUG: 1,\n          INFO: 2,\n          WARN: 3,\n          ERROR: 4,\n          SILENT: 5\n        }, h.methodFactory = g || v, h.getLevel = function() {\n          return P ?? E ?? x;\n        }, h.setLevel = function(T, L) {\n          return P = I(T), L !== !1 && S(P), l.call(h);\n        }, h.setDefaultLevel = function(T) {\n          E = I(T), C() || h.setLevel(T, !1);\n        }, h.resetLevel = function() {\n          P = null, $(), l.call(h);\n        }, h.enableAll = function(T) {\n          h.setLevel(h.levels.TRACE, T);\n        }, h.disableAll = function(T) {\n          h.setLevel(h.levels.SILENT, T);\n        }, h.rebuild = function() {\n          if (s !== h && (x = I(s.getLevel())), l.call(h), s === h)\n            for (var T in o)\n              o[T].rebuild();\n        }, x = I(\n          s ? s.getLevel() : \"WARN\"\n        );\n        var z = C();\n        z != null && (P = I(z)), l.call(h);\n      }\n      s = new d(), s.getLogger = function(g) {\n        if (typeof g != \"symbol\" && typeof g != \"string\" || g === \"\")\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        var h = o[g];\n        return h || (h = o[g] = new d(\n          g,\n          s.methodFactory\n        )), h;\n      };\n      var m = typeof window !== n ? window.log : void 0;\n      return s.noConflict = function() {\n        return typeof window !== n && window.log === s && (window.log = m), s;\n      }, s.getLoggers = function() {\n        return o;\n      }, s.default = s, s;\n    });\n  }(Re)), Re.exports;\n}\nvar Lr = kr();\nconst _r = /* @__PURE__ */ Ar(Lr);\nvar st = function(e, t) {\n  return st = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {\n    n.__proto__ = r;\n  } || function(n, r) {\n    for (var i in r) Object.prototype.hasOwnProperty.call(r, i) && (n[i] = r[i]);\n  }, st(e, t);\n};\nfunction ee(e, t) {\n  if (typeof t != \"function\" && t !== null)\n    throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n  st(e, t);\n  function n() {\n    this.constructor = e;\n  }\n  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());\n}\nfunction Ir(e, t, n, r) {\n  function i(o) {\n    return o instanceof n ? o : new n(function(s) {\n      s(o);\n    });\n  }\n  return new (n || (n = Promise))(function(o, s) {\n    function a(l) {\n      try {\n        u(r.next(l));\n      } catch (f) {\n        s(f);\n      }\n    }\n    function c(l) {\n      try {\n        u(r.throw(l));\n      } catch (f) {\n        s(f);\n      }\n    }\n    function u(l) {\n      l.done ? o(l.value) : i(l.value).then(a, c);\n    }\n    u((r = r.apply(e, t || [])).next());\n  });\n}\nfunction sn(e, t) {\n  var n = { label: 0, sent: function() {\n    if (o[0] & 1) throw o[1];\n    return o[1];\n  }, trys: [], ops: [] }, r, i, o, s = Object.create((typeof Iterator == \"function\" ? Iterator : Object).prototype);\n  return s.next = a(0), s.throw = a(1), s.return = a(2), typeof Symbol == \"function\" && (s[Symbol.iterator] = function() {\n    return this;\n  }), s;\n  function a(u) {\n    return function(l) {\n      return c([u, l]);\n    };\n  }\n  function c(u) {\n    if (r) throw new TypeError(\"Generator is already executing.\");\n    for (; s && (s = 0, u[0] && (n = 0)), n; ) try {\n      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;\n      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {\n        case 0:\n        case 1:\n          o = u;\n          break;\n        case 4:\n          return n.label++, { value: u[1], done: !1 };\n        case 5:\n          n.label++, i = u[1], u = [0];\n          continue;\n        case 7:\n          u = n.ops.pop(), n.trys.pop();\n          continue;\n        default:\n          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {\n            n = 0;\n            continue;\n          }\n          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {\n            n.label = u[1];\n            break;\n          }\n          if (u[0] === 6 && n.label < o[1]) {\n            n.label = o[1], o = u;\n            break;\n          }\n          if (o && n.label < o[2]) {\n            n.label = o[2], n.ops.push(u);\n            break;\n          }\n          o[2] && n.ops.pop(), n.trys.pop();\n          continue;\n      }\n      u = t.call(e, n);\n    } catch (l) {\n      u = [6, l], i = 0;\n    } finally {\n      r = o = 0;\n    }\n    if (u[0] & 5) throw u[1];\n    return { value: u[0] ? u[1] : void 0, done: !0 };\n  }\n}\nfunction me(e) {\n  var t = typeof Symbol == \"function\" && Symbol.iterator, n = t && e[t], r = 0;\n  if (n) return n.call(e);\n  if (e && typeof e.length == \"number\") return {\n    next: function() {\n      return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };\n    }\n  };\n  throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction ue(e, t) {\n  var n = typeof Symbol == \"function\" && e[Symbol.iterator];\n  if (!n) return e;\n  var r = n.call(e), i, o = [], s;\n  try {\n    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);\n  } catch (a) {\n    s = { error: a };\n  } finally {\n    try {\n      i && !i.done && (n = r.return) && n.call(r);\n    } finally {\n      if (s) throw s.error;\n    }\n  }\n  return o;\n}\nfunction ge(e, t, n) {\n  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)\n    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);\n  return e.concat(o || Array.prototype.slice.call(t));\n}\nfunction pe(e) {\n  return this instanceof pe ? (this.v = e, this) : new pe(e);\n}\nfunction Rr(e, t, n) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var r = n.apply(e, t || []), i, o = [];\n  return i = Object.create((typeof AsyncIterator == \"function\" ? AsyncIterator : Object).prototype), a(\"next\"), a(\"throw\"), a(\"return\", s), i[Symbol.asyncIterator] = function() {\n    return this;\n  }, i;\n  function s(d) {\n    return function(m) {\n      return Promise.resolve(m).then(d, f);\n    };\n  }\n  function a(d, m) {\n    r[d] && (i[d] = function(p) {\n      return new Promise(function(g, h) {\n        o.push([d, p, g, h]) > 1 || c(d, p);\n      });\n    }, m && (i[d] = m(i[d])));\n  }\n  function c(d, m) {\n    try {\n      u(r[d](m));\n    } catch (p) {\n      v(o[0][3], p);\n    }\n  }\n  function u(d) {\n    d.value instanceof pe ? Promise.resolve(d.value.v).then(l, f) : v(o[0][2], d);\n  }\n  function l(d) {\n    c(\"next\", d);\n  }\n  function f(d) {\n    c(\"throw\", d);\n  }\n  function v(d, m) {\n    d(m), o.shift(), o.length && c(o[0][0], o[0][1]);\n  }\n}\nfunction Mr(e) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var t = e[Symbol.asyncIterator], n;\n  return t ? t.call(e) : (e = typeof me == \"function\" ? me(e) : e[Symbol.iterator](), n = {}, r(\"next\"), r(\"throw\"), r(\"return\"), n[Symbol.asyncIterator] = function() {\n    return this;\n  }, n);\n  function r(o) {\n    n[o] = e[o] && function(s) {\n      return new Promise(function(a, c) {\n        s = e[o](s), i(a, c, s.done, s.value);\n      });\n    };\n  }\n  function i(o, s, a, c) {\n    Promise.resolve(c).then(function(u) {\n      o({ value: u, done: a });\n    }, s);\n  }\n}\nfunction A(e) {\n  return typeof e == \"function\";\n}\nfunction vt(e) {\n  var t = function(r) {\n    Error.call(r), r.stack = new Error().stack;\n  }, n = e(t);\n  return n.prototype = Object.create(Error.prototype), n.prototype.constructor = n, n;\n}\nvar Ze = vt(function(e) {\n  return function(n) {\n    e(this), this.message = n ? n.length + ` errors occurred during unsubscription:\n` + n.map(function(r, i) {\n      return i + 1 + \") \" + r.toString();\n    }).join(`\n  `) : \"\", this.name = \"UnsubscriptionError\", this.errors = n;\n  };\n});\nfunction Ue(e, t) {\n  if (e) {\n    var n = e.indexOf(t);\n    0 <= n && e.splice(n, 1);\n  }\n}\nvar Oe = function() {\n  function e(t) {\n    this.initialTeardown = t, this.closed = !1, this._parentage = null, this._finalizers = null;\n  }\n  return e.prototype.unsubscribe = function() {\n    var t, n, r, i, o;\n    if (!this.closed) {\n      this.closed = !0;\n      var s = this._parentage;\n      if (s)\n        if (this._parentage = null, Array.isArray(s))\n          try {\n            for (var a = me(s), c = a.next(); !c.done; c = a.next()) {\n              var u = c.value;\n              u.remove(this);\n            }\n          } catch (p) {\n            t = { error: p };\n          } finally {\n            try {\n              c && !c.done && (n = a.return) && n.call(a);\n            } finally {\n              if (t) throw t.error;\n            }\n          }\n        else\n          s.remove(this);\n      var l = this.initialTeardown;\n      if (A(l))\n        try {\n          l();\n        } catch (p) {\n          o = p instanceof Ze ? p.errors : [p];\n        }\n      var f = this._finalizers;\n      if (f) {\n        this._finalizers = null;\n        try {\n          for (var v = me(f), d = v.next(); !d.done; d = v.next()) {\n            var m = d.value;\n            try {\n              Lt(m);\n            } catch (p) {\n              o = o ?? [], p instanceof Ze ? o = ge(ge([], ue(o)), ue(p.errors)) : o.push(p);\n            }\n          }\n        } catch (p) {\n          r = { error: p };\n        } finally {\n          try {\n            d && !d.done && (i = v.return) && i.call(v);\n          } finally {\n            if (r) throw r.error;\n          }\n        }\n      }\n      if (o)\n        throw new Ze(o);\n    }\n  }, e.prototype.add = function(t) {\n    var n;\n    if (t && t !== this)\n      if (this.closed)\n        Lt(t);\n      else {\n        if (t instanceof e) {\n          if (t.closed || t._hasParent(this))\n            return;\n          t._addParent(this);\n        }\n        (this._finalizers = (n = this._finalizers) !== null && n !== void 0 ? n : []).push(t);\n      }\n  }, e.prototype._hasParent = function(t) {\n    var n = this._parentage;\n    return n === t || Array.isArray(n) && n.includes(t);\n  }, e.prototype._addParent = function(t) {\n    var n = this._parentage;\n    this._parentage = Array.isArray(n) ? (n.push(t), n) : n ? [n, t] : t;\n  }, e.prototype._removeParent = function(t) {\n    var n = this._parentage;\n    n === t ? this._parentage = null : Array.isArray(n) && Ue(n, t);\n  }, e.prototype.remove = function(t) {\n    var n = this._finalizers;\n    n && Ue(n, t), t instanceof e && t._removeParent(this);\n  }, e.EMPTY = function() {\n    var t = new e();\n    return t.closed = !0, t;\n  }(), e;\n}(), an = Oe.EMPTY;\nfunction cn(e) {\n  return e instanceof Oe || e && \"closed\" in e && A(e.remove) && A(e.add) && A(e.unsubscribe);\n}\nfunction Lt(e) {\n  A(e) ? e() : e.unsubscribe();\n}\nvar Dr = {\n  Promise: void 0\n}, $r = {\n  setTimeout: function(e, t) {\n    for (var n = [], r = 2; r < arguments.length; r++)\n      n[r - 2] = arguments[r];\n    return setTimeout.apply(void 0, ge([e, t], ue(n)));\n  },\n  clearTimeout: function(e) {\n    return clearTimeout(e);\n  },\n  delegate: void 0\n};\nfunction un(e) {\n  $r.setTimeout(function() {\n    throw e;\n  });\n}\nfunction je() {\n}\nfunction Me(e) {\n  e();\n}\nvar mt = function(e) {\n  ee(t, e);\n  function t(n) {\n    var r = e.call(this) || this;\n    return r.isStopped = !1, n ? (r.destination = n, cn(n) && n.add(r)) : r.destination = Ur, r;\n  }\n  return t.create = function(n, r, i) {\n    return new Ce(n, r, i);\n  }, t.prototype.next = function(n) {\n    this.isStopped || this._next(n);\n  }, t.prototype.error = function(n) {\n    this.isStopped || (this.isStopped = !0, this._error(n));\n  }, t.prototype.complete = function() {\n    this.isStopped || (this.isStopped = !0, this._complete());\n  }, t.prototype.unsubscribe = function() {\n    this.closed || (this.isStopped = !0, e.prototype.unsubscribe.call(this), this.destination = null);\n  }, t.prototype._next = function(n) {\n    this.destination.next(n);\n  }, t.prototype._error = function(n) {\n    try {\n      this.destination.error(n);\n    } finally {\n      this.unsubscribe();\n    }\n  }, t.prototype._complete = function() {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  }, t;\n}(Oe), Nr = function() {\n  function e(t) {\n    this.partialObserver = t;\n  }\n  return e.prototype.next = function(t) {\n    var n = this.partialObserver;\n    if (n.next)\n      try {\n        n.next(t);\n      } catch (r) {\n        _e(r);\n      }\n  }, e.prototype.error = function(t) {\n    var n = this.partialObserver;\n    if (n.error)\n      try {\n        n.error(t);\n      } catch (r) {\n        _e(r);\n      }\n    else\n      _e(t);\n  }, e.prototype.complete = function() {\n    var t = this.partialObserver;\n    if (t.complete)\n      try {\n        t.complete();\n      } catch (n) {\n        _e(n);\n      }\n  }, e;\n}(), Ce = function(e) {\n  ee(t, e);\n  function t(n, r, i) {\n    var o = e.call(this) || this, s;\n    return A(n) || !n ? s = {\n      next: n ?? void 0,\n      error: r ?? void 0,\n      complete: i ?? void 0\n    } : s = n, o.destination = new Nr(s), o;\n  }\n  return t;\n}(mt);\nfunction _e(e) {\n  un(e);\n}\nfunction Fr(e) {\n  throw e;\n}\nvar Ur = {\n  closed: !0,\n  next: je,\n  error: Fr,\n  complete: je\n}, gt = function() {\n  return typeof Symbol == \"function\" && Symbol.observable || \"@@observable\";\n}();\nfunction bt(e) {\n  return e;\n}\nfunction jr(e) {\n  return e.length === 0 ? bt : e.length === 1 ? e[0] : function(n) {\n    return e.reduce(function(r, i) {\n      return i(r);\n    }, n);\n  };\n}\nvar k = function() {\n  function e(t) {\n    t && (this._subscribe = t);\n  }\n  return e.prototype.lift = function(t) {\n    var n = new e();\n    return n.source = this, n.operator = t, n;\n  }, e.prototype.subscribe = function(t, n, r) {\n    var i = this, o = Br(t) ? t : new Ce(t, n, r);\n    return Me(function() {\n      var s = i, a = s.operator, c = s.source;\n      o.add(a ? a.call(o, c) : c ? i._subscribe(o) : i._trySubscribe(o));\n    }), o;\n  }, e.prototype._trySubscribe = function(t) {\n    try {\n      return this._subscribe(t);\n    } catch (n) {\n      t.error(n);\n    }\n  }, e.prototype.forEach = function(t, n) {\n    var r = this;\n    return n = _t(n), new n(function(i, o) {\n      var s = new Ce({\n        next: function(a) {\n          try {\n            t(a);\n          } catch (c) {\n            o(c), s.unsubscribe();\n          }\n        },\n        error: o,\n        complete: i\n      });\n      r.subscribe(s);\n    });\n  }, e.prototype._subscribe = function(t) {\n    var n;\n    return (n = this.source) === null || n === void 0 ? void 0 : n.subscribe(t);\n  }, e.prototype[gt] = function() {\n    return this;\n  }, e.prototype.pipe = function() {\n    for (var t = [], n = 0; n < arguments.length; n++)\n      t[n] = arguments[n];\n    return jr(t)(this);\n  }, e.prototype.toPromise = function(t) {\n    var n = this;\n    return t = _t(t), new t(function(r, i) {\n      var o;\n      n.subscribe(function(s) {\n        return o = s;\n      }, function(s) {\n        return i(s);\n      }, function() {\n        return r(o);\n      });\n    });\n  }, e.create = function(t) {\n    return new e(t);\n  }, e;\n}();\nfunction _t(e) {\n  var t;\n  return (t = e ?? Dr.Promise) !== null && t !== void 0 ? t : Promise;\n}\nfunction Wr(e) {\n  return e && A(e.next) && A(e.error) && A(e.complete);\n}\nfunction Br(e) {\n  return e && e instanceof mt || Wr(e) && cn(e);\n}\nfunction Vr(e) {\n  return A(e == null ? void 0 : e.lift);\n}\nfunction B(e) {\n  return function(t) {\n    if (Vr(t))\n      return t.lift(function(n) {\n        try {\n          return e(n, this);\n        } catch (r) {\n          this.error(r);\n        }\n      });\n    throw new TypeError(\"Unable to lift unknown Observable type\");\n  };\n}\nfunction W(e, t, n, r, i) {\n  return new Hr(e, t, n, r, i);\n}\nvar Hr = function(e) {\n  ee(t, e);\n  function t(n, r, i, o, s, a) {\n    var c = e.call(this, n) || this;\n    return c.onFinalize = s, c.shouldUnsubscribe = a, c._next = r ? function(u) {\n      try {\n        r(u);\n      } catch (l) {\n        n.error(l);\n      }\n    } : e.prototype._next, c._error = o ? function(u) {\n      try {\n        o(u);\n      } catch (l) {\n        n.error(l);\n      } finally {\n        this.unsubscribe();\n      }\n    } : e.prototype._error, c._complete = i ? function() {\n      try {\n        i();\n      } catch (u) {\n        n.error(u);\n      } finally {\n        this.unsubscribe();\n      }\n    } : e.prototype._complete, c;\n  }\n  return t.prototype.unsubscribe = function() {\n    var n;\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      var r = this.closed;\n      e.prototype.unsubscribe.call(this), !r && ((n = this.onFinalize) === null || n === void 0 || n.call(this));\n    }\n  }, t;\n}(mt), zr = vt(function(e) {\n  return function() {\n    e(this), this.name = \"ObjectUnsubscribedError\", this.message = \"object unsubscribed\";\n  };\n}), Z = function(e) {\n  ee(t, e);\n  function t() {\n    var n = e.call(this) || this;\n    return n.closed = !1, n.currentObservers = null, n.observers = [], n.isStopped = !1, n.hasError = !1, n.thrownError = null, n;\n  }\n  return t.prototype.lift = function(n) {\n    var r = new It(this, this);\n    return r.operator = n, r;\n  }, t.prototype._throwIfClosed = function() {\n    if (this.closed)\n      throw new zr();\n  }, t.prototype.next = function(n) {\n    var r = this;\n    Me(function() {\n      var i, o;\n      if (r._throwIfClosed(), !r.isStopped) {\n        r.currentObservers || (r.currentObservers = Array.from(r.observers));\n        try {\n          for (var s = me(r.currentObservers), a = s.next(); !a.done; a = s.next()) {\n            var c = a.value;\n            c.next(n);\n          }\n        } catch (u) {\n          i = { error: u };\n        } finally {\n          try {\n            a && !a.done && (o = s.return) && o.call(s);\n          } finally {\n            if (i) throw i.error;\n          }\n        }\n      }\n    });\n  }, t.prototype.error = function(n) {\n    var r = this;\n    Me(function() {\n      if (r._throwIfClosed(), !r.isStopped) {\n        r.hasError = r.isStopped = !0, r.thrownError = n;\n        for (var i = r.observers; i.length; )\n          i.shift().error(n);\n      }\n    });\n  }, t.prototype.complete = function() {\n    var n = this;\n    Me(function() {\n      if (n._throwIfClosed(), !n.isStopped) {\n        n.isStopped = !0;\n        for (var r = n.observers; r.length; )\n          r.shift().complete();\n      }\n    });\n  }, t.prototype.unsubscribe = function() {\n    this.isStopped = this.closed = !0, this.observers = this.currentObservers = null;\n  }, Object.defineProperty(t.prototype, \"observed\", {\n    get: function() {\n      var n;\n      return ((n = this.observers) === null || n === void 0 ? void 0 : n.length) > 0;\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype._trySubscribe = function(n) {\n    return this._throwIfClosed(), e.prototype._trySubscribe.call(this, n);\n  }, t.prototype._subscribe = function(n) {\n    return this._throwIfClosed(), this._checkFinalizedStatuses(n), this._innerSubscribe(n);\n  }, t.prototype._innerSubscribe = function(n) {\n    var r = this, i = this, o = i.hasError, s = i.isStopped, a = i.observers;\n    return o || s ? an : (this.currentObservers = null, a.push(n), new Oe(function() {\n      r.currentObservers = null, Ue(a, n);\n    }));\n  }, t.prototype._checkFinalizedStatuses = function(n) {\n    var r = this, i = r.hasError, o = r.thrownError, s = r.isStopped;\n    i ? n.error(o) : s && n.complete();\n  }, t.prototype.asObservable = function() {\n    var n = new k();\n    return n.source = this, n;\n  }, t.create = function(n, r) {\n    return new It(n, r);\n  }, t;\n}(k), It = function(e) {\n  ee(t, e);\n  function t(n, r) {\n    var i = e.call(this) || this;\n    return i.destination = n, i.source = r, i;\n  }\n  return t.prototype.next = function(n) {\n    var r, i;\n    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.next) === null || i === void 0 || i.call(r, n);\n  }, t.prototype.error = function(n) {\n    var r, i;\n    (i = (r = this.destination) === null || r === void 0 ? void 0 : r.error) === null || i === void 0 || i.call(r, n);\n  }, t.prototype.complete = function() {\n    var n, r;\n    (r = (n = this.destination) === null || n === void 0 ? void 0 : n.complete) === null || r === void 0 || r.call(n);\n  }, t.prototype._subscribe = function(n) {\n    var r, i;\n    return (i = (r = this.source) === null || r === void 0 ? void 0 : r.subscribe(n)) !== null && i !== void 0 ? i : an;\n  }, t;\n}(Z), ln = function(e) {\n  ee(t, e);\n  function t(n) {\n    var r = e.call(this) || this;\n    return r._value = n, r;\n  }\n  return Object.defineProperty(t.prototype, \"value\", {\n    get: function() {\n      return this.getValue();\n    },\n    enumerable: !1,\n    configurable: !0\n  }), t.prototype._subscribe = function(n) {\n    var r = e.prototype._subscribe.call(this, n);\n    return !r.closed && n.next(this._value), r;\n  }, t.prototype.getValue = function() {\n    var n = this, r = n.hasError, i = n.thrownError, o = n._value;\n    if (r)\n      throw i;\n    return this._throwIfClosed(), o;\n  }, t.prototype.next = function(n) {\n    e.prototype.next.call(this, this._value = n);\n  }, t;\n}(Z), Yr = {\n  now: function() {\n    return Date.now();\n  }\n}, qr = function(e) {\n  ee(t, e);\n  function t(n, r) {\n    return e.call(this) || this;\n  }\n  return t.prototype.schedule = function(n, r) {\n    return this;\n  }, t;\n}(Oe), Rt = {\n  setInterval: function(e, t) {\n    for (var n = [], r = 2; r < arguments.length; r++)\n      n[r - 2] = arguments[r];\n    return setInterval.apply(void 0, ge([e, t], ue(n)));\n  },\n  clearInterval: function(e) {\n    return clearInterval(e);\n  },\n  delegate: void 0\n}, Kr = function(e) {\n  ee(t, e);\n  function t(n, r) {\n    var i = e.call(this, n, r) || this;\n    return i.scheduler = n, i.work = r, i.pending = !1, i;\n  }\n  return t.prototype.schedule = function(n, r) {\n    var i;\n    if (r === void 0 && (r = 0), this.closed)\n      return this;\n    this.state = n;\n    var o = this.id, s = this.scheduler;\n    return o != null && (this.id = this.recycleAsyncId(s, o, r)), this.pending = !0, this.delay = r, this.id = (i = this.id) !== null && i !== void 0 ? i : this.requestAsyncId(s, this.id, r), this;\n  }, t.prototype.requestAsyncId = function(n, r, i) {\n    return i === void 0 && (i = 0), Rt.setInterval(n.flush.bind(n, this), i);\n  }, t.prototype.recycleAsyncId = function(n, r, i) {\n    if (i === void 0 && (i = 0), i != null && this.delay === i && this.pending === !1)\n      return r;\n    r != null && Rt.clearInterval(r);\n  }, t.prototype.execute = function(n, r) {\n    if (this.closed)\n      return new Error(\"executing a cancelled action\");\n    this.pending = !1;\n    var i = this._execute(n, r);\n    if (i)\n      return i;\n    this.pending === !1 && this.id != null && (this.id = this.recycleAsyncId(this.scheduler, this.id, null));\n  }, t.prototype._execute = function(n, r) {\n    var i = !1, o;\n    try {\n      this.work(n);\n    } catch (s) {\n      i = !0, o = s || new Error(\"Scheduled action threw falsy error\");\n    }\n    if (i)\n      return this.unsubscribe(), o;\n  }, t.prototype.unsubscribe = function() {\n    if (!this.closed) {\n      var n = this, r = n.id, i = n.scheduler, o = i.actions;\n      this.work = this.state = this.scheduler = null, this.pending = !1, Ue(o, this), r != null && (this.id = this.recycleAsyncId(i, r, null)), this.delay = null, e.prototype.unsubscribe.call(this);\n    }\n  }, t;\n}(qr), Mt = function() {\n  function e(t, n) {\n    n === void 0 && (n = e.now), this.schedulerActionCtor = t, this.now = n;\n  }\n  return e.prototype.schedule = function(t, n, r) {\n    return n === void 0 && (n = 0), new this.schedulerActionCtor(this, t).schedule(r, n);\n  }, e.now = Yr.now, e;\n}(), Gr = function(e) {\n  ee(t, e);\n  function t(n, r) {\n    r === void 0 && (r = Mt.now);\n    var i = e.call(this, n, r) || this;\n    return i.actions = [], i._active = !1, i;\n  }\n  return t.prototype.flush = function(n) {\n    var r = this.actions;\n    if (this._active) {\n      r.push(n);\n      return;\n    }\n    var i;\n    this._active = !0;\n    do\n      if (i = n.execute(n.state, n.delay))\n        break;\n    while (n = r.shift());\n    if (this._active = !1, i) {\n      for (; n = r.shift(); )\n        n.unsubscribe();\n      throw i;\n    }\n  }, t;\n}(Mt), Qr = new Gr(Kr);\nfunction Jr(e) {\n  return e && A(e.schedule);\n}\nfunction Xr(e) {\n  return e[e.length - 1];\n}\nfunction yt(e) {\n  return Jr(Xr(e)) ? e.pop() : void 0;\n}\nvar wt = function(e) {\n  return e && typeof e.length == \"number\" && typeof e != \"function\";\n};\nfunction fn(e) {\n  return A(e == null ? void 0 : e.then);\n}\nfunction dn(e) {\n  return A(e[gt]);\n}\nfunction pn(e) {\n  return Symbol.asyncIterator && A(e == null ? void 0 : e[Symbol.asyncIterator]);\n}\nfunction hn(e) {\n  return new TypeError(\"You provided \" + (e !== null && typeof e == \"object\" ? \"an invalid object\" : \"'\" + e + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\nfunction Zr() {\n  return typeof Symbol != \"function\" || !Symbol.iterator ? \"@@iterator\" : Symbol.iterator;\n}\nvar vn = Zr();\nfunction mn(e) {\n  return A(e == null ? void 0 : e[vn]);\n}\nfunction gn(e) {\n  return Rr(this, arguments, function() {\n    var n, r, i, o;\n    return sn(this, function(s) {\n      switch (s.label) {\n        case 0:\n          n = e.getReader(), s.label = 1;\n        case 1:\n          s.trys.push([1, , 9, 10]), s.label = 2;\n        case 2:\n          return [4, pe(n.read())];\n        case 3:\n          return r = s.sent(), i = r.value, o = r.done, o ? [4, pe(void 0)] : [3, 5];\n        case 4:\n          return [2, s.sent()];\n        case 5:\n          return [4, pe(i)];\n        case 6:\n          return [4, s.sent()];\n        case 7:\n          return s.sent(), [3, 2];\n        case 8:\n          return [3, 10];\n        case 9:\n          return n.releaseLock(), [7];\n        case 10:\n          return [2];\n      }\n    });\n  });\n}\nfunction bn(e) {\n  return A(e == null ? void 0 : e.getReader);\n}\nfunction H(e) {\n  if (e instanceof k)\n    return e;\n  if (e != null) {\n    if (dn(e))\n      return ei(e);\n    if (wt(e))\n      return ti(e);\n    if (fn(e))\n      return ni(e);\n    if (pn(e))\n      return yn(e);\n    if (mn(e))\n      return ri(e);\n    if (bn(e))\n      return ii(e);\n  }\n  throw hn(e);\n}\nfunction ei(e) {\n  return new k(function(t) {\n    var n = e[gt]();\n    if (A(n.subscribe))\n      return n.subscribe(t);\n    throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");\n  });\n}\nfunction ti(e) {\n  return new k(function(t) {\n    for (var n = 0; n < e.length && !t.closed; n++)\n      t.next(e[n]);\n    t.complete();\n  });\n}\nfunction ni(e) {\n  return new k(function(t) {\n    e.then(function(n) {\n      t.closed || (t.next(n), t.complete());\n    }, function(n) {\n      return t.error(n);\n    }).then(null, un);\n  });\n}\nfunction ri(e) {\n  return new k(function(t) {\n    var n, r;\n    try {\n      for (var i = me(e), o = i.next(); !o.done; o = i.next()) {\n        var s = o.value;\n        if (t.next(s), t.closed)\n          return;\n      }\n    } catch (a) {\n      n = { error: a };\n    } finally {\n      try {\n        o && !o.done && (r = i.return) && r.call(i);\n      } finally {\n        if (n) throw n.error;\n      }\n    }\n    t.complete();\n  });\n}\nfunction yn(e) {\n  return new k(function(t) {\n    oi(e, t).catch(function(n) {\n      return t.error(n);\n    });\n  });\n}\nfunction ii(e) {\n  return yn(gn(e));\n}\nfunction oi(e, t) {\n  var n, r, i, o;\n  return Ir(this, void 0, void 0, function() {\n    var s, a;\n    return sn(this, function(c) {\n      switch (c.label) {\n        case 0:\n          c.trys.push([0, 5, 6, 11]), n = Mr(e), c.label = 1;\n        case 1:\n          return [4, n.next()];\n        case 2:\n          if (r = c.sent(), !!r.done) return [3, 4];\n          if (s = r.value, t.next(s), t.closed)\n            return [2];\n          c.label = 3;\n        case 3:\n          return [3, 1];\n        case 4:\n          return [3, 11];\n        case 5:\n          return a = c.sent(), i = { error: a }, [3, 11];\n        case 6:\n          return c.trys.push([6, , 9, 10]), r && !r.done && (o = n.return) ? [4, o.call(n)] : [3, 8];\n        case 7:\n          c.sent(), c.label = 8;\n        case 8:\n          return [3, 10];\n        case 9:\n          if (i) throw i.error;\n          return [7];\n        case 10:\n          return [7];\n        case 11:\n          return t.complete(), [2];\n      }\n    });\n  });\n}\nfunction re(e, t, n, r, i) {\n  r === void 0 && (r = 0), i === void 0 && (i = !1);\n  var o = t.schedule(function() {\n    n(), i ? e.add(this.schedule(null, r)) : this.unsubscribe();\n  }, r);\n  if (e.add(o), !i)\n    return o;\n}\nfunction wn(e, t) {\n  return t === void 0 && (t = 0), B(function(n, r) {\n    n.subscribe(W(r, function(i) {\n      return re(r, e, function() {\n        return r.next(i);\n      }, t);\n    }, function() {\n      return re(r, e, function() {\n        return r.complete();\n      }, t);\n    }, function(i) {\n      return re(r, e, function() {\n        return r.error(i);\n      }, t);\n    }));\n  });\n}\nfunction xn(e, t) {\n  return t === void 0 && (t = 0), B(function(n, r) {\n    r.add(e.schedule(function() {\n      return n.subscribe(r);\n    }, t));\n  });\n}\nfunction si(e, t) {\n  return H(e).pipe(xn(t), wn(t));\n}\nfunction ai(e, t) {\n  return H(e).pipe(xn(t), wn(t));\n}\nfunction ci(e, t) {\n  return new k(function(n) {\n    var r = 0;\n    return t.schedule(function() {\n      r === e.length ? n.complete() : (n.next(e[r++]), n.closed || this.schedule());\n    });\n  });\n}\nfunction ui(e, t) {\n  return new k(function(n) {\n    var r;\n    return re(n, t, function() {\n      r = e[vn](), re(n, t, function() {\n        var i, o, s;\n        try {\n          i = r.next(), o = i.value, s = i.done;\n        } catch (a) {\n          n.error(a);\n          return;\n        }\n        s ? n.complete() : n.next(o);\n      }, 0, !0);\n    }), function() {\n      return A(r == null ? void 0 : r.return) && r.return();\n    };\n  });\n}\nfunction Sn(e, t) {\n  if (!e)\n    throw new Error(\"Iterable cannot be null\");\n  return new k(function(n) {\n    re(n, t, function() {\n      var r = e[Symbol.asyncIterator]();\n      re(n, t, function() {\n        r.next().then(function(i) {\n          i.done ? n.complete() : n.next(i.value);\n        });\n      }, 0, !0);\n    });\n  });\n}\nfunction li(e, t) {\n  return Sn(gn(e), t);\n}\nfunction fi(e, t) {\n  if (e != null) {\n    if (dn(e))\n      return si(e, t);\n    if (wt(e))\n      return ci(e, t);\n    if (fn(e))\n      return ai(e, t);\n    if (pn(e))\n      return Sn(e, t);\n    if (mn(e))\n      return ui(e, t);\n    if (bn(e))\n      return li(e, t);\n  }\n  throw hn(e);\n}\nfunction Ge(e, t) {\n  return t ? fi(e, t) : H(e);\n}\nfunction Dt() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = yt(e);\n  return Ge(e, n);\n}\nfunction di(e) {\n  return e instanceof Date && !isNaN(e);\n}\nvar pi = vt(function(e) {\n  return function(n) {\n    n === void 0 && (n = null), e(this), this.message = \"Timeout has occurred\", this.name = \"TimeoutError\", this.info = n;\n  };\n});\nfunction hi(e, t) {\n  var n = di(e) ? { first: e } : typeof e == \"number\" ? { each: e } : e, r = n.first, i = n.each, o = n.with, s = o === void 0 ? vi : o, a = n.scheduler, c = a === void 0 ? Qr : a, u = n.meta, l = u === void 0 ? null : u;\n  if (r == null && i == null)\n    throw new TypeError(\"No timeout provided.\");\n  return B(function(f, v) {\n    var d, m, p = null, g = 0, h = function(x) {\n      m = re(v, c, function() {\n        try {\n          d.unsubscribe(), H(s({\n            meta: l,\n            lastValue: p,\n            seen: g\n          })).subscribe(v);\n        } catch (E) {\n          v.error(E);\n        }\n      }, x);\n    };\n    d = f.subscribe(W(v, function(x) {\n      m == null || m.unsubscribe(), g++, v.next(p = x), i > 0 && h(i);\n    }, void 0, void 0, function() {\n      m != null && m.closed || m == null || m.unsubscribe(), p = null;\n    })), !g && h(r != null ? typeof r == \"number\" ? r : +r - c.now() : i);\n  });\n}\nfunction vi(e) {\n  throw new pi(e);\n}\nfunction O(e, t) {\n  return B(function(n, r) {\n    var i = 0;\n    n.subscribe(W(r, function(o) {\n      r.next(e.call(t, o, i++));\n    }));\n  });\n}\nvar mi = Array.isArray;\nfunction gi(e, t) {\n  return mi(t) ? e.apply(void 0, ge([], ue(t))) : e(t);\n}\nfunction bi(e) {\n  return O(function(t) {\n    return gi(e, t);\n  });\n}\nfunction yi(e, t, n, r, i, o, s, a) {\n  var c = [], u = 0, l = 0, f = !1, v = function() {\n    f && !c.length && !u && t.complete();\n  }, d = function(p) {\n    return u < r ? m(p) : c.push(p);\n  }, m = function(p) {\n    u++;\n    var g = !1;\n    H(n(p, l++)).subscribe(W(t, function(h) {\n      t.next(h);\n    }, function() {\n      g = !0;\n    }, void 0, function() {\n      if (g)\n        try {\n          u--;\n          for (var h = function() {\n            var x = c.shift();\n            s || m(x);\n          }; c.length && u < r; )\n            h();\n          v();\n        } catch (x) {\n          t.error(x);\n        }\n    }));\n  };\n  return e.subscribe(W(t, d, function() {\n    f = !0, v();\n  })), function() {\n  };\n}\nfunction xt(e, t, n) {\n  return n === void 0 && (n = 1 / 0), A(t) ? xt(function(r, i) {\n    return O(function(o, s) {\n      return t(r, o, i, s);\n    })(H(e(r, i)));\n  }, n) : (typeof t == \"number\" && (n = t), B(function(r, i) {\n    return yi(r, i, e, n);\n  }));\n}\nfunction wi(e) {\n  return xt(bt, e);\n}\nfunction xi() {\n  return wi(1);\n}\nfunction We() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  return xi()(Ge(e, yt(e)));\n}\nvar Si = [\"addListener\", \"removeListener\"], Ti = [\"addEventListener\", \"removeEventListener\"], Ei = [\"on\", \"off\"];\nfunction at(e, t, n, r) {\n  if (A(n) && (r = n, n = void 0), r)\n    return at(e, t, n).pipe(bi(r));\n  var i = ue(Ai(e) ? Ti.map(function(a) {\n    return function(c) {\n      return e[a](t, c, n);\n    };\n  }) : Ci(e) ? Si.map($t(e, t)) : Pi(e) ? Ei.map($t(e, t)) : [], 2), o = i[0], s = i[1];\n  if (!o && wt(e))\n    return xt(function(a) {\n      return at(a, t, n);\n    })(H(e));\n  if (!o)\n    throw new TypeError(\"Invalid event target\");\n  return new k(function(a) {\n    var c = function() {\n      for (var u = [], l = 0; l < arguments.length; l++)\n        u[l] = arguments[l];\n      return a.next(1 < u.length ? u : u[0]);\n    };\n    return o(c), function() {\n      return s(c);\n    };\n  });\n}\nfunction $t(e, t) {\n  return function(n) {\n    return function(r) {\n      return e[n](t, r);\n    };\n  };\n}\nfunction Ci(e) {\n  return A(e.addListener) && A(e.removeListener);\n}\nfunction Pi(e) {\n  return A(e.on) && A(e.off);\n}\nfunction Ai(e) {\n  return A(e.addEventListener) && A(e.removeEventListener);\n}\nfunction Qe(e, t) {\n  return B(function(n, r) {\n    var i = 0;\n    n.subscribe(W(r, function(o) {\n      return e.call(t, o, i++) && r.next(o);\n    }));\n  });\n}\nfunction Oi(e, t, n, r, i) {\n  return function(o, s) {\n    var a = n, c = t, u = 0;\n    o.subscribe(W(s, function(l) {\n      var f = u++;\n      c = a ? e(c, l, f) : (a = !0, l), s.next(c);\n    }, i));\n  };\n}\nfunction ki(e, t) {\n  return t === void 0 && (t = bt), e = e ?? Li, B(function(n, r) {\n    var i, o = !0;\n    n.subscribe(W(r, function(s) {\n      var a = t(s);\n      (o || !e(i, a)) && (o = !1, i = a, r.next(s));\n    }));\n  });\n}\nfunction Li(e, t) {\n  return e === t;\n}\nfunction ct(e, t) {\n  return B(Oi(e, t, arguments.length >= 2, !0));\n}\nfunction _i(e) {\n  e === void 0 && (e = {});\n  var t = e.connector, n = t === void 0 ? function() {\n    return new Z();\n  } : t, r = e.resetOnError, i = r === void 0 ? !0 : r, o = e.resetOnComplete, s = o === void 0 ? !0 : o, a = e.resetOnRefCountZero, c = a === void 0 ? !0 : a;\n  return function(u) {\n    var l, f, v, d = 0, m = !1, p = !1, g = function() {\n      f == null || f.unsubscribe(), f = void 0;\n    }, h = function() {\n      g(), l = v = void 0, m = p = !1;\n    }, x = function() {\n      var E = l;\n      h(), E == null || E.unsubscribe();\n    };\n    return B(function(E, P) {\n      d++, !p && !m && g();\n      var b = v = v ?? n();\n      P.add(function() {\n        d--, d === 0 && !p && !m && (f = et(x, c));\n      }), b.subscribe(P), !l && d > 0 && (l = new Ce({\n        next: function(S) {\n          return b.next(S);\n        },\n        error: function(S) {\n          p = !0, g(), f = et(h, i, S), b.error(S);\n        },\n        complete: function() {\n          m = !0, g(), f = et(h, s), b.complete();\n        }\n      }), H(E).subscribe(l));\n    })(u);\n  };\n}\nfunction et(e, t) {\n  for (var n = [], r = 2; r < arguments.length; r++)\n    n[r - 2] = arguments[r];\n  if (t === !0) {\n    e();\n    return;\n  }\n  if (t !== !1) {\n    var i = new Ce({\n      next: function() {\n        i.unsubscribe(), e();\n      }\n    });\n    return H(t.apply(void 0, ge([], ue(n)))).subscribe(i);\n  }\n}\nfunction Ii(e) {\n  return B(function(t, n) {\n    var r = !1, i = W(n, function() {\n      i == null || i.unsubscribe(), r = !0;\n    }, je);\n    H(e).subscribe(i), t.subscribe(W(n, function(o) {\n      return r && n.next(o);\n    }));\n  });\n}\nfunction D() {\n  for (var e = [], t = 0; t < arguments.length; t++)\n    e[t] = arguments[t];\n  var n = yt(e);\n  return B(function(r, i) {\n    (n ? We(e, r, n) : We(e, r)).subscribe(i);\n  });\n}\nfunction Tn(e, t) {\n  return B(function(n, r) {\n    var i = null, o = 0, s = !1, a = function() {\n      return s && !i && r.complete();\n    };\n    n.subscribe(W(r, function(c) {\n      i == null || i.unsubscribe();\n      var u = 0, l = o++;\n      H(e(c, l)).subscribe(i = W(r, function(f) {\n        return r.next(t ? t(c, f, l, u++) : f);\n      }, function() {\n        i = null, a();\n      }));\n    }, function() {\n      s = !0, a();\n    }));\n  });\n}\nfunction Nt(e) {\n  return B(function(t, n) {\n    H(e).subscribe(W(n, function() {\n      return n.complete();\n    }, je)), !n.closed && t.subscribe(n);\n  });\n}\nvar Ri = Object.defineProperty, Mi = Object.defineProperties, Di = Object.getOwnPropertyDescriptors, Ft = Object.getOwnPropertySymbols, $i = Object.prototype.hasOwnProperty, Ni = Object.prototype.propertyIsEnumerable, Ut = (e, t, n) => t in e ? Ri(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, X = (e, t) => {\n  for (var n in t || (t = {}))\n    $i.call(t, n) && Ut(e, n, t[n]);\n  if (Ft)\n    for (var n of Ft(t))\n      Ni.call(t, n) && Ut(e, n, t[n]);\n  return e;\n}, Te = (e, t) => Mi(e, Di(t)), V = (e, t, n) => new Promise((r, i) => {\n  var o = (c) => {\n    try {\n      a(n.next(c));\n    } catch (u) {\n      i(u);\n    }\n  }, s = (c) => {\n    try {\n      a(n.throw(c));\n    } catch (u) {\n      i(u);\n    }\n  }, a = (c) => c.done ? r(c.value) : Promise.resolve(c.value).then(o, s);\n  a((n = n.apply(e, t)).next());\n}), En = \"lk\";\nfunction j(e) {\n  return typeof e > \"u\" ? !1 : Fi(e) || Ui(e);\n}\nfunction Fi(e) {\n  var t;\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && e.hasOwnProperty(\"track\") && typeof ((t = e.publication) == null ? void 0 : t.track) < \"u\" : !1;\n}\nfunction Ui(e) {\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && e.hasOwnProperty(\"publication\") && typeof e.publication < \"u\" : !1;\n}\nfunction Pe(e) {\n  return e ? e.hasOwnProperty(\"participant\") && e.hasOwnProperty(\"source\") && typeof e.publication > \"u\" : !1;\n}\nfunction N(e) {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return `${e}`;\n  if (Pe(e))\n    return `${e.participant.identity}_${e.source}_placeholder`;\n  if (j(e))\n    return `${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;\n  throw new Error(`Can't generate a id for the given track reference: ${e}`);\n}\nfunction Do(e, t) {\n  return e === void 0 || t === void 0 ? !1 : j(e) && j(t) ? e.publication.trackSid === t.publication.trackSid : N(e) === N(t);\n}\nfunction $o(e, t) {\n  return typeof t > \"u\" ? !1 : j(e) ? t.some(\n    (n) => n.participant.identity === e.participant.identity && j(n) && n.publication.trackSid === e.publication.trackSid\n  ) : Pe(e) ? t.some(\n    (n) => n.participant.identity === e.participant.identity && Pe(n) && n.source === e.source\n  ) : !1;\n}\nfunction ji(e, t) {\n  return Pe(e) && j(t) && t.participant.identity === e.participant.identity && t.source === e.source;\n}\nfunction No() {\n  const e = document.createElement(\"p\");\n  e.style.width = \"100%\", e.style.height = \"200px\";\n  const t = document.createElement(\"div\");\n  t.style.position = \"absolute\", t.style.top = \"0px\", t.style.left = \"0px\", t.style.visibility = \"hidden\", t.style.width = \"200px\", t.style.height = \"150px\", t.style.overflow = \"hidden\", t.appendChild(e), document.body.appendChild(t);\n  const n = e.offsetWidth;\n  t.style.overflow = \"scroll\";\n  let r = e.offsetWidth;\n  return n === r && (r = t.clientWidth), document.body.removeChild(t), n - r;\n}\nfunction Fo() {\n  return typeof document < \"u\";\n}\nfunction Wi(e) {\n  e = X({}, e);\n  const t = \"(?:(?:[a-z]+:)?//)?\", n = \"(?:\\\\S+(?::\\\\S*)?@)?\", r = new RegExp(\n    \"(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}\",\n    \"g\"\n  ).source, u = `(?:${t}|www\\\\.)${n}(?:localhost|${r}|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\\\\.?)(?::\\\\d{2,5})?(?:[/?#][^\\\\s\"]*)?`;\n  return e.exact ? new RegExp(`(?:^${u}$)`, \"i\") : new RegExp(u, \"ig\");\n}\nvar jt = \"[^\\\\.\\\\s@:](?:[^\\\\s@:]*[^\\\\s@:\\\\.])?@[^\\\\.\\\\s@]+(?:\\\\.[^\\\\.\\\\s@]+)*\";\nfunction Bi({ exact: e } = {}) {\n  return e ? new RegExp(`^${jt}$`) : new RegExp(jt, \"g\");\n}\nfunction Uo(e, t, n) {\n  return Sr(e, t, () => V(this, null, function* () {\n    const { x: i, y: o } = yield Pr(e, t, {\n      placement: \"top\",\n      middleware: [Tr(6), Cr(), Er({ padding: 5 })]\n    });\n    n == null || n(i, o);\n  }));\n}\nfunction jo(e, t) {\n  return !e.contains(t.target);\n}\nvar Wo = () => ({\n  email: Bi(),\n  url: Wi({})\n});\nfunction Bo(e, t) {\n  const n = Object.entries(t).map(\n    ([o, s], a) => Array.from(e.matchAll(s)).map(({ index: c, 0: u }) => ({\n      type: o,\n      weight: a,\n      content: u,\n      index: c ?? 0\n    }))\n  ).flat().sort((o, s) => {\n    const a = o.index - s.index;\n    return a !== 0 ? a : o.weight - s.weight;\n  }).filter(({ index: o }, s, a) => {\n    if (s === 0) return !0;\n    const c = a[s - 1];\n    return c.index + c.content.length <= o;\n  }), r = [];\n  let i = 0;\n  for (const { type: o, content: s, index: a } of n)\n    a > i && r.push(e.substring(i, a)), r.push({ type: o, content: s }), i = a + s.length;\n  return e.length > i && r.push(e.substring(i)), r;\n}\nvar Vi = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantNameChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantAttributesChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged\n], Cn = [\n  ...Vi,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished\n], Hi = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n], zi = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackStreamStateChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionFailed,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionPermissionChanged,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n], Pn = [\n  ...zi,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n  livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n], _ = _r.getLogger(\"lk-components-js\");\n_.setDefaultLevel(\"WARN\");\nfunction Vo(e, t = {}) {\n  var n;\n  _.setLevel(e), (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogLevel)((n = t.liveKitClientLogLevel) != null ? n : e);\n}\nfunction Ho(e, t = {}) {\n  var n;\n  const r = _.methodFactory;\n  _.methodFactory = (i, o, s) => {\n    const a = r(i, o, s), c = livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel[i], u = c >= o && c < livekit_client__WEBPACK_IMPORTED_MODULE_0__.LogLevel.silent;\n    return (l, f) => {\n      f ? a(l, f) : a(l), u && e(c, l, f);\n    };\n  }, _.setLevel(_.getLevel()), (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.setLogExtension)((n = t.liveKitClientLogExtension) != null ? n : e);\n}\nvar zo = [\n  {\n    columns: 1,\n    rows: 1\n  },\n  {\n    columns: 1,\n    rows: 2,\n    orientation: \"portrait\"\n  },\n  {\n    columns: 2,\n    rows: 1,\n    orientation: \"landscape\"\n  },\n  {\n    columns: 2,\n    rows: 2,\n    minWidth: 560\n  },\n  {\n    columns: 3,\n    rows: 3,\n    minWidth: 700\n  },\n  {\n    columns: 4,\n    rows: 4,\n    minWidth: 960\n  },\n  {\n    columns: 5,\n    rows: 5,\n    minWidth: 1100\n  }\n];\nfunction Yi(e, t, n, r) {\n  if (e.length < 1)\n    throw new Error(\"At least one grid layout definition must be provided.\");\n  const i = qi(e);\n  if (n <= 0 || r <= 0)\n    return i[0];\n  let o = 0;\n  const s = n / r > 1 ? \"landscape\" : \"portrait\";\n  let a = i.find((c, u, l) => {\n    o = u;\n    const f = l.findIndex((v, d) => {\n      const m = !v.orientation || v.orientation === s, p = d > u, g = v.maxTiles === c.maxTiles;\n      return p && g && m;\n    }) !== -1;\n    return c.maxTiles >= t && !f;\n  });\n  if (a === void 0)\n    if (a = i[i.length - 1], a)\n      _.warn(\n        `No layout found for: participantCount: ${t}, width/height: ${n}/${r} fallback to biggest available layout (${a}).`\n      );\n    else\n      throw new Error(\"No layout or fallback layout found.\");\n  if ((n < a.minWidth || r < a.minHeight) && o > 0) {\n    const c = i[o - 1];\n    a = Yi(\n      i.slice(0, o),\n      c.maxTiles,\n      n,\n      r\n    );\n  }\n  return a;\n}\nfunction qi(e) {\n  return [...e].map((t) => {\n    var n, r;\n    return {\n      name: `${t.columns}x${t.rows}`,\n      columns: t.columns,\n      rows: t.rows,\n      maxTiles: t.columns * t.rows,\n      minWidth: (n = t.minWidth) != null ? n : 0,\n      minHeight: (r = t.minHeight) != null ? r : 0,\n      orientation: t.orientation\n    };\n  }).sort((t, n) => t.maxTiles !== n.maxTiles ? t.maxTiles - n.maxTiles : t.minWidth !== 0 || n.minWidth !== 0 ? t.minWidth - n.minWidth : t.minHeight !== 0 || n.minHeight !== 0 ? t.minHeight - n.minHeight : 0);\n}\nfunction Yo() {\n  return typeof navigator < \"u\" && navigator.mediaDevices && !!navigator.mediaDevices.getDisplayMedia;\n}\nfunction qo(e, t) {\n  var n;\n  return Te(X({}, e), {\n    receivedAtMediaTimestamp: (n = t.rtpTimestamp) != null ? n : 0,\n    receivedAt: t.timestamp\n  });\n}\nfunction Ko(e, t, n) {\n  return [...e, ...t].reduceRight((r, i) => (r.find((o) => o.id === i.id) || r.unshift(i), r), []).slice(0 - n);\n}\nvar An = [], On = {\n  showChat: !1,\n  unreadMessages: 0,\n  showSettings: !1\n};\nfunction Ki(e) {\n  return typeof e == \"object\";\n}\nfunction Go(e) {\n  return Array.isArray(e) && e.filter(Ki).length > 0;\n}\nfunction kn(e, t) {\n  return t.audioLevel - e.audioLevel;\n}\nfunction Ln(e, t) {\n  return e.isSpeaking === t.isSpeaking ? 0 : e.isSpeaking ? -1 : 1;\n}\nfunction _n(e, t) {\n  var n, r, i, o;\n  return e.lastSpokeAt !== void 0 || t.lastSpokeAt !== void 0 ? ((r = (n = t.lastSpokeAt) == null ? void 0 : n.getTime()) != null ? r : 0) - ((o = (i = e.lastSpokeAt) == null ? void 0 : i.getTime()) != null ? o : 0) : 0;\n}\nfunction Be(e, t) {\n  var n, r, i, o;\n  return ((r = (n = e.joinedAt) == null ? void 0 : n.getTime()) != null ? r : 0) - ((o = (i = t.joinedAt) == null ? void 0 : i.getTime()) != null ? o : 0);\n}\nfunction Gi(e, t) {\n  return j(e) ? j(t) ? 0 : -1 : j(t) ? 1 : 0;\n}\nfunction Qi(e, t) {\n  const n = e.participant.isCameraEnabled, r = t.participant.isCameraEnabled;\n  return n !== r ? n ? -1 : 1 : 0;\n}\nfunction Qo(e) {\n  const t = [], n = [], r = [], i = [];\n  e.forEach((a) => {\n    a.participant.isLocal && a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera ? t.push(a) : a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? n.push(a) : a.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera ? r.push(a) : i.push(a);\n  });\n  const o = Ji(n), s = Xi(r);\n  return [...t, ...o, ...s, ...i];\n}\nfunction Ji(e) {\n  const t = [], n = [];\n  return e.forEach((i) => {\n    i.participant.isLocal ? t.push(i) : n.push(i);\n  }), t.sort((i, o) => Be(i.participant, o.participant)), n.sort((i, o) => Be(i.participant, o.participant)), [...n, ...t];\n}\nfunction Xi(e) {\n  const t = [], n = [];\n  return e.forEach((r) => {\n    r.participant.isLocal ? t.push(r) : n.push(r);\n  }), n.sort((r, i) => r.participant.isSpeaking && i.participant.isSpeaking ? kn(r.participant, i.participant) : r.participant.isSpeaking !== i.participant.isSpeaking ? Ln(r.participant, i.participant) : r.participant.lastSpokeAt !== i.participant.lastSpokeAt ? _n(r.participant, i.participant) : j(r) !== j(i) ? Gi(r, i) : r.participant.isCameraEnabled !== i.participant.isCameraEnabled ? Qi(r, i) : Be(r.participant, i.participant)), [...t, ...n];\n}\nfunction Jo(e) {\n  const t = [...e];\n  t.sort((r, i) => {\n    if (r.isSpeaking && i.isSpeaking)\n      return kn(r, i);\n    if (r.isSpeaking !== i.isSpeaking)\n      return Ln(r, i);\n    if (r.lastSpokeAt !== i.lastSpokeAt)\n      return _n(r, i);\n    const o = r.videoTrackPublications.size > 0, s = i.videoTrackPublications.size > 0;\n    return o !== s ? o ? -1 : 1 : Be(r, i);\n  });\n  const n = t.find((r) => r.isLocal);\n  if (n) {\n    const r = t.indexOf(n);\n    r >= 0 && (t.splice(r, 1), t.length > 0 ? t.splice(0, 0, n) : t.push(n));\n  }\n  return t;\n}\nfunction Zi(e, t) {\n  return e.reduce(\n    (n, r, i) => i % t === 0 ? [...n, [r]] : [...n.slice(0, -1), [...n.slice(-1)[0], r]],\n    []\n  );\n}\nfunction Wt(e, t) {\n  const n = Math.max(e.length, t.length);\n  return new Array(n).fill([]).map((r, i) => [e[i], t[i]]);\n}\nfunction Ve(e, t, n) {\n  return e.filter((r) => !t.map((i) => n(i)).includes(n(r)));\n}\nfunction ut(e) {\n  return e.map((t) => typeof t == \"string\" || typeof t == \"number\" ? `${t}` : N(t));\n}\nfunction eo(e, t) {\n  return {\n    dropped: Ve(e, t, N),\n    added: Ve(t, e, N)\n  };\n}\nfunction to(e) {\n  return e.added.length !== 0 || e.dropped.length !== 0;\n}\nfunction lt(e, t) {\n  const n = t.findIndex(\n    (r) => N(r) === N(e)\n  );\n  if (n === -1)\n    throw new Error(\n      `Element not part of the array: ${N(\n        e\n      )} not in ${ut(t)}`\n    );\n  return n;\n}\nfunction no(e, t, n) {\n  const r = lt(e, n), i = lt(t, n);\n  return n.splice(r, 1, t), n.splice(i, 1, e), n;\n}\nfunction ro(e, t) {\n  const n = lt(e, t);\n  return t.splice(n, 1), t;\n}\nfunction io(e, t) {\n  return [...t, e];\n}\nfunction tt(e, t) {\n  return Zi(e, t);\n}\nfunction Xo(e, t, n) {\n  let r = oo(e, t);\n  if (r.length < t.length) {\n    const s = Ve(t, r, N);\n    r = [...r, ...s];\n  }\n  const i = tt(r, n), o = tt(t, n);\n  if (Wt(i, o).forEach(([s, a], c) => {\n    if (s && a) {\n      const u = tt(r, n)[c], l = eo(u, a);\n      to(l) && (_.debug(\n        `Detected visual changes on page: ${c}, current: ${ut(\n          s\n        )}, next: ${ut(a)}`,\n        { changes: l }\n      ), l.added.length === l.dropped.length && Wt(l.added, l.dropped).forEach(([f, v]) => {\n        if (f && v)\n          r = no(f, v, r);\n        else\n          throw new Error(\n            `For a swap action we need a addition and a removal one is missing: ${f}, ${v}`\n          );\n      }), l.added.length === 0 && l.dropped.length > 0 && l.dropped.forEach((f) => {\n        r = ro(f, r);\n      }), l.added.length > 0 && l.dropped.length === 0 && l.added.forEach((f) => {\n        r = io(f, r);\n      }));\n    }\n  }), r.length > t.length) {\n    const s = Ve(r, t, N);\n    r = r.filter(\n      (a) => !s.map(N).includes(N(a))\n    );\n  }\n  return r;\n}\nfunction oo(e, t) {\n  return e.map((n) => {\n    const r = t.find(\n      (i) => (\n        // If the IDs match or ..\n        N(n) === N(i) || // ... if the current item is a placeholder and the new item is the track reference can replace it.\n        typeof n != \"number\" && Pe(n) && j(i) && ji(n, i)\n      )\n    );\n    return r ?? n;\n  });\n}\nfunction F(e) {\n  return `${En}-${e}`;\n}\nfunction Zo(e) {\n  const t = Bt(e), n = In(e.participant).pipe(\n    O(() => Bt(e)),\n    D(t)\n  );\n  return { className: F(\n    e.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera || e.source === livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare ? \"participant-media-video\" : \"participant-media-audio\"\n  ), trackObserver: n };\n}\nfunction Bt(e) {\n  if (j(e))\n    return e.publication;\n  {\n    const { source: t, name: n, participant: r } = e;\n    if (t && n)\n      return r.getTrackPublications().find((i) => i.source === t && i.trackName === n);\n    if (n)\n      return r.getTrackPublicationByName(n);\n    if (t)\n      return r.getTrackPublication(t);\n    throw new Error(\"At least one of source and name needs to be defined\");\n  }\n}\nfunction le(e, ...t) {\n  return new k((r) => {\n    const i = () => {\n      r.next(e);\n    };\n    return t.forEach((s) => {\n      e.on(s, i);\n    }), () => {\n      t.forEach((s) => {\n        e.off(s, i);\n      });\n    };\n  }).pipe(D(e));\n}\nfunction ye(e, t) {\n  return new k((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction es(e) {\n  return ye(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged).pipe(\n    O(([t]) => t),\n    D(e.state)\n  );\n}\nfunction ts(e) {\n  return le(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RoomMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    O((n) => ({ name: n.name, metadata: n.metadata }))\n  );\n}\nfunction ns(e) {\n  return ye(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveSpeakersChanged).pipe(\n    O(([t]) => t)\n  );\n}\nfunction rs(e, t, n = !0) {\n  const r = new k((o) => {\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(e, n).then((s) => {\n      o.next(s), o.complete();\n    }).catch((s) => {\n      t == null || t(s), o.next([]), o.complete();\n    });\n  }), i = new k((o) => {\n    var s;\n    const a = () => V(this, null, function* () {\n      try {\n        const c = yield livekit_client__WEBPACK_IMPORTED_MODULE_0__.Room.getLocalDevices(e, n);\n        o.next(c);\n      } catch (c) {\n        t == null || t(c);\n      }\n    });\n    if (typeof window < \"u\") {\n      if (!window.isSecureContext)\n        throw new Error(\n          \"Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices\"\n        );\n      (s = navigator == null ? void 0 : navigator.mediaDevices) == null || s.addEventListener(\"devicechange\", a);\n    }\n    return () => {\n      var c;\n      (c = navigator == null ? void 0 : navigator.mediaDevices) == null || c.removeEventListener(\"devicechange\", a);\n    };\n  });\n  return We(r, i);\n}\nfunction so(e) {\n  return ye(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.DataReceived);\n}\nfunction ao(e) {\n  return le(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.AudioPlaybackStatusChanged).pipe(\n    O((n) => ({ canPlayAudio: n.canPlaybackAudio }))\n  );\n}\nfunction co(e) {\n  return le(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.VideoPlaybackStatusChanged).pipe(\n    O((n) => ({ canPlayVideo: n.canPlaybackVideo }))\n  );\n}\nfunction uo(e, t) {\n  return ye(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ActiveDeviceChanged).pipe(\n    Qe(([n]) => n === t),\n    O(([n, r]) => (_.debug(\"activeDeviceObservable | RoomEvent.ActiveDeviceChanged\", { kind: n, deviceId: r }), r))\n  );\n}\nfunction is(e, t) {\n  return ye(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantEncryptionStatusChanged).pipe(\n    Qe(\n      ([, n]) => (t == null ? void 0 : t.identity) === (n == null ? void 0 : n.identity) || !n && (t == null ? void 0 : t.identity) === e.localParticipant.identity\n    ),\n    O(([n]) => n),\n    D(\n      t != null && t.isLocal ? t.isE2EEEnabled : !!(t != null && t.isEncrypted)\n    )\n  );\n}\nfunction os(e) {\n  return ye(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.RecordingStatusChanged).pipe(\n    O(([t]) => t),\n    D(e.isRecording)\n  );\n}\nfunction we(e, ...t) {\n  return new k((r) => {\n    const i = () => {\n      r.next(e);\n    };\n    return t.forEach((s) => {\n      e.on(s, i);\n    }), () => {\n      t.forEach((s) => {\n        e.off(s, i);\n      });\n    };\n  }).pipe(D(e));\n}\nfunction In(e) {\n  return we(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged,\n    // ParticipantEvent.IsSpeakingChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.MediaDevicesError,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscriptionStatusChanged\n    // ParticipantEvent.ConnectionQualityChanged,\n  ).pipe(\n    O((n) => {\n      const { isMicrophoneEnabled: r, isCameraEnabled: i, isScreenShareEnabled: o } = n, s = n.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone), a = n.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera);\n      return {\n        isCameraEnabled: i,\n        isMicrophoneEnabled: r,\n        isScreenShareEnabled: o,\n        cameraTrack: a,\n        microphoneTrack: s,\n        participant: n\n      };\n    })\n  );\n}\nfunction lo(e) {\n  return e ? we(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantMetadataChanged,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantNameChanged\n  ).pipe(\n    O(({ name: n, identity: r, metadata: i }) => ({\n      name: n,\n      identity: r,\n      metadata: i\n    })),\n    D({\n      name: e.name,\n      identity: e.identity,\n      metadata: e.metadata\n    })\n  ) : void 0;\n}\nfunction fo(e) {\n  return Je(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ConnectionQualityChanged\n  ).pipe(\n    O(([n]) => n),\n    D(e.connectionQuality)\n  );\n}\nfunction Je(e, t) {\n  return new k((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction po(e) {\n  var t, n, r, i;\n  return we(\n    e.participant,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackMuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnmuted,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackSubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.TrackUnsubscribed,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackPublished,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.LocalTrackUnpublished\n  ).pipe(\n    O((o) => {\n      var s, a;\n      const c = (s = e.publication) != null ? s : o.getTrackPublication(e.source);\n      return (a = c == null ? void 0 : c.isMuted) != null ? a : !0;\n    }),\n    D(\n      (i = (r = (t = e.publication) == null ? void 0 : t.isMuted) != null ? r : (n = e.participant.getTrackPublication(e.source)) == null ? void 0 : n.isMuted) != null ? i : !0\n    )\n  );\n}\nfunction ss(e) {\n  return Je(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.IsSpeakingChanged).pipe(\n    O(([t]) => t)\n  );\n}\nfunction as(e, t = {}) {\n  var n;\n  let r;\n  const i = new k((c) => (r = c, () => a.unsubscribe())).pipe(D(Array.from(e.remoteParticipants.values()))), o = (n = t.additionalRoomEvents) != null ? n : Cn, s = Array.from(\n    /* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      ...o\n    ])\n  ), a = le(e, ...s).subscribe(\n    (c) => r == null ? void 0 : r.next(Array.from(c.remoteParticipants.values()))\n  );\n  return e.remoteParticipants.size > 0 && (r == null || r.next(Array.from(e.remoteParticipants.values()))), i;\n}\nfunction cs(e, t, n = {}) {\n  var r;\n  const i = (r = n.additionalEvents) != null ? r : Pn;\n  return le(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    Tn((s) => {\n      const a = s.getParticipantByIdentity(t);\n      return a ? we(a, ...i) : new k((c) => c.next(void 0));\n    }),\n    D(e.getParticipantByIdentity(t))\n  );\n}\nfunction us(e) {\n  return Je(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.ParticipantPermissionsChanged\n  ).pipe(\n    O(() => e.permissions),\n    D(e.permissions)\n  );\n}\nfunction ls(e, { kind: t, identity: n }, r = {}) {\n  var i;\n  const o = (i = r.additionalEvents) != null ? i : Pn, s = (c) => {\n    let u = !0;\n    return t && (u = u && c.kind === t), n && (u = u && c.identity === n), u;\n  };\n  return le(\n    e,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n    livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged\n  ).pipe(\n    Tn((c) => {\n      const u = Array.from(c.remoteParticipants.values()).find(\n        (l) => s(l)\n      );\n      return u ? we(u, ...o) : new k((l) => l.next(void 0));\n    }),\n    D(Array.from(e.remoteParticipants.values()).find((c) => s(c)))\n  );\n}\nfunction fs(e) {\n  return typeof e > \"u\" ? new k() : Je(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.ParticipantEvent.AttributesChanged).pipe(\n    O(([t]) => ({\n      changed: t,\n      attributes: e.attributes\n    })),\n    D({ changed: e.attributes, attributes: e.attributes })\n  );\n}\nfunction ds(e, t, n, r, i) {\n  const { localParticipant: o } = t, s = (f, v) => {\n    let d = !1;\n    switch (f) {\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n        d = v.isCameraEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n        d = v.isMicrophoneEnabled;\n        break;\n      case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n        d = v.isScreenShareEnabled;\n        break;\n    }\n    return d;\n  }, a = In(o).pipe(\n    O((f) => s(e, f.participant)),\n    D(s(e, o))\n  ), c = new Z(), u = (f, v) => V(this, null, function* () {\n    try {\n      switch (v ?? (v = n), c.next(!0), e) {\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n          return yield o.setCameraEnabled(\n            f ?? !o.isCameraEnabled,\n            v,\n            r\n          ), o.isCameraEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n          return yield o.setMicrophoneEnabled(\n            f ?? !o.isMicrophoneEnabled,\n            v,\n            r\n          ), o.isMicrophoneEnabled;\n        case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.ScreenShare:\n          return yield o.setScreenShareEnabled(\n            f ?? !o.isScreenShareEnabled,\n            v,\n            r\n          ), o.isScreenShareEnabled;\n        default:\n          throw new TypeError(\"Tried to toggle unsupported source\");\n      }\n    } catch (d) {\n      if (i && d instanceof Error) {\n        i == null || i(d);\n        return;\n      } else\n        throw d;\n    } finally {\n      c.next(!1);\n    }\n  });\n  return {\n    className: F(\"button\"),\n    toggle: u,\n    enabledObserver: a,\n    pendingObserver: c.asObservable()\n  };\n}\nfunction ps() {\n  let e = !1;\n  const t = new Z(), n = new Z(), r = (o) => V(this, null, function* () {\n    n.next(!0), e = o ?? !e, t.next(e), n.next(!1);\n  });\n  return {\n    className: F(\"button\"),\n    toggle: r,\n    enabledObserver: t.asObservable(),\n    pendingObserver: n.asObservable()\n  };\n}\nfunction hs(e, t, n) {\n  const r = new ln(void 0), i = uo(t, e), o = (a, ...c) => V(this, [a, ...c], function* (u, l = {}) {\n    var f, v, d;\n    if (t) {\n      _.debug(`Switching active device of kind \"${e}\" with id ${u}.`), yield t.switchActiveDevice(e, u, l.exact);\n      const m = (f = t.getActiveDevice(e)) != null ? f : u;\n      m !== u && u !== \"default\" && _.info(\n        `We tried to select the device with id (${u}), but the browser decided to select the device with id (${m}) instead.`\n      );\n      let p;\n      e === \"audioinput\" ? p = (v = t.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone)) == null ? void 0 : v.track : e === \"videoinput\" && (p = (d = t.localParticipant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera)) == null ? void 0 : d.track);\n      const g = u === \"default\" && !p || u === \"default\" && (p == null ? void 0 : p.mediaStreamTrack.label.startsWith(\"Default\"));\n      r.next(g ? u : m);\n    }\n  });\n  return {\n    className: F(\"media-device-select\"),\n    activeDeviceObservable: i,\n    setActiveMediaDevice: o\n  };\n}\nfunction vs(e) {\n  const t = (r) => {\n    e.disconnect(r);\n  };\n  return { className: F(\"disconnect-button\"), disconnect: t };\n}\nfunction ms(e) {\n  const t = F(\"connection-quality\"), n = fo(e);\n  return { className: t, connectionQualityObserver: n };\n}\nfunction gs(e) {\n  let t = \"track-muted-indicator-camera\";\n  switch (e.source) {\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Camera:\n      t = \"track-muted-indicator-camera\";\n      break;\n    case livekit_client__WEBPACK_IMPORTED_MODULE_0__.Track.Source.Microphone:\n      t = \"track-muted-indicator-microphone\";\n      break;\n  }\n  const n = F(t), r = po(e);\n  return { className: n, mediaMutedObserver: r };\n}\nfunction bs(e) {\n  return { className: \"lk-participant-name\", infoObserver: lo(e) };\n}\nfunction ys() {\n  return {\n    className: F(\"participant-tile\")\n  };\n}\nvar ho = {\n  CHAT: \"lk.chat\",\n  TRANSCRIPTION: \"lk.transcription\"\n}, vo = {\n  CHAT: \"lk-chat-topic\"\n};\nfunction Rn(e, t) {\n  return V(this, arguments, function* (n, r, i = {}) {\n    const { reliable: o, destinationIdentities: s, topic: a } = i;\n    yield n.publishData(r, {\n      destinationIdentities: s,\n      topic: a,\n      reliable: o\n    });\n  });\n}\nfunction mo(e, t, n) {\n  const r = Array.isArray(t) ? t : [t], i = so(e).pipe(\n    Qe(\n      ([, , , c]) => t === void 0 || c !== void 0 && r.includes(c)\n    ),\n    O(([c, u, , l]) => {\n      const f = {\n        payload: c,\n        topic: l,\n        from: u\n      };\n      return n == null || n(f), f;\n    })\n  );\n  let o;\n  const s = new k((c) => {\n    o = c;\n  });\n  return { messageObservable: i, isSendingObservable: s, send: (c, ...u) => V(this, [c, ...u], function* (l, f = {}) {\n    o.next(!0);\n    try {\n      yield Rn(e.localParticipant, l, X({ topic: r[0] }, f));\n    } finally {\n      o.next(!1);\n    }\n  }) };\n}\nvar Ie = /* @__PURE__ */ new WeakMap();\nfunction go(e) {\n  return e.ignoreLegacy == !0;\n}\nvar bo = (e) => JSON.parse(new TextDecoder().decode(e)), yo = (e) => new TextEncoder().encode(JSON.stringify(e));\nfunction ws(e, t) {\n  var n, r, i, o, s, a;\n  const c = () => {\n    var b, S, C;\n    return ((b = e.serverInfo) == null ? void 0 : b.edition) === 1 || !!((S = e.serverInfo) != null && S.version) && (0,livekit_client__WEBPACK_IMPORTED_MODULE_0__.compareVersions)((C = e.serverInfo) == null ? void 0 : C.version, \"1.8.2\") > 0;\n  }, u = new Z(), l = (n = t == null ? void 0 : t.channelTopic) != null ? n : ho.CHAT, f = (r = t == null ? void 0 : t.channelTopic) != null ? r : vo.CHAT;\n  let v = !1;\n  Ie.has(e) || (v = !0);\n  const d = (i = Ie.get(e)) != null ? i : /* @__PURE__ */ new Map(), m = (o = d.get(l)) != null ? o : new Z();\n  d.set(l, m), Ie.set(e, d);\n  const p = (s = t == null ? void 0 : t.messageDecoder) != null ? s : bo;\n  if (v) {\n    e.registerTextStreamHandler(l, (S, C) => V(this, null, function* () {\n      const { id: $, timestamp: I } = S.info;\n      Ge(S).pipe(\n        ct((T, L) => T + L),\n        O((T) => ({\n          id: $,\n          timestamp: I,\n          message: T,\n          from: e.getParticipantByIdentity(C.identity)\n          // editTimestamp: type === 'update' ? timestamp : undefined,\n        }))\n      ).subscribe({\n        next: (T) => m.next(T)\n      });\n    }));\n    const { messageObservable: b } = mo(e, [f]);\n    b.pipe(\n      O((S) => {\n        const C = p(S.payload);\n        return go(C) ? void 0 : Te(X({}, C), { from: S.from });\n      }),\n      Qe((S) => !!S),\n      Nt(u)\n    ).subscribe(m);\n  }\n  const g = m.pipe(\n    ct((b, S) => {\n      if (\"id\" in S && b.find((C) => {\n        var $, I;\n        return (($ = C.from) == null ? void 0 : $.identity) === ((I = S.from) == null ? void 0 : I.identity) && C.id === S.id;\n      })) {\n        const C = b.findIndex(($) => $.id === S.id);\n        if (C > -1) {\n          const $ = b[C];\n          b[C] = Te(X({}, S), {\n            timestamp: $.timestamp,\n            editTimestamp: S.timestamp\n          });\n        }\n        return [...b];\n      }\n      return [...b, S];\n    }, []),\n    Nt(u)\n  ), h = new ln(!1), x = (a = t == null ? void 0 : t.messageEncoder) != null ? a : yo, E = (b, S) => V(this, null, function* () {\n    var C;\n    S || (S = {}), (C = S.topic) != null || (S.topic = l), h.next(!0);\n    try {\n      const I = {\n        id: (yield e.localParticipant.sendText(b, S)).id,\n        timestamp: Date.now(),\n        message: b,\n        from: e.localParticipant,\n        attachedFiles: S.attachments\n      };\n      m.next(I);\n      const z = x(Te(X({}, I), {\n        ignoreLegacy: c()\n      }));\n      try {\n        yield Rn(e.localParticipant, z, {\n          reliable: !0,\n          topic: f\n        });\n      } catch (T) {\n        _.info(\"could not send message in legacy chat format\", T);\n      }\n      return I;\n    } finally {\n      h.next(!1);\n    }\n  });\n  function P() {\n    u.next(), u.complete(), m.complete(), Ie.delete(e), e.unregisterTextStreamHandler(l);\n  }\n  return e.once(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected, P), {\n    messageObservable: g,\n    isSendingObservable: h,\n    send: E\n  };\n}\nfunction xs() {\n  const e = (n) => V(this, null, function* () {\n    _.info(\"Start Audio for room: \", n), yield n.startAudio();\n  });\n  return { className: F(\"start-audio-button\"), roomAudioPlaybackAllowedObservable: ao, handleStartAudioPlayback: e };\n}\nfunction Ss() {\n  const e = (n) => V(this, null, function* () {\n    _.info(\"Start Video for room: \", n), yield n.startVideo();\n  });\n  return { className: F(\"start-audio-button\"), roomVideoPlaybackAllowedObservable: co, handleStartVideoPlayback: e };\n}\nfunction Ts() {\n  return { className: [F(\"button\"), F(\"chat-toggle\")].join(\" \") };\n}\nfunction Es() {\n  return { className: [F(\"button\"), F(\"focus-toggle-button\")].join(\" \") };\n}\nfunction Cs() {\n  return { className: \"lk-clear-pin-button lk-button\" };\n}\nfunction Ps() {\n  return { className: \"lk-room-container\" };\n}\nfunction Vt(e, t, n = !0) {\n  const i = [e.localParticipant, ...Array.from(e.remoteParticipants.values())], o = [];\n  return i.forEach((s) => {\n    t.forEach((a) => {\n      const c = Array.from(\n        s.trackPublications.values()\n      ).filter(\n        (u) => u.source === a && // either return all or only the ones that are subscribed\n        (!n || u.track)\n      ).map((u) => ({\n        participant: s,\n        publication: u,\n        source: u.source\n      }));\n      o.push(...c);\n    });\n  }), { trackReferences: o, participants: i };\n}\nfunction Ht(e, t, n = !1) {\n  const { sources: r, kind: i, name: o } = t;\n  return Array.from(e.trackPublications.values()).filter(\n    (a) => (!r || r.includes(a.source)) && (!i || a.kind === i) && (!o || a.trackName === o) && // either return all or only the ones that are subscribed\n    (!n || a.track)\n  ).map((a) => ({\n    participant: e,\n    publication: a,\n    source: a.source\n  }));\n}\nfunction As(e, t, n) {\n  var r, i;\n  const o = (r = n.additionalRoomEvents) != null ? r : Cn, s = (i = n.onlySubscribed) != null ? i : !0, a = Array.from(\n    (/* @__PURE__ */ new Set([\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantConnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ParticipantDisconnected,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.ConnectionStateChanged,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.LocalTrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackPublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackUnpublished,\n      livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.TrackSubscriptionStatusChanged,\n      ...o\n    ])).values()\n  );\n  return le(e, ...a).pipe(\n    O((u) => {\n      const l = Vt(u, t, s);\n      return _.debug(`TrackReference[] was updated. (length ${l.trackReferences.length})`, l), l;\n    }),\n    D(Vt(e, t, s))\n  );\n}\nfunction Os(e, t) {\n  return we(e, ...Hi).pipe(\n    O((r) => {\n      const i = Ht(r, t);\n      return _.debug(`TrackReference[] was updated. (length ${i.length})`, i), i;\n    }),\n    D(Ht(e, t))\n  );\n}\nfunction Mn(e, t) {\n  return new k((r) => {\n    const i = (...s) => {\n      r.next(s);\n    };\n    return e.on(t, i), () => {\n      e.off(t, i);\n    };\n  });\n}\nfunction ks(e) {\n  return Mn(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TranscriptionReceived);\n}\nfunction Ls(e) {\n  return Mn(e, livekit_client__WEBPACK_IMPORTED_MODULE_0__.TrackEvent.TimeSyncUpdate).pipe(\n    O(([t]) => t)\n  );\n}\nfunction _s(e, t = 1e3) {\n  if (e === null) return Dt(!1);\n  const n = at(e, \"mousemove\", { passive: !0 }).pipe(O(() => !0)), r = n.pipe(\n    hi({\n      each: t,\n      with: () => We(Dt(!1), r.pipe(Ii(n)))\n    }),\n    ki()\n  );\n  return r;\n}\nfunction wo(e, t) {\n  if (typeof localStorage > \"u\") {\n    _.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    if (t) {\n      const n = Object.fromEntries(\n        Object.entries(t).filter(([, r]) => r !== \"\")\n      );\n      localStorage.setItem(e, JSON.stringify(n));\n    }\n  } catch (n) {\n    _.error(`Error setting item to local storage: ${n}`);\n  }\n}\nfunction xo(e) {\n  if (typeof localStorage > \"u\") {\n    _.error(\"Local storage is not available.\");\n    return;\n  }\n  try {\n    const t = localStorage.getItem(e);\n    if (!t) {\n      _.warn(`Item with key ${e} does not exist in local storage.`);\n      return;\n    }\n    return JSON.parse(t);\n  } catch (t) {\n    _.error(`Error getting item from local storage: ${t}`);\n    return;\n  }\n}\nfunction So(e) {\n  return {\n    load: () => xo(e),\n    save: (t) => wo(e, t)\n  };\n}\nvar To = `${En}-user-choices`, Se = {\n  videoEnabled: !0,\n  audioEnabled: !0,\n  videoDeviceId: \"default\",\n  audioDeviceId: \"default\",\n  username: \"\"\n}, { load: Eo, save: Co } = So(To);\nfunction Is(e, t = !1) {\n  t !== !0 && Co(e);\n}\nfunction Rs(e, t = !1) {\n  var n, r, i, o, s;\n  const a = {\n    videoEnabled: (n = e == null ? void 0 : e.videoEnabled) != null ? n : Se.videoEnabled,\n    audioEnabled: (r = e == null ? void 0 : e.audioEnabled) != null ? r : Se.audioEnabled,\n    videoDeviceId: (i = e == null ? void 0 : e.videoDeviceId) != null ? i : Se.videoDeviceId,\n    audioDeviceId: (o = e == null ? void 0 : e.audioDeviceId) != null ? o : Se.audioDeviceId,\n    username: (s = e == null ? void 0 : e.username) != null ? s : Se.username\n  };\n  if (t)\n    return a;\n  {\n    const c = Eo();\n    return X(X({}, a), c ?? {});\n  }\n}\nvar nt = null, rt = null, Po = 0;\nfunction zt() {\n  return nt || (nt = /* @__PURE__ */ new Map()), nt;\n}\nfunction Ao() {\n  return rt || (rt = /* @__PURE__ */ new WeakMap()), rt;\n}\nfunction Oo(e, t) {\n  const n = Ao();\n  let r = n.get(e);\n  return r || (r = `room_${Po++}`, n.set(e, r)), `${r}:${t}`;\n}\nfunction Ms(e, t) {\n  const n = Oo(e, t), r = zt(), i = r.get(n);\n  if (i)\n    return i;\n  const o = new Z(), s = [], a = \"lk.segment_id\";\n  e.registerTextStreamHandler(t, (u, l) => V(this, null, function* () {\n    var f;\n    const v = Ge(u).pipe(\n      ct((m, p) => m + p, \"\")\n    ), d = !!((f = u.info.attributes) != null && f[a]);\n    v.subscribe((m) => {\n      const p = s.findIndex(\n        (g) => {\n          var h, x;\n          return g.streamInfo.id === u.info.id || d && ((h = g.streamInfo.attributes) == null ? void 0 : h[a]) === ((x = u.info.attributes) == null ? void 0 : x[a]);\n        }\n      );\n      p !== -1 ? (s[p] = Te(X({}, s[p]), {\n        text: m\n      }), o.next([...s])) : (s.push({\n        text: m,\n        participantInfo: l,\n        streamInfo: u.info\n      }), o.next([...s]));\n    });\n  }));\n  const c = o.asObservable().pipe(_i());\n  return r.set(n, c), e.once(livekit_client__WEBPACK_IMPORTED_MODULE_0__.RoomEvent.Disconnected, () => {\n    e.unregisterTextStreamHandler(t), o.complete(), zt().delete(n);\n  }), c;\n}\nfunction Dn(e, t) {\n  if (t.msg === \"show_chat\")\n    return { ...e, showChat: !0, unreadMessages: 0 };\n  if (t.msg === \"hide_chat\")\n    return { ...e, showChat: !1 };\n  if (t.msg === \"toggle_chat\") {\n    const n = { ...e, showChat: !e.showChat };\n    return n.showChat === !0 && (n.unreadMessages = 0), n;\n  } else return t.msg === \"unread_msg\" ? { ...e, unreadMessages: t.count } : t.msg === \"toggle_settings\" ? { ...e, showSettings: !e.showSettings } : { ...e };\n}\nfunction $n(e, t) {\n  return t.msg === \"set_pin\" ? [t.trackReference] : t.msg === \"clear_pin\" ? [] : { ...e };\n}\nconst Nn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction Ds() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Nn);\n  if (!e)\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  return e;\n}\nfunction $s(e) {\n  const t = ko();\n  if (e ?? (e = t), !e)\n    throw Error(\"Tried to access LayoutContext context outside a LayoutContextProvider provider.\");\n  return e;\n}\nfunction Ns() {\n  const [e, t] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer($n, An), [n, r] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(Dn, On);\n  return {\n    pin: { dispatch: t, state: e },\n    widget: { dispatch: r, state: n }\n  };\n}\nfunction Fs(e) {\n  const [t, n] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer($n, An), [r, i] = react__WEBPACK_IMPORTED_MODULE_1__.useReducer(Dn, On);\n  return e ?? {\n    pin: { dispatch: n, state: t },\n    widget: { dispatch: i, state: r }\n  };\n}\nfunction ko() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Nn);\n}\nconst Fn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(\n  void 0\n);\nfunction Us() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Fn);\n  if (!e)\n    throw Error(\"tried to access track context outside of track context provider\");\n  return e;\n}\nfunction Un() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Fn);\n}\nfunction js(e) {\n  const t = Un(), n = e ?? t;\n  if (!n)\n    throw new Error(\n      \"No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly\"\n    );\n  return n;\n}\nconst jn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction Ws() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(jn);\n  if (!e)\n    throw Error(\"tried to access participant context outside of participant context provider\");\n  return e;\n}\nfunction Lo() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(jn);\n}\nfunction Bs(e) {\n  const t = Lo(), n = Un(), r = e ?? t ?? (n == null ? void 0 : n.participant);\n  if (!r)\n    throw new Error(\n      \"No participant provided, make sure you are inside a participant context or pass the participant explicitly\"\n    );\n  return r;\n}\nconst Wn = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction Vs() {\n  const e = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Wn);\n  if (!e)\n    throw Error(\"tried to access room context outside of livekit room component\");\n  return e;\n}\nfunction _o() {\n  return react__WEBPACK_IMPORTED_MODULE_1__.useContext(Wn);\n}\nfunction Hs(e) {\n  const t = _o(), n = e ?? t;\n  if (!n)\n    throw new Error(\n      \"No room provided, make sure you are inside a Room context or pass the room explicitly\"\n    );\n  return n;\n}\nconst Io = react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction zs(e) {\n  const t = react__WEBPACK_IMPORTED_MODULE_1__.useContext(Io);\n  if (e === !0) {\n    if (t)\n      return t;\n    throw Error(\"tried to access feature context, but none is present\");\n  }\n  return t;\n}\n\n//# sourceMappingURL=contexts-Cm1aSBTs.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2NvbnRleHRzLUNtMWFTQlRzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa007QUFDdks7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUksNEJBQTRCO0FBQ2hDLGtCQUFrQixjQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLHNIQUFzSDtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtQkFBbUI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdCQUFnQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSCw0QkFBNEIsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsU0FBUztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsZ0JBQWdCO0FBQ2hCLFVBQVU7QUFDVjtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxVQUFVO0FBQzVDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFVBQVU7QUFDNUM7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBLDRCQUE0QixzQkFBc0I7QUFDbEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZUFBZTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJCQUEyQjtBQUMvQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsU0FBUztBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixZQUFZO0FBQ1osTUFBTTtBQUNOO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLFVBQVU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QzFCO0FBQ0EsWUFBWSw2Q0FBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2Q0FBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdEQUFlO0FBQzFCO0FBQ0EsWUFBWSw2Q0FBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2Q0FBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdEQUFlO0FBQzFCO0FBQ0EsWUFBWSw2Q0FBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTBGRTtBQUNGIiwic291cmNlcyI6WyJEOlxcUHl0aG9uXFx0cmF2ZWwtZGV0YWlsLWRlbW9cXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBsaXZla2l0XFxjb21wb25lbnRzLXJlYWN0XFxkaXN0XFxjb250ZXh0cy1DbTFhU0JUcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0TG9nTGV2ZWwgYXMgVm4sIExvZ0xldmVsIGFzIFN0LCBzZXRMb2dFeHRlbnNpb24gYXMgSG4sIFJvb21FdmVudCBhcyB5LCBQYXJ0aWNpcGFudEV2ZW50IGFzIHcsIFRyYWNrIGFzIE0sIFRyYWNrRXZlbnQgYXMgWXQsIGNvbXBhcmVWZXJzaW9ucyBhcyB6biwgUm9vbSBhcyBUdCB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuaW1wb3J0ICogYXMgUiBmcm9tIFwicmVhY3RcIjtcbmNvbnN0IERlID0gTWF0aC5taW4sIHNlID0gTWF0aC5tYXgsICRlID0gTWF0aC5yb3VuZCwgTGUgPSBNYXRoLmZsb29yLCBHID0gKGUpID0+ICh7XG4gIHg6IGUsXG4gIHk6IGVcbn0pLCBZbiA9IHtcbiAgbGVmdDogXCJyaWdodFwiLFxuICByaWdodDogXCJsZWZ0XCIsXG4gIGJvdHRvbTogXCJ0b3BcIixcbiAgdG9wOiBcImJvdHRvbVwiXG59LCBxbiA9IHtcbiAgc3RhcnQ6IFwiZW5kXCIsXG4gIGVuZDogXCJzdGFydFwiXG59O1xuZnVuY3Rpb24gRXQoZSwgdCwgbikge1xuICByZXR1cm4gc2UoZSwgRGUodCwgbikpO1xufVxuZnVuY3Rpb24gSGUoZSwgdCkge1xuICByZXR1cm4gdHlwZW9mIGUgPT0gXCJmdW5jdGlvblwiID8gZSh0KSA6IGU7XG59XG5mdW5jdGlvbiBhZShlKSB7XG4gIHJldHVybiBlLnNwbGl0KFwiLVwiKVswXTtcbn1cbmZ1bmN0aW9uIHplKGUpIHtcbiAgcmV0dXJuIGUuc3BsaXQoXCItXCIpWzFdO1xufVxuZnVuY3Rpb24gcXQoZSkge1xuICByZXR1cm4gZSA9PT0gXCJ4XCIgPyBcInlcIiA6IFwieFwiO1xufVxuZnVuY3Rpb24gS3QoZSkge1xuICByZXR1cm4gZSA9PT0gXCJ5XCIgPyBcImhlaWdodFwiIDogXCJ3aWR0aFwiO1xufVxuZnVuY3Rpb24gaGUoZSkge1xuICByZXR1cm4gW1widG9wXCIsIFwiYm90dG9tXCJdLmluY2x1ZGVzKGFlKGUpKSA/IFwieVwiIDogXCJ4XCI7XG59XG5mdW5jdGlvbiBHdChlKSB7XG4gIHJldHVybiBxdChoZShlKSk7XG59XG5mdW5jdGlvbiBLbihlLCB0LCBuKSB7XG4gIG4gPT09IHZvaWQgMCAmJiAobiA9ICExKTtcbiAgY29uc3QgciA9IHplKGUpLCBpID0gR3QoZSksIG8gPSBLdChpKTtcbiAgbGV0IHMgPSBpID09PSBcInhcIiA/IHIgPT09IChuID8gXCJlbmRcIiA6IFwic3RhcnRcIikgPyBcInJpZ2h0XCIgOiBcImxlZnRcIiA6IHIgPT09IFwic3RhcnRcIiA/IFwiYm90dG9tXCIgOiBcInRvcFwiO1xuICByZXR1cm4gdC5yZWZlcmVuY2Vbb10gPiB0LmZsb2F0aW5nW29dICYmIChzID0gTmUocykpLCBbcywgTmUocyldO1xufVxuZnVuY3Rpb24gR24oZSkge1xuICBjb25zdCB0ID0gTmUoZSk7XG4gIHJldHVybiBbaXQoZSksIHQsIGl0KHQpXTtcbn1cbmZ1bmN0aW9uIGl0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvc3RhcnR8ZW5kL2csICh0KSA9PiBxblt0XSk7XG59XG5mdW5jdGlvbiBRbihlLCB0LCBuKSB7XG4gIGNvbnN0IHIgPSBbXCJsZWZ0XCIsIFwicmlnaHRcIl0sIGkgPSBbXCJyaWdodFwiLCBcImxlZnRcIl0sIG8gPSBbXCJ0b3BcIiwgXCJib3R0b21cIl0sIHMgPSBbXCJib3R0b21cIiwgXCJ0b3BcIl07XG4gIHN3aXRjaCAoZSkge1xuICAgIGNhc2UgXCJ0b3BcIjpcbiAgICBjYXNlIFwiYm90dG9tXCI6XG4gICAgICByZXR1cm4gbiA/IHQgPyBpIDogciA6IHQgPyByIDogaTtcbiAgICBjYXNlIFwibGVmdFwiOlxuICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgcmV0dXJuIHQgPyBvIDogcztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFtdO1xuICB9XG59XG5mdW5jdGlvbiBKbihlLCB0LCBuLCByKSB7XG4gIGNvbnN0IGkgPSB6ZShlKTtcbiAgbGV0IG8gPSBRbihhZShlKSwgbiA9PT0gXCJzdGFydFwiLCByKTtcbiAgcmV0dXJuIGkgJiYgKG8gPSBvLm1hcCgocykgPT4gcyArIFwiLVwiICsgaSksIHQgJiYgKG8gPSBvLmNvbmNhdChvLm1hcChpdCkpKSksIG87XG59XG5mdW5jdGlvbiBOZShlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL2xlZnR8cmlnaHR8Ym90dG9tfHRvcC9nLCAodCkgPT4gWW5bdF0pO1xufVxuZnVuY3Rpb24gWG4oZSkge1xuICByZXR1cm4ge1xuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMCxcbiAgICAuLi5lXG4gIH07XG59XG5mdW5jdGlvbiBabihlKSB7XG4gIHJldHVybiB0eXBlb2YgZSAhPSBcIm51bWJlclwiID8gWG4oZSkgOiB7XG4gICAgdG9wOiBlLFxuICAgIHJpZ2h0OiBlLFxuICAgIGJvdHRvbTogZSxcbiAgICBsZWZ0OiBlXG4gIH07XG59XG5mdW5jdGlvbiBGZShlKSB7XG4gIGNvbnN0IHtcbiAgICB4OiB0LFxuICAgIHk6IG4sXG4gICAgd2lkdGg6IHIsXG4gICAgaGVpZ2h0OiBpXG4gIH0gPSBlO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiByLFxuICAgIGhlaWdodDogaSxcbiAgICB0b3A6IG4sXG4gICAgbGVmdDogdCxcbiAgICByaWdodDogdCArIHIsXG4gICAgYm90dG9tOiBuICsgaSxcbiAgICB4OiB0LFxuICAgIHk6IG5cbiAgfTtcbn1cbmZ1bmN0aW9uIEN0KGUsIHQsIG4pIHtcbiAgbGV0IHtcbiAgICByZWZlcmVuY2U6IHIsXG4gICAgZmxvYXRpbmc6IGlcbiAgfSA9IGU7XG4gIGNvbnN0IG8gPSBoZSh0KSwgcyA9IEd0KHQpLCBhID0gS3QocyksIGMgPSBhZSh0KSwgdSA9IG8gPT09IFwieVwiLCBsID0gci54ICsgci53aWR0aCAvIDIgLSBpLndpZHRoIC8gMiwgZiA9IHIueSArIHIuaGVpZ2h0IC8gMiAtIGkuaGVpZ2h0IC8gMiwgdiA9IHJbYV0gLyAyIC0gaVthXSAvIDI7XG4gIGxldCBkO1xuICBzd2l0Y2ggKGMpIHtcbiAgICBjYXNlIFwidG9wXCI6XG4gICAgICBkID0ge1xuICAgICAgICB4OiBsLFxuICAgICAgICB5OiByLnkgLSBpLmhlaWdodFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJib3R0b21cIjpcbiAgICAgIGQgPSB7XG4gICAgICAgIHg6IGwsXG4gICAgICAgIHk6IHIueSArIHIuaGVpZ2h0XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICBkID0ge1xuICAgICAgICB4OiByLnggKyByLndpZHRoLFxuICAgICAgICB5OiBmXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImxlZnRcIjpcbiAgICAgIGQgPSB7XG4gICAgICAgIHg6IHIueCAtIGkud2lkdGgsXG4gICAgICAgIHk6IGZcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgZCA9IHtcbiAgICAgICAgeDogci54LFxuICAgICAgICB5OiByLnlcbiAgICAgIH07XG4gIH1cbiAgc3dpdGNoICh6ZSh0KSkge1xuICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgZFtzXSAtPSB2ICogKG4gJiYgdSA/IC0xIDogMSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiZW5kXCI6XG4gICAgICBkW3NdICs9IHYgKiAobiAmJiB1ID8gLTEgOiAxKTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiBkO1xufVxuY29uc3QgZXIgPSBhc3luYyAoZSwgdCwgbikgPT4ge1xuICBjb25zdCB7XG4gICAgcGxhY2VtZW50OiByID0gXCJib3R0b21cIixcbiAgICBzdHJhdGVneTogaSA9IFwiYWJzb2x1dGVcIixcbiAgICBtaWRkbGV3YXJlOiBvID0gW10sXG4gICAgcGxhdGZvcm06IHNcbiAgfSA9IG4sIGEgPSBvLmZpbHRlcihCb29sZWFuKSwgYyA9IGF3YWl0IChzLmlzUlRMID09IG51bGwgPyB2b2lkIDAgOiBzLmlzUlRMKHQpKTtcbiAgbGV0IHUgPSBhd2FpdCBzLmdldEVsZW1lbnRSZWN0cyh7XG4gICAgcmVmZXJlbmNlOiBlLFxuICAgIGZsb2F0aW5nOiB0LFxuICAgIHN0cmF0ZWd5OiBpXG4gIH0pLCB7XG4gICAgeDogbCxcbiAgICB5OiBmXG4gIH0gPSBDdCh1LCByLCBjKSwgdiA9IHIsIGQgPSB7fSwgbSA9IDA7XG4gIGZvciAobGV0IHAgPSAwOyBwIDwgYS5sZW5ndGg7IHArKykge1xuICAgIGNvbnN0IHtcbiAgICAgIG5hbWU6IGcsXG4gICAgICBmbjogaFxuICAgIH0gPSBhW3BdLCB7XG4gICAgICB4LFxuICAgICAgeTogRSxcbiAgICAgIGRhdGE6IFAsXG4gICAgICByZXNldDogYlxuICAgIH0gPSBhd2FpdCBoKHtcbiAgICAgIHg6IGwsXG4gICAgICB5OiBmLFxuICAgICAgaW5pdGlhbFBsYWNlbWVudDogcixcbiAgICAgIHBsYWNlbWVudDogdixcbiAgICAgIHN0cmF0ZWd5OiBpLFxuICAgICAgbWlkZGxld2FyZURhdGE6IGQsXG4gICAgICByZWN0czogdSxcbiAgICAgIHBsYXRmb3JtOiBzLFxuICAgICAgZWxlbWVudHM6IHtcbiAgICAgICAgcmVmZXJlbmNlOiBlLFxuICAgICAgICBmbG9hdGluZzogdFxuICAgICAgfVxuICAgIH0pO1xuICAgIGwgPSB4ID8/IGwsIGYgPSBFID8/IGYsIGQgPSB7XG4gICAgICAuLi5kLFxuICAgICAgW2ddOiB7XG4gICAgICAgIC4uLmRbZ10sXG4gICAgICAgIC4uLlBcbiAgICAgIH1cbiAgICB9LCBiICYmIG0gPD0gNTAgJiYgKG0rKywgdHlwZW9mIGIgPT0gXCJvYmplY3RcIiAmJiAoYi5wbGFjZW1lbnQgJiYgKHYgPSBiLnBsYWNlbWVudCksIGIucmVjdHMgJiYgKHUgPSBiLnJlY3RzID09PSAhMCA/IGF3YWl0IHMuZ2V0RWxlbWVudFJlY3RzKHtcbiAgICAgIHJlZmVyZW5jZTogZSxcbiAgICAgIGZsb2F0aW5nOiB0LFxuICAgICAgc3RyYXRlZ3k6IGlcbiAgICB9KSA6IGIucmVjdHMpLCB7XG4gICAgICB4OiBsLFxuICAgICAgeTogZlxuICAgIH0gPSBDdCh1LCB2LCBjKSksIHAgPSAtMSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB4OiBsLFxuICAgIHk6IGYsXG4gICAgcGxhY2VtZW50OiB2LFxuICAgIHN0cmF0ZWd5OiBpLFxuICAgIG1pZGRsZXdhcmVEYXRhOiBkXG4gIH07XG59O1xuYXN5bmMgZnVuY3Rpb24gUXQoZSwgdCkge1xuICB2YXIgbjtcbiAgdCA9PT0gdm9pZCAwICYmICh0ID0ge30pO1xuICBjb25zdCB7XG4gICAgeDogcixcbiAgICB5OiBpLFxuICAgIHBsYXRmb3JtOiBvLFxuICAgIHJlY3RzOiBzLFxuICAgIGVsZW1lbnRzOiBhLFxuICAgIHN0cmF0ZWd5OiBjXG4gIH0gPSBlLCB7XG4gICAgYm91bmRhcnk6IHUgPSBcImNsaXBwaW5nQW5jZXN0b3JzXCIsXG4gICAgcm9vdEJvdW5kYXJ5OiBsID0gXCJ2aWV3cG9ydFwiLFxuICAgIGVsZW1lbnRDb250ZXh0OiBmID0gXCJmbG9hdGluZ1wiLFxuICAgIGFsdEJvdW5kYXJ5OiB2ID0gITEsXG4gICAgcGFkZGluZzogZCA9IDBcbiAgfSA9IEhlKHQsIGUpLCBtID0gWm4oZCksIGcgPSBhW3YgPyBmID09PSBcImZsb2F0aW5nXCIgPyBcInJlZmVyZW5jZVwiIDogXCJmbG9hdGluZ1wiIDogZl0sIGggPSBGZShhd2FpdCBvLmdldENsaXBwaW5nUmVjdCh7XG4gICAgZWxlbWVudDogKG4gPSBhd2FpdCAoby5pc0VsZW1lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IG8uaXNFbGVtZW50KGcpKSkgPT0gbnVsbCB8fCBuID8gZyA6IGcuY29udGV4dEVsZW1lbnQgfHwgYXdhaXQgKG8uZ2V0RG9jdW1lbnRFbGVtZW50ID09IG51bGwgPyB2b2lkIDAgOiBvLmdldERvY3VtZW50RWxlbWVudChhLmZsb2F0aW5nKSksXG4gICAgYm91bmRhcnk6IHUsXG4gICAgcm9vdEJvdW5kYXJ5OiBsLFxuICAgIHN0cmF0ZWd5OiBjXG4gIH0pKSwgeCA9IGYgPT09IFwiZmxvYXRpbmdcIiA/IHtcbiAgICB4OiByLFxuICAgIHk6IGksXG4gICAgd2lkdGg6IHMuZmxvYXRpbmcud2lkdGgsXG4gICAgaGVpZ2h0OiBzLmZsb2F0aW5nLmhlaWdodFxuICB9IDogcy5yZWZlcmVuY2UsIEUgPSBhd2FpdCAoby5nZXRPZmZzZXRQYXJlbnQgPT0gbnVsbCA/IHZvaWQgMCA6IG8uZ2V0T2Zmc2V0UGFyZW50KGEuZmxvYXRpbmcpKSwgUCA9IGF3YWl0IChvLmlzRWxlbWVudCA9PSBudWxsID8gdm9pZCAwIDogby5pc0VsZW1lbnQoRSkpID8gYXdhaXQgKG8uZ2V0U2NhbGUgPT0gbnVsbCA/IHZvaWQgMCA6IG8uZ2V0U2NhbGUoRSkpIHx8IHtcbiAgICB4OiAxLFxuICAgIHk6IDFcbiAgfSA6IHtcbiAgICB4OiAxLFxuICAgIHk6IDFcbiAgfSwgYiA9IEZlKG8uY29udmVydE9mZnNldFBhcmVudFJlbGF0aXZlUmVjdFRvVmlld3BvcnRSZWxhdGl2ZVJlY3QgPyBhd2FpdCBvLmNvbnZlcnRPZmZzZXRQYXJlbnRSZWxhdGl2ZVJlY3RUb1ZpZXdwb3J0UmVsYXRpdmVSZWN0KHtcbiAgICBlbGVtZW50czogYSxcbiAgICByZWN0OiB4LFxuICAgIG9mZnNldFBhcmVudDogRSxcbiAgICBzdHJhdGVneTogY1xuICB9KSA6IHgpO1xuICByZXR1cm4ge1xuICAgIHRvcDogKGgudG9wIC0gYi50b3AgKyBtLnRvcCkgLyBQLnksXG4gICAgYm90dG9tOiAoYi5ib3R0b20gLSBoLmJvdHRvbSArIG0uYm90dG9tKSAvIFAueSxcbiAgICBsZWZ0OiAoaC5sZWZ0IC0gYi5sZWZ0ICsgbS5sZWZ0KSAvIFAueCxcbiAgICByaWdodDogKGIucmlnaHQgLSBoLnJpZ2h0ICsgbS5yaWdodCkgLyBQLnhcbiAgfTtcbn1cbmNvbnN0IHRyID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZSA9PT0gdm9pZCAwICYmIChlID0ge30pLCB7XG4gICAgbmFtZTogXCJmbGlwXCIsXG4gICAgb3B0aW9uczogZSxcbiAgICBhc3luYyBmbih0KSB7XG4gICAgICB2YXIgbiwgcjtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcGxhY2VtZW50OiBpLFxuICAgICAgICBtaWRkbGV3YXJlRGF0YTogbyxcbiAgICAgICAgcmVjdHM6IHMsXG4gICAgICAgIGluaXRpYWxQbGFjZW1lbnQ6IGEsXG4gICAgICAgIHBsYXRmb3JtOiBjLFxuICAgICAgICBlbGVtZW50czogdVxuICAgICAgfSA9IHQsIHtcbiAgICAgICAgbWFpbkF4aXM6IGwgPSAhMCxcbiAgICAgICAgY3Jvc3NBeGlzOiBmID0gITAsXG4gICAgICAgIGZhbGxiYWNrUGxhY2VtZW50czogdixcbiAgICAgICAgZmFsbGJhY2tTdHJhdGVneTogZCA9IFwiYmVzdEZpdFwiLFxuICAgICAgICBmYWxsYmFja0F4aXNTaWRlRGlyZWN0aW9uOiBtID0gXCJub25lXCIsXG4gICAgICAgIGZsaXBBbGlnbm1lbnQ6IHAgPSAhMCxcbiAgICAgICAgLi4uZ1xuICAgICAgfSA9IEhlKGUsIHQpO1xuICAgICAgaWYgKChuID0gby5hcnJvdykgIT0gbnVsbCAmJiBuLmFsaWdubWVudE9mZnNldClcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgY29uc3QgaCA9IGFlKGkpLCB4ID0gaGUoYSksIEUgPSBhZShhKSA9PT0gYSwgUCA9IGF3YWl0IChjLmlzUlRMID09IG51bGwgPyB2b2lkIDAgOiBjLmlzUlRMKHUuZmxvYXRpbmcpKSwgYiA9IHYgfHwgKEUgfHwgIXAgPyBbTmUoYSldIDogR24oYSkpLCBTID0gbSAhPT0gXCJub25lXCI7XG4gICAgICAhdiAmJiBTICYmIGIucHVzaCguLi5KbihhLCBwLCBtLCBQKSk7XG4gICAgICBjb25zdCBDID0gW2EsIC4uLmJdLCAkID0gYXdhaXQgUXQodCwgZyksIEkgPSBbXTtcbiAgICAgIGxldCB6ID0gKChyID0gby5mbGlwKSA9PSBudWxsID8gdm9pZCAwIDogci5vdmVyZmxvd3MpIHx8IFtdO1xuICAgICAgaWYgKGwgJiYgSS5wdXNoKCRbaF0pLCBmKSB7XG4gICAgICAgIGNvbnN0IEsgPSBLbihpLCBzLCBQKTtcbiAgICAgICAgSS5wdXNoKCRbS1swXV0sICRbS1sxXV0pO1xuICAgICAgfVxuICAgICAgaWYgKHogPSBbLi4ueiwge1xuICAgICAgICBwbGFjZW1lbnQ6IGksXG4gICAgICAgIG92ZXJmbG93czogSVxuICAgICAgfV0sICFJLmV2ZXJ5KChLKSA9PiBLIDw9IDApKSB7XG4gICAgICAgIHZhciBULCBMO1xuICAgICAgICBjb25zdCBLID0gKCgoVCA9IG8uZmxpcCkgPT0gbnVsbCA/IHZvaWQgMCA6IFQuaW5kZXgpIHx8IDApICsgMSwga2UgPSBDW0tdO1xuICAgICAgICBpZiAoa2UpXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgaW5kZXg6IEssXG4gICAgICAgICAgICAgIG92ZXJmbG93czogelxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc2V0OiB7XG4gICAgICAgICAgICAgIHBsYWNlbWVudDoga2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICBsZXQgeGUgPSAoTCA9IHouZmlsdGVyKChmZSkgPT4gZmUub3ZlcmZsb3dzWzBdIDw9IDApLnNvcnQoKGZlLCB0ZSkgPT4gZmUub3ZlcmZsb3dzWzFdIC0gdGUub3ZlcmZsb3dzWzFdKVswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IEwucGxhY2VtZW50O1xuICAgICAgICBpZiAoIXhlKVxuICAgICAgICAgIHN3aXRjaCAoZCkge1xuICAgICAgICAgICAgY2FzZSBcImJlc3RGaXRcIjoge1xuICAgICAgICAgICAgICB2YXIgb2U7XG4gICAgICAgICAgICAgIGNvbnN0IGZlID0gKG9lID0gei5maWx0ZXIoKHRlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5lID0gaGUodGUucGxhY2VtZW50KTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBuZSA9PT0geCB8fCAvLyBDcmVhdGUgYSBiaWFzIHRvIHRoZSBgeWAgc2lkZSBheGlzIGR1ZSB0byBob3Jpem9udGFsXG4gICAgICAgICAgICAgICAgICAvLyByZWFkaW5nIGRpcmVjdGlvbnMgZmF2b3JpbmcgZ3JlYXRlciB3aWR0aC5cbiAgICAgICAgICAgICAgICAgIG5lID09PSBcInlcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAgICAgICB9KS5tYXAoKHRlKSA9PiBbdGUucGxhY2VtZW50LCB0ZS5vdmVyZmxvd3MuZmlsdGVyKChuZSkgPT4gbmUgPiAwKS5yZWR1Y2UoKG5lLCBCbikgPT4gbmUgKyBCbiwgMCldKS5zb3J0KCh0ZSwgbmUpID0+IHRlWzFdIC0gbmVbMV0pWzBdKSA9PSBudWxsID8gdm9pZCAwIDogb2VbMF07XG4gICAgICAgICAgICAgIGZlICYmICh4ZSA9IGZlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiaW5pdGlhbFBsYWNlbWVudFwiOlxuICAgICAgICAgICAgICB4ZSA9IGE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgaWYgKGkgIT09IHhlKVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXNldDoge1xuICAgICAgICAgICAgICBwbGFjZW1lbnQ6IHhlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gIH07XG59O1xuYXN5bmMgZnVuY3Rpb24gbnIoZSwgdCkge1xuICBjb25zdCB7XG4gICAgcGxhY2VtZW50OiBuLFxuICAgIHBsYXRmb3JtOiByLFxuICAgIGVsZW1lbnRzOiBpXG4gIH0gPSBlLCBvID0gYXdhaXQgKHIuaXNSVEwgPT0gbnVsbCA/IHZvaWQgMCA6IHIuaXNSVEwoaS5mbG9hdGluZykpLCBzID0gYWUobiksIGEgPSB6ZShuKSwgYyA9IGhlKG4pID09PSBcInlcIiwgdSA9IFtcImxlZnRcIiwgXCJ0b3BcIl0uaW5jbHVkZXMocykgPyAtMSA6IDEsIGwgPSBvICYmIGMgPyAtMSA6IDEsIGYgPSBIZSh0LCBlKTtcbiAgbGV0IHtcbiAgICBtYWluQXhpczogdixcbiAgICBjcm9zc0F4aXM6IGQsXG4gICAgYWxpZ25tZW50QXhpczogbVxuICB9ID0gdHlwZW9mIGYgPT0gXCJudW1iZXJcIiA/IHtcbiAgICBtYWluQXhpczogZixcbiAgICBjcm9zc0F4aXM6IDAsXG4gICAgYWxpZ25tZW50QXhpczogbnVsbFxuICB9IDoge1xuICAgIG1haW5BeGlzOiBmLm1haW5BeGlzIHx8IDAsXG4gICAgY3Jvc3NBeGlzOiBmLmNyb3NzQXhpcyB8fCAwLFxuICAgIGFsaWdubWVudEF4aXM6IGYuYWxpZ25tZW50QXhpc1xuICB9O1xuICByZXR1cm4gYSAmJiB0eXBlb2YgbSA9PSBcIm51bWJlclwiICYmIChkID0gYSA9PT0gXCJlbmRcIiA/IG0gKiAtMSA6IG0pLCBjID8ge1xuICAgIHg6IGQgKiBsLFxuICAgIHk6IHYgKiB1XG4gIH0gOiB7XG4gICAgeDogdiAqIHUsXG4gICAgeTogZCAqIGxcbiAgfTtcbn1cbmNvbnN0IHJyID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZSA9PT0gdm9pZCAwICYmIChlID0gMCksIHtcbiAgICBuYW1lOiBcIm9mZnNldFwiLFxuICAgIG9wdGlvbnM6IGUsXG4gICAgYXN5bmMgZm4odCkge1xuICAgICAgdmFyIG4sIHI7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHg6IGksXG4gICAgICAgIHk6IG8sXG4gICAgICAgIHBsYWNlbWVudDogcyxcbiAgICAgICAgbWlkZGxld2FyZURhdGE6IGFcbiAgICAgIH0gPSB0LCBjID0gYXdhaXQgbnIodCwgZSk7XG4gICAgICByZXR1cm4gcyA9PT0gKChuID0gYS5vZmZzZXQpID09IG51bGwgPyB2b2lkIDAgOiBuLnBsYWNlbWVudCkgJiYgKHIgPSBhLmFycm93KSAhPSBudWxsICYmIHIuYWxpZ25tZW50T2Zmc2V0ID8ge30gOiB7XG4gICAgICAgIHg6IGkgKyBjLngsXG4gICAgICAgIHk6IG8gKyBjLnksXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi5jLFxuICAgICAgICAgIHBsYWNlbWVudDogc1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn0sIGlyID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZSA9PT0gdm9pZCAwICYmIChlID0ge30pLCB7XG4gICAgbmFtZTogXCJzaGlmdFwiLFxuICAgIG9wdGlvbnM6IGUsXG4gICAgYXN5bmMgZm4odCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICB4OiBuLFxuICAgICAgICB5OiByLFxuICAgICAgICBwbGFjZW1lbnQ6IGlcbiAgICAgIH0gPSB0LCB7XG4gICAgICAgIG1haW5BeGlzOiBvID0gITAsXG4gICAgICAgIGNyb3NzQXhpczogcyA9ICExLFxuICAgICAgICBsaW1pdGVyOiBhID0ge1xuICAgICAgICAgIGZuOiAoZykgPT4ge1xuICAgICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgICAgeDogaCxcbiAgICAgICAgICAgICAgeTogeFxuICAgICAgICAgICAgfSA9IGc7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB4OiBoLFxuICAgICAgICAgICAgICB5OiB4XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLi4uY1xuICAgICAgfSA9IEhlKGUsIHQpLCB1ID0ge1xuICAgICAgICB4OiBuLFxuICAgICAgICB5OiByXG4gICAgICB9LCBsID0gYXdhaXQgUXQodCwgYyksIGYgPSBoZShhZShpKSksIHYgPSBxdChmKTtcbiAgICAgIGxldCBkID0gdVt2XSwgbSA9IHVbZl07XG4gICAgICBpZiAobykge1xuICAgICAgICBjb25zdCBnID0gdiA9PT0gXCJ5XCIgPyBcInRvcFwiIDogXCJsZWZ0XCIsIGggPSB2ID09PSBcInlcIiA/IFwiYm90dG9tXCIgOiBcInJpZ2h0XCIsIHggPSBkICsgbFtnXSwgRSA9IGQgLSBsW2hdO1xuICAgICAgICBkID0gRXQoeCwgZCwgRSk7XG4gICAgICB9XG4gICAgICBpZiAocykge1xuICAgICAgICBjb25zdCBnID0gZiA9PT0gXCJ5XCIgPyBcInRvcFwiIDogXCJsZWZ0XCIsIGggPSBmID09PSBcInlcIiA/IFwiYm90dG9tXCIgOiBcInJpZ2h0XCIsIHggPSBtICsgbFtnXSwgRSA9IG0gLSBsW2hdO1xuICAgICAgICBtID0gRXQoeCwgbSwgRSk7XG4gICAgICB9XG4gICAgICBjb25zdCBwID0gYS5mbih7XG4gICAgICAgIC4uLnQsXG4gICAgICAgIFt2XTogZCxcbiAgICAgICAgW2ZdOiBtXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB4OiBwLnggLSBuLFxuICAgICAgICAgIHk6IHAueSAtIHIsXG4gICAgICAgICAgZW5hYmxlZDoge1xuICAgICAgICAgICAgW3ZdOiBvLFxuICAgICAgICAgICAgW2ZdOiBzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5mdW5jdGlvbiBZZSgpIHtcbiAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgPCBcInVcIjtcbn1cbmZ1bmN0aW9uIGJlKGUpIHtcbiAgcmV0dXJuIEp0KGUpID8gKGUubm9kZU5hbWUgfHwgXCJcIikudG9Mb3dlckNhc2UoKSA6IFwiI2RvY3VtZW50XCI7XG59XG5mdW5jdGlvbiBVKGUpIHtcbiAgdmFyIHQ7XG4gIHJldHVybiAoZSA9PSBudWxsIHx8ICh0ID0gZS5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogdC5kZWZhdWx0VmlldykgfHwgd2luZG93O1xufVxuZnVuY3Rpb24gSihlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gKHQgPSAoSnQoZSkgPyBlLm93bmVyRG9jdW1lbnQgOiBlLmRvY3VtZW50KSB8fCB3aW5kb3cuZG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiB0LmRvY3VtZW50RWxlbWVudDtcbn1cbmZ1bmN0aW9uIEp0KGUpIHtcbiAgcmV0dXJuIFllKCkgPyBlIGluc3RhbmNlb2YgTm9kZSB8fCBlIGluc3RhbmNlb2YgVShlKS5Ob2RlIDogITE7XG59XG5mdW5jdGlvbiBZKGUpIHtcbiAgcmV0dXJuIFllKCkgPyBlIGluc3RhbmNlb2YgRWxlbWVudCB8fCBlIGluc3RhbmNlb2YgVShlKS5FbGVtZW50IDogITE7XG59XG5mdW5jdGlvbiBRKGUpIHtcbiAgcmV0dXJuIFllKCkgPyBlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIFUoZSkuSFRNTEVsZW1lbnQgOiAhMTtcbn1cbmZ1bmN0aW9uIFB0KGUpIHtcbiAgcmV0dXJuICFZZSgpIHx8IHR5cGVvZiBTaGFkb3dSb290ID4gXCJ1XCIgPyAhMSA6IGUgaW5zdGFuY2VvZiBTaGFkb3dSb290IHx8IGUgaW5zdGFuY2VvZiBVKGUpLlNoYWRvd1Jvb3Q7XG59XG5mdW5jdGlvbiBBZShlKSB7XG4gIGNvbnN0IHtcbiAgICBvdmVyZmxvdzogdCxcbiAgICBvdmVyZmxvd1g6IG4sXG4gICAgb3ZlcmZsb3dZOiByLFxuICAgIGRpc3BsYXk6IGlcbiAgfSA9IHEoZSk7XG4gIHJldHVybiAvYXV0b3xzY3JvbGx8b3ZlcmxheXxoaWRkZW58Y2xpcC8udGVzdCh0ICsgciArIG4pICYmICFbXCJpbmxpbmVcIiwgXCJjb250ZW50c1wiXS5pbmNsdWRlcyhpKTtcbn1cbmZ1bmN0aW9uIG9yKGUpIHtcbiAgcmV0dXJuIFtcInRhYmxlXCIsIFwidGRcIiwgXCJ0aFwiXS5pbmNsdWRlcyhiZShlKSk7XG59XG5mdW5jdGlvbiBxZShlKSB7XG4gIHJldHVybiBbXCI6cG9wb3Zlci1vcGVuXCIsIFwiOm1vZGFsXCJdLnNvbWUoKHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGUubWF0Y2hlcyh0KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZnQoZSkge1xuICBjb25zdCB0ID0gZHQoKSwgbiA9IFkoZSkgPyBxKGUpIDogZTtcbiAgcmV0dXJuIFtcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZVwiLCBcInNjYWxlXCIsIFwicm90YXRlXCIsIFwicGVyc3BlY3RpdmVcIl0uc29tZSgocikgPT4gbltyXSA/IG5bcl0gIT09IFwibm9uZVwiIDogITEpIHx8IChuLmNvbnRhaW5lclR5cGUgPyBuLmNvbnRhaW5lclR5cGUgIT09IFwibm9ybWFsXCIgOiAhMSkgfHwgIXQgJiYgKG4uYmFja2Ryb3BGaWx0ZXIgPyBuLmJhY2tkcm9wRmlsdGVyICE9PSBcIm5vbmVcIiA6ICExKSB8fCAhdCAmJiAobi5maWx0ZXIgPyBuLmZpbHRlciAhPT0gXCJub25lXCIgOiAhMSkgfHwgW1widHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlXCIsIFwic2NhbGVcIiwgXCJyb3RhdGVcIiwgXCJwZXJzcGVjdGl2ZVwiLCBcImZpbHRlclwiXS5zb21lKChyKSA9PiAobi53aWxsQ2hhbmdlIHx8IFwiXCIpLmluY2x1ZGVzKHIpKSB8fCBbXCJwYWludFwiLCBcImxheW91dFwiLCBcInN0cmljdFwiLCBcImNvbnRlbnRcIl0uc29tZSgocikgPT4gKG4uY29udGFpbiB8fCBcIlwiKS5pbmNsdWRlcyhyKSk7XG59XG5mdW5jdGlvbiBzcihlKSB7XG4gIGxldCB0ID0gaWUoZSk7XG4gIGZvciAoOyBRKHQpICYmICF2ZSh0KTsgKSB7XG4gICAgaWYgKGZ0KHQpKVxuICAgICAgcmV0dXJuIHQ7XG4gICAgaWYgKHFlKHQpKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgdCA9IGllKHQpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZHQoKSB7XG4gIHJldHVybiB0eXBlb2YgQ1NTID4gXCJ1XCIgfHwgIUNTUy5zdXBwb3J0cyA/ICExIDogQ1NTLnN1cHBvcnRzKFwiLXdlYmtpdC1iYWNrZHJvcC1maWx0ZXJcIiwgXCJub25lXCIpO1xufVxuZnVuY3Rpb24gdmUoZSkge1xuICByZXR1cm4gW1wiaHRtbFwiLCBcImJvZHlcIiwgXCIjZG9jdW1lbnRcIl0uaW5jbHVkZXMoYmUoZSkpO1xufVxuZnVuY3Rpb24gcShlKSB7XG4gIHJldHVybiBVKGUpLmdldENvbXB1dGVkU3R5bGUoZSk7XG59XG5mdW5jdGlvbiBLZShlKSB7XG4gIHJldHVybiBZKGUpID8ge1xuICAgIHNjcm9sbExlZnQ6IGUuc2Nyb2xsTGVmdCxcbiAgICBzY3JvbGxUb3A6IGUuc2Nyb2xsVG9wXG4gIH0gOiB7XG4gICAgc2Nyb2xsTGVmdDogZS5zY3JvbGxYLFxuICAgIHNjcm9sbFRvcDogZS5zY3JvbGxZXG4gIH07XG59XG5mdW5jdGlvbiBpZShlKSB7XG4gIGlmIChiZShlKSA9PT0gXCJodG1sXCIpXG4gICAgcmV0dXJuIGU7XG4gIGNvbnN0IHQgPSAoXG4gICAgLy8gU3RlcCBpbnRvIHRoZSBzaGFkb3cgRE9NIG9mIHRoZSBwYXJlbnQgb2YgYSBzbG90dGVkIG5vZGUuXG4gICAgZS5hc3NpZ25lZFNsb3QgfHwgLy8gRE9NIEVsZW1lbnQgZGV0ZWN0ZWQuXG4gICAgZS5wYXJlbnROb2RlIHx8IC8vIFNoYWRvd1Jvb3QgZGV0ZWN0ZWQuXG4gICAgUHQoZSkgJiYgZS5ob3N0IHx8IC8vIEZhbGxiYWNrLlxuICAgIEooZSlcbiAgKTtcbiAgcmV0dXJuIFB0KHQpID8gdC5ob3N0IDogdDtcbn1cbmZ1bmN0aW9uIFh0KGUpIHtcbiAgY29uc3QgdCA9IGllKGUpO1xuICByZXR1cm4gdmUodCkgPyBlLm93bmVyRG9jdW1lbnQgPyBlLm93bmVyRG9jdW1lbnQuYm9keSA6IGUuYm9keSA6IFEodCkgJiYgQWUodCkgPyB0IDogWHQodCk7XG59XG5mdW5jdGlvbiBFZShlLCB0LCBuKSB7XG4gIHZhciByO1xuICB0ID09PSB2b2lkIDAgJiYgKHQgPSBbXSksIG4gPT09IHZvaWQgMCAmJiAobiA9ICEwKTtcbiAgY29uc3QgaSA9IFh0KGUpLCBvID0gaSA9PT0gKChyID0gZS5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogci5ib2R5KSwgcyA9IFUoaSk7XG4gIGlmIChvKSB7XG4gICAgY29uc3QgYSA9IG90KHMpO1xuICAgIHJldHVybiB0LmNvbmNhdChzLCBzLnZpc3VhbFZpZXdwb3J0IHx8IFtdLCBBZShpKSA/IGkgOiBbXSwgYSAmJiBuID8gRWUoYSkgOiBbXSk7XG4gIH1cbiAgcmV0dXJuIHQuY29uY2F0KGksIEVlKGksIFtdLCBuKSk7XG59XG5mdW5jdGlvbiBvdChlKSB7XG4gIHJldHVybiBlLnBhcmVudCAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wYXJlbnQpID8gZS5mcmFtZUVsZW1lbnQgOiBudWxsO1xufVxuZnVuY3Rpb24gWnQoZSkge1xuICBjb25zdCB0ID0gcShlKTtcbiAgbGV0IG4gPSBwYXJzZUZsb2F0KHQud2lkdGgpIHx8IDAsIHIgPSBwYXJzZUZsb2F0KHQuaGVpZ2h0KSB8fCAwO1xuICBjb25zdCBpID0gUShlKSwgbyA9IGkgPyBlLm9mZnNldFdpZHRoIDogbiwgcyA9IGkgPyBlLm9mZnNldEhlaWdodCA6IHIsIGEgPSAkZShuKSAhPT0gbyB8fCAkZShyKSAhPT0gcztcbiAgcmV0dXJuIGEgJiYgKG4gPSBvLCByID0gcyksIHtcbiAgICB3aWR0aDogbixcbiAgICBoZWlnaHQ6IHIsXG4gICAgJDogYVxuICB9O1xufVxuZnVuY3Rpb24gcHQoZSkge1xuICByZXR1cm4gWShlKSA/IGUgOiBlLmNvbnRleHRFbGVtZW50O1xufVxuZnVuY3Rpb24gZGUoZSkge1xuICBjb25zdCB0ID0gcHQoZSk7XG4gIGlmICghUSh0KSlcbiAgICByZXR1cm4gRygxKTtcbiAgY29uc3QgbiA9IHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHtcbiAgICB3aWR0aDogcixcbiAgICBoZWlnaHQ6IGksXG4gICAgJDogb1xuICB9ID0gWnQodCk7XG4gIGxldCBzID0gKG8gPyAkZShuLndpZHRoKSA6IG4ud2lkdGgpIC8gciwgYSA9IChvID8gJGUobi5oZWlnaHQpIDogbi5oZWlnaHQpIC8gaTtcbiAgcmV0dXJuICghcyB8fCAhTnVtYmVyLmlzRmluaXRlKHMpKSAmJiAocyA9IDEpLCAoIWEgfHwgIU51bWJlci5pc0Zpbml0ZShhKSkgJiYgKGEgPSAxKSwge1xuICAgIHg6IHMsXG4gICAgeTogYVxuICB9O1xufVxuY29uc3QgYXIgPSAvKiBAX19QVVJFX18gKi8gRygwKTtcbmZ1bmN0aW9uIGVuKGUpIHtcbiAgY29uc3QgdCA9IFUoZSk7XG4gIHJldHVybiAhZHQoKSB8fCAhdC52aXN1YWxWaWV3cG9ydCA/IGFyIDoge1xuICAgIHg6IHQudmlzdWFsVmlld3BvcnQub2Zmc2V0TGVmdCxcbiAgICB5OiB0LnZpc3VhbFZpZXdwb3J0Lm9mZnNldFRvcFxuICB9O1xufVxuZnVuY3Rpb24gY3IoZSwgdCwgbikge1xuICByZXR1cm4gdCA9PT0gdm9pZCAwICYmICh0ID0gITEpLCAhbiB8fCB0ICYmIG4gIT09IFUoZSkgPyAhMSA6IHQ7XG59XG5mdW5jdGlvbiBjZShlLCB0LCBuLCByKSB7XG4gIHQgPT09IHZvaWQgMCAmJiAodCA9ICExKSwgbiA9PT0gdm9pZCAwICYmIChuID0gITEpO1xuICBjb25zdCBpID0gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgbyA9IHB0KGUpO1xuICBsZXQgcyA9IEcoMSk7XG4gIHQgJiYgKHIgPyBZKHIpICYmIChzID0gZGUocikpIDogcyA9IGRlKGUpKTtcbiAgY29uc3QgYSA9IGNyKG8sIG4sIHIpID8gZW4obykgOiBHKDApO1xuICBsZXQgYyA9IChpLmxlZnQgKyBhLngpIC8gcy54LCB1ID0gKGkudG9wICsgYS55KSAvIHMueSwgbCA9IGkud2lkdGggLyBzLngsIGYgPSBpLmhlaWdodCAvIHMueTtcbiAgaWYgKG8pIHtcbiAgICBjb25zdCB2ID0gVShvKSwgZCA9IHIgJiYgWShyKSA/IFUocikgOiByO1xuICAgIGxldCBtID0gdiwgcCA9IG90KG0pO1xuICAgIGZvciAoOyBwICYmIHIgJiYgZCAhPT0gbTsgKSB7XG4gICAgICBjb25zdCBnID0gZGUocCksIGggPSBwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCB4ID0gcShwKSwgRSA9IGgubGVmdCArIChwLmNsaWVudExlZnQgKyBwYXJzZUZsb2F0KHgucGFkZGluZ0xlZnQpKSAqIGcueCwgUCA9IGgudG9wICsgKHAuY2xpZW50VG9wICsgcGFyc2VGbG9hdCh4LnBhZGRpbmdUb3ApKSAqIGcueTtcbiAgICAgIGMgKj0gZy54LCB1ICo9IGcueSwgbCAqPSBnLngsIGYgKj0gZy55LCBjICs9IEUsIHUgKz0gUCwgbSA9IFUocCksIHAgPSBvdChtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIEZlKHtcbiAgICB3aWR0aDogbCxcbiAgICBoZWlnaHQ6IGYsXG4gICAgeDogYyxcbiAgICB5OiB1XG4gIH0pO1xufVxuZnVuY3Rpb24gaHQoZSwgdCkge1xuICBjb25zdCBuID0gS2UoZSkuc2Nyb2xsTGVmdDtcbiAgcmV0dXJuIHQgPyB0LmxlZnQgKyBuIDogY2UoSihlKSkubGVmdCArIG47XG59XG5mdW5jdGlvbiB0bihlLCB0LCBuKSB7XG4gIG4gPT09IHZvaWQgMCAmJiAobiA9ICExKTtcbiAgY29uc3QgciA9IGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGkgPSByLmxlZnQgKyB0LnNjcm9sbExlZnQgLSAobiA/IDAgOiAoXG4gICAgLy8gUlRMIDxib2R5PiBzY3JvbGxiYXIuXG4gICAgaHQoZSwgcilcbiAgKSksIG8gPSByLnRvcCArIHQuc2Nyb2xsVG9wO1xuICByZXR1cm4ge1xuICAgIHg6IGksXG4gICAgeTogb1xuICB9O1xufVxuZnVuY3Rpb24gdXIoZSkge1xuICBsZXQge1xuICAgIGVsZW1lbnRzOiB0LFxuICAgIHJlY3Q6IG4sXG4gICAgb2Zmc2V0UGFyZW50OiByLFxuICAgIHN0cmF0ZWd5OiBpXG4gIH0gPSBlO1xuICBjb25zdCBvID0gaSA9PT0gXCJmaXhlZFwiLCBzID0gSihyKSwgYSA9IHQgPyBxZSh0LmZsb2F0aW5nKSA6ICExO1xuICBpZiAociA9PT0gcyB8fCBhICYmIG8pXG4gICAgcmV0dXJuIG47XG4gIGxldCBjID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH0sIHUgPSBHKDEpO1xuICBjb25zdCBsID0gRygwKSwgZiA9IFEocik7XG4gIGlmICgoZiB8fCAhZiAmJiAhbykgJiYgKChiZShyKSAhPT0gXCJib2R5XCIgfHwgQWUocykpICYmIChjID0gS2UocikpLCBRKHIpKSkge1xuICAgIGNvbnN0IGQgPSBjZShyKTtcbiAgICB1ID0gZGUociksIGwueCA9IGQueCArIHIuY2xpZW50TGVmdCwgbC55ID0gZC55ICsgci5jbGllbnRUb3A7XG4gIH1cbiAgY29uc3QgdiA9IHMgJiYgIWYgJiYgIW8gPyB0bihzLCBjLCAhMCkgOiBHKDApO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiBuLndpZHRoICogdS54LFxuICAgIGhlaWdodDogbi5oZWlnaHQgKiB1LnksXG4gICAgeDogbi54ICogdS54IC0gYy5zY3JvbGxMZWZ0ICogdS54ICsgbC54ICsgdi54LFxuICAgIHk6IG4ueSAqIHUueSAtIGMuc2Nyb2xsVG9wICogdS55ICsgbC55ICsgdi55XG4gIH07XG59XG5mdW5jdGlvbiBscihlKSB7XG4gIHJldHVybiBBcnJheS5mcm9tKGUuZ2V0Q2xpZW50UmVjdHMoKSk7XG59XG5mdW5jdGlvbiBmcihlKSB7XG4gIGNvbnN0IHQgPSBKKGUpLCBuID0gS2UoZSksIHIgPSBlLm93bmVyRG9jdW1lbnQuYm9keSwgaSA9IHNlKHQuc2Nyb2xsV2lkdGgsIHQuY2xpZW50V2lkdGgsIHIuc2Nyb2xsV2lkdGgsIHIuY2xpZW50V2lkdGgpLCBvID0gc2UodC5zY3JvbGxIZWlnaHQsIHQuY2xpZW50SGVpZ2h0LCByLnNjcm9sbEhlaWdodCwgci5jbGllbnRIZWlnaHQpO1xuICBsZXQgcyA9IC1uLnNjcm9sbExlZnQgKyBodChlKTtcbiAgY29uc3QgYSA9IC1uLnNjcm9sbFRvcDtcbiAgcmV0dXJuIHEocikuZGlyZWN0aW9uID09PSBcInJ0bFwiICYmIChzICs9IHNlKHQuY2xpZW50V2lkdGgsIHIuY2xpZW50V2lkdGgpIC0gaSksIHtcbiAgICB3aWR0aDogaSxcbiAgICBoZWlnaHQ6IG8sXG4gICAgeDogcyxcbiAgICB5OiBhXG4gIH07XG59XG5mdW5jdGlvbiBkcihlLCB0KSB7XG4gIGNvbnN0IG4gPSBVKGUpLCByID0gSihlKSwgaSA9IG4udmlzdWFsVmlld3BvcnQ7XG4gIGxldCBvID0gci5jbGllbnRXaWR0aCwgcyA9IHIuY2xpZW50SGVpZ2h0LCBhID0gMCwgYyA9IDA7XG4gIGlmIChpKSB7XG4gICAgbyA9IGkud2lkdGgsIHMgPSBpLmhlaWdodDtcbiAgICBjb25zdCB1ID0gZHQoKTtcbiAgICAoIXUgfHwgdSAmJiB0ID09PSBcImZpeGVkXCIpICYmIChhID0gaS5vZmZzZXRMZWZ0LCBjID0gaS5vZmZzZXRUb3ApO1xuICB9XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IG8sXG4gICAgaGVpZ2h0OiBzLFxuICAgIHg6IGEsXG4gICAgeTogY1xuICB9O1xufVxuZnVuY3Rpb24gcHIoZSwgdCkge1xuICBjb25zdCBuID0gY2UoZSwgITAsIHQgPT09IFwiZml4ZWRcIiksIHIgPSBuLnRvcCArIGUuY2xpZW50VG9wLCBpID0gbi5sZWZ0ICsgZS5jbGllbnRMZWZ0LCBvID0gUShlKSA/IGRlKGUpIDogRygxKSwgcyA9IGUuY2xpZW50V2lkdGggKiBvLngsIGEgPSBlLmNsaWVudEhlaWdodCAqIG8ueSwgYyA9IGkgKiBvLngsIHUgPSByICogby55O1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiBzLFxuICAgIGhlaWdodDogYSxcbiAgICB4OiBjLFxuICAgIHk6IHVcbiAgfTtcbn1cbmZ1bmN0aW9uIEF0KGUsIHQsIG4pIHtcbiAgbGV0IHI7XG4gIGlmICh0ID09PSBcInZpZXdwb3J0XCIpXG4gICAgciA9IGRyKGUsIG4pO1xuICBlbHNlIGlmICh0ID09PSBcImRvY3VtZW50XCIpXG4gICAgciA9IGZyKEooZSkpO1xuICBlbHNlIGlmIChZKHQpKVxuICAgIHIgPSBwcih0LCBuKTtcbiAgZWxzZSB7XG4gICAgY29uc3QgaSA9IGVuKGUpO1xuICAgIHIgPSB7XG4gICAgICB4OiB0LnggLSBpLngsXG4gICAgICB5OiB0LnkgLSBpLnksXG4gICAgICB3aWR0aDogdC53aWR0aCxcbiAgICAgIGhlaWdodDogdC5oZWlnaHRcbiAgICB9O1xuICB9XG4gIHJldHVybiBGZShyKTtcbn1cbmZ1bmN0aW9uIG5uKGUsIHQpIHtcbiAgY29uc3QgbiA9IGllKGUpO1xuICByZXR1cm4gbiA9PT0gdCB8fCAhWShuKSB8fCB2ZShuKSA/ICExIDogcShuKS5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiIHx8IG5uKG4sIHQpO1xufVxuZnVuY3Rpb24gaHIoZSwgdCkge1xuICBjb25zdCBuID0gdC5nZXQoZSk7XG4gIGlmIChuKVxuICAgIHJldHVybiBuO1xuICBsZXQgciA9IEVlKGUsIFtdLCAhMSkuZmlsdGVyKChhKSA9PiBZKGEpICYmIGJlKGEpICE9PSBcImJvZHlcIiksIGkgPSBudWxsO1xuICBjb25zdCBvID0gcShlKS5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiO1xuICBsZXQgcyA9IG8gPyBpZShlKSA6IGU7XG4gIGZvciAoOyBZKHMpICYmICF2ZShzKTsgKSB7XG4gICAgY29uc3QgYSA9IHEocyksIGMgPSBmdChzKTtcbiAgICAhYyAmJiBhLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiYgKGkgPSBudWxsKSwgKG8gPyAhYyAmJiAhaSA6ICFjICYmIGEucG9zaXRpb24gPT09IFwic3RhdGljXCIgJiYgISFpICYmIFtcImFic29sdXRlXCIsIFwiZml4ZWRcIl0uaW5jbHVkZXMoaS5wb3NpdGlvbikgfHwgQWUocykgJiYgIWMgJiYgbm4oZSwgcykpID8gciA9IHIuZmlsdGVyKChsKSA9PiBsICE9PSBzKSA6IGkgPSBhLCBzID0gaWUocyk7XG4gIH1cbiAgcmV0dXJuIHQuc2V0KGUsIHIpLCByO1xufVxuZnVuY3Rpb24gdnIoZSkge1xuICBsZXQge1xuICAgIGVsZW1lbnQ6IHQsXG4gICAgYm91bmRhcnk6IG4sXG4gICAgcm9vdEJvdW5kYXJ5OiByLFxuICAgIHN0cmF0ZWd5OiBpXG4gIH0gPSBlO1xuICBjb25zdCBzID0gWy4uLm4gPT09IFwiY2xpcHBpbmdBbmNlc3RvcnNcIiA/IHFlKHQpID8gW10gOiBocih0LCB0aGlzLl9jKSA6IFtdLmNvbmNhdChuKSwgcl0sIGEgPSBzWzBdLCBjID0gcy5yZWR1Y2UoKHUsIGwpID0+IHtcbiAgICBjb25zdCBmID0gQXQodCwgbCwgaSk7XG4gICAgcmV0dXJuIHUudG9wID0gc2UoZi50b3AsIHUudG9wKSwgdS5yaWdodCA9IERlKGYucmlnaHQsIHUucmlnaHQpLCB1LmJvdHRvbSA9IERlKGYuYm90dG9tLCB1LmJvdHRvbSksIHUubGVmdCA9IHNlKGYubGVmdCwgdS5sZWZ0KSwgdTtcbiAgfSwgQXQodCwgYSwgaSkpO1xuICByZXR1cm4ge1xuICAgIHdpZHRoOiBjLnJpZ2h0IC0gYy5sZWZ0LFxuICAgIGhlaWdodDogYy5ib3R0b20gLSBjLnRvcCxcbiAgICB4OiBjLmxlZnQsXG4gICAgeTogYy50b3BcbiAgfTtcbn1cbmZ1bmN0aW9uIG1yKGUpIHtcbiAgY29uc3Qge1xuICAgIHdpZHRoOiB0LFxuICAgIGhlaWdodDogblxuICB9ID0gWnQoZSk7XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHQsXG4gICAgaGVpZ2h0OiBuXG4gIH07XG59XG5mdW5jdGlvbiBncihlLCB0LCBuKSB7XG4gIGNvbnN0IHIgPSBRKHQpLCBpID0gSih0KSwgbyA9IG4gPT09IFwiZml4ZWRcIiwgcyA9IGNlKGUsICEwLCBvLCB0KTtcbiAgbGV0IGEgPSB7XG4gICAgc2Nyb2xsTGVmdDogMCxcbiAgICBzY3JvbGxUb3A6IDBcbiAgfTtcbiAgY29uc3QgYyA9IEcoMCk7XG4gIGlmIChyIHx8ICFyICYmICFvKVxuICAgIGlmICgoYmUodCkgIT09IFwiYm9keVwiIHx8IEFlKGkpKSAmJiAoYSA9IEtlKHQpKSwgcikge1xuICAgICAgY29uc3QgdiA9IGNlKHQsICEwLCBvLCB0KTtcbiAgICAgIGMueCA9IHYueCArIHQuY2xpZW50TGVmdCwgYy55ID0gdi55ICsgdC5jbGllbnRUb3A7XG4gICAgfSBlbHNlIGkgJiYgKGMueCA9IGh0KGkpKTtcbiAgY29uc3QgdSA9IGkgJiYgIXIgJiYgIW8gPyB0bihpLCBhKSA6IEcoMCksIGwgPSBzLmxlZnQgKyBhLnNjcm9sbExlZnQgLSBjLnggLSB1LngsIGYgPSBzLnRvcCArIGEuc2Nyb2xsVG9wIC0gYy55IC0gdS55O1xuICByZXR1cm4ge1xuICAgIHg6IGwsXG4gICAgeTogZixcbiAgICB3aWR0aDogcy53aWR0aCxcbiAgICBoZWlnaHQ6IHMuaGVpZ2h0XG4gIH07XG59XG5mdW5jdGlvbiBYZShlKSB7XG4gIHJldHVybiBxKGUpLnBvc2l0aW9uID09PSBcInN0YXRpY1wiO1xufVxuZnVuY3Rpb24gT3QoZSwgdCkge1xuICBpZiAoIVEoZSkgfHwgcShlKS5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiKVxuICAgIHJldHVybiBudWxsO1xuICBpZiAodClcbiAgICByZXR1cm4gdChlKTtcbiAgbGV0IG4gPSBlLm9mZnNldFBhcmVudDtcbiAgcmV0dXJuIEooZSkgPT09IG4gJiYgKG4gPSBuLm93bmVyRG9jdW1lbnQuYm9keSksIG47XG59XG5mdW5jdGlvbiBybihlLCB0KSB7XG4gIGNvbnN0IG4gPSBVKGUpO1xuICBpZiAocWUoZSkpXG4gICAgcmV0dXJuIG47XG4gIGlmICghUShlKSkge1xuICAgIGxldCBpID0gaWUoZSk7XG4gICAgZm9yICg7IGkgJiYgIXZlKGkpOyApIHtcbiAgICAgIGlmIChZKGkpICYmICFYZShpKSlcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICBpID0gaWUoaSk7XG4gICAgfVxuICAgIHJldHVybiBuO1xuICB9XG4gIGxldCByID0gT3QoZSwgdCk7XG4gIGZvciAoOyByICYmIG9yKHIpICYmIFhlKHIpOyApXG4gICAgciA9IE90KHIsIHQpO1xuICByZXR1cm4gciAmJiB2ZShyKSAmJiBYZShyKSAmJiAhZnQocikgPyBuIDogciB8fCBzcihlKSB8fCBuO1xufVxuY29uc3QgYnIgPSBhc3luYyBmdW5jdGlvbihlKSB7XG4gIGNvbnN0IHQgPSB0aGlzLmdldE9mZnNldFBhcmVudCB8fCBybiwgbiA9IHRoaXMuZ2V0RGltZW5zaW9ucywgciA9IGF3YWl0IG4oZS5mbG9hdGluZyk7XG4gIHJldHVybiB7XG4gICAgcmVmZXJlbmNlOiBncihlLnJlZmVyZW5jZSwgYXdhaXQgdChlLmZsb2F0aW5nKSwgZS5zdHJhdGVneSksXG4gICAgZmxvYXRpbmc6IHtcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwLFxuICAgICAgd2lkdGg6IHIud2lkdGgsXG4gICAgICBoZWlnaHQ6IHIuaGVpZ2h0XG4gICAgfVxuICB9O1xufTtcbmZ1bmN0aW9uIHlyKGUpIHtcbiAgcmV0dXJuIHEoZSkuZGlyZWN0aW9uID09PSBcInJ0bFwiO1xufVxuY29uc3Qgd3IgPSB7XG4gIGNvbnZlcnRPZmZzZXRQYXJlbnRSZWxhdGl2ZVJlY3RUb1ZpZXdwb3J0UmVsYXRpdmVSZWN0OiB1cixcbiAgZ2V0RG9jdW1lbnRFbGVtZW50OiBKLFxuICBnZXRDbGlwcGluZ1JlY3Q6IHZyLFxuICBnZXRPZmZzZXRQYXJlbnQ6IHJuLFxuICBnZXRFbGVtZW50UmVjdHM6IGJyLFxuICBnZXRDbGllbnRSZWN0czogbHIsXG4gIGdldERpbWVuc2lvbnM6IG1yLFxuICBnZXRTY2FsZTogZGUsXG4gIGlzRWxlbWVudDogWSxcbiAgaXNSVEw6IHlyXG59O1xuZnVuY3Rpb24gb24oZSwgdCkge1xuICByZXR1cm4gZS54ID09PSB0LnggJiYgZS55ID09PSB0LnkgJiYgZS53aWR0aCA9PT0gdC53aWR0aCAmJiBlLmhlaWdodCA9PT0gdC5oZWlnaHQ7XG59XG5mdW5jdGlvbiB4cihlLCB0KSB7XG4gIGxldCBuID0gbnVsbCwgcjtcbiAgY29uc3QgaSA9IEooZSk7XG4gIGZ1bmN0aW9uIG8oKSB7XG4gICAgdmFyIGE7XG4gICAgY2xlYXJUaW1lb3V0KHIpLCAoYSA9IG4pID09IG51bGwgfHwgYS5kaXNjb25uZWN0KCksIG4gPSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIHMoYSwgYykge1xuICAgIGEgPT09IHZvaWQgMCAmJiAoYSA9ICExKSwgYyA9PT0gdm9pZCAwICYmIChjID0gMSksIG8oKTtcbiAgICBjb25zdCB1ID0gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwge1xuICAgICAgbGVmdDogbCxcbiAgICAgIHRvcDogZixcbiAgICAgIHdpZHRoOiB2LFxuICAgICAgaGVpZ2h0OiBkXG4gICAgfSA9IHU7XG4gICAgaWYgKGEgfHwgdCgpLCAhdiB8fCAhZClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBtID0gTGUoZiksIHAgPSBMZShpLmNsaWVudFdpZHRoIC0gKGwgKyB2KSksIGcgPSBMZShpLmNsaWVudEhlaWdodCAtIChmICsgZCkpLCBoID0gTGUobCksIEUgPSB7XG4gICAgICByb290TWFyZ2luOiAtbSArIFwicHggXCIgKyAtcCArIFwicHggXCIgKyAtZyArIFwicHggXCIgKyAtaCArIFwicHhcIixcbiAgICAgIHRocmVzaG9sZDogc2UoMCwgRGUoMSwgYykpIHx8IDFcbiAgICB9O1xuICAgIGxldCBQID0gITA7XG4gICAgZnVuY3Rpb24gYihTKSB7XG4gICAgICBjb25zdCBDID0gU1swXS5pbnRlcnNlY3Rpb25SYXRpbztcbiAgICAgIGlmIChDICE9PSBjKSB7XG4gICAgICAgIGlmICghUClcbiAgICAgICAgICByZXR1cm4gcygpO1xuICAgICAgICBDID8gcyghMSwgQykgOiByID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcyghMSwgMWUtNyk7XG4gICAgICAgIH0sIDFlMyk7XG4gICAgICB9XG4gICAgICBDID09PSAxICYmICFvbih1LCBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSAmJiBzKCksIFAgPSAhMTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIG4gPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoYiwge1xuICAgICAgICAuLi5FLFxuICAgICAgICAvLyBIYW5kbGUgPGlmcmFtZT5zXG4gICAgICAgIHJvb3Q6IGkub3duZXJEb2N1bWVudFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBuID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGIsIEUpO1xuICAgIH1cbiAgICBuLm9ic2VydmUoZSk7XG4gIH1cbiAgcmV0dXJuIHMoITApLCBvO1xufVxuZnVuY3Rpb24gU3IoZSwgdCwgbiwgcikge1xuICByID09PSB2b2lkIDAgJiYgKHIgPSB7fSk7XG4gIGNvbnN0IHtcbiAgICBhbmNlc3RvclNjcm9sbDogaSA9ICEwLFxuICAgIGFuY2VzdG9yUmVzaXplOiBvID0gITAsXG4gICAgZWxlbWVudFJlc2l6ZTogcyA9IHR5cGVvZiBSZXNpemVPYnNlcnZlciA9PSBcImZ1bmN0aW9uXCIsXG4gICAgbGF5b3V0U2hpZnQ6IGEgPSB0eXBlb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgPT0gXCJmdW5jdGlvblwiLFxuICAgIGFuaW1hdGlvbkZyYW1lOiBjID0gITFcbiAgfSA9IHIsIHUgPSBwdChlKSwgbCA9IGkgfHwgbyA/IFsuLi51ID8gRWUodSkgOiBbXSwgLi4uRWUodCldIDogW107XG4gIGwuZm9yRWFjaCgoaCkgPT4ge1xuICAgIGkgJiYgaC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIG4sIHtcbiAgICAgIHBhc3NpdmU6ICEwXG4gICAgfSksIG8gJiYgaC5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIG4pO1xuICB9KTtcbiAgY29uc3QgZiA9IHUgJiYgYSA/IHhyKHUsIG4pIDogbnVsbDtcbiAgbGV0IHYgPSAtMSwgZCA9IG51bGw7XG4gIHMgJiYgKGQgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGgpID0+IHtcbiAgICBsZXQgW3hdID0gaDtcbiAgICB4ICYmIHgudGFyZ2V0ID09PSB1ICYmIGQgJiYgKGQudW5vYnNlcnZlKHQpLCBjYW5jZWxBbmltYXRpb25GcmFtZSh2KSwgdiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICB2YXIgRTtcbiAgICAgIChFID0gZCkgPT0gbnVsbCB8fCBFLm9ic2VydmUodCk7XG4gICAgfSkpLCBuKCk7XG4gIH0pLCB1ICYmICFjICYmIGQub2JzZXJ2ZSh1KSwgZC5vYnNlcnZlKHQpKTtcbiAgbGV0IG0sIHAgPSBjID8gY2UoZSkgOiBudWxsO1xuICBjICYmIGcoKTtcbiAgZnVuY3Rpb24gZygpIHtcbiAgICBjb25zdCBoID0gY2UoZSk7XG4gICAgcCAmJiAhb24ocCwgaCkgJiYgbigpLCBwID0gaCwgbSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShnKTtcbiAgfVxuICByZXR1cm4gbigpLCAoKSA9PiB7XG4gICAgdmFyIGg7XG4gICAgbC5mb3JFYWNoKCh4KSA9PiB7XG4gICAgICBpICYmIHgucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBuKSwgbyAmJiB4LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgbik7XG4gICAgfSksIGYgPT0gbnVsbCB8fCBmKCksIChoID0gZCkgPT0gbnVsbCB8fCBoLmRpc2Nvbm5lY3QoKSwgZCA9IG51bGwsIGMgJiYgY2FuY2VsQW5pbWF0aW9uRnJhbWUobSk7XG4gIH07XG59XG5jb25zdCBUciA9IHJyLCBFciA9IGlyLCBDciA9IHRyLCBQciA9IChlLCB0LCBuKSA9PiB7XG4gIGNvbnN0IHIgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCBpID0ge1xuICAgIHBsYXRmb3JtOiB3cixcbiAgICAuLi5uXG4gIH0sIG8gPSB7XG4gICAgLi4uaS5wbGF0Zm9ybSxcbiAgICBfYzogclxuICB9O1xuICByZXR1cm4gZXIoZSwgdCwge1xuICAgIC4uLmksXG4gICAgcGxhdGZvcm06IG9cbiAgfSk7XG59O1xudmFyIE1vID0gdHlwZW9mIGdsb2JhbFRoaXMgPCBcInVcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93IDwgXCJ1XCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsIDwgXCJ1XCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiA8IFwidVwiID8gc2VsZiA6IHt9O1xuZnVuY3Rpb24gQXIoZSkge1xuICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIFwiZGVmYXVsdFwiKSA/IGUuZGVmYXVsdCA6IGU7XG59XG52YXIgUmUgPSB7IGV4cG9ydHM6IHt9IH0sIE9yID0gUmUuZXhwb3J0cywga3Q7XG5mdW5jdGlvbiBrcigpIHtcbiAgcmV0dXJuIGt0IHx8IChrdCA9IDEsIGZ1bmN0aW9uKGUpIHtcbiAgICAoZnVuY3Rpb24odCwgbikge1xuICAgICAgZS5leHBvcnRzID8gZS5leHBvcnRzID0gbigpIDogdC5sb2cgPSBuKCk7XG4gICAgfSkoT3IsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIH0sIG4gPSBcInVuZGVmaW5lZFwiLCByID0gdHlwZW9mIHdpbmRvdyAhPT0gbiAmJiB0eXBlb2Ygd2luZG93Lm5hdmlnYXRvciAhPT0gbiAmJiAvVHJpZGVudFxcL3xNU0lFIC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCksIGkgPSBbXG4gICAgICAgIFwidHJhY2VcIixcbiAgICAgICAgXCJkZWJ1Z1wiLFxuICAgICAgICBcImluZm9cIixcbiAgICAgICAgXCJ3YXJuXCIsXG4gICAgICAgIFwiZXJyb3JcIlxuICAgICAgXSwgbyA9IHt9LCBzID0gbnVsbDtcbiAgICAgIGZ1bmN0aW9uIGEocCwgZykge1xuICAgICAgICB2YXIgaCA9IHBbZ107XG4gICAgICAgIGlmICh0eXBlb2YgaC5iaW5kID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICByZXR1cm4gaC5iaW5kKHApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGgsIHApO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KGgsIFtwLCBhcmd1bWVudHNdKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBjKCkge1xuICAgICAgICBjb25zb2xlLmxvZyAmJiAoY29uc29sZS5sb2cuYXBwbHkgPyBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpIDogRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KGNvbnNvbGUubG9nLCBbY29uc29sZSwgYXJndW1lbnRzXSkpLCBjb25zb2xlLnRyYWNlICYmIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHUocCkge1xuICAgICAgICByZXR1cm4gcCA9PT0gXCJkZWJ1Z1wiICYmIChwID0gXCJsb2dcIiksIHR5cGVvZiBjb25zb2xlID09PSBuID8gITEgOiBwID09PSBcInRyYWNlXCIgJiYgciA/IGMgOiBjb25zb2xlW3BdICE9PSB2b2lkIDAgPyBhKGNvbnNvbGUsIHApIDogY29uc29sZS5sb2cgIT09IHZvaWQgMCA/IGEoY29uc29sZSwgXCJsb2dcIikgOiB0O1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gbCgpIHtcbiAgICAgICAgZm9yICh2YXIgcCA9IHRoaXMuZ2V0TGV2ZWwoKSwgZyA9IDA7IGcgPCBpLmxlbmd0aDsgZysrKSB7XG4gICAgICAgICAgdmFyIGggPSBpW2ddO1xuICAgICAgICAgIHRoaXNbaF0gPSBnIDwgcCA/IHQgOiB0aGlzLm1ldGhvZEZhY3RvcnkoaCwgcCwgdGhpcy5uYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sb2cgPSB0aGlzLmRlYnVnLCB0eXBlb2YgY29uc29sZSA9PT0gbiAmJiBwIDwgdGhpcy5sZXZlbHMuU0lMRU5UKVxuICAgICAgICAgIHJldHVybiBcIk5vIGNvbnNvbGUgYXZhaWxhYmxlIGZvciBsb2dnaW5nXCI7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBmKHApIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHR5cGVvZiBjb25zb2xlICE9PSBuICYmIChsLmNhbGwodGhpcyksIHRoaXNbcF0uYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiB2KHAsIGcsIGgpIHtcbiAgICAgICAgcmV0dXJuIHUocCkgfHwgZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZChwLCBnKSB7XG4gICAgICAgIHZhciBoID0gdGhpcywgeCwgRSwgUCwgYiA9IFwibG9nbGV2ZWxcIjtcbiAgICAgICAgdHlwZW9mIHAgPT0gXCJzdHJpbmdcIiA/IGIgKz0gXCI6XCIgKyBwIDogdHlwZW9mIHAgPT0gXCJzeW1ib2xcIiAmJiAoYiA9IHZvaWQgMCk7XG4gICAgICAgIGZ1bmN0aW9uIFMoVCkge1xuICAgICAgICAgIHZhciBMID0gKGlbVF0gfHwgXCJzaWxlbnRcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSBuIHx8ICFiKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVtiXSA9IEw7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChiKSArIFwiPVwiICsgTCArIFwiO1wiO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIEMoKSB7XG4gICAgICAgICAgdmFyIFQ7XG4gICAgICAgICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gbiB8fCAhYikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIFQgPSB3aW5kb3cubG9jYWxTdG9yYWdlW2JdO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFQgPT09IG4pXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIEwgPSB3aW5kb3cuZG9jdW1lbnQuY29va2llLCBvZSA9IGVuY29kZVVSSUNvbXBvbmVudChiKSwgSyA9IEwuaW5kZXhPZihvZSArIFwiPVwiKTtcbiAgICAgICAgICAgICAgICBLICE9PSAtMSAmJiAoVCA9IC9eKFteO10rKS8uZXhlYyhcbiAgICAgICAgICAgICAgICAgIEwuc2xpY2UoSyArIG9lLmxlbmd0aCArIDEpXG4gICAgICAgICAgICAgICAgKVsxXSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5sZXZlbHNbVF0gPT09IHZvaWQgMCAmJiAoVCA9IHZvaWQgMCksIFQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uICQoKSB7XG4gICAgICAgICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gbiB8fCAhYikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShiKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChiKSArIFwiPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQ1wiO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIEkoVCkge1xuICAgICAgICAgIHZhciBMID0gVDtcbiAgICAgICAgICBpZiAodHlwZW9mIEwgPT0gXCJzdHJpbmdcIiAmJiBoLmxldmVsc1tMLnRvVXBwZXJDYXNlKCldICE9PSB2b2lkIDAgJiYgKEwgPSBoLmxldmVsc1tMLnRvVXBwZXJDYXNlKCldKSwgdHlwZW9mIEwgPT0gXCJudW1iZXJcIiAmJiBMID49IDAgJiYgTCA8PSBoLmxldmVscy5TSUxFTlQpXG4gICAgICAgICAgICByZXR1cm4gTDtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogXCIgKyBUKTtcbiAgICAgICAgfVxuICAgICAgICBoLm5hbWUgPSBwLCBoLmxldmVscyA9IHtcbiAgICAgICAgICBUUkFDRTogMCxcbiAgICAgICAgICBERUJVRzogMSxcbiAgICAgICAgICBJTkZPOiAyLFxuICAgICAgICAgIFdBUk46IDMsXG4gICAgICAgICAgRVJST1I6IDQsXG4gICAgICAgICAgU0lMRU5UOiA1XG4gICAgICAgIH0sIGgubWV0aG9kRmFjdG9yeSA9IGcgfHwgdiwgaC5nZXRMZXZlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBQID8/IEUgPz8geDtcbiAgICAgICAgfSwgaC5zZXRMZXZlbCA9IGZ1bmN0aW9uKFQsIEwpIHtcbiAgICAgICAgICByZXR1cm4gUCA9IEkoVCksIEwgIT09ICExICYmIFMoUCksIGwuY2FsbChoKTtcbiAgICAgICAgfSwgaC5zZXREZWZhdWx0TGV2ZWwgPSBmdW5jdGlvbihUKSB7XG4gICAgICAgICAgRSA9IEkoVCksIEMoKSB8fCBoLnNldExldmVsKFQsICExKTtcbiAgICAgICAgfSwgaC5yZXNldExldmVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgUCA9IG51bGwsICQoKSwgbC5jYWxsKGgpO1xuICAgICAgICB9LCBoLmVuYWJsZUFsbCA9IGZ1bmN0aW9uKFQpIHtcbiAgICAgICAgICBoLnNldExldmVsKGgubGV2ZWxzLlRSQUNFLCBUKTtcbiAgICAgICAgfSwgaC5kaXNhYmxlQWxsID0gZnVuY3Rpb24oVCkge1xuICAgICAgICAgIGguc2V0TGV2ZWwoaC5sZXZlbHMuU0lMRU5ULCBUKTtcbiAgICAgICAgfSwgaC5yZWJ1aWxkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHMgIT09IGggJiYgKHggPSBJKHMuZ2V0TGV2ZWwoKSkpLCBsLmNhbGwoaCksIHMgPT09IGgpXG4gICAgICAgICAgICBmb3IgKHZhciBUIGluIG8pXG4gICAgICAgICAgICAgIG9bVF0ucmVidWlsZCgpO1xuICAgICAgICB9LCB4ID0gSShcbiAgICAgICAgICBzID8gcy5nZXRMZXZlbCgpIDogXCJXQVJOXCJcbiAgICAgICAgKTtcbiAgICAgICAgdmFyIHogPSBDKCk7XG4gICAgICAgIHogIT0gbnVsbCAmJiAoUCA9IEkoeikpLCBsLmNhbGwoaCk7XG4gICAgICB9XG4gICAgICBzID0gbmV3IGQoKSwgcy5nZXRMb2dnZXIgPSBmdW5jdGlvbihnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZyAhPSBcInN5bWJvbFwiICYmIHR5cGVvZiBnICE9IFwic3RyaW5nXCIgfHwgZyA9PT0gXCJcIilcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiWW91IG11c3Qgc3VwcGx5IGEgbmFtZSB3aGVuIGNyZWF0aW5nIGEgbG9nZ2VyLlwiKTtcbiAgICAgICAgdmFyIGggPSBvW2ddO1xuICAgICAgICByZXR1cm4gaCB8fCAoaCA9IG9bZ10gPSBuZXcgZChcbiAgICAgICAgICBnLFxuICAgICAgICAgIHMubWV0aG9kRmFjdG9yeVxuICAgICAgICApKSwgaDtcbiAgICAgIH07XG4gICAgICB2YXIgbSA9IHR5cGVvZiB3aW5kb3cgIT09IG4gPyB3aW5kb3cubG9nIDogdm9pZCAwO1xuICAgICAgcmV0dXJuIHMubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gbiAmJiB3aW5kb3cubG9nID09PSBzICYmICh3aW5kb3cubG9nID0gbSksIHM7XG4gICAgICB9LCBzLmdldExvZ2dlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgICB9LCBzLmRlZmF1bHQgPSBzLCBzO1xuICAgIH0pO1xuICB9KFJlKSksIFJlLmV4cG9ydHM7XG59XG52YXIgTHIgPSBrcigpO1xuY29uc3QgX3IgPSAvKiBAX19QVVJFX18gKi8gQXIoTHIpO1xudmFyIHN0ID0gZnVuY3Rpb24oZSwgdCkge1xuICByZXR1cm4gc3QgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbihuLCByKSB7XG4gICAgbi5fX3Byb3RvX18gPSByO1xuICB9IHx8IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICBmb3IgKHZhciBpIGluIHIpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLCBpKSAmJiAobltpXSA9IHJbaV0pO1xuICB9LCBzdChlLCB0KTtcbn07XG5mdW5jdGlvbiBlZShlLCB0KSB7XG4gIGlmICh0eXBlb2YgdCAhPSBcImZ1bmN0aW9uXCIgJiYgdCAhPT0gbnVsbClcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyh0KSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gIHN0KGUsIHQpO1xuICBmdW5jdGlvbiBuKCkge1xuICAgIHRoaXMuY29uc3RydWN0b3IgPSBlO1xuICB9XG4gIGUucHJvdG90eXBlID0gdCA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUodCkgOiAobi5wcm90b3R5cGUgPSB0LnByb3RvdHlwZSwgbmV3IG4oKSk7XG59XG5mdW5jdGlvbiBJcihlLCB0LCBuLCByKSB7XG4gIGZ1bmN0aW9uIGkobykge1xuICAgIHJldHVybiBvIGluc3RhbmNlb2YgbiA/IG8gOiBuZXcgbihmdW5jdGlvbihzKSB7XG4gICAgICBzKG8pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBuZXcgKG4gfHwgKG4gPSBQcm9taXNlKSkoZnVuY3Rpb24obywgcykge1xuICAgIGZ1bmN0aW9uIGEobCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdShyLm5leHQobCkpO1xuICAgICAgfSBjYXRjaCAoZikge1xuICAgICAgICBzKGYpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjKGwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHUoci50aHJvdyhsKSk7XG4gICAgICB9IGNhdGNoIChmKSB7XG4gICAgICAgIHMoZik7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHUobCkge1xuICAgICAgbC5kb25lID8gbyhsLnZhbHVlKSA6IGkobC52YWx1ZSkudGhlbihhLCBjKTtcbiAgICB9XG4gICAgdSgociA9IHIuYXBwbHkoZSwgdCB8fCBbXSkpLm5leHQoKSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gc24oZSwgdCkge1xuICB2YXIgbiA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmIChvWzBdICYgMSkgdGhyb3cgb1sxXTtcbiAgICByZXR1cm4gb1sxXTtcbiAgfSwgdHJ5czogW10sIG9wczogW10gfSwgciwgaSwgbywgcyA9IE9iamVjdC5jcmVhdGUoKHR5cGVvZiBJdGVyYXRvciA9PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcbiAgcmV0dXJuIHMubmV4dCA9IGEoMCksIHMudGhyb3cgPSBhKDEpLCBzLnJldHVybiA9IGEoMiksIHR5cGVvZiBTeW1ib2wgPT0gXCJmdW5jdGlvblwiICYmIChzW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSksIHM7XG4gIGZ1bmN0aW9uIGEodSkge1xuICAgIHJldHVybiBmdW5jdGlvbihsKSB7XG4gICAgICByZXR1cm4gYyhbdSwgbF0pO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gYyh1KSB7XG4gICAgaWYgKHIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgIGZvciAoOyBzICYmIChzID0gMCwgdVswXSAmJiAobiA9IDApKSwgbjsgKSB0cnkge1xuICAgICAgaWYgKHIgPSAxLCBpICYmIChvID0gdVswXSAmIDIgPyBpLnJldHVybiA6IHVbMF0gPyBpLnRocm93IHx8ICgobyA9IGkucmV0dXJuKSAmJiBvLmNhbGwoaSksIDApIDogaS5uZXh0KSAmJiAhKG8gPSBvLmNhbGwoaSwgdVsxXSkpLmRvbmUpIHJldHVybiBvO1xuICAgICAgc3dpdGNoIChpID0gMCwgbyAmJiAodSA9IFt1WzBdICYgMiwgby52YWx1ZV0pLCB1WzBdKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIG8gPSB1O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcmV0dXJuIG4ubGFiZWwrKywgeyB2YWx1ZTogdVsxXSwgZG9uZTogITEgfTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIG4ubGFiZWwrKywgaSA9IHVbMV0sIHUgPSBbMF07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgICB1ID0gbi5vcHMucG9wKCksIG4udHJ5cy5wb3AoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAobyA9IG4udHJ5cywgIShvID0gby5sZW5ndGggPiAwICYmIG9bby5sZW5ndGggLSAxXSkgJiYgKHVbMF0gPT09IDYgfHwgdVswXSA9PT0gMikpIHtcbiAgICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh1WzBdID09PSAzICYmICghbyB8fCB1WzFdID4gb1swXSAmJiB1WzFdIDwgb1szXSkpIHtcbiAgICAgICAgICAgIG4ubGFiZWwgPSB1WzFdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh1WzBdID09PSA2ICYmIG4ubGFiZWwgPCBvWzFdKSB7XG4gICAgICAgICAgICBuLmxhYmVsID0gb1sxXSwgbyA9IHU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG8gJiYgbi5sYWJlbCA8IG9bMl0pIHtcbiAgICAgICAgICAgIG4ubGFiZWwgPSBvWzJdLCBuLm9wcy5wdXNoKHUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG9bMl0gJiYgbi5vcHMucG9wKCksIG4udHJ5cy5wb3AoKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHUgPSB0LmNhbGwoZSwgbik7XG4gICAgfSBjYXRjaCAobCkge1xuICAgICAgdSA9IFs2LCBsXSwgaSA9IDA7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHIgPSBvID0gMDtcbiAgICB9XG4gICAgaWYgKHVbMF0gJiA1KSB0aHJvdyB1WzFdO1xuICAgIHJldHVybiB7IHZhbHVlOiB1WzBdID8gdVsxXSA6IHZvaWQgMCwgZG9uZTogITAgfTtcbiAgfVxufVxuZnVuY3Rpb24gbWUoZSkge1xuICB2YXIgdCA9IHR5cGVvZiBTeW1ib2wgPT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbiA9IHQgJiYgZVt0XSwgciA9IDA7XG4gIGlmIChuKSByZXR1cm4gbi5jYWxsKGUpO1xuICBpZiAoZSAmJiB0eXBlb2YgZS5sZW5ndGggPT0gXCJudW1iZXJcIikgcmV0dXJuIHtcbiAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBlICYmIHIgPj0gZS5sZW5ndGggJiYgKGUgPSB2b2lkIDApLCB7IHZhbHVlOiBlICYmIGVbcisrXSwgZG9uZTogIWUgfTtcbiAgICB9XG4gIH07XG4gIHRocm93IG5ldyBUeXBlRXJyb3IodCA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn1cbmZ1bmN0aW9uIHVlKGUsIHQpIHtcbiAgdmFyIG4gPSB0eXBlb2YgU3ltYm9sID09IFwiZnVuY3Rpb25cIiAmJiBlW1N5bWJvbC5pdGVyYXRvcl07XG4gIGlmICghbikgcmV0dXJuIGU7XG4gIHZhciByID0gbi5jYWxsKGUpLCBpLCBvID0gW10sIHM7XG4gIHRyeSB7XG4gICAgZm9yICg7ICh0ID09PSB2b2lkIDAgfHwgdC0tID4gMCkgJiYgIShpID0gci5uZXh0KCkpLmRvbmU7ICkgby5wdXNoKGkudmFsdWUpO1xuICB9IGNhdGNoIChhKSB7XG4gICAgcyA9IHsgZXJyb3I6IGEgfTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaSAmJiAhaS5kb25lICYmIChuID0gci5yZXR1cm4pICYmIG4uY2FsbChyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKHMpIHRocm93IHMuZXJyb3I7XG4gICAgfVxuICB9XG4gIHJldHVybiBvO1xufVxuZnVuY3Rpb24gZ2UoZSwgdCwgbikge1xuICBpZiAobiB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciByID0gMCwgaSA9IHQubGVuZ3RoLCBvOyByIDwgaTsgcisrKVxuICAgIChvIHx8ICEociBpbiB0KSkgJiYgKG8gfHwgKG8gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LCAwLCByKSksIG9bcl0gPSB0W3JdKTtcbiAgcmV0dXJuIGUuY29uY2F0KG8gfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkpO1xufVxuZnVuY3Rpb24gcGUoZSkge1xuICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHBlID8gKHRoaXMudiA9IGUsIHRoaXMpIDogbmV3IHBlKGUpO1xufVxuZnVuY3Rpb24gUnIoZSwgdCwgbikge1xuICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xuICB2YXIgciA9IG4uYXBwbHkoZSwgdCB8fCBbXSksIGksIG8gPSBbXTtcbiAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PSBcImZ1bmN0aW9uXCIgPyBBc3luY0l0ZXJhdG9yIDogT2JqZWN0KS5wcm90b3R5cGUpLCBhKFwibmV4dFwiKSwgYShcInRocm93XCIpLCBhKFwicmV0dXJuXCIsIHMpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9LCBpO1xuICBmdW5jdGlvbiBzKGQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtKS50aGVuKGQsIGYpO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gYShkLCBtKSB7XG4gICAgcltkXSAmJiAoaVtkXSA9IGZ1bmN0aW9uKHApIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihnLCBoKSB7XG4gICAgICAgIG8ucHVzaChbZCwgcCwgZywgaF0pID4gMSB8fCBjKGQsIHApO1xuICAgICAgfSk7XG4gICAgfSwgbSAmJiAoaVtkXSA9IG0oaVtkXSkpKTtcbiAgfVxuICBmdW5jdGlvbiBjKGQsIG0pIHtcbiAgICB0cnkge1xuICAgICAgdShyW2RdKG0pKTtcbiAgICB9IGNhdGNoIChwKSB7XG4gICAgICB2KG9bMF1bM10sIHApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiB1KGQpIHtcbiAgICBkLnZhbHVlIGluc3RhbmNlb2YgcGUgPyBQcm9taXNlLnJlc29sdmUoZC52YWx1ZS52KS50aGVuKGwsIGYpIDogdihvWzBdWzJdLCBkKTtcbiAgfVxuICBmdW5jdGlvbiBsKGQpIHtcbiAgICBjKFwibmV4dFwiLCBkKTtcbiAgfVxuICBmdW5jdGlvbiBmKGQpIHtcbiAgICBjKFwidGhyb3dcIiwgZCk7XG4gIH1cbiAgZnVuY3Rpb24gdihkLCBtKSB7XG4gICAgZChtKSwgby5zaGlmdCgpLCBvLmxlbmd0aCAmJiBjKG9bMF1bMF0sIG9bMF1bMV0pO1xuICB9XG59XG5mdW5jdGlvbiBNcihlKSB7XG4gIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XG4gIHZhciB0ID0gZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIG47XG4gIHJldHVybiB0ID8gdC5jYWxsKGUpIDogKGUgPSB0eXBlb2YgbWUgPT0gXCJmdW5jdGlvblwiID8gbWUoZSkgOiBlW1N5bWJvbC5pdGVyYXRvcl0oKSwgbiA9IHt9LCByKFwibmV4dFwiKSwgcihcInRocm93XCIpLCByKFwicmV0dXJuXCIpLCBuW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9LCBuKTtcbiAgZnVuY3Rpb24gcihvKSB7XG4gICAgbltvXSA9IGVbb10gJiYgZnVuY3Rpb24ocykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGEsIGMpIHtcbiAgICAgICAgcyA9IGVbb10ocyksIGkoYSwgYywgcy5kb25lLCBzLnZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbiAgZnVuY3Rpb24gaShvLCBzLCBhLCBjKSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKGMpLnRoZW4oZnVuY3Rpb24odSkge1xuICAgICAgbyh7IHZhbHVlOiB1LCBkb25lOiBhIH0pO1xuICAgIH0sIHMpO1xuICB9XG59XG5mdW5jdGlvbiBBKGUpIHtcbiAgcmV0dXJuIHR5cGVvZiBlID09IFwiZnVuY3Rpb25cIjtcbn1cbmZ1bmN0aW9uIHZ0KGUpIHtcbiAgdmFyIHQgPSBmdW5jdGlvbihyKSB7XG4gICAgRXJyb3IuY2FsbChyKSwgci5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrO1xuICB9LCBuID0gZSh0KTtcbiAgcmV0dXJuIG4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLCBuLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IG4sIG47XG59XG52YXIgWmUgPSB2dChmdW5jdGlvbihlKSB7XG4gIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgZSh0aGlzKSwgdGhpcy5tZXNzYWdlID0gbiA/IG4ubGVuZ3RoICsgYCBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxuYCArIG4ubWFwKGZ1bmN0aW9uKHIsIGkpIHtcbiAgICAgIHJldHVybiBpICsgMSArIFwiKSBcIiArIHIudG9TdHJpbmcoKTtcbiAgICB9KS5qb2luKGBcbiAgYCkgOiBcIlwiLCB0aGlzLm5hbWUgPSBcIlVuc3Vic2NyaXB0aW9uRXJyb3JcIiwgdGhpcy5lcnJvcnMgPSBuO1xuICB9O1xufSk7XG5mdW5jdGlvbiBVZShlLCB0KSB7XG4gIGlmIChlKSB7XG4gICAgdmFyIG4gPSBlLmluZGV4T2YodCk7XG4gICAgMCA8PSBuICYmIGUuc3BsaWNlKG4sIDEpO1xuICB9XG59XG52YXIgT2UgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gZSh0KSB7XG4gICAgdGhpcy5pbml0aWFsVGVhcmRvd24gPSB0LCB0aGlzLmNsb3NlZCA9ICExLCB0aGlzLl9wYXJlbnRhZ2UgPSBudWxsLCB0aGlzLl9maW5hbGl6ZXJzID0gbnVsbDtcbiAgfVxuICByZXR1cm4gZS5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCwgbiwgciwgaSwgbztcbiAgICBpZiAoIXRoaXMuY2xvc2VkKSB7XG4gICAgICB0aGlzLmNsb3NlZCA9ICEwO1xuICAgICAgdmFyIHMgPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgICBpZiAocylcbiAgICAgICAgaWYgKHRoaXMuX3BhcmVudGFnZSA9IG51bGwsIEFycmF5LmlzQXJyYXkocykpXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSBtZShzKSwgYyA9IGEubmV4dCgpOyAhYy5kb25lOyBjID0gYS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgdmFyIHUgPSBjLnZhbHVlO1xuICAgICAgICAgICAgICB1LnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChwKSB7XG4gICAgICAgICAgICB0ID0geyBlcnJvcjogcCB9O1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjICYmICFjLmRvbmUgJiYgKG4gPSBhLnJldHVybikgJiYgbi5jYWxsKGEpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgaWYgKHQpIHRocm93IHQuZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgcy5yZW1vdmUodGhpcyk7XG4gICAgICB2YXIgbCA9IHRoaXMuaW5pdGlhbFRlYXJkb3duO1xuICAgICAgaWYgKEEobCkpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbCgpO1xuICAgICAgICB9IGNhdGNoIChwKSB7XG4gICAgICAgICAgbyA9IHAgaW5zdGFuY2VvZiBaZSA/IHAuZXJyb3JzIDogW3BdO1xuICAgICAgICB9XG4gICAgICB2YXIgZiA9IHRoaXMuX2ZpbmFsaXplcnM7XG4gICAgICBpZiAoZikge1xuICAgICAgICB0aGlzLl9maW5hbGl6ZXJzID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKHZhciB2ID0gbWUoZiksIGQgPSB2Lm5leHQoKTsgIWQuZG9uZTsgZCA9IHYubmV4dCgpKSB7XG4gICAgICAgICAgICB2YXIgbSA9IGQudmFsdWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBMdChtKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHApIHtcbiAgICAgICAgICAgICAgbyA9IG8gPz8gW10sIHAgaW5zdGFuY2VvZiBaZSA/IG8gPSBnZShnZShbXSwgdWUobykpLCB1ZShwLmVycm9ycykpIDogby5wdXNoKHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAocCkge1xuICAgICAgICAgIHIgPSB7IGVycm9yOiBwIH07XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGQgJiYgIWQuZG9uZSAmJiAoaSA9IHYucmV0dXJuKSAmJiBpLmNhbGwodik7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChyKSB0aHJvdyByLmVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG8pXG4gICAgICAgIHRocm93IG5ldyBaZShvKTtcbiAgICB9XG4gIH0sIGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbjtcbiAgICBpZiAodCAmJiB0ICE9PSB0aGlzKVxuICAgICAgaWYgKHRoaXMuY2xvc2VkKVxuICAgICAgICBMdCh0KTtcbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGUpIHtcbiAgICAgICAgICBpZiAodC5jbG9zZWQgfHwgdC5faGFzUGFyZW50KHRoaXMpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIHQuX2FkZFBhcmVudCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICAodGhpcy5fZmluYWxpemVycyA9IChuID0gdGhpcy5fZmluYWxpemVycykgIT09IG51bGwgJiYgbiAhPT0gdm9pZCAwID8gbiA6IFtdKS5wdXNoKHQpO1xuICAgICAgfVxuICB9LCBlLnByb3RvdHlwZS5faGFzUGFyZW50ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5fcGFyZW50YWdlO1xuICAgIHJldHVybiBuID09PSB0IHx8IEFycmF5LmlzQXJyYXkobikgJiYgbi5pbmNsdWRlcyh0KTtcbiAgfSwgZS5wcm90b3R5cGUuX2FkZFBhcmVudCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IHRoaXMuX3BhcmVudGFnZTtcbiAgICB0aGlzLl9wYXJlbnRhZ2UgPSBBcnJheS5pc0FycmF5KG4pID8gKG4ucHVzaCh0KSwgbikgOiBuID8gW24sIHRdIDogdDtcbiAgfSwgZS5wcm90b3R5cGUuX3JlbW92ZVBhcmVudCA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IHRoaXMuX3BhcmVudGFnZTtcbiAgICBuID09PSB0ID8gdGhpcy5fcGFyZW50YWdlID0gbnVsbCA6IEFycmF5LmlzQXJyYXkobikgJiYgVWUobiwgdCk7XG4gIH0sIGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IHRoaXMuX2ZpbmFsaXplcnM7XG4gICAgbiAmJiBVZShuLCB0KSwgdCBpbnN0YW5jZW9mIGUgJiYgdC5fcmVtb3ZlUGFyZW50KHRoaXMpO1xuICB9LCBlLkVNUFRZID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHQgPSBuZXcgZSgpO1xuICAgIHJldHVybiB0LmNsb3NlZCA9ICEwLCB0O1xuICB9KCksIGU7XG59KCksIGFuID0gT2UuRU1QVFk7XG5mdW5jdGlvbiBjbihlKSB7XG4gIHJldHVybiBlIGluc3RhbmNlb2YgT2UgfHwgZSAmJiBcImNsb3NlZFwiIGluIGUgJiYgQShlLnJlbW92ZSkgJiYgQShlLmFkZCkgJiYgQShlLnVuc3Vic2NyaWJlKTtcbn1cbmZ1bmN0aW9uIEx0KGUpIHtcbiAgQShlKSA/IGUoKSA6IGUudW5zdWJzY3JpYmUoKTtcbn1cbnZhciBEciA9IHtcbiAgUHJvbWlzZTogdm9pZCAwXG59LCAkciA9IHtcbiAgc2V0VGltZW91dDogZnVuY3Rpb24oZSwgdCkge1xuICAgIGZvciAodmFyIG4gPSBbXSwgciA9IDI7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspXG4gICAgICBuW3IgLSAyXSA9IGFyZ3VtZW50c1tyXTtcbiAgICByZXR1cm4gc2V0VGltZW91dC5hcHBseSh2b2lkIDAsIGdlKFtlLCB0XSwgdWUobikpKTtcbiAgfSxcbiAgY2xlYXJUaW1lb3V0OiBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIGNsZWFyVGltZW91dChlKTtcbiAgfSxcbiAgZGVsZWdhdGU6IHZvaWQgMFxufTtcbmZ1bmN0aW9uIHVuKGUpIHtcbiAgJHIuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBlO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGplKCkge1xufVxuZnVuY3Rpb24gTWUoZSkge1xuICBlKCk7XG59XG52YXIgbXQgPSBmdW5jdGlvbihlKSB7XG4gIGVlKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4pIHtcbiAgICB2YXIgciA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiByLmlzU3RvcHBlZCA9ICExLCBuID8gKHIuZGVzdGluYXRpb24gPSBuLCBjbihuKSAmJiBuLmFkZChyKSkgOiByLmRlc3RpbmF0aW9uID0gVXIsIHI7XG4gIH1cbiAgcmV0dXJuIHQuY3JlYXRlID0gZnVuY3Rpb24obiwgciwgaSkge1xuICAgIHJldHVybiBuZXcgQ2UobiwgciwgaSk7XG4gIH0sIHQucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5pc1N0b3BwZWQgfHwgdGhpcy5fbmV4dChuKTtcbiAgfSwgdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5pc1N0b3BwZWQgfHwgKHRoaXMuaXNTdG9wcGVkID0gITAsIHRoaXMuX2Vycm9yKG4pKTtcbiAgfSwgdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmlzU3RvcHBlZCB8fCAodGhpcy5pc1N0b3BwZWQgPSAhMCwgdGhpcy5fY29tcGxldGUoKSk7XG4gIH0sIHQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jbG9zZWQgfHwgKHRoaXMuaXNTdG9wcGVkID0gITAsIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyksIHRoaXMuZGVzdGluYXRpb24gPSBudWxsKTtcbiAgfSwgdC5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbihuKSB7XG4gICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KG4pO1xuICB9LCB0LnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbihuKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3Iobik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH0sIHQucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gIH0sIHQ7XG59KE9lKSwgTnIgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gZSh0KSB7XG4gICAgdGhpcy5wYXJ0aWFsT2JzZXJ2ZXIgPSB0O1xuICB9XG4gIHJldHVybiBlLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5wYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgaWYgKG4ubmV4dClcbiAgICAgIHRyeSB7XG4gICAgICAgIG4ubmV4dCh0KTtcbiAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgX2Uocik7XG4gICAgICB9XG4gIH0sIGUucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gdGhpcy5wYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgaWYgKG4uZXJyb3IpXG4gICAgICB0cnkge1xuICAgICAgICBuLmVycm9yKHQpO1xuICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICBfZShyKTtcbiAgICAgIH1cbiAgICBlbHNlXG4gICAgICBfZSh0KTtcbiAgfSwgZS5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdCA9IHRoaXMucGFydGlhbE9ic2VydmVyO1xuICAgIGlmICh0LmNvbXBsZXRlKVxuICAgICAgdHJ5IHtcbiAgICAgICAgdC5jb21wbGV0ZSgpO1xuICAgICAgfSBjYXRjaCAobikge1xuICAgICAgICBfZShuKTtcbiAgICAgIH1cbiAgfSwgZTtcbn0oKSwgQ2UgPSBmdW5jdGlvbihlKSB7XG4gIGVlKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIsIGkpIHtcbiAgICB2YXIgbyA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzLCBzO1xuICAgIHJldHVybiBBKG4pIHx8ICFuID8gcyA9IHtcbiAgICAgIG5leHQ6IG4gPz8gdm9pZCAwLFxuICAgICAgZXJyb3I6IHIgPz8gdm9pZCAwLFxuICAgICAgY29tcGxldGU6IGkgPz8gdm9pZCAwXG4gICAgfSA6IHMgPSBuLCBvLmRlc3RpbmF0aW9uID0gbmV3IE5yKHMpLCBvO1xuICB9XG4gIHJldHVybiB0O1xufShtdCk7XG5mdW5jdGlvbiBfZShlKSB7XG4gIHVuKGUpO1xufVxuZnVuY3Rpb24gRnIoZSkge1xuICB0aHJvdyBlO1xufVxudmFyIFVyID0ge1xuICBjbG9zZWQ6ICEwLFxuICBuZXh0OiBqZSxcbiAgZXJyb3I6IEZyLFxuICBjb21wbGV0ZTogamVcbn0sIGd0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0eXBlb2YgU3ltYm9sID09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wub2JzZXJ2YWJsZSB8fCBcIkBAb2JzZXJ2YWJsZVwiO1xufSgpO1xuZnVuY3Rpb24gYnQoZSkge1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIGpyKGUpIHtcbiAgcmV0dXJuIGUubGVuZ3RoID09PSAwID8gYnQgOiBlLmxlbmd0aCA9PT0gMSA/IGVbMF0gOiBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKHIsIGkpIHtcbiAgICAgIHJldHVybiBpKHIpO1xuICAgIH0sIG4pO1xuICB9O1xufVxudmFyIGsgPSBmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gZSh0KSB7XG4gICAgdCAmJiAodGhpcy5fc3Vic2NyaWJlID0gdCk7XG4gIH1cbiAgcmV0dXJuIGUucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbih0KSB7XG4gICAgdmFyIG4gPSBuZXcgZSgpO1xuICAgIHJldHVybiBuLnNvdXJjZSA9IHRoaXMsIG4ub3BlcmF0b3IgPSB0LCBuO1xuICB9LCBlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbih0LCBuLCByKSB7XG4gICAgdmFyIGkgPSB0aGlzLCBvID0gQnIodCkgPyB0IDogbmV3IENlKHQsIG4sIHIpO1xuICAgIHJldHVybiBNZShmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzID0gaSwgYSA9IHMub3BlcmF0b3IsIGMgPSBzLnNvdXJjZTtcbiAgICAgIG8uYWRkKGEgPyBhLmNhbGwobywgYykgOiBjID8gaS5fc3Vic2NyaWJlKG8pIDogaS5fdHJ5U3Vic2NyaWJlKG8pKTtcbiAgICB9KSwgbztcbiAgfSwgZS5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZSh0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICB0LmVycm9yKG4pO1xuICAgIH1cbiAgfSwgZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKHQsIG4pIHtcbiAgICB2YXIgciA9IHRoaXM7XG4gICAgcmV0dXJuIG4gPSBfdChuKSwgbmV3IG4oZnVuY3Rpb24oaSwgbykge1xuICAgICAgdmFyIHMgPSBuZXcgQ2Uoe1xuICAgICAgICBuZXh0OiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHQoYSk7XG4gICAgICAgICAgfSBjYXRjaCAoYykge1xuICAgICAgICAgICAgbyhjKSwgcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IG8sXG4gICAgICAgIGNvbXBsZXRlOiBpXG4gICAgICB9KTtcbiAgICAgIHIuc3Vic2NyaWJlKHMpO1xuICAgIH0pO1xuICB9LCBlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24odCkge1xuICAgIHZhciBuO1xuICAgIHJldHVybiAobiA9IHRoaXMuc291cmNlKSA9PT0gbnVsbCB8fCBuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuLnN1YnNjcmliZSh0KTtcbiAgfSwgZS5wcm90b3R5cGVbZ3RdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sIGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciB0ID0gW10sIG4gPSAwOyBuIDwgYXJndW1lbnRzLmxlbmd0aDsgbisrKVxuICAgICAgdFtuXSA9IGFyZ3VtZW50c1tuXTtcbiAgICByZXR1cm4ganIodCkodGhpcyk7XG4gIH0sIGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgbiA9IHRoaXM7XG4gICAgcmV0dXJuIHQgPSBfdCh0KSwgbmV3IHQoZnVuY3Rpb24ociwgaSkge1xuICAgICAgdmFyIG87XG4gICAgICBuLnN1YnNjcmliZShmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiBvID0gcztcbiAgICAgIH0sIGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuIGkocyk7XG4gICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHIobyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSwgZS5jcmVhdGUgPSBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIG5ldyBlKHQpO1xuICB9LCBlO1xufSgpO1xuZnVuY3Rpb24gX3QoZSkge1xuICB2YXIgdDtcbiAgcmV0dXJuICh0ID0gZSA/PyBEci5Qcm9taXNlKSAhPT0gbnVsbCAmJiB0ICE9PSB2b2lkIDAgPyB0IDogUHJvbWlzZTtcbn1cbmZ1bmN0aW9uIFdyKGUpIHtcbiAgcmV0dXJuIGUgJiYgQShlLm5leHQpICYmIEEoZS5lcnJvcikgJiYgQShlLmNvbXBsZXRlKTtcbn1cbmZ1bmN0aW9uIEJyKGUpIHtcbiAgcmV0dXJuIGUgJiYgZSBpbnN0YW5jZW9mIG10IHx8IFdyKGUpICYmIGNuKGUpO1xufVxuZnVuY3Rpb24gVnIoZSkge1xuICByZXR1cm4gQShlID09IG51bGwgPyB2b2lkIDAgOiBlLmxpZnQpO1xufVxuZnVuY3Rpb24gQihlKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgaWYgKFZyKHQpKVxuICAgICAgcmV0dXJuIHQubGlmdChmdW5jdGlvbihuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGUobiwgdGhpcyk7XG4gICAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgICB0aGlzLmVycm9yKHIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGxpZnQgdW5rbm93biBPYnNlcnZhYmxlIHR5cGVcIik7XG4gIH07XG59XG5mdW5jdGlvbiBXKGUsIHQsIG4sIHIsIGkpIHtcbiAgcmV0dXJuIG5ldyBIcihlLCB0LCBuLCByLCBpKTtcbn1cbnZhciBIciA9IGZ1bmN0aW9uKGUpIHtcbiAgZWUodCwgZSk7XG4gIGZ1bmN0aW9uIHQobiwgciwgaSwgbywgcywgYSkge1xuICAgIHZhciBjID0gZS5jYWxsKHRoaXMsIG4pIHx8IHRoaXM7XG4gICAgcmV0dXJuIGMub25GaW5hbGl6ZSA9IHMsIGMuc2hvdWxkVW5zdWJzY3JpYmUgPSBhLCBjLl9uZXh0ID0gciA/IGZ1bmN0aW9uKHUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHIodSk7XG4gICAgICB9IGNhdGNoIChsKSB7XG4gICAgICAgIG4uZXJyb3IobCk7XG4gICAgICB9XG4gICAgfSA6IGUucHJvdG90eXBlLl9uZXh0LCBjLl9lcnJvciA9IG8gPyBmdW5jdGlvbih1KSB7XG4gICAgICB0cnkge1xuICAgICAgICBvKHUpO1xuICAgICAgfSBjYXRjaCAobCkge1xuICAgICAgICBuLmVycm9yKGwpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH0gOiBlLnByb3RvdHlwZS5fZXJyb3IsIGMuX2NvbXBsZXRlID0gaSA/IGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaSgpO1xuICAgICAgfSBjYXRjaCAodSkge1xuICAgICAgICBuLmVycm9yKHUpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH0gOiBlLnByb3RvdHlwZS5fY29tcGxldGUsIGM7XG4gIH1cbiAgcmV0dXJuIHQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG47XG4gICAgaWYgKCF0aGlzLnNob3VsZFVuc3Vic2NyaWJlIHx8IHRoaXMuc2hvdWxkVW5zdWJzY3JpYmUoKSkge1xuICAgICAgdmFyIHIgPSB0aGlzLmNsb3NlZDtcbiAgICAgIGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyksICFyICYmICgobiA9IHRoaXMub25GaW5hbGl6ZSkgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwIHx8IG4uY2FsbCh0aGlzKSk7XG4gICAgfVxuICB9LCB0O1xufShtdCksIHpyID0gdnQoZnVuY3Rpb24oZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgZSh0aGlzKSwgdGhpcy5uYW1lID0gXCJPYmplY3RVbnN1YnNjcmliZWRFcnJvclwiLCB0aGlzLm1lc3NhZ2UgPSBcIm9iamVjdCB1bnN1YnNjcmliZWRcIjtcbiAgfTtcbn0pLCBaID0gZnVuY3Rpb24oZSkge1xuICBlZSh0LCBlKTtcbiAgZnVuY3Rpb24gdCgpIHtcbiAgICB2YXIgbiA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiBuLmNsb3NlZCA9ICExLCBuLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsLCBuLm9ic2VydmVycyA9IFtdLCBuLmlzU3RvcHBlZCA9ICExLCBuLmhhc0Vycm9yID0gITEsIG4udGhyb3duRXJyb3IgPSBudWxsLCBuO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gbmV3IEl0KHRoaXMsIHRoaXMpO1xuICAgIHJldHVybiByLm9wZXJhdG9yID0gbiwgcjtcbiAgfSwgdC5wcm90b3R5cGUuX3Rocm93SWZDbG9zZWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpXG4gICAgICB0aHJvdyBuZXcgenIoKTtcbiAgfSwgdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciA9IHRoaXM7XG4gICAgTWUoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwgbztcbiAgICAgIGlmIChyLl90aHJvd0lmQ2xvc2VkKCksICFyLmlzU3RvcHBlZCkge1xuICAgICAgICByLmN1cnJlbnRPYnNlcnZlcnMgfHwgKHIuY3VycmVudE9ic2VydmVycyA9IEFycmF5LmZyb20oci5vYnNlcnZlcnMpKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKHZhciBzID0gbWUoci5jdXJyZW50T2JzZXJ2ZXJzKSwgYSA9IHMubmV4dCgpOyAhYS5kb25lOyBhID0gcy5uZXh0KCkpIHtcbiAgICAgICAgICAgIHZhciBjID0gYS52YWx1ZTtcbiAgICAgICAgICAgIGMubmV4dChuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHUpIHtcbiAgICAgICAgICBpID0geyBlcnJvcjogdSB9O1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhICYmICFhLmRvbmUgJiYgKG8gPSBzLnJldHVybikgJiYgby5jYWxsKHMpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoaSkgdGhyb3cgaS5lcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzO1xuICAgIE1lKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHIuX3Rocm93SWZDbG9zZWQoKSwgIXIuaXNTdG9wcGVkKSB7XG4gICAgICAgIHIuaGFzRXJyb3IgPSByLmlzU3RvcHBlZCA9ICEwLCByLnRocm93bkVycm9yID0gbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IHIub2JzZXJ2ZXJzOyBpLmxlbmd0aDsgKVxuICAgICAgICAgIGkuc2hpZnQoKS5lcnJvcihuKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXM7XG4gICAgTWUoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAobi5fdGhyb3dJZkNsb3NlZCgpLCAhbi5pc1N0b3BwZWQpIHtcbiAgICAgICAgbi5pc1N0b3BwZWQgPSAhMDtcbiAgICAgICAgZm9yICh2YXIgciA9IG4ub2JzZXJ2ZXJzOyByLmxlbmd0aDsgKVxuICAgICAgICAgIHIuc2hpZnQoKS5jb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCB0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaXNTdG9wcGVkID0gdGhpcy5jbG9zZWQgPSAhMCwgdGhpcy5vYnNlcnZlcnMgPSB0aGlzLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsO1xuICB9LCBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIFwib2JzZXJ2ZWRcIiwge1xuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbjtcbiAgICAgIHJldHVybiAoKG4gPSB0aGlzLm9ic2VydmVycykgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogbi5sZW5ndGgpID4gMDtcbiAgICB9LFxuICAgIGVudW1lcmFibGU6ICExLFxuICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgfSksIHQucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Rocm93SWZDbG9zZWQoKSwgZS5wcm90b3R5cGUuX3RyeVN1YnNjcmliZS5jYWxsKHRoaXMsIG4pO1xuICB9LCB0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHJldHVybiB0aGlzLl90aHJvd0lmQ2xvc2VkKCksIHRoaXMuX2NoZWNrRmluYWxpemVkU3RhdHVzZXMobiksIHRoaXMuX2lubmVyU3Vic2NyaWJlKG4pO1xuICB9LCB0LnByb3RvdHlwZS5faW5uZXJTdWJzY3JpYmUgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzLCBpID0gdGhpcywgbyA9IGkuaGFzRXJyb3IsIHMgPSBpLmlzU3RvcHBlZCwgYSA9IGkub2JzZXJ2ZXJzO1xuICAgIHJldHVybiBvIHx8IHMgPyBhbiA6ICh0aGlzLmN1cnJlbnRPYnNlcnZlcnMgPSBudWxsLCBhLnB1c2gobiksIG5ldyBPZShmdW5jdGlvbigpIHtcbiAgICAgIHIuY3VycmVudE9ic2VydmVycyA9IG51bGwsIFVlKGEsIG4pO1xuICAgIH0pKTtcbiAgfSwgdC5wcm90b3R5cGUuX2NoZWNrRmluYWxpemVkU3RhdHVzZXMgPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzLCBpID0gci5oYXNFcnJvciwgbyA9IHIudGhyb3duRXJyb3IsIHMgPSByLmlzU3RvcHBlZDtcbiAgICBpID8gbi5lcnJvcihvKSA6IHMgJiYgbi5jb21wbGV0ZSgpO1xuICB9LCB0LnByb3RvdHlwZS5hc09ic2VydmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IG5ldyBrKCk7XG4gICAgcmV0dXJuIG4uc291cmNlID0gdGhpcywgbjtcbiAgfSwgdC5jcmVhdGUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgcmV0dXJuIG5ldyBJdChuLCByKTtcbiAgfSwgdDtcbn0oayksIEl0ID0gZnVuY3Rpb24oZSkge1xuICBlZSh0LCBlKTtcbiAgZnVuY3Rpb24gdChuLCByKSB7XG4gICAgdmFyIGkgPSBlLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICByZXR1cm4gaS5kZXN0aW5hdGlvbiA9IG4sIGkuc291cmNlID0gciwgaTtcbiAgfVxuICByZXR1cm4gdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciwgaTtcbiAgICAoaSA9IChyID0gdGhpcy5kZXN0aW5hdGlvbikgPT09IG51bGwgfHwgciA9PT0gdm9pZCAwID8gdm9pZCAwIDogci5uZXh0KSA9PT0gbnVsbCB8fCBpID09PSB2b2lkIDAgfHwgaS5jYWxsKHIsIG4pO1xuICB9LCB0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciwgaTtcbiAgICAoaSA9IChyID0gdGhpcy5kZXN0aW5hdGlvbikgPT09IG51bGwgfHwgciA9PT0gdm9pZCAwID8gdm9pZCAwIDogci5lcnJvcikgPT09IG51bGwgfHwgaSA9PT0gdm9pZCAwIHx8IGkuY2FsbChyLCBuKTtcbiAgfSwgdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiwgcjtcbiAgICAociA9IChuID0gdGhpcy5kZXN0aW5hdGlvbikgPT09IG51bGwgfHwgbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogbi5jb21wbGV0ZSkgPT09IG51bGwgfHwgciA9PT0gdm9pZCAwIHx8IHIuY2FsbChuKTtcbiAgfSwgdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgciwgaTtcbiAgICByZXR1cm4gKGkgPSAociA9IHRoaXMuc291cmNlKSA9PT0gbnVsbCB8fCByID09PSB2b2lkIDAgPyB2b2lkIDAgOiByLnN1YnNjcmliZShuKSkgIT09IG51bGwgJiYgaSAhPT0gdm9pZCAwID8gaSA6IGFuO1xuICB9LCB0O1xufShaKSwgbG4gPSBmdW5jdGlvbihlKSB7XG4gIGVlKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4pIHtcbiAgICB2YXIgciA9IGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIHJldHVybiByLl92YWx1ZSA9IG4sIHI7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICBjb25maWd1cmFibGU6ICEwXG4gIH0pLCB0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24obikge1xuICAgIHZhciByID0gZS5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsIG4pO1xuICAgIHJldHVybiAhci5jbG9zZWQgJiYgbi5uZXh0KHRoaXMuX3ZhbHVlKSwgcjtcbiAgfSwgdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiA9IHRoaXMsIHIgPSBuLmhhc0Vycm9yLCBpID0gbi50aHJvd25FcnJvciwgbyA9IG4uX3ZhbHVlO1xuICAgIGlmIChyKVxuICAgICAgdGhyb3cgaTtcbiAgICByZXR1cm4gdGhpcy5fdGhyb3dJZkNsb3NlZCgpLCBvO1xuICB9LCB0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24obikge1xuICAgIGUucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLCB0aGlzLl92YWx1ZSA9IG4pO1xuICB9LCB0O1xufShaKSwgWXIgPSB7XG4gIG5vdzogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCk7XG4gIH1cbn0sIHFyID0gZnVuY3Rpb24oZSkge1xuICBlZSh0LCBlKTtcbiAgZnVuY3Rpb24gdChuLCByKSB7XG4gICAgcmV0dXJuIGUuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICB9XG4gIHJldHVybiB0LnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgdDtcbn0oT2UpLCBSdCA9IHtcbiAgc2V0SW50ZXJ2YWw6IGZ1bmN0aW9uKGUsIHQpIHtcbiAgICBmb3IgKHZhciBuID0gW10sIHIgPSAyOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKVxuICAgICAgbltyIC0gMl0gPSBhcmd1bWVudHNbcl07XG4gICAgcmV0dXJuIHNldEludGVydmFsLmFwcGx5KHZvaWQgMCwgZ2UoW2UsIHRdLCB1ZShuKSkpO1xuICB9LFxuICBjbGVhckludGVydmFsOiBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwoZSk7XG4gIH0sXG4gIGRlbGVnYXRlOiB2b2lkIDBcbn0sIEtyID0gZnVuY3Rpb24oZSkge1xuICBlZSh0LCBlKTtcbiAgZnVuY3Rpb24gdChuLCByKSB7XG4gICAgdmFyIGkgPSBlLmNhbGwodGhpcywgbiwgcikgfHwgdGhpcztcbiAgICByZXR1cm4gaS5zY2hlZHVsZXIgPSBuLCBpLndvcmsgPSByLCBpLnBlbmRpbmcgPSAhMSwgaTtcbiAgfVxuICByZXR1cm4gdC5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgdmFyIGk7XG4gICAgaWYgKHIgPT09IHZvaWQgMCAmJiAociA9IDApLCB0aGlzLmNsb3NlZClcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIHRoaXMuc3RhdGUgPSBuO1xuICAgIHZhciBvID0gdGhpcy5pZCwgcyA9IHRoaXMuc2NoZWR1bGVyO1xuICAgIHJldHVybiBvICE9IG51bGwgJiYgKHRoaXMuaWQgPSB0aGlzLnJlY3ljbGVBc3luY0lkKHMsIG8sIHIpKSwgdGhpcy5wZW5kaW5nID0gITAsIHRoaXMuZGVsYXkgPSByLCB0aGlzLmlkID0gKGkgPSB0aGlzLmlkKSAhPT0gbnVsbCAmJiBpICE9PSB2b2lkIDAgPyBpIDogdGhpcy5yZXF1ZXN0QXN5bmNJZChzLCB0aGlzLmlkLCByKSwgdGhpcztcbiAgfSwgdC5wcm90b3R5cGUucmVxdWVzdEFzeW5jSWQgPSBmdW5jdGlvbihuLCByLCBpKSB7XG4gICAgcmV0dXJuIGkgPT09IHZvaWQgMCAmJiAoaSA9IDApLCBSdC5zZXRJbnRlcnZhbChuLmZsdXNoLmJpbmQobiwgdGhpcyksIGkpO1xuICB9LCB0LnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZCA9IGZ1bmN0aW9uKG4sIHIsIGkpIHtcbiAgICBpZiAoaSA9PT0gdm9pZCAwICYmIChpID0gMCksIGkgIT0gbnVsbCAmJiB0aGlzLmRlbGF5ID09PSBpICYmIHRoaXMucGVuZGluZyA9PT0gITEpXG4gICAgICByZXR1cm4gcjtcbiAgICByICE9IG51bGwgJiYgUnQuY2xlYXJJbnRlcnZhbChyKTtcbiAgfSwgdC5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uKG4sIHIpIHtcbiAgICBpZiAodGhpcy5jbG9zZWQpXG4gICAgICByZXR1cm4gbmV3IEVycm9yKFwiZXhlY3V0aW5nIGEgY2FuY2VsbGVkIGFjdGlvblwiKTtcbiAgICB0aGlzLnBlbmRpbmcgPSAhMTtcbiAgICB2YXIgaSA9IHRoaXMuX2V4ZWN1dGUobiwgcik7XG4gICAgaWYgKGkpXG4gICAgICByZXR1cm4gaTtcbiAgICB0aGlzLnBlbmRpbmcgPT09ICExICYmIHRoaXMuaWQgIT0gbnVsbCAmJiAodGhpcy5pZCA9IHRoaXMucmVjeWNsZUFzeW5jSWQodGhpcy5zY2hlZHVsZXIsIHRoaXMuaWQsIG51bGwpKTtcbiAgfSwgdC5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbihuLCByKSB7XG4gICAgdmFyIGkgPSAhMSwgbztcbiAgICB0cnkge1xuICAgICAgdGhpcy53b3JrKG4pO1xuICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgIGkgPSAhMCwgbyA9IHMgfHwgbmV3IEVycm9yKFwiU2NoZWR1bGVkIGFjdGlvbiB0aHJldyBmYWxzeSBlcnJvclwiKTtcbiAgICB9XG4gICAgaWYgKGkpXG4gICAgICByZXR1cm4gdGhpcy51bnN1YnNjcmliZSgpLCBvO1xuICB9LCB0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgIHZhciBuID0gdGhpcywgciA9IG4uaWQsIGkgPSBuLnNjaGVkdWxlciwgbyA9IGkuYWN0aW9ucztcbiAgICAgIHRoaXMud29yayA9IHRoaXMuc3RhdGUgPSB0aGlzLnNjaGVkdWxlciA9IG51bGwsIHRoaXMucGVuZGluZyA9ICExLCBVZShvLCB0aGlzKSwgciAhPSBudWxsICYmICh0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChpLCByLCBudWxsKSksIHRoaXMuZGVsYXkgPSBudWxsLCBlLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSwgdDtcbn0ocXIpLCBNdCA9IGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlKHQsIG4pIHtcbiAgICBuID09PSB2b2lkIDAgJiYgKG4gPSBlLm5vdyksIHRoaXMuc2NoZWR1bGVyQWN0aW9uQ3RvciA9IHQsIHRoaXMubm93ID0gbjtcbiAgfVxuICByZXR1cm4gZS5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbih0LCBuLCByKSB7XG4gICAgcmV0dXJuIG4gPT09IHZvaWQgMCAmJiAobiA9IDApLCBuZXcgdGhpcy5zY2hlZHVsZXJBY3Rpb25DdG9yKHRoaXMsIHQpLnNjaGVkdWxlKHIsIG4pO1xuICB9LCBlLm5vdyA9IFlyLm5vdywgZTtcbn0oKSwgR3IgPSBmdW5jdGlvbihlKSB7XG4gIGVlKHQsIGUpO1xuICBmdW5jdGlvbiB0KG4sIHIpIHtcbiAgICByID09PSB2b2lkIDAgJiYgKHIgPSBNdC5ub3cpO1xuICAgIHZhciBpID0gZS5jYWxsKHRoaXMsIG4sIHIpIHx8IHRoaXM7XG4gICAgcmV0dXJuIGkuYWN0aW9ucyA9IFtdLCBpLl9hY3RpdmUgPSAhMSwgaTtcbiAgfVxuICByZXR1cm4gdC5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSB0aGlzLmFjdGlvbnM7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xuICAgICAgci5wdXNoKG4pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaTtcbiAgICB0aGlzLl9hY3RpdmUgPSAhMDtcbiAgICBkb1xuICAgICAgaWYgKGkgPSBuLmV4ZWN1dGUobi5zdGF0ZSwgbi5kZWxheSkpXG4gICAgICAgIGJyZWFrO1xuICAgIHdoaWxlIChuID0gci5zaGlmdCgpKTtcbiAgICBpZiAodGhpcy5fYWN0aXZlID0gITEsIGkpIHtcbiAgICAgIGZvciAoOyBuID0gci5zaGlmdCgpOyApXG4gICAgICAgIG4udW5zdWJzY3JpYmUoKTtcbiAgICAgIHRocm93IGk7XG4gICAgfVxuICB9LCB0O1xufShNdCksIFFyID0gbmV3IEdyKEtyKTtcbmZ1bmN0aW9uIEpyKGUpIHtcbiAgcmV0dXJuIGUgJiYgQShlLnNjaGVkdWxlKTtcbn1cbmZ1bmN0aW9uIFhyKGUpIHtcbiAgcmV0dXJuIGVbZS5sZW5ndGggLSAxXTtcbn1cbmZ1bmN0aW9uIHl0KGUpIHtcbiAgcmV0dXJuIEpyKFhyKGUpKSA/IGUucG9wKCkgOiB2b2lkIDA7XG59XG52YXIgd3QgPSBmdW5jdGlvbihlKSB7XG4gIHJldHVybiBlICYmIHR5cGVvZiBlLmxlbmd0aCA9PSBcIm51bWJlclwiICYmIHR5cGVvZiBlICE9IFwiZnVuY3Rpb25cIjtcbn07XG5mdW5jdGlvbiBmbihlKSB7XG4gIHJldHVybiBBKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUudGhlbik7XG59XG5mdW5jdGlvbiBkbihlKSB7XG4gIHJldHVybiBBKGVbZ3RdKTtcbn1cbmZ1bmN0aW9uIHBuKGUpIHtcbiAgcmV0dXJuIFN5bWJvbC5hc3luY0l0ZXJhdG9yICYmIEEoZSA9PSBudWxsID8gdm9pZCAwIDogZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0pO1xufVxuZnVuY3Rpb24gaG4oZSkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBwcm92aWRlZCBcIiArIChlICE9PSBudWxsICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIgPyBcImFuIGludmFsaWQgb2JqZWN0XCIgOiBcIidcIiArIGUgKyBcIidcIikgKyBcIiB3aGVyZSBhIHN0cmVhbSB3YXMgZXhwZWN0ZWQuIFlvdSBjYW4gcHJvdmlkZSBhbiBPYnNlcnZhYmxlLCBQcm9taXNlLCBSZWFkYWJsZVN0cmVhbSwgQXJyYXksIEFzeW5jSXRlcmFibGUsIG9yIEl0ZXJhYmxlLlwiKTtcbn1cbmZ1bmN0aW9uIFpyKCkge1xuICByZXR1cm4gdHlwZW9mIFN5bWJvbCAhPSBcImZ1bmN0aW9uXCIgfHwgIVN5bWJvbC5pdGVyYXRvciA/IFwiQEBpdGVyYXRvclwiIDogU3ltYm9sLml0ZXJhdG9yO1xufVxudmFyIHZuID0gWnIoKTtcbmZ1bmN0aW9uIG1uKGUpIHtcbiAgcmV0dXJuIEEoZSA9PSBudWxsID8gdm9pZCAwIDogZVt2bl0pO1xufVxuZnVuY3Rpb24gZ24oZSkge1xuICByZXR1cm4gUnIodGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgbiwgciwgaSwgbztcbiAgICByZXR1cm4gc24odGhpcywgZnVuY3Rpb24ocykge1xuICAgICAgc3dpdGNoIChzLmxhYmVsKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBuID0gZS5nZXRSZWFkZXIoKSwgcy5sYWJlbCA9IDE7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBzLnRyeXMucHVzaChbMSwgLCA5LCAxMF0pLCBzLmxhYmVsID0gMjtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHJldHVybiBbNCwgcGUobi5yZWFkKCkpXTtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHJldHVybiByID0gcy5zZW50KCksIGkgPSByLnZhbHVlLCBvID0gci5kb25lLCBvID8gWzQsIHBlKHZvaWQgMCldIDogWzMsIDVdO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcmV0dXJuIFsyLCBzLnNlbnQoKV07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICByZXR1cm4gWzQsIHBlKGkpXTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiBbNCwgcy5zZW50KCldO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgcmV0dXJuIHMuc2VudCgpLCBbMywgMl07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICByZXR1cm4gWzMsIDEwXTtcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIHJldHVybiBuLnJlbGVhc2VMb2NrKCksIFs3XTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGJuKGUpIHtcbiAgcmV0dXJuIEEoZSA9PSBudWxsID8gdm9pZCAwIDogZS5nZXRSZWFkZXIpO1xufVxuZnVuY3Rpb24gSChlKSB7XG4gIGlmIChlIGluc3RhbmNlb2YgaylcbiAgICByZXR1cm4gZTtcbiAgaWYgKGUgIT0gbnVsbCkge1xuICAgIGlmIChkbihlKSlcbiAgICAgIHJldHVybiBlaShlKTtcbiAgICBpZiAod3QoZSkpXG4gICAgICByZXR1cm4gdGkoZSk7XG4gICAgaWYgKGZuKGUpKVxuICAgICAgcmV0dXJuIG5pKGUpO1xuICAgIGlmIChwbihlKSlcbiAgICAgIHJldHVybiB5bihlKTtcbiAgICBpZiAobW4oZSkpXG4gICAgICByZXR1cm4gcmkoZSk7XG4gICAgaWYgKGJuKGUpKVxuICAgICAgcmV0dXJuIGlpKGUpO1xuICB9XG4gIHRocm93IGhuKGUpO1xufVxuZnVuY3Rpb24gZWkoZSkge1xuICByZXR1cm4gbmV3IGsoZnVuY3Rpb24odCkge1xuICAgIHZhciBuID0gZVtndF0oKTtcbiAgICBpZiAoQShuLnN1YnNjcmliZSkpXG4gICAgICByZXR1cm4gbi5zdWJzY3JpYmUodCk7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb3ZpZGVkIG9iamVjdCBkb2VzIG5vdCBjb3JyZWN0bHkgaW1wbGVtZW50IFN5bWJvbC5vYnNlcnZhYmxlXCIpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHRpKGUpIHtcbiAgcmV0dXJuIG5ldyBrKGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoICYmICF0LmNsb3NlZDsgbisrKVxuICAgICAgdC5uZXh0KGVbbl0pO1xuICAgIHQuY29tcGxldGUoKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBuaShlKSB7XG4gIHJldHVybiBuZXcgayhmdW5jdGlvbih0KSB7XG4gICAgZS50aGVuKGZ1bmN0aW9uKG4pIHtcbiAgICAgIHQuY2xvc2VkIHx8ICh0Lm5leHQobiksIHQuY29tcGxldGUoKSk7XG4gICAgfSwgZnVuY3Rpb24obikge1xuICAgICAgcmV0dXJuIHQuZXJyb3Iobik7XG4gICAgfSkudGhlbihudWxsLCB1bik7XG4gIH0pO1xufVxuZnVuY3Rpb24gcmkoZSkge1xuICByZXR1cm4gbmV3IGsoZnVuY3Rpb24odCkge1xuICAgIHZhciBuLCByO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBpID0gbWUoZSksIG8gPSBpLm5leHQoKTsgIW8uZG9uZTsgbyA9IGkubmV4dCgpKSB7XG4gICAgICAgIHZhciBzID0gby52YWx1ZTtcbiAgICAgICAgaWYgKHQubmV4dChzKSwgdC5jbG9zZWQpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGEpIHtcbiAgICAgIG4gPSB7IGVycm9yOiBhIH07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG8gJiYgIW8uZG9uZSAmJiAociA9IGkucmV0dXJuKSAmJiByLmNhbGwoaSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAobikgdGhyb3cgbi5lcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgdC5jb21wbGV0ZSgpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHluKGUpIHtcbiAgcmV0dXJuIG5ldyBrKGZ1bmN0aW9uKHQpIHtcbiAgICBvaShlLCB0KS5jYXRjaChmdW5jdGlvbihuKSB7XG4gICAgICByZXR1cm4gdC5lcnJvcihuKTtcbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBpaShlKSB7XG4gIHJldHVybiB5bihnbihlKSk7XG59XG5mdW5jdGlvbiBvaShlLCB0KSB7XG4gIHZhciBuLCByLCBpLCBvO1xuICByZXR1cm4gSXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzLCBhO1xuICAgIHJldHVybiBzbih0aGlzLCBmdW5jdGlvbihjKSB7XG4gICAgICBzd2l0Y2ggKGMubGFiZWwpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGMudHJ5cy5wdXNoKFswLCA1LCA2LCAxMV0pLCBuID0gTXIoZSksIGMubGFiZWwgPSAxO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgcmV0dXJuIFs0LCBuLm5leHQoKV07XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBpZiAociA9IGMuc2VudCgpLCAhIXIuZG9uZSkgcmV0dXJuIFszLCA0XTtcbiAgICAgICAgICBpZiAocyA9IHIudmFsdWUsIHQubmV4dChzKSwgdC5jbG9zZWQpXG4gICAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgICAgIGMubGFiZWwgPSAzO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcmV0dXJuIFszLCAxXTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHJldHVybiBbMywgMTFdO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgcmV0dXJuIGEgPSBjLnNlbnQoKSwgaSA9IHsgZXJyb3I6IGEgfSwgWzMsIDExXTtcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHJldHVybiBjLnRyeXMucHVzaChbNiwgLCA5LCAxMF0pLCByICYmICFyLmRvbmUgJiYgKG8gPSBuLnJldHVybikgPyBbNCwgby5jYWxsKG4pXSA6IFszLCA4XTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIGMuc2VudCgpLCBjLmxhYmVsID0gODtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgIHJldHVybiBbMywgMTBdO1xuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgaWYgKGkpIHRocm93IGkuZXJyb3I7XG4gICAgICAgICAgcmV0dXJuIFs3XTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICByZXR1cm4gWzddO1xuICAgICAgICBjYXNlIDExOlxuICAgICAgICAgIHJldHVybiB0LmNvbXBsZXRlKCksIFsyXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiByZShlLCB0LCBuLCByLCBpKSB7XG4gIHIgPT09IHZvaWQgMCAmJiAociA9IDApLCBpID09PSB2b2lkIDAgJiYgKGkgPSAhMSk7XG4gIHZhciBvID0gdC5zY2hlZHVsZShmdW5jdGlvbigpIHtcbiAgICBuKCksIGkgPyBlLmFkZCh0aGlzLnNjaGVkdWxlKG51bGwsIHIpKSA6IHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgfSwgcik7XG4gIGlmIChlLmFkZChvKSwgIWkpXG4gICAgcmV0dXJuIG87XG59XG5mdW5jdGlvbiB3bihlLCB0KSB7XG4gIHJldHVybiB0ID09PSB2b2lkIDAgJiYgKHQgPSAwKSwgQihmdW5jdGlvbihuLCByKSB7XG4gICAgbi5zdWJzY3JpYmUoVyhyLCBmdW5jdGlvbihpKSB7XG4gICAgICByZXR1cm4gcmUociwgZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiByLm5leHQoaSk7XG4gICAgICB9LCB0KTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByZShyLCBlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHIuY29tcGxldGUoKTtcbiAgICAgIH0sIHQpO1xuICAgIH0sIGZ1bmN0aW9uKGkpIHtcbiAgICAgIHJldHVybiByZShyLCBlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHIuZXJyb3IoaSk7XG4gICAgICB9LCB0KTtcbiAgICB9KSk7XG4gIH0pO1xufVxuZnVuY3Rpb24geG4oZSwgdCkge1xuICByZXR1cm4gdCA9PT0gdm9pZCAwICYmICh0ID0gMCksIEIoZnVuY3Rpb24obiwgcikge1xuICAgIHIuYWRkKGUuc2NoZWR1bGUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbi5zdWJzY3JpYmUocik7XG4gICAgfSwgdCkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNpKGUsIHQpIHtcbiAgcmV0dXJuIEgoZSkucGlwZSh4bih0KSwgd24odCkpO1xufVxuZnVuY3Rpb24gYWkoZSwgdCkge1xuICByZXR1cm4gSChlKS5waXBlKHhuKHQpLCB3bih0KSk7XG59XG5mdW5jdGlvbiBjaShlLCB0KSB7XG4gIHJldHVybiBuZXcgayhmdW5jdGlvbihuKSB7XG4gICAgdmFyIHIgPSAwO1xuICAgIHJldHVybiB0LnNjaGVkdWxlKGZ1bmN0aW9uKCkge1xuICAgICAgciA9PT0gZS5sZW5ndGggPyBuLmNvbXBsZXRlKCkgOiAobi5uZXh0KGVbcisrXSksIG4uY2xvc2VkIHx8IHRoaXMuc2NoZWR1bGUoKSk7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gdWkoZSwgdCkge1xuICByZXR1cm4gbmV3IGsoZnVuY3Rpb24obikge1xuICAgIHZhciByO1xuICAgIHJldHVybiByZShuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgIHIgPSBlW3ZuXSgpLCByZShuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGksIG8sIHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaSA9IHIubmV4dCgpLCBvID0gaS52YWx1ZSwgcyA9IGkuZG9uZTtcbiAgICAgICAgfSBjYXRjaCAoYSkge1xuICAgICAgICAgIG4uZXJyb3IoYSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHMgPyBuLmNvbXBsZXRlKCkgOiBuLm5leHQobyk7XG4gICAgICB9LCAwLCAhMCk7XG4gICAgfSksIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEEociA9PSBudWxsID8gdm9pZCAwIDogci5yZXR1cm4pICYmIHIucmV0dXJuKCk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBTbihlLCB0KSB7XG4gIGlmICghZSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJdGVyYWJsZSBjYW5ub3QgYmUgbnVsbFwiKTtcbiAgcmV0dXJuIG5ldyBrKGZ1bmN0aW9uKG4pIHtcbiAgICByZShuLCB0LCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByID0gZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICAgIHJlKG4sIHQsIGZ1bmN0aW9uKCkge1xuICAgICAgICByLm5leHQoKS50aGVuKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICBpLmRvbmUgPyBuLmNvbXBsZXRlKCkgOiBuLm5leHQoaS52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSwgMCwgITApO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGxpKGUsIHQpIHtcbiAgcmV0dXJuIFNuKGduKGUpLCB0KTtcbn1cbmZ1bmN0aW9uIGZpKGUsIHQpIHtcbiAgaWYgKGUgIT0gbnVsbCkge1xuICAgIGlmIChkbihlKSlcbiAgICAgIHJldHVybiBzaShlLCB0KTtcbiAgICBpZiAod3QoZSkpXG4gICAgICByZXR1cm4gY2koZSwgdCk7XG4gICAgaWYgKGZuKGUpKVxuICAgICAgcmV0dXJuIGFpKGUsIHQpO1xuICAgIGlmIChwbihlKSlcbiAgICAgIHJldHVybiBTbihlLCB0KTtcbiAgICBpZiAobW4oZSkpXG4gICAgICByZXR1cm4gdWkoZSwgdCk7XG4gICAgaWYgKGJuKGUpKVxuICAgICAgcmV0dXJuIGxpKGUsIHQpO1xuICB9XG4gIHRocm93IGhuKGUpO1xufVxuZnVuY3Rpb24gR2UoZSwgdCkge1xuICByZXR1cm4gdCA/IGZpKGUsIHQpIDogSChlKTtcbn1cbmZ1bmN0aW9uIER0KCkge1xuICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKVxuICAgIGVbdF0gPSBhcmd1bWVudHNbdF07XG4gIHZhciBuID0geXQoZSk7XG4gIHJldHVybiBHZShlLCBuKTtcbn1cbmZ1bmN0aW9uIGRpKGUpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTihlKTtcbn1cbnZhciBwaSA9IHZ0KGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG4pIHtcbiAgICBuID09PSB2b2lkIDAgJiYgKG4gPSBudWxsKSwgZSh0aGlzKSwgdGhpcy5tZXNzYWdlID0gXCJUaW1lb3V0IGhhcyBvY2N1cnJlZFwiLCB0aGlzLm5hbWUgPSBcIlRpbWVvdXRFcnJvclwiLCB0aGlzLmluZm8gPSBuO1xuICB9O1xufSk7XG5mdW5jdGlvbiBoaShlLCB0KSB7XG4gIHZhciBuID0gZGkoZSkgPyB7IGZpcnN0OiBlIH0gOiB0eXBlb2YgZSA9PSBcIm51bWJlclwiID8geyBlYWNoOiBlIH0gOiBlLCByID0gbi5maXJzdCwgaSA9IG4uZWFjaCwgbyA9IG4ud2l0aCwgcyA9IG8gPT09IHZvaWQgMCA/IHZpIDogbywgYSA9IG4uc2NoZWR1bGVyLCBjID0gYSA9PT0gdm9pZCAwID8gUXIgOiBhLCB1ID0gbi5tZXRhLCBsID0gdSA9PT0gdm9pZCAwID8gbnVsbCA6IHU7XG4gIGlmIChyID09IG51bGwgJiYgaSA9PSBudWxsKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJObyB0aW1lb3V0IHByb3ZpZGVkLlwiKTtcbiAgcmV0dXJuIEIoZnVuY3Rpb24oZiwgdikge1xuICAgIHZhciBkLCBtLCBwID0gbnVsbCwgZyA9IDAsIGggPSBmdW5jdGlvbih4KSB7XG4gICAgICBtID0gcmUodiwgYywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZC51bnN1YnNjcmliZSgpLCBIKHMoe1xuICAgICAgICAgICAgbWV0YTogbCxcbiAgICAgICAgICAgIGxhc3RWYWx1ZTogcCxcbiAgICAgICAgICAgIHNlZW46IGdcbiAgICAgICAgICB9KSkuc3Vic2NyaWJlKHYpO1xuICAgICAgICB9IGNhdGNoIChFKSB7XG4gICAgICAgICAgdi5lcnJvcihFKTtcbiAgICAgICAgfVxuICAgICAgfSwgeCk7XG4gICAgfTtcbiAgICBkID0gZi5zdWJzY3JpYmUoVyh2LCBmdW5jdGlvbih4KSB7XG4gICAgICBtID09IG51bGwgfHwgbS51bnN1YnNjcmliZSgpLCBnKyssIHYubmV4dChwID0geCksIGkgPiAwICYmIGgoaSk7XG4gICAgfSwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKCkge1xuICAgICAgbSAhPSBudWxsICYmIG0uY2xvc2VkIHx8IG0gPT0gbnVsbCB8fCBtLnVuc3Vic2NyaWJlKCksIHAgPSBudWxsO1xuICAgIH0pKSwgIWcgJiYgaChyICE9IG51bGwgPyB0eXBlb2YgciA9PSBcIm51bWJlclwiID8gciA6ICtyIC0gYy5ub3coKSA6IGkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHZpKGUpIHtcbiAgdGhyb3cgbmV3IHBpKGUpO1xufVxuZnVuY3Rpb24gTyhlLCB0KSB7XG4gIHJldHVybiBCKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSA9IDA7XG4gICAgbi5zdWJzY3JpYmUoVyhyLCBmdW5jdGlvbihvKSB7XG4gICAgICByLm5leHQoZS5jYWxsKHQsIG8sIGkrKykpO1xuICAgIH0pKTtcbiAgfSk7XG59XG52YXIgbWkgPSBBcnJheS5pc0FycmF5O1xuZnVuY3Rpb24gZ2koZSwgdCkge1xuICByZXR1cm4gbWkodCkgPyBlLmFwcGx5KHZvaWQgMCwgZ2UoW10sIHVlKHQpKSkgOiBlKHQpO1xufVxuZnVuY3Rpb24gYmkoZSkge1xuICByZXR1cm4gTyhmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGdpKGUsIHQpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHlpKGUsIHQsIG4sIHIsIGksIG8sIHMsIGEpIHtcbiAgdmFyIGMgPSBbXSwgdSA9IDAsIGwgPSAwLCBmID0gITEsIHYgPSBmdW5jdGlvbigpIHtcbiAgICBmICYmICFjLmxlbmd0aCAmJiAhdSAmJiB0LmNvbXBsZXRlKCk7XG4gIH0sIGQgPSBmdW5jdGlvbihwKSB7XG4gICAgcmV0dXJuIHUgPCByID8gbShwKSA6IGMucHVzaChwKTtcbiAgfSwgbSA9IGZ1bmN0aW9uKHApIHtcbiAgICB1Kys7XG4gICAgdmFyIGcgPSAhMTtcbiAgICBIKG4ocCwgbCsrKSkuc3Vic2NyaWJlKFcodCwgZnVuY3Rpb24oaCkge1xuICAgICAgdC5uZXh0KGgpO1xuICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgZyA9ICEwO1xuICAgIH0sIHZvaWQgMCwgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoZylcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB1LS07XG4gICAgICAgICAgZm9yICh2YXIgaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHggPSBjLnNoaWZ0KCk7XG4gICAgICAgICAgICBzIHx8IG0oeCk7XG4gICAgICAgICAgfTsgYy5sZW5ndGggJiYgdSA8IHI7IClcbiAgICAgICAgICAgIGgoKTtcbiAgICAgICAgICB2KCk7XG4gICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICB0LmVycm9yKHgpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICB9O1xuICByZXR1cm4gZS5zdWJzY3JpYmUoVyh0LCBkLCBmdW5jdGlvbigpIHtcbiAgICBmID0gITAsIHYoKTtcbiAgfSkpLCBmdW5jdGlvbigpIHtcbiAgfTtcbn1cbmZ1bmN0aW9uIHh0KGUsIHQsIG4pIHtcbiAgcmV0dXJuIG4gPT09IHZvaWQgMCAmJiAobiA9IDEgLyAwKSwgQSh0KSA/IHh0KGZ1bmN0aW9uKHIsIGkpIHtcbiAgICByZXR1cm4gTyhmdW5jdGlvbihvLCBzKSB7XG4gICAgICByZXR1cm4gdChyLCBvLCBpLCBzKTtcbiAgICB9KShIKGUociwgaSkpKTtcbiAgfSwgbikgOiAodHlwZW9mIHQgPT0gXCJudW1iZXJcIiAmJiAobiA9IHQpLCBCKGZ1bmN0aW9uKHIsIGkpIHtcbiAgICByZXR1cm4geWkociwgaSwgZSwgbik7XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIHdpKGUpIHtcbiAgcmV0dXJuIHh0KGJ0LCBlKTtcbn1cbmZ1bmN0aW9uIHhpKCkge1xuICByZXR1cm4gd2koMSk7XG59XG5mdW5jdGlvbiBXZSgpIHtcbiAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKylcbiAgICBlW3RdID0gYXJndW1lbnRzW3RdO1xuICByZXR1cm4geGkoKShHZShlLCB5dChlKSkpO1xufVxudmFyIFNpID0gW1wiYWRkTGlzdGVuZXJcIiwgXCJyZW1vdmVMaXN0ZW5lclwiXSwgVGkgPSBbXCJhZGRFdmVudExpc3RlbmVyXCIsIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiXSwgRWkgPSBbXCJvblwiLCBcIm9mZlwiXTtcbmZ1bmN0aW9uIGF0KGUsIHQsIG4sIHIpIHtcbiAgaWYgKEEobikgJiYgKHIgPSBuLCBuID0gdm9pZCAwKSwgcilcbiAgICByZXR1cm4gYXQoZSwgdCwgbikucGlwZShiaShyKSk7XG4gIHZhciBpID0gdWUoQWkoZSkgPyBUaS5tYXAoZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBmdW5jdGlvbihjKSB7XG4gICAgICByZXR1cm4gZVthXSh0LCBjLCBuKTtcbiAgICB9O1xuICB9KSA6IENpKGUpID8gU2kubWFwKCR0KGUsIHQpKSA6IFBpKGUpID8gRWkubWFwKCR0KGUsIHQpKSA6IFtdLCAyKSwgbyA9IGlbMF0sIHMgPSBpWzFdO1xuICBpZiAoIW8gJiYgd3QoZSkpXG4gICAgcmV0dXJuIHh0KGZ1bmN0aW9uKGEpIHtcbiAgICAgIHJldHVybiBhdChhLCB0LCBuKTtcbiAgICB9KShIKGUpKTtcbiAgaWYgKCFvKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHRhcmdldFwiKTtcbiAgcmV0dXJuIG5ldyBrKGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgdSA9IFtdLCBsID0gMDsgbCA8IGFyZ3VtZW50cy5sZW5ndGg7IGwrKylcbiAgICAgICAgdVtsXSA9IGFyZ3VtZW50c1tsXTtcbiAgICAgIHJldHVybiBhLm5leHQoMSA8IHUubGVuZ3RoID8gdSA6IHVbMF0pO1xuICAgIH07XG4gICAgcmV0dXJuIG8oYyksIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHMoYyk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiAkdChlLCB0KSB7XG4gIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHIpIHtcbiAgICAgIHJldHVybiBlW25dKHQsIHIpO1xuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBDaShlKSB7XG4gIHJldHVybiBBKGUuYWRkTGlzdGVuZXIpICYmIEEoZS5yZW1vdmVMaXN0ZW5lcik7XG59XG5mdW5jdGlvbiBQaShlKSB7XG4gIHJldHVybiBBKGUub24pICYmIEEoZS5vZmYpO1xufVxuZnVuY3Rpb24gQWkoZSkge1xuICByZXR1cm4gQShlLmFkZEV2ZW50TGlzdGVuZXIpICYmIEEoZS5yZW1vdmVFdmVudExpc3RlbmVyKTtcbn1cbmZ1bmN0aW9uIFFlKGUsIHQpIHtcbiAgcmV0dXJuIEIoZnVuY3Rpb24obiwgcikge1xuICAgIHZhciBpID0gMDtcbiAgICBuLnN1YnNjcmliZShXKHIsIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBlLmNhbGwodCwgbywgaSsrKSAmJiByLm5leHQobyk7XG4gICAgfSkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIE9pKGUsIHQsIG4sIHIsIGkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG8sIHMpIHtcbiAgICB2YXIgYSA9IG4sIGMgPSB0LCB1ID0gMDtcbiAgICBvLnN1YnNjcmliZShXKHMsIGZ1bmN0aW9uKGwpIHtcbiAgICAgIHZhciBmID0gdSsrO1xuICAgICAgYyA9IGEgPyBlKGMsIGwsIGYpIDogKGEgPSAhMCwgbCksIHMubmV4dChjKTtcbiAgICB9LCBpKSk7XG4gIH07XG59XG5mdW5jdGlvbiBraShlLCB0KSB7XG4gIHJldHVybiB0ID09PSB2b2lkIDAgJiYgKHQgPSBidCksIGUgPSBlID8/IExpLCBCKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSwgbyA9ICEwO1xuICAgIG4uc3Vic2NyaWJlKFcociwgZnVuY3Rpb24ocykge1xuICAgICAgdmFyIGEgPSB0KHMpO1xuICAgICAgKG8gfHwgIWUoaSwgYSkpICYmIChvID0gITEsIGkgPSBhLCByLm5leHQocykpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBMaShlLCB0KSB7XG4gIHJldHVybiBlID09PSB0O1xufVxuZnVuY3Rpb24gY3QoZSwgdCkge1xuICByZXR1cm4gQihPaShlLCB0LCBhcmd1bWVudHMubGVuZ3RoID49IDIsICEwKSk7XG59XG5mdW5jdGlvbiBfaShlKSB7XG4gIGUgPT09IHZvaWQgMCAmJiAoZSA9IHt9KTtcbiAgdmFyIHQgPSBlLmNvbm5lY3RvciwgbiA9IHQgPT09IHZvaWQgMCA/IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgWigpO1xuICB9IDogdCwgciA9IGUucmVzZXRPbkVycm9yLCBpID0gciA9PT0gdm9pZCAwID8gITAgOiByLCBvID0gZS5yZXNldE9uQ29tcGxldGUsIHMgPSBvID09PSB2b2lkIDAgPyAhMCA6IG8sIGEgPSBlLnJlc2V0T25SZWZDb3VudFplcm8sIGMgPSBhID09PSB2b2lkIDAgPyAhMCA6IGE7XG4gIHJldHVybiBmdW5jdGlvbih1KSB7XG4gICAgdmFyIGwsIGYsIHYsIGQgPSAwLCBtID0gITEsIHAgPSAhMSwgZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgZiA9PSBudWxsIHx8IGYudW5zdWJzY3JpYmUoKSwgZiA9IHZvaWQgMDtcbiAgICB9LCBoID0gZnVuY3Rpb24oKSB7XG4gICAgICBnKCksIGwgPSB2ID0gdm9pZCAwLCBtID0gcCA9ICExO1xuICAgIH0sIHggPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBFID0gbDtcbiAgICAgIGgoKSwgRSA9PSBudWxsIHx8IEUudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBCKGZ1bmN0aW9uKEUsIFApIHtcbiAgICAgIGQrKywgIXAgJiYgIW0gJiYgZygpO1xuICAgICAgdmFyIGIgPSB2ID0gdiA/PyBuKCk7XG4gICAgICBQLmFkZChmdW5jdGlvbigpIHtcbiAgICAgICAgZC0tLCBkID09PSAwICYmICFwICYmICFtICYmIChmID0gZXQoeCwgYykpO1xuICAgICAgfSksIGIuc3Vic2NyaWJlKFApLCAhbCAmJiBkID4gMCAmJiAobCA9IG5ldyBDZSh7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uKFMpIHtcbiAgICAgICAgICByZXR1cm4gYi5uZXh0KFMpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oUykge1xuICAgICAgICAgIHAgPSAhMCwgZygpLCBmID0gZXQoaCwgaSwgUyksIGIuZXJyb3IoUyk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtID0gITAsIGcoKSwgZiA9IGV0KGgsIHMpLCBiLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pLCBIKEUpLnN1YnNjcmliZShsKSk7XG4gICAgfSkodSk7XG4gIH07XG59XG5mdW5jdGlvbiBldChlLCB0KSB7XG4gIGZvciAodmFyIG4gPSBbXSwgciA9IDI7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspXG4gICAgbltyIC0gMl0gPSBhcmd1bWVudHNbcl07XG4gIGlmICh0ID09PSAhMCkge1xuICAgIGUoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHQgIT09ICExKSB7XG4gICAgdmFyIGkgPSBuZXcgQ2Uoe1xuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGkudW5zdWJzY3JpYmUoKSwgZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBIKHQuYXBwbHkodm9pZCAwLCBnZShbXSwgdWUobikpKSkuc3Vic2NyaWJlKGkpO1xuICB9XG59XG5mdW5jdGlvbiBJaShlKSB7XG4gIHJldHVybiBCKGZ1bmN0aW9uKHQsIG4pIHtcbiAgICB2YXIgciA9ICExLCBpID0gVyhuLCBmdW5jdGlvbigpIHtcbiAgICAgIGkgPT0gbnVsbCB8fCBpLnVuc3Vic2NyaWJlKCksIHIgPSAhMDtcbiAgICB9LCBqZSk7XG4gICAgSChlKS5zdWJzY3JpYmUoaSksIHQuc3Vic2NyaWJlKFcobiwgZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHIgJiYgbi5uZXh0KG8pO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBEKCkge1xuICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKVxuICAgIGVbdF0gPSBhcmd1bWVudHNbdF07XG4gIHZhciBuID0geXQoZSk7XG4gIHJldHVybiBCKGZ1bmN0aW9uKHIsIGkpIHtcbiAgICAobiA/IFdlKGUsIHIsIG4pIDogV2UoZSwgcikpLnN1YnNjcmliZShpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBUbihlLCB0KSB7XG4gIHJldHVybiBCKGZ1bmN0aW9uKG4sIHIpIHtcbiAgICB2YXIgaSA9IG51bGwsIG8gPSAwLCBzID0gITEsIGEgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzICYmICFpICYmIHIuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIG4uc3Vic2NyaWJlKFcociwgZnVuY3Rpb24oYykge1xuICAgICAgaSA9PSBudWxsIHx8IGkudW5zdWJzY3JpYmUoKTtcbiAgICAgIHZhciB1ID0gMCwgbCA9IG8rKztcbiAgICAgIEgoZShjLCBsKSkuc3Vic2NyaWJlKGkgPSBXKHIsIGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgcmV0dXJuIHIubmV4dCh0ID8gdChjLCBmLCBsLCB1KyspIDogZik7XG4gICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgaSA9IG51bGwsIGEoKTtcbiAgICAgIH0pKTtcbiAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgIHMgPSAhMCwgYSgpO1xuICAgIH0pKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBOdChlKSB7XG4gIHJldHVybiBCKGZ1bmN0aW9uKHQsIG4pIHtcbiAgICBIKGUpLnN1YnNjcmliZShXKG4sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG4uY29tcGxldGUoKTtcbiAgICB9LCBqZSkpLCAhbi5jbG9zZWQgJiYgdC5zdWJzY3JpYmUobik7XG4gIH0pO1xufVxudmFyIFJpID0gT2JqZWN0LmRlZmluZVByb3BlcnR5LCBNaSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLCBEaSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzLCBGdCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsICRpID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwgTmkgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLCBVdCA9IChlLCB0LCBuKSA9PiB0IGluIGUgPyBSaShlLCB0LCB7IGVudW1lcmFibGU6ICEwLCBjb25maWd1cmFibGU6ICEwLCB3cml0YWJsZTogITAsIHZhbHVlOiBuIH0pIDogZVt0XSA9IG4sIFggPSAoZSwgdCkgPT4ge1xuICBmb3IgKHZhciBuIGluIHQgfHwgKHQgPSB7fSkpXG4gICAgJGkuY2FsbCh0LCBuKSAmJiBVdChlLCBuLCB0W25dKTtcbiAgaWYgKEZ0KVxuICAgIGZvciAodmFyIG4gb2YgRnQodCkpXG4gICAgICBOaS5jYWxsKHQsIG4pICYmIFV0KGUsIG4sIHRbbl0pO1xuICByZXR1cm4gZTtcbn0sIFRlID0gKGUsIHQpID0+IE1pKGUsIERpKHQpKSwgViA9IChlLCB0LCBuKSA9PiBuZXcgUHJvbWlzZSgociwgaSkgPT4ge1xuICB2YXIgbyA9IChjKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGEobi5uZXh0KGMpKTtcbiAgICB9IGNhdGNoICh1KSB7XG4gICAgICBpKHUpO1xuICAgIH1cbiAgfSwgcyA9IChjKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGEobi50aHJvdyhjKSk7XG4gICAgfSBjYXRjaCAodSkge1xuICAgICAgaSh1KTtcbiAgICB9XG4gIH0sIGEgPSAoYykgPT4gYy5kb25lID8gcihjLnZhbHVlKSA6IFByb21pc2UucmVzb2x2ZShjLnZhbHVlKS50aGVuKG8sIHMpO1xuICBhKChuID0gbi5hcHBseShlLCB0KSkubmV4dCgpKTtcbn0pLCBFbiA9IFwibGtcIjtcbmZ1bmN0aW9uIGooZSkge1xuICByZXR1cm4gdHlwZW9mIGUgPiBcInVcIiA/ICExIDogRmkoZSkgfHwgVWkoZSk7XG59XG5mdW5jdGlvbiBGaShlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gZSA/IGUuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiBlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpICYmIGUuaGFzT3duUHJvcGVydHkoXCJ0cmFja1wiKSAmJiB0eXBlb2YgKCh0ID0gZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IHQudHJhY2spIDwgXCJ1XCIgOiAhMTtcbn1cbmZ1bmN0aW9uIFVpKGUpIHtcbiAgcmV0dXJuIGUgPyBlLmhhc093blByb3BlcnR5KFwicGFydGljaXBhbnRcIikgJiYgZS5oYXNPd25Qcm9wZXJ0eShcInNvdXJjZVwiKSAmJiBlLmhhc093blByb3BlcnR5KFwicHVibGljYXRpb25cIikgJiYgdHlwZW9mIGUucHVibGljYXRpb24gPCBcInVcIiA6ICExO1xufVxuZnVuY3Rpb24gUGUoZSkge1xuICByZXR1cm4gZSA/IGUuaGFzT3duUHJvcGVydHkoXCJwYXJ0aWNpcGFudFwiKSAmJiBlLmhhc093blByb3BlcnR5KFwic291cmNlXCIpICYmIHR5cGVvZiBlLnB1YmxpY2F0aW9uID4gXCJ1XCIgOiAhMTtcbn1cbmZ1bmN0aW9uIE4oZSkge1xuICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZSA9PSBcIm51bWJlclwiKVxuICAgIHJldHVybiBgJHtlfWA7XG4gIGlmIChQZShlKSlcbiAgICByZXR1cm4gYCR7ZS5wYXJ0aWNpcGFudC5pZGVudGl0eX1fJHtlLnNvdXJjZX1fcGxhY2Vob2xkZXJgO1xuICBpZiAoaihlKSlcbiAgICByZXR1cm4gYCR7ZS5wYXJ0aWNpcGFudC5pZGVudGl0eX1fJHtlLnB1YmxpY2F0aW9uLnNvdXJjZX1fJHtlLnB1YmxpY2F0aW9uLnRyYWNrU2lkfWA7XG4gIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZ2VuZXJhdGUgYSBpZCBmb3IgdGhlIGdpdmVuIHRyYWNrIHJlZmVyZW5jZTogJHtlfWApO1xufVxuZnVuY3Rpb24gRG8oZSwgdCkge1xuICByZXR1cm4gZSA9PT0gdm9pZCAwIHx8IHQgPT09IHZvaWQgMCA/ICExIDogaihlKSAmJiBqKHQpID8gZS5wdWJsaWNhdGlvbi50cmFja1NpZCA9PT0gdC5wdWJsaWNhdGlvbi50cmFja1NpZCA6IE4oZSkgPT09IE4odCk7XG59XG5mdW5jdGlvbiAkbyhlLCB0KSB7XG4gIHJldHVybiB0eXBlb2YgdCA+IFwidVwiID8gITEgOiBqKGUpID8gdC5zb21lKFxuICAgIChuKSA9PiBuLnBhcnRpY2lwYW50LmlkZW50aXR5ID09PSBlLnBhcnRpY2lwYW50LmlkZW50aXR5ICYmIGoobikgJiYgbi5wdWJsaWNhdGlvbi50cmFja1NpZCA9PT0gZS5wdWJsaWNhdGlvbi50cmFja1NpZFxuICApIDogUGUoZSkgPyB0LnNvbWUoXG4gICAgKG4pID0+IG4ucGFydGljaXBhbnQuaWRlbnRpdHkgPT09IGUucGFydGljaXBhbnQuaWRlbnRpdHkgJiYgUGUobikgJiYgbi5zb3VyY2UgPT09IGUuc291cmNlXG4gICkgOiAhMTtcbn1cbmZ1bmN0aW9uIGppKGUsIHQpIHtcbiAgcmV0dXJuIFBlKGUpICYmIGoodCkgJiYgdC5wYXJ0aWNpcGFudC5pZGVudGl0eSA9PT0gZS5wYXJ0aWNpcGFudC5pZGVudGl0eSAmJiB0LnNvdXJjZSA9PT0gZS5zb3VyY2U7XG59XG5mdW5jdGlvbiBObygpIHtcbiAgY29uc3QgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICBlLnN0eWxlLndpZHRoID0gXCIxMDAlXCIsIGUuc3R5bGUuaGVpZ2h0ID0gXCIyMDBweFwiO1xuICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgdC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIiwgdC5zdHlsZS50b3AgPSBcIjBweFwiLCB0LnN0eWxlLmxlZnQgPSBcIjBweFwiLCB0LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiLCB0LnN0eWxlLndpZHRoID0gXCIyMDBweFwiLCB0LnN0eWxlLmhlaWdodCA9IFwiMTUwcHhcIiwgdC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCIsIHQuYXBwZW5kQ2hpbGQoZSksIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCk7XG4gIGNvbnN0IG4gPSBlLm9mZnNldFdpZHRoO1xuICB0LnN0eWxlLm92ZXJmbG93ID0gXCJzY3JvbGxcIjtcbiAgbGV0IHIgPSBlLm9mZnNldFdpZHRoO1xuICByZXR1cm4gbiA9PT0gciAmJiAociA9IHQuY2xpZW50V2lkdGgpLCBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHQpLCBuIC0gcjtcbn1cbmZ1bmN0aW9uIEZvKCkge1xuICByZXR1cm4gdHlwZW9mIGRvY3VtZW50IDwgXCJ1XCI7XG59XG5mdW5jdGlvbiBXaShlKSB7XG4gIGUgPSBYKHt9LCBlKTtcbiAgY29uc3QgdCA9IFwiKD86KD86W2Etel0rOik/Ly8pP1wiLCBuID0gXCIoPzpcXFxcUysoPzo6XFxcXFMqKT9AKT9cIiwgciA9IG5ldyBSZWdFeHAoXG4gICAgXCIoPzoyNVswLTVdfDJbMC00XVxcXFxkfDFcXFxcZFxcXFxkfFsxLTldXFxcXGR8XFxcXGQpKD86XFxcXC4oPzoyNVswLTVdfDJbMC00XVxcXFxkfDFcXFxcZFxcXFxkfFsxLTldXFxcXGR8XFxcXGQpKXszfVwiLFxuICAgIFwiZ1wiXG4gICkuc291cmNlLCB1ID0gYCg/OiR7dH18d3d3XFxcXC4pJHtufSg/OmxvY2FsaG9zdHwke3J9fCg/Oig/OlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XVstX10qKSpbYS16XFxcXHUwMGExLVxcXFx1ZmZmZjAtOV0rKSg/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmYwLTldLSopKlthLXpcXFxcdTAwYTEtXFxcXHVmZmZmMC05XSspKig/OlxcXFwuKD86W2EtelxcXFx1MDBhMS1cXFxcdWZmZmZdezIsfSkpXFxcXC4/KSg/OjpcXFxcZHsyLDV9KT8oPzpbLz8jXVteXFxcXHNcIl0qKT9gO1xuICByZXR1cm4gZS5leGFjdCA/IG5ldyBSZWdFeHAoYCg/Ol4ke3V9JClgLCBcImlcIikgOiBuZXcgUmVnRXhwKHUsIFwiaWdcIik7XG59XG52YXIganQgPSBcIlteXFxcXC5cXFxcc0A6XSg/OlteXFxcXHNAOl0qW15cXFxcc0A6XFxcXC5dKT9AW15cXFxcLlxcXFxzQF0rKD86XFxcXC5bXlxcXFwuXFxcXHNAXSspKlwiO1xuZnVuY3Rpb24gQmkoeyBleGFjdDogZSB9ID0ge30pIHtcbiAgcmV0dXJuIGUgPyBuZXcgUmVnRXhwKGBeJHtqdH0kYCkgOiBuZXcgUmVnRXhwKGp0LCBcImdcIik7XG59XG5mdW5jdGlvbiBVbyhlLCB0LCBuKSB7XG4gIHJldHVybiBTcihlLCB0LCAoKSA9PiBWKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgeyB4OiBpLCB5OiBvIH0gPSB5aWVsZCBQcihlLCB0LCB7XG4gICAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXG4gICAgICBtaWRkbGV3YXJlOiBbVHIoNiksIENyKCksIEVyKHsgcGFkZGluZzogNSB9KV1cbiAgICB9KTtcbiAgICBuID09IG51bGwgfHwgbihpLCBvKTtcbiAgfSkpO1xufVxuZnVuY3Rpb24gam8oZSwgdCkge1xuICByZXR1cm4gIWUuY29udGFpbnModC50YXJnZXQpO1xufVxudmFyIFdvID0gKCkgPT4gKHtcbiAgZW1haWw6IEJpKCksXG4gIHVybDogV2koe30pXG59KTtcbmZ1bmN0aW9uIEJvKGUsIHQpIHtcbiAgY29uc3QgbiA9IE9iamVjdC5lbnRyaWVzKHQpLm1hcChcbiAgICAoW28sIHNdLCBhKSA9PiBBcnJheS5mcm9tKGUubWF0Y2hBbGwocykpLm1hcCgoeyBpbmRleDogYywgMDogdSB9KSA9PiAoe1xuICAgICAgdHlwZTogbyxcbiAgICAgIHdlaWdodDogYSxcbiAgICAgIGNvbnRlbnQ6IHUsXG4gICAgICBpbmRleDogYyA/PyAwXG4gICAgfSkpXG4gICkuZmxhdCgpLnNvcnQoKG8sIHMpID0+IHtcbiAgICBjb25zdCBhID0gby5pbmRleCAtIHMuaW5kZXg7XG4gICAgcmV0dXJuIGEgIT09IDAgPyBhIDogby53ZWlnaHQgLSBzLndlaWdodDtcbiAgfSkuZmlsdGVyKCh7IGluZGV4OiBvIH0sIHMsIGEpID0+IHtcbiAgICBpZiAocyA9PT0gMCkgcmV0dXJuICEwO1xuICAgIGNvbnN0IGMgPSBhW3MgLSAxXTtcbiAgICByZXR1cm4gYy5pbmRleCArIGMuY29udGVudC5sZW5ndGggPD0gbztcbiAgfSksIHIgPSBbXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGNvbnN0IHsgdHlwZTogbywgY29udGVudDogcywgaW5kZXg6IGEgfSBvZiBuKVxuICAgIGEgPiBpICYmIHIucHVzaChlLnN1YnN0cmluZyhpLCBhKSksIHIucHVzaCh7IHR5cGU6IG8sIGNvbnRlbnQ6IHMgfSksIGkgPSBhICsgcy5sZW5ndGg7XG4gIHJldHVybiBlLmxlbmd0aCA+IGkgJiYgci5wdXNoKGUuc3Vic3RyaW5nKGkpKSwgcjtcbn1cbnZhciBWaSA9IFtcbiAgeS5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkLFxuICB5LlJvb21NZXRhZGF0YUNoYW5nZWQsXG4gIHkuQWN0aXZlU3BlYWtlcnNDaGFuZ2VkLFxuICB5LkNvbm5lY3Rpb25RdWFsaXR5Q2hhbmdlZCxcbiAgeS5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgeS5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgeS5QYXJ0aWNpcGFudFBlcm1pc3Npb25zQ2hhbmdlZCxcbiAgeS5QYXJ0aWNpcGFudE1ldGFkYXRhQ2hhbmdlZCxcbiAgeS5QYXJ0aWNpcGFudE5hbWVDaGFuZ2VkLFxuICB5LlBhcnRpY2lwYW50QXR0cmlidXRlc0NoYW5nZWQsXG4gIHkuVHJhY2tNdXRlZCxcbiAgeS5UcmFja1VubXV0ZWQsXG4gIHkuVHJhY2tQdWJsaXNoZWQsXG4gIHkuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgeS5UcmFja1N0cmVhbVN0YXRlQ2hhbmdlZCxcbiAgeS5UcmFja1N1YnNjcmlwdGlvbkZhaWxlZCxcbiAgeS5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICB5LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZFxuXSwgQ24gPSBbXG4gIC4uLlZpLFxuICB5LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIHkuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCBIaSA9IFtcbiAgdy5UcmFja1B1Ymxpc2hlZCxcbiAgdy5UcmFja1VucHVibGlzaGVkLFxuICB3LlRyYWNrTXV0ZWQsXG4gIHcuVHJhY2tVbm11dGVkLFxuICB3LlRyYWNrU3RyZWFtU3RhdGVDaGFuZ2VkLFxuICB3LlRyYWNrU3Vic2NyaWJlZCxcbiAgdy5UcmFja1Vuc3Vic2NyaWJlZCxcbiAgdy5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICB3LlRyYWNrU3Vic2NyaXB0aW9uRmFpbGVkLFxuICB3LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIHcuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCB6aSA9IFtcbiAgdy5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gIHcuSXNTcGVha2luZ0NoYW5nZWQsXG4gIHcuUGFydGljaXBhbnRNZXRhZGF0YUNoYW5nZWQsXG4gIHcuUGFydGljaXBhbnRQZXJtaXNzaW9uc0NoYW5nZWQsXG4gIHcuVHJhY2tNdXRlZCxcbiAgdy5UcmFja1VubXV0ZWQsXG4gIHcuVHJhY2tQdWJsaXNoZWQsXG4gIHcuVHJhY2tVbnB1Ymxpc2hlZCxcbiAgdy5UcmFja1N0cmVhbVN0YXRlQ2hhbmdlZCxcbiAgdy5UcmFja1N1YnNjcmlwdGlvbkZhaWxlZCxcbiAgdy5UcmFja1N1YnNjcmlwdGlvblBlcm1pc3Npb25DaGFuZ2VkLFxuICB3LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZFxuXSwgUG4gPSBbXG4gIC4uLnppLFxuICB3LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gIHcuTG9jYWxUcmFja1VucHVibGlzaGVkXG5dLCBfID0gX3IuZ2V0TG9nZ2VyKFwibGstY29tcG9uZW50cy1qc1wiKTtcbl8uc2V0RGVmYXVsdExldmVsKFwiV0FSTlwiKTtcbmZ1bmN0aW9uIFZvKGUsIHQgPSB7fSkge1xuICB2YXIgbjtcbiAgXy5zZXRMZXZlbChlKSwgVm4oKG4gPSB0LmxpdmVLaXRDbGllbnRMb2dMZXZlbCkgIT0gbnVsbCA/IG4gOiBlKTtcbn1cbmZ1bmN0aW9uIEhvKGUsIHQgPSB7fSkge1xuICB2YXIgbjtcbiAgY29uc3QgciA9IF8ubWV0aG9kRmFjdG9yeTtcbiAgXy5tZXRob2RGYWN0b3J5ID0gKGksIG8sIHMpID0+IHtcbiAgICBjb25zdCBhID0gcihpLCBvLCBzKSwgYyA9IFN0W2ldLCB1ID0gYyA+PSBvICYmIGMgPCBTdC5zaWxlbnQ7XG4gICAgcmV0dXJuIChsLCBmKSA9PiB7XG4gICAgICBmID8gYShsLCBmKSA6IGEobCksIHUgJiYgZShjLCBsLCBmKTtcbiAgICB9O1xuICB9LCBfLnNldExldmVsKF8uZ2V0TGV2ZWwoKSksIEhuKChuID0gdC5saXZlS2l0Q2xpZW50TG9nRXh0ZW5zaW9uKSAhPSBudWxsID8gbiA6IGUpO1xufVxudmFyIHpvID0gW1xuICB7XG4gICAgY29sdW1uczogMSxcbiAgICByb3dzOiAxXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAxLFxuICAgIHJvd3M6IDIsXG4gICAgb3JpZW50YXRpb246IFwicG9ydHJhaXRcIlxuICB9LFxuICB7XG4gICAgY29sdW1uczogMixcbiAgICByb3dzOiAxLFxuICAgIG9yaWVudGF0aW9uOiBcImxhbmRzY2FwZVwiXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiAyLFxuICAgIHJvd3M6IDIsXG4gICAgbWluV2lkdGg6IDU2MFxuICB9LFxuICB7XG4gICAgY29sdW1uczogMyxcbiAgICByb3dzOiAzLFxuICAgIG1pbldpZHRoOiA3MDBcbiAgfSxcbiAge1xuICAgIGNvbHVtbnM6IDQsXG4gICAgcm93czogNCxcbiAgICBtaW5XaWR0aDogOTYwXG4gIH0sXG4gIHtcbiAgICBjb2x1bW5zOiA1LFxuICAgIHJvd3M6IDUsXG4gICAgbWluV2lkdGg6IDExMDBcbiAgfVxuXTtcbmZ1bmN0aW9uIFlpKGUsIHQsIG4sIHIpIHtcbiAgaWYgKGUubGVuZ3RoIDwgMSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdCBsZWFzdCBvbmUgZ3JpZCBsYXlvdXQgZGVmaW5pdGlvbiBtdXN0IGJlIHByb3ZpZGVkLlwiKTtcbiAgY29uc3QgaSA9IHFpKGUpO1xuICBpZiAobiA8PSAwIHx8IHIgPD0gMClcbiAgICByZXR1cm4gaVswXTtcbiAgbGV0IG8gPSAwO1xuICBjb25zdCBzID0gbiAvIHIgPiAxID8gXCJsYW5kc2NhcGVcIiA6IFwicG9ydHJhaXRcIjtcbiAgbGV0IGEgPSBpLmZpbmQoKGMsIHUsIGwpID0+IHtcbiAgICBvID0gdTtcbiAgICBjb25zdCBmID0gbC5maW5kSW5kZXgoKHYsIGQpID0+IHtcbiAgICAgIGNvbnN0IG0gPSAhdi5vcmllbnRhdGlvbiB8fCB2Lm9yaWVudGF0aW9uID09PSBzLCBwID0gZCA+IHUsIGcgPSB2Lm1heFRpbGVzID09PSBjLm1heFRpbGVzO1xuICAgICAgcmV0dXJuIHAgJiYgZyAmJiBtO1xuICAgIH0pICE9PSAtMTtcbiAgICByZXR1cm4gYy5tYXhUaWxlcyA+PSB0ICYmICFmO1xuICB9KTtcbiAgaWYgKGEgPT09IHZvaWQgMClcbiAgICBpZiAoYSA9IGlbaS5sZW5ndGggLSAxXSwgYSlcbiAgICAgIF8ud2FybihcbiAgICAgICAgYE5vIGxheW91dCBmb3VuZCBmb3I6IHBhcnRpY2lwYW50Q291bnQ6ICR7dH0sIHdpZHRoL2hlaWdodDogJHtufS8ke3J9IGZhbGxiYWNrIHRvIGJpZ2dlc3QgYXZhaWxhYmxlIGxheW91dCAoJHthfSkuYFxuICAgICAgKTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBsYXlvdXQgb3IgZmFsbGJhY2sgbGF5b3V0IGZvdW5kLlwiKTtcbiAgaWYgKChuIDwgYS5taW5XaWR0aCB8fCByIDwgYS5taW5IZWlnaHQpICYmIG8gPiAwKSB7XG4gICAgY29uc3QgYyA9IGlbbyAtIDFdO1xuICAgIGEgPSBZaShcbiAgICAgIGkuc2xpY2UoMCwgbyksXG4gICAgICBjLm1heFRpbGVzLFxuICAgICAgbixcbiAgICAgIHJcbiAgICApO1xuICB9XG4gIHJldHVybiBhO1xufVxuZnVuY3Rpb24gcWkoZSkge1xuICByZXR1cm4gWy4uLmVdLm1hcCgodCkgPT4ge1xuICAgIHZhciBuLCByO1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHt0LmNvbHVtbnN9eCR7dC5yb3dzfWAsXG4gICAgICBjb2x1bW5zOiB0LmNvbHVtbnMsXG4gICAgICByb3dzOiB0LnJvd3MsXG4gICAgICBtYXhUaWxlczogdC5jb2x1bW5zICogdC5yb3dzLFxuICAgICAgbWluV2lkdGg6IChuID0gdC5taW5XaWR0aCkgIT0gbnVsbCA/IG4gOiAwLFxuICAgICAgbWluSGVpZ2h0OiAociA9IHQubWluSGVpZ2h0KSAhPSBudWxsID8gciA6IDAsXG4gICAgICBvcmllbnRhdGlvbjogdC5vcmllbnRhdGlvblxuICAgIH07XG4gIH0pLnNvcnQoKHQsIG4pID0+IHQubWF4VGlsZXMgIT09IG4ubWF4VGlsZXMgPyB0Lm1heFRpbGVzIC0gbi5tYXhUaWxlcyA6IHQubWluV2lkdGggIT09IDAgfHwgbi5taW5XaWR0aCAhPT0gMCA/IHQubWluV2lkdGggLSBuLm1pbldpZHRoIDogdC5taW5IZWlnaHQgIT09IDAgfHwgbi5taW5IZWlnaHQgIT09IDAgPyB0Lm1pbkhlaWdodCAtIG4ubWluSGVpZ2h0IDogMCk7XG59XG5mdW5jdGlvbiBZbygpIHtcbiAgcmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3IgPCBcInVcIiAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmICEhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE7XG59XG5mdW5jdGlvbiBxbyhlLCB0KSB7XG4gIHZhciBuO1xuICByZXR1cm4gVGUoWCh7fSwgZSksIHtcbiAgICByZWNlaXZlZEF0TWVkaWFUaW1lc3RhbXA6IChuID0gdC5ydHBUaW1lc3RhbXApICE9IG51bGwgPyBuIDogMCxcbiAgICByZWNlaXZlZEF0OiB0LnRpbWVzdGFtcFxuICB9KTtcbn1cbmZ1bmN0aW9uIEtvKGUsIHQsIG4pIHtcbiAgcmV0dXJuIFsuLi5lLCAuLi50XS5yZWR1Y2VSaWdodCgociwgaSkgPT4gKHIuZmluZCgobykgPT4gby5pZCA9PT0gaS5pZCkgfHwgci51bnNoaWZ0KGkpLCByKSwgW10pLnNsaWNlKDAgLSBuKTtcbn1cbnZhciBBbiA9IFtdLCBPbiA9IHtcbiAgc2hvd0NoYXQ6ICExLFxuICB1bnJlYWRNZXNzYWdlczogMCxcbiAgc2hvd1NldHRpbmdzOiAhMVxufTtcbmZ1bmN0aW9uIEtpKGUpIHtcbiAgcmV0dXJuIHR5cGVvZiBlID09IFwib2JqZWN0XCI7XG59XG5mdW5jdGlvbiBHbyhlKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGUpICYmIGUuZmlsdGVyKEtpKS5sZW5ndGggPiAwO1xufVxuZnVuY3Rpb24ga24oZSwgdCkge1xuICByZXR1cm4gdC5hdWRpb0xldmVsIC0gZS5hdWRpb0xldmVsO1xufVxuZnVuY3Rpb24gTG4oZSwgdCkge1xuICByZXR1cm4gZS5pc1NwZWFraW5nID09PSB0LmlzU3BlYWtpbmcgPyAwIDogZS5pc1NwZWFraW5nID8gLTEgOiAxO1xufVxuZnVuY3Rpb24gX24oZSwgdCkge1xuICB2YXIgbiwgciwgaSwgbztcbiAgcmV0dXJuIGUubGFzdFNwb2tlQXQgIT09IHZvaWQgMCB8fCB0Lmxhc3RTcG9rZUF0ICE9PSB2b2lkIDAgPyAoKHIgPSAobiA9IHQubGFzdFNwb2tlQXQpID09IG51bGwgPyB2b2lkIDAgOiBuLmdldFRpbWUoKSkgIT0gbnVsbCA/IHIgOiAwKSAtICgobyA9IChpID0gZS5sYXN0U3Bva2VBdCkgPT0gbnVsbCA/IHZvaWQgMCA6IGkuZ2V0VGltZSgpKSAhPSBudWxsID8gbyA6IDApIDogMDtcbn1cbmZ1bmN0aW9uIEJlKGUsIHQpIHtcbiAgdmFyIG4sIHIsIGksIG87XG4gIHJldHVybiAoKHIgPSAobiA9IGUuam9pbmVkQXQpID09IG51bGwgPyB2b2lkIDAgOiBuLmdldFRpbWUoKSkgIT0gbnVsbCA/IHIgOiAwKSAtICgobyA9IChpID0gdC5qb2luZWRBdCkgPT0gbnVsbCA/IHZvaWQgMCA6IGkuZ2V0VGltZSgpKSAhPSBudWxsID8gbyA6IDApO1xufVxuZnVuY3Rpb24gR2koZSwgdCkge1xuICByZXR1cm4gaihlKSA/IGoodCkgPyAwIDogLTEgOiBqKHQpID8gMSA6IDA7XG59XG5mdW5jdGlvbiBRaShlLCB0KSB7XG4gIGNvbnN0IG4gPSBlLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCwgciA9IHQucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkO1xuICByZXR1cm4gbiAhPT0gciA/IG4gPyAtMSA6IDEgOiAwO1xufVxuZnVuY3Rpb24gUW8oZSkge1xuICBjb25zdCB0ID0gW10sIG4gPSBbXSwgciA9IFtdLCBpID0gW107XG4gIGUuZm9yRWFjaCgoYSkgPT4ge1xuICAgIGEucGFydGljaXBhbnQuaXNMb2NhbCAmJiBhLnNvdXJjZSA9PT0gTS5Tb3VyY2UuQ2FtZXJhID8gdC5wdXNoKGEpIDogYS5zb3VyY2UgPT09IE0uU291cmNlLlNjcmVlblNoYXJlID8gbi5wdXNoKGEpIDogYS5zb3VyY2UgPT09IE0uU291cmNlLkNhbWVyYSA/IHIucHVzaChhKSA6IGkucHVzaChhKTtcbiAgfSk7XG4gIGNvbnN0IG8gPSBKaShuKSwgcyA9IFhpKHIpO1xuICByZXR1cm4gWy4uLnQsIC4uLm8sIC4uLnMsIC4uLmldO1xufVxuZnVuY3Rpb24gSmkoZSkge1xuICBjb25zdCB0ID0gW10sIG4gPSBbXTtcbiAgcmV0dXJuIGUuZm9yRWFjaCgoaSkgPT4ge1xuICAgIGkucGFydGljaXBhbnQuaXNMb2NhbCA/IHQucHVzaChpKSA6IG4ucHVzaChpKTtcbiAgfSksIHQuc29ydCgoaSwgbykgPT4gQmUoaS5wYXJ0aWNpcGFudCwgby5wYXJ0aWNpcGFudCkpLCBuLnNvcnQoKGksIG8pID0+IEJlKGkucGFydGljaXBhbnQsIG8ucGFydGljaXBhbnQpKSwgWy4uLm4sIC4uLnRdO1xufVxuZnVuY3Rpb24gWGkoZSkge1xuICBjb25zdCB0ID0gW10sIG4gPSBbXTtcbiAgcmV0dXJuIGUuZm9yRWFjaCgocikgPT4ge1xuICAgIHIucGFydGljaXBhbnQuaXNMb2NhbCA/IHQucHVzaChyKSA6IG4ucHVzaChyKTtcbiAgfSksIG4uc29ydCgociwgaSkgPT4gci5wYXJ0aWNpcGFudC5pc1NwZWFraW5nICYmIGkucGFydGljaXBhbnQuaXNTcGVha2luZyA/IGtuKHIucGFydGljaXBhbnQsIGkucGFydGljaXBhbnQpIDogci5wYXJ0aWNpcGFudC5pc1NwZWFraW5nICE9PSBpLnBhcnRpY2lwYW50LmlzU3BlYWtpbmcgPyBMbihyLnBhcnRpY2lwYW50LCBpLnBhcnRpY2lwYW50KSA6IHIucGFydGljaXBhbnQubGFzdFNwb2tlQXQgIT09IGkucGFydGljaXBhbnQubGFzdFNwb2tlQXQgPyBfbihyLnBhcnRpY2lwYW50LCBpLnBhcnRpY2lwYW50KSA6IGoocikgIT09IGooaSkgPyBHaShyLCBpKSA6IHIucGFydGljaXBhbnQuaXNDYW1lcmFFbmFibGVkICE9PSBpLnBhcnRpY2lwYW50LmlzQ2FtZXJhRW5hYmxlZCA/IFFpKHIsIGkpIDogQmUoci5wYXJ0aWNpcGFudCwgaS5wYXJ0aWNpcGFudCkpLCBbLi4udCwgLi4ubl07XG59XG5mdW5jdGlvbiBKbyhlKSB7XG4gIGNvbnN0IHQgPSBbLi4uZV07XG4gIHQuc29ydCgociwgaSkgPT4ge1xuICAgIGlmIChyLmlzU3BlYWtpbmcgJiYgaS5pc1NwZWFraW5nKVxuICAgICAgcmV0dXJuIGtuKHIsIGkpO1xuICAgIGlmIChyLmlzU3BlYWtpbmcgIT09IGkuaXNTcGVha2luZylcbiAgICAgIHJldHVybiBMbihyLCBpKTtcbiAgICBpZiAoci5sYXN0U3Bva2VBdCAhPT0gaS5sYXN0U3Bva2VBdClcbiAgICAgIHJldHVybiBfbihyLCBpKTtcbiAgICBjb25zdCBvID0gci52aWRlb1RyYWNrUHVibGljYXRpb25zLnNpemUgPiAwLCBzID0gaS52aWRlb1RyYWNrUHVibGljYXRpb25zLnNpemUgPiAwO1xuICAgIHJldHVybiBvICE9PSBzID8gbyA/IC0xIDogMSA6IEJlKHIsIGkpO1xuICB9KTtcbiAgY29uc3QgbiA9IHQuZmluZCgocikgPT4gci5pc0xvY2FsKTtcbiAgaWYgKG4pIHtcbiAgICBjb25zdCByID0gdC5pbmRleE9mKG4pO1xuICAgIHIgPj0gMCAmJiAodC5zcGxpY2UociwgMSksIHQubGVuZ3RoID4gMCA/IHQuc3BsaWNlKDAsIDAsIG4pIDogdC5wdXNoKG4pKTtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmZ1bmN0aW9uIFppKGUsIHQpIHtcbiAgcmV0dXJuIGUucmVkdWNlKFxuICAgIChuLCByLCBpKSA9PiBpICUgdCA9PT0gMCA/IFsuLi5uLCBbcl1dIDogWy4uLm4uc2xpY2UoMCwgLTEpLCBbLi4ubi5zbGljZSgtMSlbMF0sIHJdXSxcbiAgICBbXVxuICApO1xufVxuZnVuY3Rpb24gV3QoZSwgdCkge1xuICBjb25zdCBuID0gTWF0aC5tYXgoZS5sZW5ndGgsIHQubGVuZ3RoKTtcbiAgcmV0dXJuIG5ldyBBcnJheShuKS5maWxsKFtdKS5tYXAoKHIsIGkpID0+IFtlW2ldLCB0W2ldXSk7XG59XG5mdW5jdGlvbiBWZShlLCB0LCBuKSB7XG4gIHJldHVybiBlLmZpbHRlcigocikgPT4gIXQubWFwKChpKSA9PiBuKGkpKS5pbmNsdWRlcyhuKHIpKSk7XG59XG5mdW5jdGlvbiB1dChlKSB7XG4gIHJldHVybiBlLm1hcCgodCkgPT4gdHlwZW9mIHQgPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdCA9PSBcIm51bWJlclwiID8gYCR7dH1gIDogTih0KSk7XG59XG5mdW5jdGlvbiBlbyhlLCB0KSB7XG4gIHJldHVybiB7XG4gICAgZHJvcHBlZDogVmUoZSwgdCwgTiksXG4gICAgYWRkZWQ6IFZlKHQsIGUsIE4pXG4gIH07XG59XG5mdW5jdGlvbiB0byhlKSB7XG4gIHJldHVybiBlLmFkZGVkLmxlbmd0aCAhPT0gMCB8fCBlLmRyb3BwZWQubGVuZ3RoICE9PSAwO1xufVxuZnVuY3Rpb24gbHQoZSwgdCkge1xuICBjb25zdCBuID0gdC5maW5kSW5kZXgoXG4gICAgKHIpID0+IE4ocikgPT09IE4oZSlcbiAgKTtcbiAgaWYgKG4gPT09IC0xKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBFbGVtZW50IG5vdCBwYXJ0IG9mIHRoZSBhcnJheTogJHtOKFxuICAgICAgICBlXG4gICAgICApfSBub3QgaW4gJHt1dCh0KX1gXG4gICAgKTtcbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBubyhlLCB0LCBuKSB7XG4gIGNvbnN0IHIgPSBsdChlLCBuKSwgaSA9IGx0KHQsIG4pO1xuICByZXR1cm4gbi5zcGxpY2UociwgMSwgdCksIG4uc3BsaWNlKGksIDEsIGUpLCBuO1xufVxuZnVuY3Rpb24gcm8oZSwgdCkge1xuICBjb25zdCBuID0gbHQoZSwgdCk7XG4gIHJldHVybiB0LnNwbGljZShuLCAxKSwgdDtcbn1cbmZ1bmN0aW9uIGlvKGUsIHQpIHtcbiAgcmV0dXJuIFsuLi50LCBlXTtcbn1cbmZ1bmN0aW9uIHR0KGUsIHQpIHtcbiAgcmV0dXJuIFppKGUsIHQpO1xufVxuZnVuY3Rpb24gWG8oZSwgdCwgbikge1xuICBsZXQgciA9IG9vKGUsIHQpO1xuICBpZiAoci5sZW5ndGggPCB0Lmxlbmd0aCkge1xuICAgIGNvbnN0IHMgPSBWZSh0LCByLCBOKTtcbiAgICByID0gWy4uLnIsIC4uLnNdO1xuICB9XG4gIGNvbnN0IGkgPSB0dChyLCBuKSwgbyA9IHR0KHQsIG4pO1xuICBpZiAoV3QoaSwgbykuZm9yRWFjaCgoW3MsIGFdLCBjKSA9PiB7XG4gICAgaWYgKHMgJiYgYSkge1xuICAgICAgY29uc3QgdSA9IHR0KHIsIG4pW2NdLCBsID0gZW8odSwgYSk7XG4gICAgICB0byhsKSAmJiAoXy5kZWJ1ZyhcbiAgICAgICAgYERldGVjdGVkIHZpc3VhbCBjaGFuZ2VzIG9uIHBhZ2U6ICR7Y30sIGN1cnJlbnQ6ICR7dXQoXG4gICAgICAgICAgc1xuICAgICAgICApfSwgbmV4dDogJHt1dChhKX1gLFxuICAgICAgICB7IGNoYW5nZXM6IGwgfVxuICAgICAgKSwgbC5hZGRlZC5sZW5ndGggPT09IGwuZHJvcHBlZC5sZW5ndGggJiYgV3QobC5hZGRlZCwgbC5kcm9wcGVkKS5mb3JFYWNoKChbZiwgdl0pID0+IHtcbiAgICAgICAgaWYgKGYgJiYgdilcbiAgICAgICAgICByID0gbm8oZiwgdiwgcik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgRm9yIGEgc3dhcCBhY3Rpb24gd2UgbmVlZCBhIGFkZGl0aW9uIGFuZCBhIHJlbW92YWwgb25lIGlzIG1pc3Npbmc6ICR7Zn0sICR7dn1gXG4gICAgICAgICAgKTtcbiAgICAgIH0pLCBsLmFkZGVkLmxlbmd0aCA9PT0gMCAmJiBsLmRyb3BwZWQubGVuZ3RoID4gMCAmJiBsLmRyb3BwZWQuZm9yRWFjaCgoZikgPT4ge1xuICAgICAgICByID0gcm8oZiwgcik7XG4gICAgICB9KSwgbC5hZGRlZC5sZW5ndGggPiAwICYmIGwuZHJvcHBlZC5sZW5ndGggPT09IDAgJiYgbC5hZGRlZC5mb3JFYWNoKChmKSA9PiB7XG4gICAgICAgIHIgPSBpbyhmLCByKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH0pLCByLmxlbmd0aCA+IHQubGVuZ3RoKSB7XG4gICAgY29uc3QgcyA9IFZlKHIsIHQsIE4pO1xuICAgIHIgPSByLmZpbHRlcihcbiAgICAgIChhKSA9PiAhcy5tYXAoTikuaW5jbHVkZXMoTihhKSlcbiAgICApO1xuICB9XG4gIHJldHVybiByO1xufVxuZnVuY3Rpb24gb28oZSwgdCkge1xuICByZXR1cm4gZS5tYXAoKG4pID0+IHtcbiAgICBjb25zdCByID0gdC5maW5kKFxuICAgICAgKGkpID0+IChcbiAgICAgICAgLy8gSWYgdGhlIElEcyBtYXRjaCBvciAuLlxuICAgICAgICBOKG4pID09PSBOKGkpIHx8IC8vIC4uLiBpZiB0aGUgY3VycmVudCBpdGVtIGlzIGEgcGxhY2Vob2xkZXIgYW5kIHRoZSBuZXcgaXRlbSBpcyB0aGUgdHJhY2sgcmVmZXJlbmNlIGNhbiByZXBsYWNlIGl0LlxuICAgICAgICB0eXBlb2YgbiAhPSBcIm51bWJlclwiICYmIFBlKG4pICYmIGooaSkgJiYgamkobiwgaSlcbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybiByID8/IG47XG4gIH0pO1xufVxuZnVuY3Rpb24gRihlKSB7XG4gIHJldHVybiBgJHtFbn0tJHtlfWA7XG59XG5mdW5jdGlvbiBabyhlKSB7XG4gIGNvbnN0IHQgPSBCdChlKSwgbiA9IEluKGUucGFydGljaXBhbnQpLnBpcGUoXG4gICAgTygoKSA9PiBCdChlKSksXG4gICAgRCh0KVxuICApO1xuICByZXR1cm4geyBjbGFzc05hbWU6IEYoXG4gICAgZS5zb3VyY2UgPT09IE0uU291cmNlLkNhbWVyYSB8fCBlLnNvdXJjZSA9PT0gTS5Tb3VyY2UuU2NyZWVuU2hhcmUgPyBcInBhcnRpY2lwYW50LW1lZGlhLXZpZGVvXCIgOiBcInBhcnRpY2lwYW50LW1lZGlhLWF1ZGlvXCJcbiAgKSwgdHJhY2tPYnNlcnZlcjogbiB9O1xufVxuZnVuY3Rpb24gQnQoZSkge1xuICBpZiAoaihlKSlcbiAgICByZXR1cm4gZS5wdWJsaWNhdGlvbjtcbiAge1xuICAgIGNvbnN0IHsgc291cmNlOiB0LCBuYW1lOiBuLCBwYXJ0aWNpcGFudDogciB9ID0gZTtcbiAgICBpZiAodCAmJiBuKVxuICAgICAgcmV0dXJuIHIuZ2V0VHJhY2tQdWJsaWNhdGlvbnMoKS5maW5kKChpKSA9PiBpLnNvdXJjZSA9PT0gdCAmJiBpLnRyYWNrTmFtZSA9PT0gbik7XG4gICAgaWYgKG4pXG4gICAgICByZXR1cm4gci5nZXRUcmFja1B1YmxpY2F0aW9uQnlOYW1lKG4pO1xuICAgIGlmICh0KVxuICAgICAgcmV0dXJuIHIuZ2V0VHJhY2tQdWJsaWNhdGlvbih0KTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBdCBsZWFzdCBvbmUgb2Ygc291cmNlIGFuZCBuYW1lIG5lZWRzIHRvIGJlIGRlZmluZWRcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIGxlKGUsIC4uLnQpIHtcbiAgcmV0dXJuIG5ldyBrKChyKSA9PiB7XG4gICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgIHIubmV4dChlKTtcbiAgICB9O1xuICAgIHJldHVybiB0LmZvckVhY2goKHMpID0+IHtcbiAgICAgIGUub24ocywgaSk7XG4gICAgfSksICgpID0+IHtcbiAgICAgIHQuZm9yRWFjaCgocykgPT4ge1xuICAgICAgICBlLm9mZihzLCBpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pLnBpcGUoRChlKSk7XG59XG5mdW5jdGlvbiB5ZShlLCB0KSB7XG4gIHJldHVybiBuZXcgaygocikgPT4ge1xuICAgIGNvbnN0IGkgPSAoLi4ucykgPT4ge1xuICAgICAgci5uZXh0KHMpO1xuICAgIH07XG4gICAgcmV0dXJuIGUub24odCwgaSksICgpID0+IHtcbiAgICAgIGUub2ZmKHQsIGkpO1xuICAgIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gZXMoZSkge1xuICByZXR1cm4geWUoZSwgeS5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkKS5waXBlKFxuICAgIE8oKFt0XSkgPT4gdCksXG4gICAgRChlLnN0YXRlKVxuICApO1xufVxuZnVuY3Rpb24gdHMoZSkge1xuICByZXR1cm4gbGUoXG4gICAgZSxcbiAgICB5LlJvb21NZXRhZGF0YUNoYW5nZWQsXG4gICAgeS5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkXG4gICkucGlwZShcbiAgICBPKChuKSA9PiAoeyBuYW1lOiBuLm5hbWUsIG1ldGFkYXRhOiBuLm1ldGFkYXRhIH0pKVxuICApO1xufVxuZnVuY3Rpb24gbnMoZSkge1xuICByZXR1cm4geWUoZSwgeS5BY3RpdmVTcGVha2Vyc0NoYW5nZWQpLnBpcGUoXG4gICAgTygoW3RdKSA9PiB0KVxuICApO1xufVxuZnVuY3Rpb24gcnMoZSwgdCwgbiA9ICEwKSB7XG4gIGNvbnN0IHIgPSBuZXcgaygobykgPT4ge1xuICAgIFR0LmdldExvY2FsRGV2aWNlcyhlLCBuKS50aGVuKChzKSA9PiB7XG4gICAgICBvLm5leHQocyksIG8uY29tcGxldGUoKTtcbiAgICB9KS5jYXRjaCgocykgPT4ge1xuICAgICAgdCA9PSBudWxsIHx8IHQocyksIG8ubmV4dChbXSksIG8uY29tcGxldGUoKTtcbiAgICB9KTtcbiAgfSksIGkgPSBuZXcgaygobykgPT4ge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IGEgPSAoKSA9PiBWKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjID0geWllbGQgVHQuZ2V0TG9jYWxEZXZpY2VzKGUsIG4pO1xuICAgICAgICBvLm5leHQoYyk7XG4gICAgICB9IGNhdGNoIChjKSB7XG4gICAgICAgIHQgPT0gbnVsbCB8fCB0KGMpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0eXBlb2Ygd2luZG93IDwgXCJ1XCIpIHtcbiAgICAgIGlmICghd2luZG93LmlzU2VjdXJlQ29udGV4dClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiQWNjZXNzaW5nIG1lZGlhIGRldmljZXMgaXMgYXZhaWxhYmxlIG9ubHkgaW4gc2VjdXJlIGNvbnRleHRzIChIVFRQUyBhbmQgbG9jYWxob3N0KSwgaW4gc29tZSBvciBhbGwgc3VwcG9ydGluZyBicm93c2Vycy4gU2VlOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTmF2aWdhdG9yL21lZGlhRGV2aWNlc1wiXG4gICAgICAgICk7XG4gICAgICAocyA9IG5hdmlnYXRvciA9PSBudWxsID8gdm9pZCAwIDogbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykgPT0gbnVsbCB8fCBzLmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VjaGFuZ2VcIiwgYSk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB2YXIgYztcbiAgICAgIChjID0gbmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSA9PSBudWxsIHx8IGMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLCBhKTtcbiAgICB9O1xuICB9KTtcbiAgcmV0dXJuIFdlKHIsIGkpO1xufVxuZnVuY3Rpb24gc28oZSkge1xuICByZXR1cm4geWUoZSwgeS5EYXRhUmVjZWl2ZWQpO1xufVxuZnVuY3Rpb24gYW8oZSkge1xuICByZXR1cm4gbGUoZSwgeS5BdWRpb1BsYXliYWNrU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBPKChuKSA9PiAoeyBjYW5QbGF5QXVkaW86IG4uY2FuUGxheWJhY2tBdWRpbyB9KSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGNvKGUpIHtcbiAgcmV0dXJuIGxlKGUsIHkuVmlkZW9QbGF5YmFja1N0YXR1c0NoYW5nZWQpLnBpcGUoXG4gICAgTygobikgPT4gKHsgY2FuUGxheVZpZGVvOiBuLmNhblBsYXliYWNrVmlkZW8gfSkpXG4gICk7XG59XG5mdW5jdGlvbiB1byhlLCB0KSB7XG4gIHJldHVybiB5ZShlLCB5LkFjdGl2ZURldmljZUNoYW5nZWQpLnBpcGUoXG4gICAgUWUoKFtuXSkgPT4gbiA9PT0gdCksXG4gICAgTygoW24sIHJdKSA9PiAoXy5kZWJ1ZyhcImFjdGl2ZURldmljZU9ic2VydmFibGUgfCBSb29tRXZlbnQuQWN0aXZlRGV2aWNlQ2hhbmdlZFwiLCB7IGtpbmQ6IG4sIGRldmljZUlkOiByIH0pLCByKSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGlzKGUsIHQpIHtcbiAgcmV0dXJuIHllKGUsIHkuUGFydGljaXBhbnRFbmNyeXB0aW9uU3RhdHVzQ2hhbmdlZCkucGlwZShcbiAgICBRZShcbiAgICAgIChbLCBuXSkgPT4gKHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuaWRlbnRpdHkpID09PSAobiA9PSBudWxsID8gdm9pZCAwIDogbi5pZGVudGl0eSkgfHwgIW4gJiYgKHQgPT0gbnVsbCA/IHZvaWQgMCA6IHQuaWRlbnRpdHkpID09PSBlLmxvY2FsUGFydGljaXBhbnQuaWRlbnRpdHlcbiAgICApLFxuICAgIE8oKFtuXSkgPT4gbiksXG4gICAgRChcbiAgICAgIHQgIT0gbnVsbCAmJiB0LmlzTG9jYWwgPyB0LmlzRTJFRUVuYWJsZWQgOiAhISh0ICE9IG51bGwgJiYgdC5pc0VuY3J5cHRlZClcbiAgICApXG4gICk7XG59XG5mdW5jdGlvbiBvcyhlKSB7XG4gIHJldHVybiB5ZShlLCB5LlJlY29yZGluZ1N0YXR1c0NoYW5nZWQpLnBpcGUoXG4gICAgTygoW3RdKSA9PiB0KSxcbiAgICBEKGUuaXNSZWNvcmRpbmcpXG4gICk7XG59XG5mdW5jdGlvbiB3ZShlLCAuLi50KSB7XG4gIHJldHVybiBuZXcgaygocikgPT4ge1xuICAgIGNvbnN0IGkgPSAoKSA9PiB7XG4gICAgICByLm5leHQoZSk7XG4gICAgfTtcbiAgICByZXR1cm4gdC5mb3JFYWNoKChzKSA9PiB7XG4gICAgICBlLm9uKHMsIGkpO1xuICAgIH0pLCAoKSA9PiB7XG4gICAgICB0LmZvckVhY2goKHMpID0+IHtcbiAgICAgICAgZS5vZmYocywgaSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KS5waXBlKEQoZSkpO1xufVxuZnVuY3Rpb24gSW4oZSkge1xuICByZXR1cm4gd2UoXG4gICAgZSxcbiAgICB3LlRyYWNrTXV0ZWQsXG4gICAgdy5UcmFja1VubXV0ZWQsXG4gICAgdy5QYXJ0aWNpcGFudFBlcm1pc3Npb25zQ2hhbmdlZCxcbiAgICAvLyBQYXJ0aWNpcGFudEV2ZW50LklzU3BlYWtpbmdDaGFuZ2VkLFxuICAgIHcuVHJhY2tQdWJsaXNoZWQsXG4gICAgdy5UcmFja1VucHVibGlzaGVkLFxuICAgIHcuTG9jYWxUcmFja1B1Ymxpc2hlZCxcbiAgICB3LkxvY2FsVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICB3Lk1lZGlhRGV2aWNlc0Vycm9yLFxuICAgIHcuVHJhY2tTdWJzY3JpcHRpb25TdGF0dXNDaGFuZ2VkXG4gICAgLy8gUGFydGljaXBhbnRFdmVudC5Db25uZWN0aW9uUXVhbGl0eUNoYW5nZWQsXG4gICkucGlwZShcbiAgICBPKChuKSA9PiB7XG4gICAgICBjb25zdCB7IGlzTWljcm9waG9uZUVuYWJsZWQ6IHIsIGlzQ2FtZXJhRW5hYmxlZDogaSwgaXNTY3JlZW5TaGFyZUVuYWJsZWQ6IG8gfSA9IG4sIHMgPSBuLmdldFRyYWNrUHVibGljYXRpb24oTS5Tb3VyY2UuTWljcm9waG9uZSksIGEgPSBuLmdldFRyYWNrUHVibGljYXRpb24oTS5Tb3VyY2UuQ2FtZXJhKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzQ2FtZXJhRW5hYmxlZDogaSxcbiAgICAgICAgaXNNaWNyb3Bob25lRW5hYmxlZDogcixcbiAgICAgICAgaXNTY3JlZW5TaGFyZUVuYWJsZWQ6IG8sXG4gICAgICAgIGNhbWVyYVRyYWNrOiBhLFxuICAgICAgICBtaWNyb3Bob25lVHJhY2s6IHMsXG4gICAgICAgIHBhcnRpY2lwYW50OiBuXG4gICAgICB9O1xuICAgIH0pXG4gICk7XG59XG5mdW5jdGlvbiBsbyhlKSB7XG4gIHJldHVybiBlID8gd2UoXG4gICAgZSxcbiAgICB3LlBhcnRpY2lwYW50TWV0YWRhdGFDaGFuZ2VkLFxuICAgIHcuUGFydGljaXBhbnROYW1lQ2hhbmdlZFxuICApLnBpcGUoXG4gICAgTygoeyBuYW1lOiBuLCBpZGVudGl0eTogciwgbWV0YWRhdGE6IGkgfSkgPT4gKHtcbiAgICAgIG5hbWU6IG4sXG4gICAgICBpZGVudGl0eTogcixcbiAgICAgIG1ldGFkYXRhOiBpXG4gICAgfSkpLFxuICAgIEQoe1xuICAgICAgbmFtZTogZS5uYW1lLFxuICAgICAgaWRlbnRpdHk6IGUuaWRlbnRpdHksXG4gICAgICBtZXRhZGF0YTogZS5tZXRhZGF0YVxuICAgIH0pXG4gICkgOiB2b2lkIDA7XG59XG5mdW5jdGlvbiBmbyhlKSB7XG4gIHJldHVybiBKZShcbiAgICBlLFxuICAgIHcuQ29ubmVjdGlvblF1YWxpdHlDaGFuZ2VkXG4gICkucGlwZShcbiAgICBPKChbbl0pID0+IG4pLFxuICAgIEQoZS5jb25uZWN0aW9uUXVhbGl0eSlcbiAgKTtcbn1cbmZ1bmN0aW9uIEplKGUsIHQpIHtcbiAgcmV0dXJuIG5ldyBrKChyKSA9PiB7XG4gICAgY29uc3QgaSA9ICguLi5zKSA9PiB7XG4gICAgICByLm5leHQocyk7XG4gICAgfTtcbiAgICByZXR1cm4gZS5vbih0LCBpKSwgKCkgPT4ge1xuICAgICAgZS5vZmYodCwgaSk7XG4gICAgfTtcbiAgfSk7XG59XG5mdW5jdGlvbiBwbyhlKSB7XG4gIHZhciB0LCBuLCByLCBpO1xuICByZXR1cm4gd2UoXG4gICAgZS5wYXJ0aWNpcGFudCxcbiAgICB3LlRyYWNrTXV0ZWQsXG4gICAgdy5UcmFja1VubXV0ZWQsXG4gICAgdy5UcmFja1N1YnNjcmliZWQsXG4gICAgdy5UcmFja1Vuc3Vic2NyaWJlZCxcbiAgICB3LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gICAgdy5Mb2NhbFRyYWNrVW5wdWJsaXNoZWRcbiAgKS5waXBlKFxuICAgIE8oKG8pID0+IHtcbiAgICAgIHZhciBzLCBhO1xuICAgICAgY29uc3QgYyA9IChzID0gZS5wdWJsaWNhdGlvbikgIT0gbnVsbCA/IHMgOiBvLmdldFRyYWNrUHVibGljYXRpb24oZS5zb3VyY2UpO1xuICAgICAgcmV0dXJuIChhID0gYyA9PSBudWxsID8gdm9pZCAwIDogYy5pc011dGVkKSAhPSBudWxsID8gYSA6ICEwO1xuICAgIH0pLFxuICAgIEQoXG4gICAgICAoaSA9IChyID0gKHQgPSBlLnB1YmxpY2F0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogdC5pc011dGVkKSAhPSBudWxsID8gciA6IChuID0gZS5wYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKGUuc291cmNlKSkgPT0gbnVsbCA/IHZvaWQgMCA6IG4uaXNNdXRlZCkgIT0gbnVsbCA/IGkgOiAhMFxuICAgIClcbiAgKTtcbn1cbmZ1bmN0aW9uIHNzKGUpIHtcbiAgcmV0dXJuIEplKGUsIHcuSXNTcGVha2luZ0NoYW5nZWQpLnBpcGUoXG4gICAgTygoW3RdKSA9PiB0KVxuICApO1xufVxuZnVuY3Rpb24gYXMoZSwgdCA9IHt9KSB7XG4gIHZhciBuO1xuICBsZXQgcjtcbiAgY29uc3QgaSA9IG5ldyBrKChjKSA9PiAociA9IGMsICgpID0+IGEudW5zdWJzY3JpYmUoKSkpLnBpcGUoRChBcnJheS5mcm9tKGUucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKSkpLCBvID0gKG4gPSB0LmFkZGl0aW9uYWxSb29tRXZlbnRzKSAhPSBudWxsID8gbiA6IENuLCBzID0gQXJyYXkuZnJvbShcbiAgICAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gICAgICB5LlBhcnRpY2lwYW50Q29ubmVjdGVkLFxuICAgICAgeS5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICAgIHkuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZCxcbiAgICAgIC4uLm9cbiAgICBdKVxuICApLCBhID0gbGUoZSwgLi4ucykuc3Vic2NyaWJlKFxuICAgIChjKSA9PiByID09IG51bGwgPyB2b2lkIDAgOiByLm5leHQoQXJyYXkuZnJvbShjLnJlbW90ZVBhcnRpY2lwYW50cy52YWx1ZXMoKSkpXG4gICk7XG4gIHJldHVybiBlLnJlbW90ZVBhcnRpY2lwYW50cy5zaXplID4gMCAmJiAociA9PSBudWxsIHx8IHIubmV4dChBcnJheS5mcm9tKGUucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKSkpLCBpO1xufVxuZnVuY3Rpb24gY3MoZSwgdCwgbiA9IHt9KSB7XG4gIHZhciByO1xuICBjb25zdCBpID0gKHIgPSBuLmFkZGl0aW9uYWxFdmVudHMpICE9IG51bGwgPyByIDogUG47XG4gIHJldHVybiBsZShcbiAgICBlLFxuICAgIHkuUGFydGljaXBhbnRDb25uZWN0ZWQsXG4gICAgeS5QYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCxcbiAgICB5LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRcbiAgKS5waXBlKFxuICAgIFRuKChzKSA9PiB7XG4gICAgICBjb25zdCBhID0gcy5nZXRQYXJ0aWNpcGFudEJ5SWRlbnRpdHkodCk7XG4gICAgICByZXR1cm4gYSA/IHdlKGEsIC4uLmkpIDogbmV3IGsoKGMpID0+IGMubmV4dCh2b2lkIDApKTtcbiAgICB9KSxcbiAgICBEKGUuZ2V0UGFydGljaXBhbnRCeUlkZW50aXR5KHQpKVxuICApO1xufVxuZnVuY3Rpb24gdXMoZSkge1xuICByZXR1cm4gSmUoXG4gICAgZSxcbiAgICB3LlBhcnRpY2lwYW50UGVybWlzc2lvbnNDaGFuZ2VkXG4gICkucGlwZShcbiAgICBPKCgpID0+IGUucGVybWlzc2lvbnMpLFxuICAgIEQoZS5wZXJtaXNzaW9ucylcbiAgKTtcbn1cbmZ1bmN0aW9uIGxzKGUsIHsga2luZDogdCwgaWRlbnRpdHk6IG4gfSwgciA9IHt9KSB7XG4gIHZhciBpO1xuICBjb25zdCBvID0gKGkgPSByLmFkZGl0aW9uYWxFdmVudHMpICE9IG51bGwgPyBpIDogUG4sIHMgPSAoYykgPT4ge1xuICAgIGxldCB1ID0gITA7XG4gICAgcmV0dXJuIHQgJiYgKHUgPSB1ICYmIGMua2luZCA9PT0gdCksIG4gJiYgKHUgPSB1ICYmIGMuaWRlbnRpdHkgPT09IG4pLCB1O1xuICB9O1xuICByZXR1cm4gbGUoXG4gICAgZSxcbiAgICB5LlBhcnRpY2lwYW50Q29ubmVjdGVkLFxuICAgIHkuUGFydGljaXBhbnREaXNjb25uZWN0ZWQsXG4gICAgeS5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkXG4gICkucGlwZShcbiAgICBUbigoYykgPT4ge1xuICAgICAgY29uc3QgdSA9IEFycmF5LmZyb20oYy5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpLmZpbmQoXG4gICAgICAgIChsKSA9PiBzKGwpXG4gICAgICApO1xuICAgICAgcmV0dXJuIHUgPyB3ZSh1LCAuLi5vKSA6IG5ldyBrKChsKSA9PiBsLm5leHQodm9pZCAwKSk7XG4gICAgfSksXG4gICAgRChBcnJheS5mcm9tKGUucmVtb3RlUGFydGljaXBhbnRzLnZhbHVlcygpKS5maW5kKChjKSA9PiBzKGMpKSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGZzKGUpIHtcbiAgcmV0dXJuIHR5cGVvZiBlID4gXCJ1XCIgPyBuZXcgaygpIDogSmUoZSwgdy5BdHRyaWJ1dGVzQ2hhbmdlZCkucGlwZShcbiAgICBPKChbdF0pID0+ICh7XG4gICAgICBjaGFuZ2VkOiB0LFxuICAgICAgYXR0cmlidXRlczogZS5hdHRyaWJ1dGVzXG4gICAgfSkpLFxuICAgIEQoeyBjaGFuZ2VkOiBlLmF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXM6IGUuYXR0cmlidXRlcyB9KVxuICApO1xufVxuZnVuY3Rpb24gZHMoZSwgdCwgbiwgciwgaSkge1xuICBjb25zdCB7IGxvY2FsUGFydGljaXBhbnQ6IG8gfSA9IHQsIHMgPSAoZiwgdikgPT4ge1xuICAgIGxldCBkID0gITE7XG4gICAgc3dpdGNoIChmKSB7XG4gICAgICBjYXNlIE0uU291cmNlLkNhbWVyYTpcbiAgICAgICAgZCA9IHYuaXNDYW1lcmFFbmFibGVkO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTS5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgICAgZCA9IHYuaXNNaWNyb3Bob25lRW5hYmxlZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE0uU291cmNlLlNjcmVlblNoYXJlOlxuICAgICAgICBkID0gdi5pc1NjcmVlblNoYXJlRW5hYmxlZDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBkO1xuICB9LCBhID0gSW4obykucGlwZShcbiAgICBPKChmKSA9PiBzKGUsIGYucGFydGljaXBhbnQpKSxcbiAgICBEKHMoZSwgbykpXG4gICksIGMgPSBuZXcgWigpLCB1ID0gKGYsIHYpID0+IFYodGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgc3dpdGNoICh2ID8/ICh2ID0gbiksIGMubmV4dCghMCksIGUpIHtcbiAgICAgICAgY2FzZSBNLlNvdXJjZS5DYW1lcmE6XG4gICAgICAgICAgcmV0dXJuIHlpZWxkIG8uc2V0Q2FtZXJhRW5hYmxlZChcbiAgICAgICAgICAgIGYgPz8gIW8uaXNDYW1lcmFFbmFibGVkLFxuICAgICAgICAgICAgdixcbiAgICAgICAgICAgIHJcbiAgICAgICAgICApLCBvLmlzQ2FtZXJhRW5hYmxlZDtcbiAgICAgICAgY2FzZSBNLlNvdXJjZS5NaWNyb3Bob25lOlxuICAgICAgICAgIHJldHVybiB5aWVsZCBvLnNldE1pY3JvcGhvbmVFbmFibGVkKFxuICAgICAgICAgICAgZiA/PyAhby5pc01pY3JvcGhvbmVFbmFibGVkLFxuICAgICAgICAgICAgdixcbiAgICAgICAgICAgIHJcbiAgICAgICAgICApLCBvLmlzTWljcm9waG9uZUVuYWJsZWQ7XG4gICAgICAgIGNhc2UgTS5Tb3VyY2UuU2NyZWVuU2hhcmU6XG4gICAgICAgICAgcmV0dXJuIHlpZWxkIG8uc2V0U2NyZWVuU2hhcmVFbmFibGVkKFxuICAgICAgICAgICAgZiA/PyAhby5pc1NjcmVlblNoYXJlRW5hYmxlZCxcbiAgICAgICAgICAgIHYsXG4gICAgICAgICAgICByXG4gICAgICAgICAgKSwgby5pc1NjcmVlblNoYXJlRW5hYmxlZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVHJpZWQgdG8gdG9nZ2xlIHVuc3VwcG9ydGVkIHNvdXJjZVwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChkKSB7XG4gICAgICBpZiAoaSAmJiBkIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaSA9PSBudWxsIHx8IGkoZCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZVxuICAgICAgICB0aHJvdyBkO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjLm5leHQoITEpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lOiBGKFwiYnV0dG9uXCIpLFxuICAgIHRvZ2dsZTogdSxcbiAgICBlbmFibGVkT2JzZXJ2ZXI6IGEsXG4gICAgcGVuZGluZ09ic2VydmVyOiBjLmFzT2JzZXJ2YWJsZSgpXG4gIH07XG59XG5mdW5jdGlvbiBwcygpIHtcbiAgbGV0IGUgPSAhMTtcbiAgY29uc3QgdCA9IG5ldyBaKCksIG4gPSBuZXcgWigpLCByID0gKG8pID0+IFYodGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBuLm5leHQoITApLCBlID0gbyA/PyAhZSwgdC5uZXh0KGUpLCBuLm5leHQoITEpO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBjbGFzc05hbWU6IEYoXCJidXR0b25cIiksXG4gICAgdG9nZ2xlOiByLFxuICAgIGVuYWJsZWRPYnNlcnZlcjogdC5hc09ic2VydmFibGUoKSxcbiAgICBwZW5kaW5nT2JzZXJ2ZXI6IG4uYXNPYnNlcnZhYmxlKClcbiAgfTtcbn1cbmZ1bmN0aW9uIGhzKGUsIHQsIG4pIHtcbiAgY29uc3QgciA9IG5ldyBsbih2b2lkIDApLCBpID0gdW8odCwgZSksIG8gPSAoYSwgLi4uYykgPT4gVih0aGlzLCBbYSwgLi4uY10sIGZ1bmN0aW9uKiAodSwgbCA9IHt9KSB7XG4gICAgdmFyIGYsIHYsIGQ7XG4gICAgaWYgKHQpIHtcbiAgICAgIF8uZGVidWcoYFN3aXRjaGluZyBhY3RpdmUgZGV2aWNlIG9mIGtpbmQgXCIke2V9XCIgd2l0aCBpZCAke3V9LmApLCB5aWVsZCB0LnN3aXRjaEFjdGl2ZURldmljZShlLCB1LCBsLmV4YWN0KTtcbiAgICAgIGNvbnN0IG0gPSAoZiA9IHQuZ2V0QWN0aXZlRGV2aWNlKGUpKSAhPSBudWxsID8gZiA6IHU7XG4gICAgICBtICE9PSB1ICYmIHUgIT09IFwiZGVmYXVsdFwiICYmIF8uaW5mbyhcbiAgICAgICAgYFdlIHRyaWVkIHRvIHNlbGVjdCB0aGUgZGV2aWNlIHdpdGggaWQgKCR7dX0pLCBidXQgdGhlIGJyb3dzZXIgZGVjaWRlZCB0byBzZWxlY3QgdGhlIGRldmljZSB3aXRoIGlkICgke219KSBpbnN0ZWFkLmBcbiAgICAgICk7XG4gICAgICBsZXQgcDtcbiAgICAgIGUgPT09IFwiYXVkaW9pbnB1dFwiID8gcCA9ICh2ID0gdC5sb2NhbFBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24oTS5Tb3VyY2UuTWljcm9waG9uZSkpID09IG51bGwgPyB2b2lkIDAgOiB2LnRyYWNrIDogZSA9PT0gXCJ2aWRlb2lucHV0XCIgJiYgKHAgPSAoZCA9IHQubG9jYWxQYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKE0uU291cmNlLkNhbWVyYSkpID09IG51bGwgPyB2b2lkIDAgOiBkLnRyYWNrKTtcbiAgICAgIGNvbnN0IGcgPSB1ID09PSBcImRlZmF1bHRcIiAmJiAhcCB8fCB1ID09PSBcImRlZmF1bHRcIiAmJiAocCA9PSBudWxsID8gdm9pZCAwIDogcC5tZWRpYVN0cmVhbVRyYWNrLmxhYmVsLnN0YXJ0c1dpdGgoXCJEZWZhdWx0XCIpKTtcbiAgICAgIHIubmV4dChnID8gdSA6IG0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgY2xhc3NOYW1lOiBGKFwibWVkaWEtZGV2aWNlLXNlbGVjdFwiKSxcbiAgICBhY3RpdmVEZXZpY2VPYnNlcnZhYmxlOiBpLFxuICAgIHNldEFjdGl2ZU1lZGlhRGV2aWNlOiBvXG4gIH07XG59XG5mdW5jdGlvbiB2cyhlKSB7XG4gIGNvbnN0IHQgPSAocikgPT4ge1xuICAgIGUuZGlzY29ubmVjdChyKTtcbiAgfTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiBGKFwiZGlzY29ubmVjdC1idXR0b25cIiksIGRpc2Nvbm5lY3Q6IHQgfTtcbn1cbmZ1bmN0aW9uIG1zKGUpIHtcbiAgY29uc3QgdCA9IEYoXCJjb25uZWN0aW9uLXF1YWxpdHlcIiksIG4gPSBmbyhlKTtcbiAgcmV0dXJuIHsgY2xhc3NOYW1lOiB0LCBjb25uZWN0aW9uUXVhbGl0eU9ic2VydmVyOiBuIH07XG59XG5mdW5jdGlvbiBncyhlKSB7XG4gIGxldCB0ID0gXCJ0cmFjay1tdXRlZC1pbmRpY2F0b3ItY2FtZXJhXCI7XG4gIHN3aXRjaCAoZS5zb3VyY2UpIHtcbiAgICBjYXNlIE0uU291cmNlLkNhbWVyYTpcbiAgICAgIHQgPSBcInRyYWNrLW11dGVkLWluZGljYXRvci1jYW1lcmFcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgTS5Tb3VyY2UuTWljcm9waG9uZTpcbiAgICAgIHQgPSBcInRyYWNrLW11dGVkLWluZGljYXRvci1taWNyb3Bob25lXCI7XG4gICAgICBicmVhaztcbiAgfVxuICBjb25zdCBuID0gRih0KSwgciA9IHBvKGUpO1xuICByZXR1cm4geyBjbGFzc05hbWU6IG4sIG1lZGlhTXV0ZWRPYnNlcnZlcjogciB9O1xufVxuZnVuY3Rpb24gYnMoZSkge1xuICByZXR1cm4geyBjbGFzc05hbWU6IFwibGstcGFydGljaXBhbnQtbmFtZVwiLCBpbmZvT2JzZXJ2ZXI6IGxvKGUpIH07XG59XG5mdW5jdGlvbiB5cygpIHtcbiAgcmV0dXJuIHtcbiAgICBjbGFzc05hbWU6IEYoXCJwYXJ0aWNpcGFudC10aWxlXCIpXG4gIH07XG59XG52YXIgaG8gPSB7XG4gIENIQVQ6IFwibGsuY2hhdFwiLFxuICBUUkFOU0NSSVBUSU9OOiBcImxrLnRyYW5zY3JpcHRpb25cIlxufSwgdm8gPSB7XG4gIENIQVQ6IFwibGstY2hhdC10b3BpY1wiXG59O1xuZnVuY3Rpb24gUm4oZSwgdCkge1xuICByZXR1cm4gVih0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKiAobiwgciwgaSA9IHt9KSB7XG4gICAgY29uc3QgeyByZWxpYWJsZTogbywgZGVzdGluYXRpb25JZGVudGl0aWVzOiBzLCB0b3BpYzogYSB9ID0gaTtcbiAgICB5aWVsZCBuLnB1Ymxpc2hEYXRhKHIsIHtcbiAgICAgIGRlc3RpbmF0aW9uSWRlbnRpdGllczogcyxcbiAgICAgIHRvcGljOiBhLFxuICAgICAgcmVsaWFibGU6IG9cbiAgICB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBtbyhlLCB0LCBuKSB7XG4gIGNvbnN0IHIgPSBBcnJheS5pc0FycmF5KHQpID8gdCA6IFt0XSwgaSA9IHNvKGUpLnBpcGUoXG4gICAgUWUoXG4gICAgICAoWywgLCAsIGNdKSA9PiB0ID09PSB2b2lkIDAgfHwgYyAhPT0gdm9pZCAwICYmIHIuaW5jbHVkZXMoYylcbiAgICApLFxuICAgIE8oKFtjLCB1LCAsIGxdKSA9PiB7XG4gICAgICBjb25zdCBmID0ge1xuICAgICAgICBwYXlsb2FkOiBjLFxuICAgICAgICB0b3BpYzogbCxcbiAgICAgICAgZnJvbTogdVxuICAgICAgfTtcbiAgICAgIHJldHVybiBuID09IG51bGwgfHwgbihmKSwgZjtcbiAgICB9KVxuICApO1xuICBsZXQgbztcbiAgY29uc3QgcyA9IG5ldyBrKChjKSA9PiB7XG4gICAgbyA9IGM7XG4gIH0pO1xuICByZXR1cm4geyBtZXNzYWdlT2JzZXJ2YWJsZTogaSwgaXNTZW5kaW5nT2JzZXJ2YWJsZTogcywgc2VuZDogKGMsIC4uLnUpID0+IFYodGhpcywgW2MsIC4uLnVdLCBmdW5jdGlvbiogKGwsIGYgPSB7fSkge1xuICAgIG8ubmV4dCghMCk7XG4gICAgdHJ5IHtcbiAgICAgIHlpZWxkIFJuKGUubG9jYWxQYXJ0aWNpcGFudCwgbCwgWCh7IHRvcGljOiByWzBdIH0sIGYpKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgby5uZXh0KCExKTtcbiAgICB9XG4gIH0pIH07XG59XG52YXIgSWUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIGdvKGUpIHtcbiAgcmV0dXJuIGUuaWdub3JlTGVnYWN5ID09ICEwO1xufVxudmFyIGJvID0gKGUpID0+IEpTT04ucGFyc2UobmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGUpKSwgeW8gPSAoZSkgPT4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KGUpKTtcbmZ1bmN0aW9uIHdzKGUsIHQpIHtcbiAgdmFyIG4sIHIsIGksIG8sIHMsIGE7XG4gIGNvbnN0IGMgPSAoKSA9PiB7XG4gICAgdmFyIGIsIFMsIEM7XG4gICAgcmV0dXJuICgoYiA9IGUuc2VydmVySW5mbykgPT0gbnVsbCA/IHZvaWQgMCA6IGIuZWRpdGlvbikgPT09IDEgfHwgISEoKFMgPSBlLnNlcnZlckluZm8pICE9IG51bGwgJiYgUy52ZXJzaW9uKSAmJiB6bigoQyA9IGUuc2VydmVySW5mbykgPT0gbnVsbCA/IHZvaWQgMCA6IEMudmVyc2lvbiwgXCIxLjguMlwiKSA+IDA7XG4gIH0sIHUgPSBuZXcgWigpLCBsID0gKG4gPSB0ID09IG51bGwgPyB2b2lkIDAgOiB0LmNoYW5uZWxUb3BpYykgIT0gbnVsbCA/IG4gOiBoby5DSEFULCBmID0gKHIgPSB0ID09IG51bGwgPyB2b2lkIDAgOiB0LmNoYW5uZWxUb3BpYykgIT0gbnVsbCA/IHIgOiB2by5DSEFUO1xuICBsZXQgdiA9ICExO1xuICBJZS5oYXMoZSkgfHwgKHYgPSAhMCk7XG4gIGNvbnN0IGQgPSAoaSA9IEllLmdldChlKSkgIT0gbnVsbCA/IGkgOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCBtID0gKG8gPSBkLmdldChsKSkgIT0gbnVsbCA/IG8gOiBuZXcgWigpO1xuICBkLnNldChsLCBtKSwgSWUuc2V0KGUsIGQpO1xuICBjb25zdCBwID0gKHMgPSB0ID09IG51bGwgPyB2b2lkIDAgOiB0Lm1lc3NhZ2VEZWNvZGVyKSAhPSBudWxsID8gcyA6IGJvO1xuICBpZiAodikge1xuICAgIGUucmVnaXN0ZXJUZXh0U3RyZWFtSGFuZGxlcihsLCAoUywgQykgPT4gVih0aGlzLCBudWxsLCBmdW5jdGlvbiogKCkge1xuICAgICAgY29uc3QgeyBpZDogJCwgdGltZXN0YW1wOiBJIH0gPSBTLmluZm87XG4gICAgICBHZShTKS5waXBlKFxuICAgICAgICBjdCgoVCwgTCkgPT4gVCArIEwpLFxuICAgICAgICBPKChUKSA9PiAoe1xuICAgICAgICAgIGlkOiAkLFxuICAgICAgICAgIHRpbWVzdGFtcDogSSxcbiAgICAgICAgICBtZXNzYWdlOiBULFxuICAgICAgICAgIGZyb206IGUuZ2V0UGFydGljaXBhbnRCeUlkZW50aXR5KEMuaWRlbnRpdHkpXG4gICAgICAgICAgLy8gZWRpdFRpbWVzdGFtcDogdHlwZSA9PT0gJ3VwZGF0ZScgPyB0aW1lc3RhbXAgOiB1bmRlZmluZWQsXG4gICAgICAgIH0pKVxuICAgICAgKS5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiAoVCkgPT4gbS5uZXh0KFQpXG4gICAgICB9KTtcbiAgICB9KSk7XG4gICAgY29uc3QgeyBtZXNzYWdlT2JzZXJ2YWJsZTogYiB9ID0gbW8oZSwgW2ZdKTtcbiAgICBiLnBpcGUoXG4gICAgICBPKChTKSA9PiB7XG4gICAgICAgIGNvbnN0IEMgPSBwKFMucGF5bG9hZCk7XG4gICAgICAgIHJldHVybiBnbyhDKSA/IHZvaWQgMCA6IFRlKFgoe30sIEMpLCB7IGZyb206IFMuZnJvbSB9KTtcbiAgICAgIH0pLFxuICAgICAgUWUoKFMpID0+ICEhUyksXG4gICAgICBOdCh1KVxuICAgICkuc3Vic2NyaWJlKG0pO1xuICB9XG4gIGNvbnN0IGcgPSBtLnBpcGUoXG4gICAgY3QoKGIsIFMpID0+IHtcbiAgICAgIGlmIChcImlkXCIgaW4gUyAmJiBiLmZpbmQoKEMpID0+IHtcbiAgICAgICAgdmFyICQsIEk7XG4gICAgICAgIHJldHVybiAoKCQgPSBDLmZyb20pID09IG51bGwgPyB2b2lkIDAgOiAkLmlkZW50aXR5KSA9PT0gKChJID0gUy5mcm9tKSA9PSBudWxsID8gdm9pZCAwIDogSS5pZGVudGl0eSkgJiYgQy5pZCA9PT0gUy5pZDtcbiAgICAgIH0pKSB7XG4gICAgICAgIGNvbnN0IEMgPSBiLmZpbmRJbmRleCgoJCkgPT4gJC5pZCA9PT0gUy5pZCk7XG4gICAgICAgIGlmIChDID4gLTEpIHtcbiAgICAgICAgICBjb25zdCAkID0gYltDXTtcbiAgICAgICAgICBiW0NdID0gVGUoWCh7fSwgUyksIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcDogJC50aW1lc3RhbXAsXG4gICAgICAgICAgICBlZGl0VGltZXN0YW1wOiBTLnRpbWVzdGFtcFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4uYl07XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLmIsIFNdO1xuICAgIH0sIFtdKSxcbiAgICBOdCh1KVxuICApLCBoID0gbmV3IGxuKCExKSwgeCA9IChhID0gdCA9PSBudWxsID8gdm9pZCAwIDogdC5tZXNzYWdlRW5jb2RlcikgIT0gbnVsbCA/IGEgOiB5bywgRSA9IChiLCBTKSA9PiBWKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdmFyIEM7XG4gICAgUyB8fCAoUyA9IHt9KSwgKEMgPSBTLnRvcGljKSAhPSBudWxsIHx8IChTLnRvcGljID0gbCksIGgubmV4dCghMCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IEkgPSB7XG4gICAgICAgIGlkOiAoeWllbGQgZS5sb2NhbFBhcnRpY2lwYW50LnNlbmRUZXh0KGIsIFMpKS5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBtZXNzYWdlOiBiLFxuICAgICAgICBmcm9tOiBlLmxvY2FsUGFydGljaXBhbnQsXG4gICAgICAgIGF0dGFjaGVkRmlsZXM6IFMuYXR0YWNobWVudHNcbiAgICAgIH07XG4gICAgICBtLm5leHQoSSk7XG4gICAgICBjb25zdCB6ID0geChUZShYKHt9LCBJKSwge1xuICAgICAgICBpZ25vcmVMZWdhY3k6IGMoKVxuICAgICAgfSkpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgeWllbGQgUm4oZS5sb2NhbFBhcnRpY2lwYW50LCB6LCB7XG4gICAgICAgICAgcmVsaWFibGU6ICEwLFxuICAgICAgICAgIHRvcGljOiBmXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoVCkge1xuICAgICAgICBfLmluZm8oXCJjb3VsZCBub3Qgc2VuZCBtZXNzYWdlIGluIGxlZ2FjeSBjaGF0IGZvcm1hdFwiLCBUKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBJO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBoLm5leHQoITEpO1xuICAgIH1cbiAgfSk7XG4gIGZ1bmN0aW9uIFAoKSB7XG4gICAgdS5uZXh0KCksIHUuY29tcGxldGUoKSwgbS5jb21wbGV0ZSgpLCBJZS5kZWxldGUoZSksIGUudW5yZWdpc3RlclRleHRTdHJlYW1IYW5kbGVyKGwpO1xuICB9XG4gIHJldHVybiBlLm9uY2UoeS5EaXNjb25uZWN0ZWQsIFApLCB7XG4gICAgbWVzc2FnZU9ic2VydmFibGU6IGcsXG4gICAgaXNTZW5kaW5nT2JzZXJ2YWJsZTogaCxcbiAgICBzZW5kOiBFXG4gIH07XG59XG5mdW5jdGlvbiB4cygpIHtcbiAgY29uc3QgZSA9IChuKSA9PiBWKHRoaXMsIG51bGwsIGZ1bmN0aW9uKiAoKSB7XG4gICAgXy5pbmZvKFwiU3RhcnQgQXVkaW8gZm9yIHJvb206IFwiLCBuKSwgeWllbGQgbi5zdGFydEF1ZGlvKCk7XG4gIH0pO1xuICByZXR1cm4geyBjbGFzc05hbWU6IEYoXCJzdGFydC1hdWRpby1idXR0b25cIiksIHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGU6IGFvLCBoYW5kbGVTdGFydEF1ZGlvUGxheWJhY2s6IGUgfTtcbn1cbmZ1bmN0aW9uIFNzKCkge1xuICBjb25zdCBlID0gKG4pID0+IFYodGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICBfLmluZm8oXCJTdGFydCBWaWRlbyBmb3Igcm9vbTogXCIsIG4pLCB5aWVsZCBuLnN0YXJ0VmlkZW8oKTtcbiAgfSk7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogRihcInN0YXJ0LWF1ZGlvLWJ1dHRvblwiKSwgcm9vbVZpZGVvUGxheWJhY2tBbGxvd2VkT2JzZXJ2YWJsZTogY28sIGhhbmRsZVN0YXJ0VmlkZW9QbGF5YmFjazogZSB9O1xufVxuZnVuY3Rpb24gVHMoKSB7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogW0YoXCJidXR0b25cIiksIEYoXCJjaGF0LXRvZ2dsZVwiKV0uam9pbihcIiBcIikgfTtcbn1cbmZ1bmN0aW9uIEVzKCkge1xuICByZXR1cm4geyBjbGFzc05hbWU6IFtGKFwiYnV0dG9uXCIpLCBGKFwiZm9jdXMtdG9nZ2xlLWJ1dHRvblwiKV0uam9pbihcIiBcIikgfTtcbn1cbmZ1bmN0aW9uIENzKCkge1xuICByZXR1cm4geyBjbGFzc05hbWU6IFwibGstY2xlYXItcGluLWJ1dHRvbiBsay1idXR0b25cIiB9O1xufVxuZnVuY3Rpb24gUHMoKSB7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogXCJsay1yb29tLWNvbnRhaW5lclwiIH07XG59XG5mdW5jdGlvbiBWdChlLCB0LCBuID0gITApIHtcbiAgY29uc3QgaSA9IFtlLmxvY2FsUGFydGljaXBhbnQsIC4uLkFycmF5LmZyb20oZS5yZW1vdGVQYXJ0aWNpcGFudHMudmFsdWVzKCkpXSwgbyA9IFtdO1xuICByZXR1cm4gaS5mb3JFYWNoKChzKSA9PiB7XG4gICAgdC5mb3JFYWNoKChhKSA9PiB7XG4gICAgICBjb25zdCBjID0gQXJyYXkuZnJvbShcbiAgICAgICAgcy50cmFja1B1YmxpY2F0aW9ucy52YWx1ZXMoKVxuICAgICAgKS5maWx0ZXIoXG4gICAgICAgICh1KSA9PiB1LnNvdXJjZSA9PT0gYSAmJiAvLyBlaXRoZXIgcmV0dXJuIGFsbCBvciBvbmx5IHRoZSBvbmVzIHRoYXQgYXJlIHN1YnNjcmliZWRcbiAgICAgICAgKCFuIHx8IHUudHJhY2spXG4gICAgICApLm1hcCgodSkgPT4gKHtcbiAgICAgICAgcGFydGljaXBhbnQ6IHMsXG4gICAgICAgIHB1YmxpY2F0aW9uOiB1LFxuICAgICAgICBzb3VyY2U6IHUuc291cmNlXG4gICAgICB9KSk7XG4gICAgICBvLnB1c2goLi4uYyk7XG4gICAgfSk7XG4gIH0pLCB7IHRyYWNrUmVmZXJlbmNlczogbywgcGFydGljaXBhbnRzOiBpIH07XG59XG5mdW5jdGlvbiBIdChlLCB0LCBuID0gITEpIHtcbiAgY29uc3QgeyBzb3VyY2VzOiByLCBraW5kOiBpLCBuYW1lOiBvIH0gPSB0O1xuICByZXR1cm4gQXJyYXkuZnJvbShlLnRyYWNrUHVibGljYXRpb25zLnZhbHVlcygpKS5maWx0ZXIoXG4gICAgKGEpID0+ICghciB8fCByLmluY2x1ZGVzKGEuc291cmNlKSkgJiYgKCFpIHx8IGEua2luZCA9PT0gaSkgJiYgKCFvIHx8IGEudHJhY2tOYW1lID09PSBvKSAmJiAvLyBlaXRoZXIgcmV0dXJuIGFsbCBvciBvbmx5IHRoZSBvbmVzIHRoYXQgYXJlIHN1YnNjcmliZWRcbiAgICAoIW4gfHwgYS50cmFjaylcbiAgKS5tYXAoKGEpID0+ICh7XG4gICAgcGFydGljaXBhbnQ6IGUsXG4gICAgcHVibGljYXRpb246IGEsXG4gICAgc291cmNlOiBhLnNvdXJjZVxuICB9KSk7XG59XG5mdW5jdGlvbiBBcyhlLCB0LCBuKSB7XG4gIHZhciByLCBpO1xuICBjb25zdCBvID0gKHIgPSBuLmFkZGl0aW9uYWxSb29tRXZlbnRzKSAhPSBudWxsID8gciA6IENuLCBzID0gKGkgPSBuLm9ubHlTdWJzY3JpYmVkKSAhPSBudWxsID8gaSA6ICEwLCBhID0gQXJyYXkuZnJvbShcbiAgICAoLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICAgICAgeS5QYXJ0aWNpcGFudENvbm5lY3RlZCxcbiAgICAgIHkuUGFydGljaXBhbnREaXNjb25uZWN0ZWQsXG4gICAgICB5LkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWQsXG4gICAgICB5LkxvY2FsVHJhY2tQdWJsaXNoZWQsXG4gICAgICB5LkxvY2FsVHJhY2tVbnB1Ymxpc2hlZCxcbiAgICAgIHkuVHJhY2tQdWJsaXNoZWQsXG4gICAgICB5LlRyYWNrVW5wdWJsaXNoZWQsXG4gICAgICB5LlRyYWNrU3Vic2NyaXB0aW9uU3RhdHVzQ2hhbmdlZCxcbiAgICAgIC4uLm9cbiAgICBdKSkudmFsdWVzKClcbiAgKTtcbiAgcmV0dXJuIGxlKGUsIC4uLmEpLnBpcGUoXG4gICAgTygodSkgPT4ge1xuICAgICAgY29uc3QgbCA9IFZ0KHUsIHQsIHMpO1xuICAgICAgcmV0dXJuIF8uZGVidWcoYFRyYWNrUmVmZXJlbmNlW10gd2FzIHVwZGF0ZWQuIChsZW5ndGggJHtsLnRyYWNrUmVmZXJlbmNlcy5sZW5ndGh9KWAsIGwpLCBsO1xuICAgIH0pLFxuICAgIEQoVnQoZSwgdCwgcykpXG4gICk7XG59XG5mdW5jdGlvbiBPcyhlLCB0KSB7XG4gIHJldHVybiB3ZShlLCAuLi5IaSkucGlwZShcbiAgICBPKChyKSA9PiB7XG4gICAgICBjb25zdCBpID0gSHQociwgdCk7XG4gICAgICByZXR1cm4gXy5kZWJ1ZyhgVHJhY2tSZWZlcmVuY2VbXSB3YXMgdXBkYXRlZC4gKGxlbmd0aCAke2kubGVuZ3RofSlgLCBpKSwgaTtcbiAgICB9KSxcbiAgICBEKEh0KGUsIHQpKVxuICApO1xufVxuZnVuY3Rpb24gTW4oZSwgdCkge1xuICByZXR1cm4gbmV3IGsoKHIpID0+IHtcbiAgICBjb25zdCBpID0gKC4uLnMpID0+IHtcbiAgICAgIHIubmV4dChzKTtcbiAgICB9O1xuICAgIHJldHVybiBlLm9uKHQsIGkpLCAoKSA9PiB7XG4gICAgICBlLm9mZih0LCBpKTtcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIGtzKGUpIHtcbiAgcmV0dXJuIE1uKGUsIFl0LlRyYW5zY3JpcHRpb25SZWNlaXZlZCk7XG59XG5mdW5jdGlvbiBMcyhlKSB7XG4gIHJldHVybiBNbihlLCBZdC5UaW1lU3luY1VwZGF0ZSkucGlwZShcbiAgICBPKChbdF0pID0+IHQpXG4gICk7XG59XG5mdW5jdGlvbiBfcyhlLCB0ID0gMWUzKSB7XG4gIGlmIChlID09PSBudWxsKSByZXR1cm4gRHQoITEpO1xuICBjb25zdCBuID0gYXQoZSwgXCJtb3VzZW1vdmVcIiwgeyBwYXNzaXZlOiAhMCB9KS5waXBlKE8oKCkgPT4gITApKSwgciA9IG4ucGlwZShcbiAgICBoaSh7XG4gICAgICBlYWNoOiB0LFxuICAgICAgd2l0aDogKCkgPT4gV2UoRHQoITEpLCByLnBpcGUoSWkobikpKVxuICAgIH0pLFxuICAgIGtpKClcbiAgKTtcbiAgcmV0dXJuIHI7XG59XG5mdW5jdGlvbiB3byhlLCB0KSB7XG4gIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlID4gXCJ1XCIpIHtcbiAgICBfLmVycm9yKFwiTG9jYWwgc3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlLlwiKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBpZiAodCkge1xuICAgICAgY29uc3QgbiA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgT2JqZWN0LmVudHJpZXModCkuZmlsdGVyKChbLCByXSkgPT4gciAhPT0gXCJcIilcbiAgICAgICk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShlLCBKU09OLnN0cmluZ2lmeShuKSk7XG4gICAgfVxuICB9IGNhdGNoIChuKSB7XG4gICAgXy5lcnJvcihgRXJyb3Igc2V0dGluZyBpdGVtIHRvIGxvY2FsIHN0b3JhZ2U6ICR7bn1gKTtcbiAgfVxufVxuZnVuY3Rpb24geG8oZSkge1xuICBpZiAodHlwZW9mIGxvY2FsU3RvcmFnZSA+IFwidVwiKSB7XG4gICAgXy5lcnJvcihcIkxvY2FsIHN0b3JhZ2UgaXMgbm90IGF2YWlsYWJsZS5cIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGUpO1xuICAgIGlmICghdCkge1xuICAgICAgXy53YXJuKGBJdGVtIHdpdGgga2V5ICR7ZX0gZG9lcyBub3QgZXhpc3QgaW4gbG9jYWwgc3RvcmFnZS5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodCk7XG4gIH0gY2F0Y2ggKHQpIHtcbiAgICBfLmVycm9yKGBFcnJvciBnZXR0aW5nIGl0ZW0gZnJvbSBsb2NhbCBzdG9yYWdlOiAke3R9YCk7XG4gICAgcmV0dXJuO1xuICB9XG59XG5mdW5jdGlvbiBTbyhlKSB7XG4gIHJldHVybiB7XG4gICAgbG9hZDogKCkgPT4geG8oZSksXG4gICAgc2F2ZTogKHQpID0+IHdvKGUsIHQpXG4gIH07XG59XG52YXIgVG8gPSBgJHtFbn0tdXNlci1jaG9pY2VzYCwgU2UgPSB7XG4gIHZpZGVvRW5hYmxlZDogITAsXG4gIGF1ZGlvRW5hYmxlZDogITAsXG4gIHZpZGVvRGV2aWNlSWQ6IFwiZGVmYXVsdFwiLFxuICBhdWRpb0RldmljZUlkOiBcImRlZmF1bHRcIixcbiAgdXNlcm5hbWU6IFwiXCJcbn0sIHsgbG9hZDogRW8sIHNhdmU6IENvIH0gPSBTbyhUbyk7XG5mdW5jdGlvbiBJcyhlLCB0ID0gITEpIHtcbiAgdCAhPT0gITAgJiYgQ28oZSk7XG59XG5mdW5jdGlvbiBScyhlLCB0ID0gITEpIHtcbiAgdmFyIG4sIHIsIGksIG8sIHM7XG4gIGNvbnN0IGEgPSB7XG4gICAgdmlkZW9FbmFibGVkOiAobiA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUudmlkZW9FbmFibGVkKSAhPSBudWxsID8gbiA6IFNlLnZpZGVvRW5hYmxlZCxcbiAgICBhdWRpb0VuYWJsZWQ6IChyID0gZSA9PSBudWxsID8gdm9pZCAwIDogZS5hdWRpb0VuYWJsZWQpICE9IG51bGwgPyByIDogU2UuYXVkaW9FbmFibGVkLFxuICAgIHZpZGVvRGV2aWNlSWQ6IChpID0gZSA9PSBudWxsID8gdm9pZCAwIDogZS52aWRlb0RldmljZUlkKSAhPSBudWxsID8gaSA6IFNlLnZpZGVvRGV2aWNlSWQsXG4gICAgYXVkaW9EZXZpY2VJZDogKG8gPSBlID09IG51bGwgPyB2b2lkIDAgOiBlLmF1ZGlvRGV2aWNlSWQpICE9IG51bGwgPyBvIDogU2UuYXVkaW9EZXZpY2VJZCxcbiAgICB1c2VybmFtZTogKHMgPSBlID09IG51bGwgPyB2b2lkIDAgOiBlLnVzZXJuYW1lKSAhPSBudWxsID8gcyA6IFNlLnVzZXJuYW1lXG4gIH07XG4gIGlmICh0KVxuICAgIHJldHVybiBhO1xuICB7XG4gICAgY29uc3QgYyA9IEVvKCk7XG4gICAgcmV0dXJuIFgoWCh7fSwgYSksIGMgPz8ge30pO1xuICB9XG59XG52YXIgbnQgPSBudWxsLCBydCA9IG51bGwsIFBvID0gMDtcbmZ1bmN0aW9uIHp0KCkge1xuICByZXR1cm4gbnQgfHwgKG50ID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSksIG50O1xufVxuZnVuY3Rpb24gQW8oKSB7XG4gIHJldHVybiBydCB8fCAocnQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSksIHJ0O1xufVxuZnVuY3Rpb24gT28oZSwgdCkge1xuICBjb25zdCBuID0gQW8oKTtcbiAgbGV0IHIgPSBuLmdldChlKTtcbiAgcmV0dXJuIHIgfHwgKHIgPSBgcm9vbV8ke1BvKyt9YCwgbi5zZXQoZSwgcikpLCBgJHtyfToke3R9YDtcbn1cbmZ1bmN0aW9uIE1zKGUsIHQpIHtcbiAgY29uc3QgbiA9IE9vKGUsIHQpLCByID0genQoKSwgaSA9IHIuZ2V0KG4pO1xuICBpZiAoaSlcbiAgICByZXR1cm4gaTtcbiAgY29uc3QgbyA9IG5ldyBaKCksIHMgPSBbXSwgYSA9IFwibGsuc2VnbWVudF9pZFwiO1xuICBlLnJlZ2lzdGVyVGV4dFN0cmVhbUhhbmRsZXIodCwgKHUsIGwpID0+IFYodGhpcywgbnVsbCwgZnVuY3Rpb24qICgpIHtcbiAgICB2YXIgZjtcbiAgICBjb25zdCB2ID0gR2UodSkucGlwZShcbiAgICAgIGN0KChtLCBwKSA9PiBtICsgcCwgXCJcIilcbiAgICApLCBkID0gISEoKGYgPSB1LmluZm8uYXR0cmlidXRlcykgIT0gbnVsbCAmJiBmW2FdKTtcbiAgICB2LnN1YnNjcmliZSgobSkgPT4ge1xuICAgICAgY29uc3QgcCA9IHMuZmluZEluZGV4KFxuICAgICAgICAoZykgPT4ge1xuICAgICAgICAgIHZhciBoLCB4O1xuICAgICAgICAgIHJldHVybiBnLnN0cmVhbUluZm8uaWQgPT09IHUuaW5mby5pZCB8fCBkICYmICgoaCA9IGcuc3RyZWFtSW5mby5hdHRyaWJ1dGVzKSA9PSBudWxsID8gdm9pZCAwIDogaFthXSkgPT09ICgoeCA9IHUuaW5mby5hdHRyaWJ1dGVzKSA9PSBudWxsID8gdm9pZCAwIDogeFthXSk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBwICE9PSAtMSA/IChzW3BdID0gVGUoWCh7fSwgc1twXSksIHtcbiAgICAgICAgdGV4dDogbVxuICAgICAgfSksIG8ubmV4dChbLi4uc10pKSA6IChzLnB1c2goe1xuICAgICAgICB0ZXh0OiBtLFxuICAgICAgICBwYXJ0aWNpcGFudEluZm86IGwsXG4gICAgICAgIHN0cmVhbUluZm86IHUuaW5mb1xuICAgICAgfSksIG8ubmV4dChbLi4uc10pKTtcbiAgICB9KTtcbiAgfSkpO1xuICBjb25zdCBjID0gby5hc09ic2VydmFibGUoKS5waXBlKF9pKCkpO1xuICByZXR1cm4gci5zZXQobiwgYyksIGUub25jZSh5LkRpc2Nvbm5lY3RlZCwgKCkgPT4ge1xuICAgIGUudW5yZWdpc3RlclRleHRTdHJlYW1IYW5kbGVyKHQpLCBvLmNvbXBsZXRlKCksIHp0KCkuZGVsZXRlKG4pO1xuICB9KSwgYztcbn1cbmZ1bmN0aW9uIERuKGUsIHQpIHtcbiAgaWYgKHQubXNnID09PSBcInNob3dfY2hhdFwiKVxuICAgIHJldHVybiB7IC4uLmUsIHNob3dDaGF0OiAhMCwgdW5yZWFkTWVzc2FnZXM6IDAgfTtcbiAgaWYgKHQubXNnID09PSBcImhpZGVfY2hhdFwiKVxuICAgIHJldHVybiB7IC4uLmUsIHNob3dDaGF0OiAhMSB9O1xuICBpZiAodC5tc2cgPT09IFwidG9nZ2xlX2NoYXRcIikge1xuICAgIGNvbnN0IG4gPSB7IC4uLmUsIHNob3dDaGF0OiAhZS5zaG93Q2hhdCB9O1xuICAgIHJldHVybiBuLnNob3dDaGF0ID09PSAhMCAmJiAobi51bnJlYWRNZXNzYWdlcyA9IDApLCBuO1xuICB9IGVsc2UgcmV0dXJuIHQubXNnID09PSBcInVucmVhZF9tc2dcIiA/IHsgLi4uZSwgdW5yZWFkTWVzc2FnZXM6IHQuY291bnQgfSA6IHQubXNnID09PSBcInRvZ2dsZV9zZXR0aW5nc1wiID8geyAuLi5lLCBzaG93U2V0dGluZ3M6ICFlLnNob3dTZXR0aW5ncyB9IDogeyAuLi5lIH07XG59XG5mdW5jdGlvbiAkbihlLCB0KSB7XG4gIHJldHVybiB0Lm1zZyA9PT0gXCJzZXRfcGluXCIgPyBbdC50cmFja1JlZmVyZW5jZV0gOiB0Lm1zZyA9PT0gXCJjbGVhcl9waW5cIiA/IFtdIDogeyAuLi5lIH07XG59XG5jb25zdCBObiA9IFIuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuZnVuY3Rpb24gRHMoKSB7XG4gIGNvbnN0IGUgPSBSLnVzZUNvbnRleHQoTm4pO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgRXJyb3IoXCJUcmllZCB0byBhY2Nlc3MgTGF5b3V0Q29udGV4dCBjb250ZXh0IG91dHNpZGUgYSBMYXlvdXRDb250ZXh0UHJvdmlkZXIgcHJvdmlkZXIuXCIpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uICRzKGUpIHtcbiAgY29uc3QgdCA9IGtvKCk7XG4gIGlmIChlID8/IChlID0gdCksICFlKVxuICAgIHRocm93IEVycm9yKFwiVHJpZWQgdG8gYWNjZXNzIExheW91dENvbnRleHQgY29udGV4dCBvdXRzaWRlIGEgTGF5b3V0Q29udGV4dFByb3ZpZGVyIHByb3ZpZGVyLlwiKTtcbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBOcygpIHtcbiAgY29uc3QgW2UsIHRdID0gUi51c2VSZWR1Y2VyKCRuLCBBbiksIFtuLCByXSA9IFIudXNlUmVkdWNlcihEbiwgT24pO1xuICByZXR1cm4ge1xuICAgIHBpbjogeyBkaXNwYXRjaDogdCwgc3RhdGU6IGUgfSxcbiAgICB3aWRnZXQ6IHsgZGlzcGF0Y2g6IHIsIHN0YXRlOiBuIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIEZzKGUpIHtcbiAgY29uc3QgW3QsIG5dID0gUi51c2VSZWR1Y2VyKCRuLCBBbiksIFtyLCBpXSA9IFIudXNlUmVkdWNlcihEbiwgT24pO1xuICByZXR1cm4gZSA/PyB7XG4gICAgcGluOiB7IGRpc3BhdGNoOiBuLCBzdGF0ZTogdCB9LFxuICAgIHdpZGdldDogeyBkaXNwYXRjaDogaSwgc3RhdGU6IHIgfVxuICB9O1xufVxuZnVuY3Rpb24ga28oKSB7XG4gIHJldHVybiBSLnVzZUNvbnRleHQoTm4pO1xufVxuY29uc3QgRm4gPSBSLmNyZWF0ZUNvbnRleHQoXG4gIHZvaWQgMFxuKTtcbmZ1bmN0aW9uIFVzKCkge1xuICBjb25zdCBlID0gUi51c2VDb250ZXh0KEZuKTtcbiAgaWYgKCFlKVxuICAgIHRocm93IEVycm9yKFwidHJpZWQgdG8gYWNjZXNzIHRyYWNrIGNvbnRleHQgb3V0c2lkZSBvZiB0cmFjayBjb250ZXh0IHByb3ZpZGVyXCIpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIFVuKCkge1xuICByZXR1cm4gUi51c2VDb250ZXh0KEZuKTtcbn1cbmZ1bmN0aW9uIGpzKGUpIHtcbiAgY29uc3QgdCA9IFVuKCksIG4gPSBlID8/IHQ7XG4gIGlmICghbilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIFRyYWNrUmVmLCBtYWtlIHN1cmUgeW91IGFyZSBpbnNpZGUgYSBUcmFja1JlZkNvbnRleHQgb3IgcGFzcyB0aGUgVHJhY2tSZWYgZXhwbGljaXRseVwiXG4gICAgKTtcbiAgcmV0dXJuIG47XG59XG5jb25zdCBqbiA9IFIuY3JlYXRlQ29udGV4dCh2b2lkIDApO1xuZnVuY3Rpb24gV3MoKSB7XG4gIGNvbnN0IGUgPSBSLnVzZUNvbnRleHQoam4pO1xuICBpZiAoIWUpXG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3MgcGFydGljaXBhbnQgY29udGV4dCBvdXRzaWRlIG9mIHBhcnRpY2lwYW50IGNvbnRleHQgcHJvdmlkZXJcIik7XG4gIHJldHVybiBlO1xufVxuZnVuY3Rpb24gTG8oKSB7XG4gIHJldHVybiBSLnVzZUNvbnRleHQoam4pO1xufVxuZnVuY3Rpb24gQnMoZSkge1xuICBjb25zdCB0ID0gTG8oKSwgbiA9IFVuKCksIHIgPSBlID8/IHQgPz8gKG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4ucGFydGljaXBhbnQpO1xuICBpZiAoIXIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJObyBwYXJ0aWNpcGFudCBwcm92aWRlZCwgbWFrZSBzdXJlIHlvdSBhcmUgaW5zaWRlIGEgcGFydGljaXBhbnQgY29udGV4dCBvciBwYXNzIHRoZSBwYXJ0aWNpcGFudCBleHBsaWNpdGx5XCJcbiAgICApO1xuICByZXR1cm4gcjtcbn1cbmNvbnN0IFduID0gUi5jcmVhdGVDb250ZXh0KHZvaWQgMCk7XG5mdW5jdGlvbiBWcygpIHtcbiAgY29uc3QgZSA9IFIudXNlQ29udGV4dChXbik7XG4gIGlmICghZSlcbiAgICB0aHJvdyBFcnJvcihcInRyaWVkIHRvIGFjY2VzcyByb29tIGNvbnRleHQgb3V0c2lkZSBvZiBsaXZla2l0IHJvb20gY29tcG9uZW50XCIpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIF9vKCkge1xuICByZXR1cm4gUi51c2VDb250ZXh0KFduKTtcbn1cbmZ1bmN0aW9uIEhzKGUpIHtcbiAgY29uc3QgdCA9IF9vKCksIG4gPSBlID8/IHQ7XG4gIGlmICghbilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIHJvb20gcHJvdmlkZWQsIG1ha2Ugc3VyZSB5b3UgYXJlIGluc2lkZSBhIFJvb20gY29udGV4dCBvciBwYXNzIHRoZSByb29tIGV4cGxpY2l0bHlcIlxuICAgICk7XG4gIHJldHVybiBuO1xufVxuY29uc3QgSW8gPSBSLmNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbmZ1bmN0aW9uIHpzKGUpIHtcbiAgY29uc3QgdCA9IFIudXNlQ29udGV4dChJbyk7XG4gIGlmIChlID09PSAhMCkge1xuICAgIGlmICh0KVxuICAgICAgcmV0dXJuIHQ7XG4gICAgdGhyb3cgRXJyb3IoXCJ0cmllZCB0byBhY2Nlc3MgZmVhdHVyZSBjb250ZXh0LCBidXQgbm9uZSBpcyBwcmVzZW50XCIpO1xuICB9XG4gIHJldHVybiB0O1xufVxuZXhwb3J0IHtcbiAgSXMgYXMgJCxcbiAgWG8gYXMgQSxcbiAgTG8gYXMgQixcbiAgbG8gYXMgQyxcbiAgeXMgYXMgRCxcbiAgYXMgYXMgRSxcbiAgJHMgYXMgRixcbiAgem8gYXMgRyxcbiAgY3MgYXMgSCxcbiAgbHMgYXMgSSxcbiAgdHMgYXMgSixcbiAgbnMgYXMgSyxcbiAgSW8gYXMgTCxcbiAgSm8gYXMgTSxcbiAgeHMgYXMgTixcbiAgU3MgYXMgTyxcbiAgVHMgYXMgUCxcbiAgZ3MgYXMgUSxcbiAgV24gYXMgUixcbiAgZHMgYXMgUyxcbiAgcHMgYXMgVCxcbiAgS2kgYXMgVSxcbiAgQXMgYXMgVixcbiAgR28gYXMgVyxcbiAgQnQgYXMgWCxcbiAgWm8gYXMgWSxcbiAgd3MgYXMgWixcbiAgUnMgYXMgXyxcbiAgRHMgYXMgYSxcbiAgaXMgYXMgYTAsXG4gIGogYXMgYTEsXG4gIE9zIGFzIGEyLFxuICBMcyBhcyBhMyxcbiAga3MgYXMgYTQsXG4gIEtvIGFzIGE1LFxuICBxbyBhcyBhNixcbiAgZnMgYXMgYTcsXG4gIG9zIGFzIGE4LFxuICBNcyBhcyBhOSxcbiAgaG8gYXMgYWEsXG4gIFVuIGFzIGFiLFxuICBObiBhcyBhYyxcbiAgYnMgYXMgYWQsXG4gIE1vIGFzIGFlLFxuICBBciBhcyBhZixcbiAgam4gYXMgYWcsXG4gIEZuIGFzIGFoLFxuICB6cyBhcyBhaSxcbiAgX3MgYXMgYWosXG4gIE5vIGFzIGFrLFxuICBGcyBhcyBhbCxcbiAgQm8gYXMgYW0sXG4gIFdvIGFzIGFuLFxuICBVbyBhcyBhbyxcbiAgam8gYXMgYXAsXG4gIFlvIGFzIGFxLFxuICBOcyBhcyBhcixcbiAgRG8gYXMgYXMsXG4gIEZvIGFzIGF0LFxuICBWbyBhcyBhdSxcbiAgSG8gYXMgYXYsXG4gIFdzIGFzIGF3LFxuICBVcyBhcyBheCxcbiAgQ3MgYXMgYixcbiAgQnMgYXMgYyxcbiAgbXMgYXMgZCxcbiAgZXMgYXMgZSxcbiAgVnMgYXMgZixcbiAgbW8gYXMgZyxcbiAgdnMgYXMgaCxcbiAganMgYXMgaSxcbiAga28gYXMgaixcbiAgRXMgYXMgayxcbiAgXyBhcyBsLFxuICAkbyBhcyBtLFxuICBZaSBhcyBuLFxuICBwbyBhcyBvLFxuICBOIGFzIHAsXG4gIHNzIGFzIHEsXG4gIGFvIGFzIHIsXG4gIFBzIGFzIHMsXG4gIEluIGFzIHQsXG4gIEhzIGFzIHUsXG4gIHVzIGFzIHYsXG4gIF9vIGFzIHcsXG4gIHJzIGFzIHgsXG4gIGhzIGFzIHksXG4gIFFvIGFzIHpcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0cy1DbTFhU0JUcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/contexts-Cm1aSBTs.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/hooks-OJtwh4jO.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/hooks-OJtwh4jO.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (/* binding */ At),\n/* harmony export */   B: () => (/* binding */ Ft),\n/* harmony export */   C: () => (/* binding */ et),\n/* harmony export */   D: () => (/* binding */ Mt),\n/* harmony export */   E: () => (/* binding */ kt),\n/* harmony export */   F: () => (/* binding */ Ze),\n/* harmony export */   G: () => (/* binding */ z),\n/* harmony export */   H: () => (/* binding */ Ke),\n/* harmony export */   I: () => (/* binding */ Dt),\n/* harmony export */   J: () => (/* binding */ Lt),\n/* harmony export */   K: () => (/* binding */ Nt),\n/* harmony export */   L: () => (/* binding */ Vt),\n/* harmony export */   M: () => (/* binding */ H),\n/* harmony export */   N: () => (/* binding */ Bt),\n/* harmony export */   O: () => (/* binding */ nt),\n/* harmony export */   P: () => (/* binding */ xt),\n/* harmony export */   Q: () => (/* binding */ $t),\n/* harmony export */   R: () => (/* binding */ Yt),\n/* harmony export */   S: () => (/* binding */ Kt),\n/* harmony export */   T: () => (/* binding */ q),\n/* harmony export */   U: () => (/* binding */ pt),\n/* harmony export */   V: () => (/* binding */ tn),\n/* harmony export */   W: () => (/* binding */ bt),\n/* harmony export */   X: () => (/* binding */ en),\n/* harmony export */   Y: () => (/* binding */ nn),\n/* harmony export */   Z: () => (/* binding */ mt),\n/* harmony export */   _: () => (/* binding */ sn),\n/* harmony export */   a: () => (/* binding */ I),\n/* harmony export */   b: () => (/* binding */ Jt),\n/* harmony export */   c: () => (/* binding */ Tt),\n/* harmony export */   d: () => (/* binding */ Et),\n/* harmony export */   e: () => (/* binding */ Ct),\n/* harmony export */   f: () => (/* binding */ zt),\n/* harmony export */   g: () => (/* binding */ Ut),\n/* harmony export */   h: () => (/* binding */ Gt),\n/* harmony export */   i: () => (/* binding */ Pt),\n/* harmony export */   j: () => (/* binding */ b),\n/* harmony export */   k: () => (/* binding */ Wt),\n/* harmony export */   l: () => (/* binding */ Rt),\n/* harmony export */   m: () => (/* binding */ Xt),\n/* harmony export */   n: () => (/* binding */ wt),\n/* harmony export */   o: () => (/* binding */ Ot),\n/* harmony export */   p: () => (/* binding */ qt),\n/* harmony export */   q: () => (/* binding */ Ye),\n/* harmony export */   r: () => (/* binding */ tt),\n/* harmony export */   s: () => (/* binding */ Zt),\n/* harmony export */   t: () => (/* binding */ Qt),\n/* harmony export */   u: () => (/* binding */ yt),\n/* harmony export */   v: () => (/* binding */ _t),\n/* harmony export */   w: () => (/* binding */ Ht),\n/* harmony export */   x: () => (/* binding */ jt),\n/* harmony export */   y: () => (/* binding */ It),\n/* harmony export */   z: () => (/* binding */ ht)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contexts-Cm1aSBTs.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/contexts-Cm1aSBTs.mjs\");\n/* harmony import */ var _room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./room-889cObLb.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/room-889cObLb.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\n\n\nconst $e = (e) => {\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useRef(e);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t.current = e;\n  }), t;\n};\nfunction He(e, t) {\n  const n = Xe(), a = $e(t);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    let s = !1;\n    const c = e.current;\n    if (!c) return;\n    function o(u, i) {\n      s || a.current(u, i);\n    }\n    return n == null || n.subscribe(c, o), () => {\n      s = !0, n == null || n.unsubscribe(c, o);\n    };\n  }, [e.current, n, a]), n == null ? void 0 : n.observer;\n}\nfunction je() {\n  let e = !1, t = [];\n  const n = /* @__PURE__ */ new Map();\n  if (typeof window > \"u\")\n    return;\n  const a = new ResizeObserver((s, c) => {\n    t = t.concat(s), e || window.requestAnimationFrame(() => {\n      const o = /* @__PURE__ */ new Set();\n      for (let u = 0; u < t.length; u++) {\n        if (o.has(t[u].target)) continue;\n        o.add(t[u].target);\n        const i = n.get(t[u].target);\n        i == null || i.forEach((d) => d(t[u], c));\n      }\n      t = [], e = !1;\n    }), e = !0;\n  });\n  return {\n    observer: a,\n    subscribe(s, c) {\n      a.observe(s);\n      const o = n.get(s) ?? [];\n      o.push(c), n.set(s, o);\n    },\n    unsubscribe(s, c) {\n      const o = n.get(s) ?? [];\n      if (o.length === 1) {\n        a.unobserve(s), n.delete(s);\n        return;\n      }\n      const u = o.indexOf(c);\n      u !== -1 && o.splice(u, 1), n.set(s, o);\n    }\n  };\n}\nlet D;\nconst Xe = () => D || (D = je()), Ye = (e) => {\n  const [t, n] = react__WEBPACK_IMPORTED_MODULE_0__.useState({ width: 0, height: 0 });\n  react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect(() => {\n    if (e.current) {\n      const { width: s, height: c } = e.current.getBoundingClientRect();\n      n({ width: s, height: c });\n    }\n  }, [e.current]);\n  const a = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (s) => n(s.contentRect),\n    []\n  );\n  return He(e, a), t;\n};\nfunction b(e, t, n = !0) {\n  const [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (n && s(t), typeof window > \"u\" || !e) return;\n    const c = e.subscribe(s);\n    return () => c.unsubscribe();\n  }, [e, n]), a;\n}\nfunction ht(e) {\n  const t = (c) => typeof window < \"u\" ? window.matchMedia(c).matches : !1, [n, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t(e));\n  function s() {\n    a(t(e));\n  }\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const c = window.matchMedia(e);\n    return s(), c.addListener ? c.addListener(s) : c.addEventListener(\"change\", s), () => {\n      c.removeListener ? c.removeListener(s) : c.removeEventListener(\"change\", s);\n    };\n  }, [e]), n;\n}\nfunction Mt(e) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), n = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(async () => {\n    await t.startAudio();\n  }, [t]), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.r)(t),\n    [t]\n  ), { canPlayAudio: s } = b(a, {\n    canPlayAudio: t.canPlaybackAudio\n  });\n  return { canPlayAudio: s, startAudio: n };\n}\nfunction yt(e) {\n  const { state: t, dispatch: n } = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a)().pin;\n  return { buttonProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: s } = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.b)();\n    return (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n      className: s,\n      disabled: !(t != null && t.length),\n      onClick: () => {\n        n && n({ msg: \"clear_pin\" });\n      }\n    });\n  }, [e, n, t]) };\n}\nfunction Pt(e = {}) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e.participant), { className: n, connectionQualityObserver: a } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.d)(t),\n    [t]\n  ), s = b(a, livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionQuality.Unknown);\n  return { className: n, quality: s };\n}\nfunction I(e) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.e)(t), [t]);\n  return b(n, t.state);\n}\nfunction kt(e, t) {\n  const n = typeof e == \"function\" ? e : t, a = typeof e == \"string\" ? e : void 0, s = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), { send: c, messageObservable: o, isSendingObservable: u } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(s, a, n),\n    [s, a, n]\n  ), i = b(o, void 0), d = b(u, !1);\n  return {\n    message: i,\n    send: c,\n    isSending: d\n  };\n}\nfunction Tt(e) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), n = I(t);\n  return { buttonProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: s, disconnect: c } = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.h)(t);\n    return (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n      className: s,\n      onClick: () => c(e.stopTracks ?? !0),\n      disabled: n === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected\n    });\n  }, [t, e, n]) };\n}\nfunction Ze(e) {\n  if (e.publication instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.LocalTrackPublication) {\n    const t = e.publication.track;\n    if (t) {\n      const { facingMode: n } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.facingModeFromLocalTrack)(t);\n      return n;\n    }\n  }\n  return \"undefined\";\n}\nfunction Et({ trackRef: e, props: t }) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), a = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.j)(), { className: s } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.k)(), []), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.m)(n, a == null ? void 0 : a.pin.state), [n, a == null ? void 0 : a.pin.state]);\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(t, {\n      className: s,\n      onClick: (u) => {\n        var i, d, f, l, p;\n        (i = t.onClick) == null || i.call(t, u), c ? (f = a == null ? void 0 : (d = a.pin).dispatch) == null || f.call(d, {\n          msg: \"clear_pin\"\n        }) : (p = a == null ? void 0 : (l = a.pin).dispatch) == null || p.call(l, {\n          msg: \"set_pin\",\n          trackReference: n\n        });\n      }\n    }),\n    [t, s, n, c, a == null ? void 0 : a.pin]\n  ), inFocus: c };\n}\nfunction wt(e, t, n = {}) {\n  const a = n.gridLayouts ?? _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.G, { width: s, height: c } = Ye(e), o = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.n)(a, t, s, c);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    e.current && o && (e.current.style.setProperty(\"--lk-col-count\", o == null ? void 0 : o.columns.toString()), e.current.style.setProperty(\"--lk-row-count\", o == null ? void 0 : o.rows.toString()));\n  }, [e, o]), {\n    layout: o,\n    containerWidth: s,\n    containerHeight: c\n  };\n}\nfunction z(e, t = {}) {\n  var u, i;\n  const n = typeof e == \"string\" ? t.participant : e.participant, a = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(n), s = typeof e == \"string\" ? { participant: a, source: e } : e, [c, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    !!((u = s.publication) != null && u.isMuted || (i = a.getTrackPublication(s.source)) != null && i.isMuted)\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const d = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.o)(s).subscribe(o);\n    return () => d.unsubscribe();\n  }, [(0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(s)]), c;\n}\nfunction Ke(e) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e), n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.q)(t), [t]);\n  return b(n, t.isSpeaking);\n}\nfunction et(e = {}) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), [n, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t.localParticipant), [s, c] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    n.isMicrophoneEnabled\n  ), [o, u] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    n.isMicrophoneEnabled\n  ), [i, d] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    n.lastMicrophoneError\n  ), [f, l] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.lastCameraError), [p, S] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    n.isMicrophoneEnabled\n  ), [g, m] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    void 0\n  ), [y, h] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0), P = (M) => {\n    u(M.isCameraEnabled), c(M.isMicrophoneEnabled), S(M.isScreenShareEnabled), h(M.cameraTrack), m(M.microphoneTrack), d(M.participant.lastMicrophoneError), l(M.participant.lastCameraError), a(M.participant);\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const M = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(t.localParticipant).subscribe(P);\n    return () => M.unsubscribe();\n  }, [t]), {\n    isMicrophoneEnabled: s,\n    isScreenShareEnabled: p,\n    isCameraEnabled: o,\n    microphoneTrack: g,\n    cameraTrack: y,\n    lastMicrophoneError: i,\n    lastCameraError: f,\n    localParticipant: n\n  };\n}\nfunction At() {\n  const e = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.v)(e.localParticipant),\n    [e]\n  );\n  return b(t, e.localParticipant.permissions);\n}\nfunction Ct({\n  kind: e,\n  room: t,\n  track: n,\n  requestPermissions: a,\n  onError: s\n}) {\n  const c = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.w)(), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => t ?? c ?? new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(), [t, c]), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.x)(e, s, a),\n    [e, a, s]\n  ), i = b(u, []), [d, f] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (o == null ? void 0 : o.getActiveDevice(e)) ?? \"default\"\n  ), { className: l, activeDeviceObservable: p, setActiveMediaDevice: S } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.y)(e, o),\n    [e, o, n]\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const g = p.subscribe((m) => {\n      m && (_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.info(\"setCurrentDeviceId\", m), f(m));\n    });\n    return () => {\n      g == null || g.unsubscribe();\n    };\n  }, [p]), { devices: i, className: l, activeDeviceId: d, setActiveMediaDevice: S };\n}\nfunction It({\n  kind: e,\n  onError: t\n}) {\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.x)(e, t),\n    [e, t]\n  );\n  return b(n, []);\n}\nfunction tt(e, t, n = {}) {\n  const a = react__WEBPACK_IMPORTED_MODULE_0__.useRef([]), s = react__WEBPACK_IMPORTED_MODULE_0__.useRef(-1), c = t !== s.current, o = typeof n.customSortFunction == \"function\" ? n.customSortFunction(e) : (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.z)(e);\n  let u = [...o];\n  if (c === !1)\n    try {\n      u = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.A)(a.current, o, t);\n    } catch (i) {\n      _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.error(\"Error while running updatePages(): \", i);\n    }\n  return c ? a.current = o : a.current = u, s.current = t, u;\n}\nfunction Ot(e, t) {\n  const [n, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(1), s = Math.max(Math.ceil(t.length / e), 1);\n  n > s && a(s);\n  const c = n * e, o = c - e, u = (l) => {\n    a((p) => l === \"next\" ? p === s ? p : p + 1 : p === 1 ? p : p - 1);\n  }, i = (l) => {\n    l > s ? a(s) : l < 1 ? a(1) : a(l);\n  }, f = tt(t, e).slice(o, c);\n  return {\n    totalPageCount: s,\n    nextPage: () => u(\"next\"),\n    prevPage: () => u(\"previous\"),\n    setPage: i,\n    firstItemIndex: o,\n    lastItemIndex: c,\n    tracks: f,\n    currentPage: n\n  };\n}\nfunction Dt(e = {}) {\n  let t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.B)();\n  e.participant && (t = e.participant);\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.C)(t), [t]), { identity: a, name: s, metadata: c } = b(n, {\n    name: t == null ? void 0 : t.name,\n    identity: t == null ? void 0 : t.identity,\n    metadata: t == null ? void 0 : t.metadata\n  });\n  return { identity: a, name: s, metadata: c };\n}\nfunction Lt(e = {}) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e.participant), n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.v)(t), [t]);\n  return b(n, t.permissions);\n}\nfunction Rt({\n  trackRef: e,\n  onParticipantClick: t,\n  disableSpeakingIndicator: n,\n  htmlProps: a\n}) {\n  const s = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: p } = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.D)();\n    return (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(a, {\n      className: p,\n      onClick: (S) => {\n        var g;\n        if ((g = a.onClick) == null || g.call(a, S), typeof t == \"function\") {\n          const m = s.publication ?? s.participant.getTrackPublication(s.source);\n          t({ participant: s.participant, track: m });\n        }\n      }\n    });\n  }, [\n    a,\n    t,\n    s.publication,\n    s.source,\n    s.participant\n  ]), o = s.participant.getTrackPublication(livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => ({\n    participant: s.participant,\n    source: livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n    publication: o\n  }), [o, s.participant]), i = z(s), d = z(u), f = Ke(s.participant), l = Ze(s);\n  return {\n    elementProps: {\n      \"data-lk-audio-muted\": d,\n      \"data-lk-video-muted\": i,\n      \"data-lk-speaking\": n === !0 ? !1 : f,\n      \"data-lk-local-participant\": s.participant.isLocal,\n      \"data-lk-source\": s.source,\n      \"data-lk-facing-mode\": l,\n      ...c\n    }\n  };\n}\nfunction H(e = {}) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), [n, a] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const s = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.E)(t, {\n      additionalRoomEvents: e.updateOnlyOn\n    }).subscribe(a);\n    return () => s.unsubscribe();\n  }, [t, JSON.stringify(e.updateOnlyOn)]), n;\n}\nfunction Nt(e = {}) {\n  const t = H(e), { localParticipant: n } = et(e);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => [n, ...t],\n    [n, t]\n  );\n}\nfunction Ft(e) {\n  return e = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.F)(e), react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (e == null ? void 0 : e.pin.state) !== void 0 && e.pin.state.length >= 1 ? e.pin.state : [], [e.pin.state]);\n}\nfunction Vt(e, t = {}) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), [a] = react__WEBPACK_IMPORTED_MODULE_0__.useState(t.updateOnlyOn), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => typeof e == \"string\" ? (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.H)(n, e, {\n    additionalEvents: a\n  }) : (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.I)(n, e, {\n    additionalEvents: a\n  }), [n, JSON.stringify(e), a]), [c, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n    p: void 0\n  });\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const u = s.subscribe((i) => o({ p: i }));\n    return () => u.unsubscribe();\n  }, [s]), c.p;\n}\nfunction _t(e = {}) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e.room), n = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.J)(t), [t]), { name: a, metadata: s } = b(n, {\n    name: t.name,\n    metadata: t.metadata\n  });\n  return { name: a, metadata: s };\n}\nfunction nt() {\n  const e = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.K)(e), [e]);\n  return b(t, e.activeSpeakers);\n}\nfunction Bt(e) {\n  const [t, n] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.M)(e)\n  ), a = nt();\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    n((0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.M)(e));\n  }, [a, e]), t;\n}\nfunction zt({ room: e, props: t }) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), { className: a, roomAudioPlaybackAllowedObservable: s, handleStartAudioPlayback: c } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.N)(),\n    []\n  ), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => s(n),\n    [n, s]\n  ), { canPlayAudio: u } = b(o, {\n    canPlayAudio: n.canPlaybackAudio\n  });\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(t, {\n      className: a,\n      onClick: () => {\n        c(n);\n      },\n      style: { display: u ? \"none\" : \"block\" }\n    }),\n    [t, a, u, c, n]\n  ), canPlayAudio: u };\n}\nfunction Ut({ room: e, props: t }) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), { className: a, roomVideoPlaybackAllowedObservable: s, handleStartVideoPlayback: c } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.O)(),\n    []\n  ), o = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => s(n),\n    [n, s]\n  ), { canPlayVideo: u } = b(o, {\n    canPlayVideo: n.canPlaybackVideo\n  });\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(t, {\n      className: a,\n      onClick: () => {\n        c(n);\n      },\n      style: { display: u ? \"none\" : \"block\" }\n    }),\n    [t, a, u, c, n]\n  ), canPlayVideo: u };\n}\nfunction qt(e, t = {}) {\n  const n = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), a = react__WEBPACK_IMPORTED_MODULE_0__.useRef(null), s = t.minSwipeDistance ?? 50, c = (i) => {\n    a.current = null, n.current = i.targetTouches[0].clientX;\n  }, o = (i) => {\n    a.current = i.targetTouches[0].clientX;\n  }, u = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(() => {\n    if (!n.current || !a.current)\n      return;\n    const i = n.current - a.current, d = i > s, f = i < -s;\n    d && t.onLeftSwipe && t.onLeftSwipe(), f && t.onRightSwipe && t.onRightSwipe();\n  }, [s, t]);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const i = e.current;\n    return i && (i.addEventListener(\"touchstart\", c, { passive: !0 }), i.addEventListener(\"touchmove\", o, { passive: !0 }), i.addEventListener(\"touchend\", u, { passive: !0 })), () => {\n      i && (i.removeEventListener(\"touchstart\", c), i.removeEventListener(\"touchmove\", o), i.removeEventListener(\"touchend\", u));\n    };\n  }, [e, u]);\n}\nfunction Jt({ props: e }) {\n  const { dispatch: t, state: n } = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a)().widget, { className: a } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.P)(), []);\n  return { mergedProps: react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(e, {\n    className: a,\n    onClick: () => {\n      t && t({ msg: \"toggle_chat\" });\n    },\n    \"aria-pressed\": n != null && n.showChat ? \"true\" : \"false\",\n    \"data-lk-unread-msgs\": n ? n.unreadMessages < 10 ? n.unreadMessages.toFixed(0) : \"9+\" : \"0\"\n  }), [e, a, t, n]) };\n}\nfunction xt(e, t, n = {}) {\n  const [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    var o;\n    if (e === void 0)\n      throw Error(\"token endpoint needs to be defined\");\n    if (((o = n.userInfo) == null ? void 0 : o.identity) === void 0)\n      return;\n    (async () => {\n      _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"fetching token\");\n      const u = new URLSearchParams({ ...n.userInfo, roomName: t }), i = await fetch(`${e}?${u.toString()}`);\n      if (!i.ok) {\n        _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.error(\n          `Could not fetch token. Server responded with status ${i.status}: ${i.statusText}`\n        );\n        return;\n      }\n      const { accessToken: d } = await i.json();\n      s(d);\n    })();\n  }, [e, t, JSON.stringify(n)]), a;\n}\nfunction Wt(e) {\n  var c, o;\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.i)(e), { className: n, mediaMutedObserver: a } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.Q)(t),\n    [(0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(t)]\n  );\n  return { isMuted: b(\n    a,\n    !!((c = t.publication) != null && c.isMuted || (o = t.participant.getTrackPublication(t.source)) != null && o.isMuted)\n  ), className: n };\n}\nfunction Gt({\n  source: e,\n  onChange: t,\n  initialState: n,\n  captureOptions: a,\n  publishOptions: s,\n  onDeviceError: c,\n  ...o\n}) {\n  var P;\n  const u = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.w)(), i = (P = u == null ? void 0 : u.localParticipant) == null ? void 0 : P.getTrackPublication(e), d = react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1), { toggle: f, className: l, pendingObserver: p, enabledObserver: S } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => u ? (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.S)(e, u, a, s, c) : (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.T)(),\n    [u, e, JSON.stringify(a), s]\n  ), g = b(p, !1), m = b(S, n ?? !!(i != null && i.isEnabled));\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    t == null || t(m, d.current), d.current = !1;\n  }, [m, t]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    n !== void 0 && (_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"forcing initial toggle state\", e, n), f(n));\n  }, []);\n  const y = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_room_889cObLb_mjs__WEBPACK_IMPORTED_MODULE_3__.m)(o, { className: l }), [o, l]), h = react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n    (M) => {\n      var O;\n      d.current = !0, f().catch(() => d.current = !1), (O = o.onClick) == null || O.call(o, M);\n    },\n    [o, f]\n  );\n  return {\n    toggle: f,\n    enabled: m,\n    pending: g,\n    track: i,\n    buttonProps: {\n      ...y,\n      \"aria-pressed\": m,\n      \"data-lk-source\": e,\n      \"data-lk-enabled\": m,\n      disabled: g,\n      onClick: h\n    }\n  };\n}\nfunction Qt(e = [\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShare,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.ScreenShareAudio,\n  livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown\n], t = {}) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(t.room), [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), [c, o] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), u = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => e.map((d) => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.U)(d) ? d.source : d), [JSON.stringify(e)]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const d = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.V)(n, u, {\n      additionalRoomEvents: t.updateOnlyOn,\n      onlySubscribed: t.onlySubscribed\n    }).subscribe(({ trackReferences: f, participants: l }) => {\n      _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"setting track bundles\", f, l), s(f), o(l);\n    });\n    return () => d.unsubscribe();\n  }, [\n    n,\n    JSON.stringify(t.onlySubscribed),\n    JSON.stringify(t.updateOnlyOn),\n    JSON.stringify(e)\n  ]), react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    if ((0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.W)(e)) {\n      const d = at(e, c), f = Array.from(a);\n      return c.forEach((l) => {\n        d.has(l.identity) && (d.get(l.identity) ?? []).forEach((S) => {\n          if (a.find(\n            ({ participant: m, publication: y }) => l.identity === m.identity && y.source === S\n          ))\n            return;\n          _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\n            `Add ${S} placeholder for participant ${l.identity}.`\n          );\n          const g = {\n            participant: l,\n            source: S\n          };\n          f.push(g);\n        });\n      }), f;\n    } else\n      return a;\n  }, [a, c, e]);\n}\nfunction st(e, t) {\n  const n = new Set(e);\n  for (const a of t)\n    n.delete(a);\n  return n;\n}\nfunction at(e, t) {\n  const n = /* @__PURE__ */ new Map();\n  if ((0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.W)(e)) {\n    const a = e.filter((s) => s.withPlaceholder).map((s) => s.source);\n    t.forEach((s) => {\n      const c = s.getTrackPublications().map((u) => {\n        var i;\n        return (i = u.track) == null ? void 0 : i.source;\n      }).filter((u) => u !== void 0), o = Array.from(\n        st(new Set(a), new Set(c))\n      );\n      o.length > 0 && n.set(s.identity, o);\n    });\n  }\n  return n;\n}\nfunction rt(e) {\n  const [t, n] = react__WEBPACK_IMPORTED_MODULE_0__.useState((0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.X)(e)), { trackObserver: a } = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.Y)(e), [e.participant.sid ?? e.participant.identity, e.source]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    const s = a.subscribe((c) => {\n      n(c);\n    });\n    return () => s == null ? void 0 : s.unsubscribe();\n  }, [a]), {\n    participant: e.participant,\n    source: e.source ?? livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Unknown,\n    publication: t\n  };\n}\nfunction $t(e, t) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(t);\n  return rt({ name: e, participant: n });\n}\nfunction Ht(e) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), n = I(t), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => n === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected,\n    [n]\n  ), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.Z)(t, e),\n    [t, e, a]\n  ), c = b(s.isSendingObservable, !1), o = b(s.messageObservable, []);\n  return { send: s.send, chatMessages: o, isSending: c };\n}\nfunction jt(e = {}) {\n  const [t, n] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__._)(e.defaults, e.preventLoad ?? !1)\n  ), a = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    n((d) => ({ ...d, audioEnabled: i }));\n  }, []), s = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    n((d) => ({ ...d, videoEnabled: i }));\n  }, []), c = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    n((d) => ({ ...d, audioDeviceId: i }));\n  }, []), o = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    n((d) => ({ ...d, videoDeviceId: i }));\n  }, []), u = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((i) => {\n    n((d) => ({ ...d, username: i }));\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.$)(t, e.preventSave ?? !1);\n  }, [t, e.preventSave]), {\n    userChoices: t,\n    saveAudioInputEnabled: a,\n    saveVideoInputEnabled: s,\n    saveAudioInputDeviceId: c,\n    saveVideoInputDeviceId: o,\n    saveUsername: u\n  };\n}\nfunction Xt(e, t = {}) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(e), a = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(t.room), s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a0)(a, n), [a, n]);\n  return b(\n    s,\n    n.isLocal ? n.isE2EEEnabled : !!(n != null && n.isEncrypted)\n  );\n}\nfunction Yt(e, t = { fftSize: 32, smoothingTimeConstant: 0 }) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a1)(e) ? e.publication.track : e, [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(0);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!n || !n.mediaStream)\n      return;\n    const { cleanup: c, analyser: o } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(n, t), u = o.frequencyBinCount, i = new Uint8Array(u), f = setInterval(() => {\n      o.getByteFrequencyData(i);\n      let l = 0;\n      for (let p = 0; p < i.length; p++) {\n        const S = i[p];\n        l += S * S;\n      }\n      s(Math.sqrt(l / i.length) / 255);\n    }, 1e3 / 30);\n    return () => {\n      c(), clearInterval(f);\n    };\n  }, [n, n == null ? void 0 : n.mediaStream, JSON.stringify(t)]), a;\n}\nconst ct = (e) => {\n  const t = (n) => {\n    let c = 1 - Math.max(-100, Math.min(-10, n)) * -1 / 100;\n    return c = Math.sqrt(c), c;\n  };\n  return e.map((n) => n === -1 / 0 ? 0 : t(n));\n}, ot = {\n  bands: 5,\n  loPass: 100,\n  hiPass: 600,\n  updateInterval: 32,\n  analyserOptions: { fftSize: 2048 }\n};\nfunction Zt(e, t = {}) {\n  var o;\n  const n = e instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track ? e : (o = e == null ? void 0 : e.publication) == null ? void 0 : o.track, a = { ...ot, ...t }, [s, c] = react__WEBPACK_IMPORTED_MODULE_0__.useState(\n    new Array(a.bands).fill(0)\n  );\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!n || !(n != null && n.mediaStream))\n      return;\n    const { analyser: u, cleanup: i } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(n, a.analyserOptions), d = u.frequencyBinCount, f = new Float32Array(d), p = setInterval(() => {\n      u.getFloatFrequencyData(f);\n      let S = new Float32Array(f.length);\n      for (let h = 0; h < f.length; h++)\n        S[h] = f[h];\n      S = S.slice(t.loPass, t.hiPass);\n      const g = ct(S), m = Math.ceil(g.length / a.bands), y = [];\n      for (let h = 0; h < a.bands; h++) {\n        const P = g.slice(h * m, (h + 1) * m).reduce((M, O) => M += O, 0);\n        y.push(P / m);\n      }\n      c(y);\n    }, a.updateInterval);\n    return () => {\n      i(), clearInterval(p);\n    };\n  }, [n, n == null ? void 0 : n.mediaStream, JSON.stringify(t)]), s;\n}\nconst it = {\n  barCount: 120,\n  volMultiplier: 5,\n  updateInterval: 20\n};\nfunction Kt(e, t = {}) {\n  var f;\n  const n = e instanceof livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track ? e : (f = e == null ? void 0 : e.publication) == null ? void 0 : f.track, a = { ...it, ...t }, s = react__WEBPACK_IMPORTED_MODULE_0__.useRef(new Float32Array()), c = react__WEBPACK_IMPORTED_MODULE_0__.useRef(performance.now()), o = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0), [u, i] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), d = react__WEBPACK_IMPORTED_MODULE_0__.useCallback((l) => {\n    i(\n      Array.from(\n        dt(l, a.barCount).map((p) => Math.sqrt(p) * a.volMultiplier)\n        // wave.slice(0, opts.barCount).map((v) => sigmoid(v * opts.volMultiplier, 0.08, 0.2)),\n      )\n    );\n  }, []);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!n || !(n != null && n.mediaStream))\n      return;\n    const { analyser: l, cleanup: p } = (0,livekit_client__WEBPACK_IMPORTED_MODULE_1__.createAudioAnalyser)(n, {\n      fftSize: U(a.barCount)\n    }), S = U(a.barCount), g = new Float32Array(S), m = () => {\n      if (y = requestAnimationFrame(m), l.getFloatTimeDomainData(g), s.current.map((h, P) => h + g[P]), o.current += 1, performance.now() - c.current >= a.updateInterval) {\n        const h = g.map((P) => P / o.current);\n        d(h), c.current = performance.now(), o.current = 0;\n      }\n    };\n    let y = requestAnimationFrame(m);\n    return () => {\n      p(), cancelAnimationFrame(y);\n    };\n  }, [n, n == null ? void 0 : n.mediaStream, JSON.stringify(t), d]), {\n    bars: u\n  };\n}\nfunction U(e) {\n  return e < 32 ? 32 : ut(e);\n}\nfunction ut(e) {\n  let t = 2;\n  for (; e >>= 1; )\n    t <<= 1;\n  return t;\n}\nfunction dt(e, t) {\n  const n = Math.floor(e.length / t), a = new Float32Array(t);\n  for (let s = 0; s < t; s++) {\n    const c = n * s;\n    let o = 0;\n    for (let u = 0; u < n; u++)\n      o = o + Math.abs(e[c + u]);\n    a[s] = o / n;\n  }\n  return a;\n}\nfunction q(e, t) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), a = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.B)(), s = t ? n.getParticipantByIdentity(t) : a, c = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => s ? (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a2)(s, { sources: e }) : void 0,\n    [s == null ? void 0 : s.sid, s == null ? void 0 : s.identity, JSON.stringify(e)]\n  );\n  return b(c, []);\n}\nfunction lt(e) {\n  var n, a, s;\n  const t = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => {\n      var c;\n      return (c = e == null ? void 0 : e.publication) != null && c.track ? (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a3)(e == null ? void 0 : e.publication.track) : void 0;\n    },\n    [(n = e == null ? void 0 : e.publication) == null ? void 0 : n.track]\n  );\n  return b(t, {\n    timestamp: Date.now(),\n    rtpTimestamp: (s = (a = e == null ? void 0 : e.publication) == null ? void 0 : a.track) == null ? void 0 : s.rtpTimestamp\n  });\n}\nconst ft = {\n  bufferSize: 100\n  // maxAge: 2_000,\n};\nfunction pt(e, t) {\n  const n = { ...ft, ...t }, [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState([]), c = lt(e), o = (u) => {\n    var i;\n    (i = n.onTranscription) == null || i.call(n, u), s(\n      (d) => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a5)(\n        d,\n        // when first receiving a segment, add the current media timestamp to it\n        u.map((f) => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a6)(f, c)),\n        n.bufferSize\n      )\n    );\n  };\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!(e != null && e.publication))\n      return;\n    const u = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a4)(e.publication).subscribe((i) => {\n      o(...i);\n    });\n    return () => {\n      u.unsubscribe();\n    };\n  }, [e && (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.p)(e), o]), { segments: a };\n}\nfunction bt(e = {}) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.B)(), n = e.participant ?? t, a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    // weird typescript constraint\n    () => n ? (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(n) : (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(n),\n    [n]\n  );\n  return b(a, {\n    attributes: n == null ? void 0 : n.attributes\n  });\n}\nfunction en(e, t = {}) {\n  const n = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.c)(t.participant), [a, s] = react__WEBPACK_IMPORTED_MODULE_0__.useState(n.attributes[e]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!n)\n      return;\n    const c = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a7)(n).subscribe((o) => {\n      o.changed[e] !== void 0 && s(o.attributes[e]);\n    });\n    return () => {\n      c.unsubscribe();\n    };\n  }, [n, e]), a;\n}\nconst J = \"lk.agent.state\";\nfunction tn() {\n  const e = H(), t = e.find(\n    (l) => l.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantKind.AGENT && !(\"lk.publish_on_behalf\" in l.attributes)\n  ), n = e.find(\n    (l) => l.kind === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ParticipantKind.AGENT && l.attributes[\"lk.publish_on_behalf\"] === (t == null ? void 0 : t.identity)\n  ), a = q(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera],\n    t == null ? void 0 : t.identity\n  ), s = q(\n    [livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone, livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera],\n    n == null ? void 0 : n.identity\n  ), c = a.find((l) => l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone) ?? s.find((l) => l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Microphone), o = a.find((l) => l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera) ?? s.find((l) => l.source === livekit_client__WEBPACK_IMPORTED_MODULE_1__.Track.Source.Camera), { segments: u } = pt(c), i = I(), { attributes: d } = bt({ participant: t }), f = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => i === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected ? \"disconnected\" : i === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Connecting || !t || !(d != null && d[J]) ? \"connecting\" : d[J], [d, t, i]);\n  return {\n    agent: t,\n    state: f,\n    audioTrack: c,\n    videoTrack: o,\n    agentTranscriptions: u,\n    agentAttributes: d\n  };\n}\nfunction nn(e) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.u)(e), n = I(t), a = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a8)(t), [t, n]);\n  return b(a, t.isRecording);\n}\nfunction mt(e) {\n  const t = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.f)(), a = I(t) === livekit_client__WEBPACK_IMPORTED_MODULE_1__.ConnectionState.Disconnected, s = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.a9)(t, e), [t, e]);\n  return { textStreams: b(a ? void 0 : s, []) };\n}\nfunction sn(e) {\n  const { participantIdentities: t, trackSids: n } = e ?? {}, { textStreams: a } = mt(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.aa.TRANSCRIPTION);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(\n    () => a.filter(\n      (c) => t ? t.includes(c.participantInfo.identity) : !0\n    ).filter(\n      (c) => {\n        var o;\n        return n ? n.includes(((o = c.streamInfo.attributes) == null ? void 0 : o[\"lk.transcribed_track_id\"]) ?? \"\") : !0;\n      }\n    ),\n    [a, t, n]\n  );\n}\n\n//# sourceMappingURL=hooks-OJtwh4jO.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L2hvb2tzLU9KdHdoNGpPLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMkI7QUFDb2pCO0FBQ2xpQjtBQUN1SztBQUNwTjtBQUNBLFlBQVkseUNBQVE7QUFDcEIsU0FBUyw0Q0FBVztBQUNwQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtEQUFpQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGNBQWM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsMkNBQVUsR0FBRyxxQkFBcUI7QUFDbkQsRUFBRSxrREFBaUI7QUFDbkI7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQyxVQUFVLHFCQUFxQjtBQUMvQjtBQUNBLEdBQUc7QUFDSCxZQUFZLDhDQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwyQ0FBVTtBQUMzQixTQUFTLDRDQUFXO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EscUZBQXFGLDJDQUFVO0FBQy9GO0FBQ0E7QUFDQTtBQUNBLFNBQVMsNENBQVc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFlBQVkseURBQUMsU0FBUyw4Q0FBYTtBQUNuQztB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QUFvQixpREFBQztBQUMzQjtBQUNBO0FBQ0EsS0FBSyxpREFBQyxvQkFBb0IsaURBQUM7QUFDM0I7QUFDQSxvQ0FBb0MsaURBQUMsa0RBQWtELGlEQUFDLG9EQUFvRCxpREFBQyw4Q0FBOEMsaURBQUMsbUJBQW1CLGNBQWMsb0JBQW9CLGdCQUFnQixPQUFPLGdCQUFnQixPQUFPLDBDQUFTLGFBQWEsMkRBQUMsdUNBQXVDLDJEQUFDO0FBQzlWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5REFBQyxtQkFBbUIsMENBQVMsT0FBTywwREFBRTtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlEQUFDLGlCQUFpQiwyREFBQyxtQkFBbUIsMENBQVMsT0FBTywwREFBRTtBQUNwRSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFVBQVUseUNBQXlDLFNBQVMsSUFBSSxpQkFBaUIsS0FBSyxzREFBRTtBQUN4RixTQUFTLDBDQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF1REU7QUFDRiIsInNvdXJjZXMiOlsiRDpcXFB5dGhvblxcdHJhdmVsLWRldGFpbC1kZW1vXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAbGl2ZWtpdFxcY29tcG9uZW50cy1yZWFjdFxcZGlzdFxcaG9va3MtT0p0d2g0ak8ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHIgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1IGFzIGssIHIgYXMgaiwgYSBhcyB4LCBiIGFzIFgsIGMgYXMgQSwgZCBhcyBZLCBlIGFzIFosIGYgYXMgVCwgZyBhcyBLLCBoIGFzIGVlLCBpIGFzIFIsIGogYXMgdGUsIGsgYXMgbmUsIG0gYXMgc2UsIEcgYXMgYWUsIG4gYXMgcmUsIG8gYXMgY2UsIHAgYXMgTiwgcSBhcyBvZSwgdCBhcyBpZSwgdiBhcyBXLCB3IGFzIEcsIHggYXMgUSwgeSBhcyB1ZSwgbCBhcyB3LCB6IGFzIGRlLCBBIGFzIGxlLCBCIGFzIEYsIEMgYXMgZmUsIEQgYXMgcGUsIEUgYXMgYmUsIEYgYXMgbWUsIEggYXMgU2UsIEkgYXMgZ2UsIEogYXMgdmUsIEsgYXMgaGUsIE0gYXMgXywgTiBhcyBNZSwgTyBhcyB5ZSwgUCBhcyBQZSwgUSBhcyBrZSwgUyBhcyBUZSwgVCBhcyBFZSwgVSBhcyB3ZSwgViBhcyBBZSwgVyBhcyAkLCBYIGFzIENlLCBZIGFzIEllLCBaIGFzIE9lLCBfIGFzIERlLCAkIGFzIExlLCBhMCBhcyBSZSwgYTEgYXMgTmUsIGEyIGFzIEZlLCBhMyBhcyBWZSwgYTQgYXMgX2UsIGE1IGFzIEJlLCBhNiBhcyB6ZSwgYTcgYXMgTCwgYTggYXMgVWUsIGE5IGFzIHFlLCBhYSBhcyBKZSB9IGZyb20gXCIuL2NvbnRleHRzLUNtMWFTQlRzLm1qc1wiO1xuaW1wb3J0IHsgbSBhcyBFIH0gZnJvbSBcIi4vcm9vbS04ODljT2JMYi5tanNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25RdWFsaXR5IGFzIHhlLCBDb25uZWN0aW9uU3RhdGUgYXMgQywgTG9jYWxUcmFja1B1YmxpY2F0aW9uIGFzIFdlLCBmYWNpbmdNb2RlRnJvbUxvY2FsVHJhY2sgYXMgR2UsIFJvb20gYXMgUWUsIFRyYWNrIGFzIHYsIGNyZWF0ZUF1ZGlvQW5hbHlzZXIgYXMgViwgUGFydGljaXBhbnRLaW5kIGFzIEIgfSBmcm9tIFwibGl2ZWtpdC1jbGllbnRcIjtcbmNvbnN0ICRlID0gKGUpID0+IHtcbiAgY29uc3QgdCA9IHIudXNlUmVmKGUpO1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHQuY3VycmVudCA9IGU7XG4gIH0pLCB0O1xufTtcbmZ1bmN0aW9uIEhlKGUsIHQpIHtcbiAgY29uc3QgbiA9IFhlKCksIGEgPSAkZSh0KTtcbiAgcmV0dXJuIHIudXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBsZXQgcyA9ICExO1xuICAgIGNvbnN0IGMgPSBlLmN1cnJlbnQ7XG4gICAgaWYgKCFjKSByZXR1cm47XG4gICAgZnVuY3Rpb24gbyh1LCBpKSB7XG4gICAgICBzIHx8IGEuY3VycmVudCh1LCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gPT0gbnVsbCB8fCBuLnN1YnNjcmliZShjLCBvKSwgKCkgPT4ge1xuICAgICAgcyA9ICEwLCBuID09IG51bGwgfHwgbi51bnN1YnNjcmliZShjLCBvKTtcbiAgICB9O1xuICB9LCBbZS5jdXJyZW50LCBuLCBhXSksIG4gPT0gbnVsbCA/IHZvaWQgMCA6IG4ub2JzZXJ2ZXI7XG59XG5mdW5jdGlvbiBqZSgpIHtcbiAgbGV0IGUgPSAhMSwgdCA9IFtdO1xuICBjb25zdCBuID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPiBcInVcIilcbiAgICByZXR1cm47XG4gIGNvbnN0IGEgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKHMsIGMpID0+IHtcbiAgICB0ID0gdC5jb25jYXQocyksIGUgfHwgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBjb25zdCBvID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICAgIGZvciAobGV0IHUgPSAwOyB1IDwgdC5sZW5ndGg7IHUrKykge1xuICAgICAgICBpZiAoby5oYXModFt1XS50YXJnZXQpKSBjb250aW51ZTtcbiAgICAgICAgby5hZGQodFt1XS50YXJnZXQpO1xuICAgICAgICBjb25zdCBpID0gbi5nZXQodFt1XS50YXJnZXQpO1xuICAgICAgICBpID09IG51bGwgfHwgaS5mb3JFYWNoKChkKSA9PiBkKHRbdV0sIGMpKTtcbiAgICAgIH1cbiAgICAgIHQgPSBbXSwgZSA9ICExO1xuICAgIH0pLCBlID0gITA7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIG9ic2VydmVyOiBhLFxuICAgIHN1YnNjcmliZShzLCBjKSB7XG4gICAgICBhLm9ic2VydmUocyk7XG4gICAgICBjb25zdCBvID0gbi5nZXQocykgPz8gW107XG4gICAgICBvLnB1c2goYyksIG4uc2V0KHMsIG8pO1xuICAgIH0sXG4gICAgdW5zdWJzY3JpYmUocywgYykge1xuICAgICAgY29uc3QgbyA9IG4uZ2V0KHMpID8/IFtdO1xuICAgICAgaWYgKG8ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGEudW5vYnNlcnZlKHMpLCBuLmRlbGV0ZShzKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgdSA9IG8uaW5kZXhPZihjKTtcbiAgICAgIHUgIT09IC0xICYmIG8uc3BsaWNlKHUsIDEpLCBuLnNldChzLCBvKTtcbiAgICB9XG4gIH07XG59XG5sZXQgRDtcbmNvbnN0IFhlID0gKCkgPT4gRCB8fCAoRCA9IGplKCkpLCBZZSA9IChlKSA9PiB7XG4gIGNvbnN0IFt0LCBuXSA9IHIudXNlU3RhdGUoeyB3aWR0aDogMCwgaGVpZ2h0OiAwIH0pO1xuICByLnVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGUuY3VycmVudCkge1xuICAgICAgY29uc3QgeyB3aWR0aDogcywgaGVpZ2h0OiBjIH0gPSBlLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBuKHsgd2lkdGg6IHMsIGhlaWdodDogYyB9KTtcbiAgICB9XG4gIH0sIFtlLmN1cnJlbnRdKTtcbiAgY29uc3QgYSA9IHIudXNlQ2FsbGJhY2soXG4gICAgKHMpID0+IG4ocy5jb250ZW50UmVjdCksXG4gICAgW11cbiAgKTtcbiAgcmV0dXJuIEhlKGUsIGEpLCB0O1xufTtcbmZ1bmN0aW9uIGIoZSwgdCwgbiA9ICEwKSB7XG4gIGNvbnN0IFthLCBzXSA9IHIudXNlU3RhdGUodCk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG4gJiYgcyh0KSwgdHlwZW9mIHdpbmRvdyA+IFwidVwiIHx8ICFlKSByZXR1cm47XG4gICAgY29uc3QgYyA9IGUuc3Vic2NyaWJlKHMpO1xuICAgIHJldHVybiAoKSA9PiBjLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtlLCBuXSksIGE7XG59XG5mdW5jdGlvbiBodChlKSB7XG4gIGNvbnN0IHQgPSAoYykgPT4gdHlwZW9mIHdpbmRvdyA8IFwidVwiID8gd2luZG93Lm1hdGNoTWVkaWEoYykubWF0Y2hlcyA6ICExLCBbbiwgYV0gPSByLnVzZVN0YXRlKHQoZSkpO1xuICBmdW5jdGlvbiBzKCkge1xuICAgIGEodChlKSk7XG4gIH1cbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjID0gd2luZG93Lm1hdGNoTWVkaWEoZSk7XG4gICAgcmV0dXJuIHMoKSwgYy5hZGRMaXN0ZW5lciA/IGMuYWRkTGlzdGVuZXIocykgOiBjLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgcyksICgpID0+IHtcbiAgICAgIGMucmVtb3ZlTGlzdGVuZXIgPyBjLnJlbW92ZUxpc3RlbmVyKHMpIDogYy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHMpO1xuICAgIH07XG4gIH0sIFtlXSksIG47XG59XG5mdW5jdGlvbiBNdChlKSB7XG4gIGNvbnN0IHQgPSBrKGUpLCBuID0gci51c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdC5zdGFydEF1ZGlvKCk7XG4gIH0sIFt0XSksIGEgPSByLnVzZU1lbW8oXG4gICAgKCkgPT4gaih0KSxcbiAgICBbdF1cbiAgKSwgeyBjYW5QbGF5QXVkaW86IHMgfSA9IGIoYSwge1xuICAgIGNhblBsYXlBdWRpbzogdC5jYW5QbGF5YmFja0F1ZGlvXG4gIH0pO1xuICByZXR1cm4geyBjYW5QbGF5QXVkaW86IHMsIHN0YXJ0QXVkaW86IG4gfTtcbn1cbmZ1bmN0aW9uIHl0KGUpIHtcbiAgY29uc3QgeyBzdGF0ZTogdCwgZGlzcGF0Y2g6IG4gfSA9IHgoKS5waW47XG4gIHJldHVybiB7IGJ1dHRvblByb3BzOiByLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBzIH0gPSBYKCk7XG4gICAgcmV0dXJuIEUoZSwge1xuICAgICAgY2xhc3NOYW1lOiBzLFxuICAgICAgZGlzYWJsZWQ6ICEodCAhPSBudWxsICYmIHQubGVuZ3RoKSxcbiAgICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgICAgbiAmJiBuKHsgbXNnOiBcImNsZWFyX3BpblwiIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbZSwgbiwgdF0pIH07XG59XG5mdW5jdGlvbiBQdChlID0ge30pIHtcbiAgY29uc3QgdCA9IEEoZS5wYXJ0aWNpcGFudCksIHsgY2xhc3NOYW1lOiBuLCBjb25uZWN0aW9uUXVhbGl0eU9ic2VydmVyOiBhIH0gPSByLnVzZU1lbW8oXG4gICAgKCkgPT4gWSh0KSxcbiAgICBbdF1cbiAgKSwgcyA9IGIoYSwgeGUuVW5rbm93bik7XG4gIHJldHVybiB7IGNsYXNzTmFtZTogbiwgcXVhbGl0eTogcyB9O1xufVxuZnVuY3Rpb24gSShlKSB7XG4gIGNvbnN0IHQgPSBrKGUpLCBuID0gci51c2VNZW1vKCgpID0+IFoodCksIFt0XSk7XG4gIHJldHVybiBiKG4sIHQuc3RhdGUpO1xufVxuZnVuY3Rpb24ga3QoZSwgdCkge1xuICBjb25zdCBuID0gdHlwZW9mIGUgPT0gXCJmdW5jdGlvblwiID8gZSA6IHQsIGEgPSB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gZSA6IHZvaWQgMCwgcyA9IFQoKSwgeyBzZW5kOiBjLCBtZXNzYWdlT2JzZXJ2YWJsZTogbywgaXNTZW5kaW5nT2JzZXJ2YWJsZTogdSB9ID0gci51c2VNZW1vKFxuICAgICgpID0+IEsocywgYSwgbiksXG4gICAgW3MsIGEsIG5dXG4gICksIGkgPSBiKG8sIHZvaWQgMCksIGQgPSBiKHUsICExKTtcbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlOiBpLFxuICAgIHNlbmQ6IGMsXG4gICAgaXNTZW5kaW5nOiBkXG4gIH07XG59XG5mdW5jdGlvbiBUdChlKSB7XG4gIGNvbnN0IHQgPSBUKCksIG4gPSBJKHQpO1xuICByZXR1cm4geyBidXR0b25Qcm9wczogci51c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZTogcywgZGlzY29ubmVjdDogYyB9ID0gZWUodCk7XG4gICAgcmV0dXJuIEUoZSwge1xuICAgICAgY2xhc3NOYW1lOiBzLFxuICAgICAgb25DbGljazogKCkgPT4gYyhlLnN0b3BUcmFja3MgPz8gITApLFxuICAgICAgZGlzYWJsZWQ6IG4gPT09IEMuRGlzY29ubmVjdGVkXG4gICAgfSk7XG4gIH0sIFt0LCBlLCBuXSkgfTtcbn1cbmZ1bmN0aW9uIFplKGUpIHtcbiAgaWYgKGUucHVibGljYXRpb24gaW5zdGFuY2VvZiBXZSkge1xuICAgIGNvbnN0IHQgPSBlLnB1YmxpY2F0aW9uLnRyYWNrO1xuICAgIGlmICh0KSB7XG4gICAgICBjb25zdCB7IGZhY2luZ01vZGU6IG4gfSA9IEdlKHQpO1xuICAgICAgcmV0dXJuIG47XG4gICAgfVxuICB9XG4gIHJldHVybiBcInVuZGVmaW5lZFwiO1xufVxuZnVuY3Rpb24gRXQoeyB0cmFja1JlZjogZSwgcHJvcHM6IHQgfSkge1xuICBjb25zdCBuID0gUihlKSwgYSA9IHRlKCksIHsgY2xhc3NOYW1lOiBzIH0gPSByLnVzZU1lbW8oKCkgPT4gbmUoKSwgW10pLCBjID0gci51c2VNZW1vKCgpID0+IHNlKG4sIGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEucGluLnN0YXRlKSwgW24sIGEgPT0gbnVsbCA/IHZvaWQgMCA6IGEucGluLnN0YXRlXSk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzOiByLnVzZU1lbW8oXG4gICAgKCkgPT4gRSh0LCB7XG4gICAgICBjbGFzc05hbWU6IHMsXG4gICAgICBvbkNsaWNrOiAodSkgPT4ge1xuICAgICAgICB2YXIgaSwgZCwgZiwgbCwgcDtcbiAgICAgICAgKGkgPSB0Lm9uQ2xpY2spID09IG51bGwgfHwgaS5jYWxsKHQsIHUpLCBjID8gKGYgPSBhID09IG51bGwgPyB2b2lkIDAgOiAoZCA9IGEucGluKS5kaXNwYXRjaCkgPT0gbnVsbCB8fCBmLmNhbGwoZCwge1xuICAgICAgICAgIG1zZzogXCJjbGVhcl9waW5cIlxuICAgICAgICB9KSA6IChwID0gYSA9PSBudWxsID8gdm9pZCAwIDogKGwgPSBhLnBpbikuZGlzcGF0Y2gpID09IG51bGwgfHwgcC5jYWxsKGwsIHtcbiAgICAgICAgICBtc2c6IFwic2V0X3BpblwiLFxuICAgICAgICAgIHRyYWNrUmVmZXJlbmNlOiBuXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLFxuICAgIFt0LCBzLCBuLCBjLCBhID09IG51bGwgPyB2b2lkIDAgOiBhLnBpbl1cbiAgKSwgaW5Gb2N1czogYyB9O1xufVxuZnVuY3Rpb24gd3QoZSwgdCwgbiA9IHt9KSB7XG4gIGNvbnN0IGEgPSBuLmdyaWRMYXlvdXRzID8/IGFlLCB7IHdpZHRoOiBzLCBoZWlnaHQ6IGMgfSA9IFllKGUpLCBvID0gcmUoYSwgdCwgcywgYyk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZS5jdXJyZW50ICYmIG8gJiYgKGUuY3VycmVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tbGstY29sLWNvdW50XCIsIG8gPT0gbnVsbCA/IHZvaWQgMCA6IG8uY29sdW1ucy50b1N0cmluZygpKSwgZS5jdXJyZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1say1yb3ctY291bnRcIiwgbyA9PSBudWxsID8gdm9pZCAwIDogby5yb3dzLnRvU3RyaW5nKCkpKTtcbiAgfSwgW2UsIG9dKSwge1xuICAgIGxheW91dDogbyxcbiAgICBjb250YWluZXJXaWR0aDogcyxcbiAgICBjb250YWluZXJIZWlnaHQ6IGNcbiAgfTtcbn1cbmZ1bmN0aW9uIHooZSwgdCA9IHt9KSB7XG4gIHZhciB1LCBpO1xuICBjb25zdCBuID0gdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiA/IHQucGFydGljaXBhbnQgOiBlLnBhcnRpY2lwYW50LCBhID0gQShuKSwgcyA9IHR5cGVvZiBlID09IFwic3RyaW5nXCIgPyB7IHBhcnRpY2lwYW50OiBhLCBzb3VyY2U6IGUgfSA6IGUsIFtjLCBvXSA9IHIudXNlU3RhdGUoXG4gICAgISEoKHUgPSBzLnB1YmxpY2F0aW9uKSAhPSBudWxsICYmIHUuaXNNdXRlZCB8fCAoaSA9IGEuZ2V0VHJhY2tQdWJsaWNhdGlvbihzLnNvdXJjZSkpICE9IG51bGwgJiYgaS5pc011dGVkKVxuICApO1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGQgPSBjZShzKS5zdWJzY3JpYmUobyk7XG4gICAgcmV0dXJuICgpID0+IGQudW5zdWJzY3JpYmUoKTtcbiAgfSwgW04ocyldKSwgYztcbn1cbmZ1bmN0aW9uIEtlKGUpIHtcbiAgY29uc3QgdCA9IEEoZSksIG4gPSByLnVzZU1lbW8oKCkgPT4gb2UodCksIFt0XSk7XG4gIHJldHVybiBiKG4sIHQuaXNTcGVha2luZyk7XG59XG5mdW5jdGlvbiBldChlID0ge30pIHtcbiAgY29uc3QgdCA9IGsoZS5yb29tKSwgW24sIGFdID0gci51c2VTdGF0ZSh0LmxvY2FsUGFydGljaXBhbnQpLCBbcywgY10gPSByLnVzZVN0YXRlKFxuICAgIG4uaXNNaWNyb3Bob25lRW5hYmxlZFxuICApLCBbbywgdV0gPSByLnVzZVN0YXRlKFxuICAgIG4uaXNNaWNyb3Bob25lRW5hYmxlZFxuICApLCBbaSwgZF0gPSByLnVzZVN0YXRlKFxuICAgIG4ubGFzdE1pY3JvcGhvbmVFcnJvclxuICApLCBbZiwgbF0gPSByLnVzZVN0YXRlKG4ubGFzdENhbWVyYUVycm9yKSwgW3AsIFNdID0gci51c2VTdGF0ZShcbiAgICBuLmlzTWljcm9waG9uZUVuYWJsZWRcbiAgKSwgW2csIG1dID0gci51c2VTdGF0ZShcbiAgICB2b2lkIDBcbiAgKSwgW3ksIGhdID0gci51c2VTdGF0ZSh2b2lkIDApLCBQID0gKE0pID0+IHtcbiAgICB1KE0uaXNDYW1lcmFFbmFibGVkKSwgYyhNLmlzTWljcm9waG9uZUVuYWJsZWQpLCBTKE0uaXNTY3JlZW5TaGFyZUVuYWJsZWQpLCBoKE0uY2FtZXJhVHJhY2spLCBtKE0ubWljcm9waG9uZVRyYWNrKSwgZChNLnBhcnRpY2lwYW50Lmxhc3RNaWNyb3Bob25lRXJyb3IpLCBsKE0ucGFydGljaXBhbnQubGFzdENhbWVyYUVycm9yKSwgYShNLnBhcnRpY2lwYW50KTtcbiAgfTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBNID0gaWUodC5sb2NhbFBhcnRpY2lwYW50KS5zdWJzY3JpYmUoUCk7XG4gICAgcmV0dXJuICgpID0+IE0udW5zdWJzY3JpYmUoKTtcbiAgfSwgW3RdKSwge1xuICAgIGlzTWljcm9waG9uZUVuYWJsZWQ6IHMsXG4gICAgaXNTY3JlZW5TaGFyZUVuYWJsZWQ6IHAsXG4gICAgaXNDYW1lcmFFbmFibGVkOiBvLFxuICAgIG1pY3JvcGhvbmVUcmFjazogZyxcbiAgICBjYW1lcmFUcmFjazogeSxcbiAgICBsYXN0TWljcm9waG9uZUVycm9yOiBpLFxuICAgIGxhc3RDYW1lcmFFcnJvcjogZixcbiAgICBsb2NhbFBhcnRpY2lwYW50OiBuXG4gIH07XG59XG5mdW5jdGlvbiBBdCgpIHtcbiAgY29uc3QgZSA9IFQoKSwgdCA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBXKGUubG9jYWxQYXJ0aWNpcGFudCksXG4gICAgW2VdXG4gICk7XG4gIHJldHVybiBiKHQsIGUubG9jYWxQYXJ0aWNpcGFudC5wZXJtaXNzaW9ucyk7XG59XG5mdW5jdGlvbiBDdCh7XG4gIGtpbmQ6IGUsXG4gIHJvb206IHQsXG4gIHRyYWNrOiBuLFxuICByZXF1ZXN0UGVybWlzc2lvbnM6IGEsXG4gIG9uRXJyb3I6IHNcbn0pIHtcbiAgY29uc3QgYyA9IEcoKSwgbyA9IHIudXNlTWVtbygoKSA9PiB0ID8/IGMgPz8gbmV3IFFlKCksIFt0LCBjXSksIHUgPSByLnVzZU1lbW8oXG4gICAgKCkgPT4gUShlLCBzLCBhKSxcbiAgICBbZSwgYSwgc11cbiAgKSwgaSA9IGIodSwgW10pLCBbZCwgZl0gPSByLnVzZVN0YXRlKFxuICAgIChvID09IG51bGwgPyB2b2lkIDAgOiBvLmdldEFjdGl2ZURldmljZShlKSkgPz8gXCJkZWZhdWx0XCJcbiAgKSwgeyBjbGFzc05hbWU6IGwsIGFjdGl2ZURldmljZU9ic2VydmFibGU6IHAsIHNldEFjdGl2ZU1lZGlhRGV2aWNlOiBTIH0gPSByLnVzZU1lbW8oXG4gICAgKCkgPT4gdWUoZSwgbyksXG4gICAgW2UsIG8sIG5dXG4gICk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZyA9IHAuc3Vic2NyaWJlKChtKSA9PiB7XG4gICAgICBtICYmICh3LmluZm8oXCJzZXRDdXJyZW50RGV2aWNlSWRcIiwgbSksIGYobSkpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBnID09IG51bGwgfHwgZy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtwXSksIHsgZGV2aWNlczogaSwgY2xhc3NOYW1lOiBsLCBhY3RpdmVEZXZpY2VJZDogZCwgc2V0QWN0aXZlTWVkaWFEZXZpY2U6IFMgfTtcbn1cbmZ1bmN0aW9uIEl0KHtcbiAga2luZDogZSxcbiAgb25FcnJvcjogdFxufSkge1xuICBjb25zdCBuID0gci51c2VNZW1vKFxuICAgICgpID0+IFEoZSwgdCksXG4gICAgW2UsIHRdXG4gICk7XG4gIHJldHVybiBiKG4sIFtdKTtcbn1cbmZ1bmN0aW9uIHR0KGUsIHQsIG4gPSB7fSkge1xuICBjb25zdCBhID0gci51c2VSZWYoW10pLCBzID0gci51c2VSZWYoLTEpLCBjID0gdCAhPT0gcy5jdXJyZW50LCBvID0gdHlwZW9mIG4uY3VzdG9tU29ydEZ1bmN0aW9uID09IFwiZnVuY3Rpb25cIiA/IG4uY3VzdG9tU29ydEZ1bmN0aW9uKGUpIDogZGUoZSk7XG4gIGxldCB1ID0gWy4uLm9dO1xuICBpZiAoYyA9PT0gITEpXG4gICAgdHJ5IHtcbiAgICAgIHUgPSBsZShhLmN1cnJlbnQsIG8sIHQpO1xuICAgIH0gY2F0Y2ggKGkpIHtcbiAgICAgIHcuZXJyb3IoXCJFcnJvciB3aGlsZSBydW5uaW5nIHVwZGF0ZVBhZ2VzKCk6IFwiLCBpKTtcbiAgICB9XG4gIHJldHVybiBjID8gYS5jdXJyZW50ID0gbyA6IGEuY3VycmVudCA9IHUsIHMuY3VycmVudCA9IHQsIHU7XG59XG5mdW5jdGlvbiBPdChlLCB0KSB7XG4gIGNvbnN0IFtuLCBhXSA9IHIudXNlU3RhdGUoMSksIHMgPSBNYXRoLm1heChNYXRoLmNlaWwodC5sZW5ndGggLyBlKSwgMSk7XG4gIG4gPiBzICYmIGEocyk7XG4gIGNvbnN0IGMgPSBuICogZSwgbyA9IGMgLSBlLCB1ID0gKGwpID0+IHtcbiAgICBhKChwKSA9PiBsID09PSBcIm5leHRcIiA/IHAgPT09IHMgPyBwIDogcCArIDEgOiBwID09PSAxID8gcCA6IHAgLSAxKTtcbiAgfSwgaSA9IChsKSA9PiB7XG4gICAgbCA+IHMgPyBhKHMpIDogbCA8IDEgPyBhKDEpIDogYShsKTtcbiAgfSwgZiA9IHR0KHQsIGUpLnNsaWNlKG8sIGMpO1xuICByZXR1cm4ge1xuICAgIHRvdGFsUGFnZUNvdW50OiBzLFxuICAgIG5leHRQYWdlOiAoKSA9PiB1KFwibmV4dFwiKSxcbiAgICBwcmV2UGFnZTogKCkgPT4gdShcInByZXZpb3VzXCIpLFxuICAgIHNldFBhZ2U6IGksXG4gICAgZmlyc3RJdGVtSW5kZXg6IG8sXG4gICAgbGFzdEl0ZW1JbmRleDogYyxcbiAgICB0cmFja3M6IGYsXG4gICAgY3VycmVudFBhZ2U6IG5cbiAgfTtcbn1cbmZ1bmN0aW9uIER0KGUgPSB7fSkge1xuICBsZXQgdCA9IEYoKTtcbiAgZS5wYXJ0aWNpcGFudCAmJiAodCA9IGUucGFydGljaXBhbnQpO1xuICBjb25zdCBuID0gci51c2VNZW1vKCgpID0+IGZlKHQpLCBbdF0pLCB7IGlkZW50aXR5OiBhLCBuYW1lOiBzLCBtZXRhZGF0YTogYyB9ID0gYihuLCB7XG4gICAgbmFtZTogdCA9PSBudWxsID8gdm9pZCAwIDogdC5uYW1lLFxuICAgIGlkZW50aXR5OiB0ID09IG51bGwgPyB2b2lkIDAgOiB0LmlkZW50aXR5LFxuICAgIG1ldGFkYXRhOiB0ID09IG51bGwgPyB2b2lkIDAgOiB0Lm1ldGFkYXRhXG4gIH0pO1xuICByZXR1cm4geyBpZGVudGl0eTogYSwgbmFtZTogcywgbWV0YWRhdGE6IGMgfTtcbn1cbmZ1bmN0aW9uIEx0KGUgPSB7fSkge1xuICBjb25zdCB0ID0gQShlLnBhcnRpY2lwYW50KSwgbiA9IHIudXNlTWVtbygoKSA9PiBXKHQpLCBbdF0pO1xuICByZXR1cm4gYihuLCB0LnBlcm1pc3Npb25zKTtcbn1cbmZ1bmN0aW9uIFJ0KHtcbiAgdHJhY2tSZWY6IGUsXG4gIG9uUGFydGljaXBhbnRDbGljazogdCxcbiAgZGlzYWJsZVNwZWFraW5nSW5kaWNhdG9yOiBuLFxuICBodG1sUHJvcHM6IGFcbn0pIHtcbiAgY29uc3QgcyA9IFIoZSksIGMgPSByLnVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiBwIH0gPSBwZSgpO1xuICAgIHJldHVybiBFKGEsIHtcbiAgICAgIGNsYXNzTmFtZTogcCxcbiAgICAgIG9uQ2xpY2s6IChTKSA9PiB7XG4gICAgICAgIHZhciBnO1xuICAgICAgICBpZiAoKGcgPSBhLm9uQ2xpY2spID09IG51bGwgfHwgZy5jYWxsKGEsIFMpLCB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zdCBtID0gcy5wdWJsaWNhdGlvbiA/PyBzLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24ocy5zb3VyY2UpO1xuICAgICAgICAgIHQoeyBwYXJ0aWNpcGFudDogcy5wYXJ0aWNpcGFudCwgdHJhY2s6IG0gfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW1xuICAgIGEsXG4gICAgdCxcbiAgICBzLnB1YmxpY2F0aW9uLFxuICAgIHMuc291cmNlLFxuICAgIHMucGFydGljaXBhbnRcbiAgXSksIG8gPSBzLnBhcnRpY2lwYW50LmdldFRyYWNrUHVibGljYXRpb24odi5Tb3VyY2UuTWljcm9waG9uZSksIHUgPSByLnVzZU1lbW8oKCkgPT4gKHtcbiAgICBwYXJ0aWNpcGFudDogcy5wYXJ0aWNpcGFudCxcbiAgICBzb3VyY2U6IHYuU291cmNlLk1pY3JvcGhvbmUsXG4gICAgcHVibGljYXRpb246IG9cbiAgfSksIFtvLCBzLnBhcnRpY2lwYW50XSksIGkgPSB6KHMpLCBkID0geih1KSwgZiA9IEtlKHMucGFydGljaXBhbnQpLCBsID0gWmUocyk7XG4gIHJldHVybiB7XG4gICAgZWxlbWVudFByb3BzOiB7XG4gICAgICBcImRhdGEtbGstYXVkaW8tbXV0ZWRcIjogZCxcbiAgICAgIFwiZGF0YS1say12aWRlby1tdXRlZFwiOiBpLFxuICAgICAgXCJkYXRhLWxrLXNwZWFraW5nXCI6IG4gPT09ICEwID8gITEgOiBmLFxuICAgICAgXCJkYXRhLWxrLWxvY2FsLXBhcnRpY2lwYW50XCI6IHMucGFydGljaXBhbnQuaXNMb2NhbCxcbiAgICAgIFwiZGF0YS1say1zb3VyY2VcIjogcy5zb3VyY2UsXG4gICAgICBcImRhdGEtbGstZmFjaW5nLW1vZGVcIjogbCxcbiAgICAgIC4uLmNcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBIKGUgPSB7fSkge1xuICBjb25zdCB0ID0gayhlLnJvb20pLCBbbiwgYV0gPSByLnVzZVN0YXRlKFtdKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBzID0gYmUodCwge1xuICAgICAgYWRkaXRpb25hbFJvb21FdmVudHM6IGUudXBkYXRlT25seU9uXG4gICAgfSkuc3Vic2NyaWJlKGEpO1xuICAgIHJldHVybiAoKSA9PiBzLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFt0LCBKU09OLnN0cmluZ2lmeShlLnVwZGF0ZU9ubHlPbildKSwgbjtcbn1cbmZ1bmN0aW9uIE50KGUgPSB7fSkge1xuICBjb25zdCB0ID0gSChlKSwgeyBsb2NhbFBhcnRpY2lwYW50OiBuIH0gPSBldChlKTtcbiAgcmV0dXJuIHIudXNlTWVtbyhcbiAgICAoKSA9PiBbbiwgLi4udF0sXG4gICAgW24sIHRdXG4gICk7XG59XG5mdW5jdGlvbiBGdChlKSB7XG4gIHJldHVybiBlID0gbWUoZSksIHIudXNlTWVtbygoKSA9PiAoZSA9PSBudWxsID8gdm9pZCAwIDogZS5waW4uc3RhdGUpICE9PSB2b2lkIDAgJiYgZS5waW4uc3RhdGUubGVuZ3RoID49IDEgPyBlLnBpbi5zdGF0ZSA6IFtdLCBbZS5waW4uc3RhdGVdKTtcbn1cbmZ1bmN0aW9uIFZ0KGUsIHQgPSB7fSkge1xuICBjb25zdCBuID0gVCgpLCBbYV0gPSByLnVzZVN0YXRlKHQudXBkYXRlT25seU9uKSwgcyA9IHIudXNlTWVtbygoKSA9PiB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gU2UobiwgZSwge1xuICAgIGFkZGl0aW9uYWxFdmVudHM6IGFcbiAgfSkgOiBnZShuLCBlLCB7XG4gICAgYWRkaXRpb25hbEV2ZW50czogYVxuICB9KSwgW24sIEpTT04uc3RyaW5naWZ5KGUpLCBhXSksIFtjLCBvXSA9IHIudXNlU3RhdGUoe1xuICAgIHA6IHZvaWQgMFxuICB9KTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1ID0gcy5zdWJzY3JpYmUoKGkpID0+IG8oeyBwOiBpIH0pKTtcbiAgICByZXR1cm4gKCkgPT4gdS51bnN1YnNjcmliZSgpO1xuICB9LCBbc10pLCBjLnA7XG59XG5mdW5jdGlvbiBfdChlID0ge30pIHtcbiAgY29uc3QgdCA9IGsoZS5yb29tKSwgbiA9IHIudXNlTWVtbygoKSA9PiB2ZSh0KSwgW3RdKSwgeyBuYW1lOiBhLCBtZXRhZGF0YTogcyB9ID0gYihuLCB7XG4gICAgbmFtZTogdC5uYW1lLFxuICAgIG1ldGFkYXRhOiB0Lm1ldGFkYXRhXG4gIH0pO1xuICByZXR1cm4geyBuYW1lOiBhLCBtZXRhZGF0YTogcyB9O1xufVxuZnVuY3Rpb24gbnQoKSB7XG4gIGNvbnN0IGUgPSBUKCksIHQgPSByLnVzZU1lbW8oKCkgPT4gaGUoZSksIFtlXSk7XG4gIHJldHVybiBiKHQsIGUuYWN0aXZlU3BlYWtlcnMpO1xufVxuZnVuY3Rpb24gQnQoZSkge1xuICBjb25zdCBbdCwgbl0gPSByLnVzZVN0YXRlKFxuICAgIF8oZSlcbiAgKSwgYSA9IG50KCk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbihfKGUpKTtcbiAgfSwgW2EsIGVdKSwgdDtcbn1cbmZ1bmN0aW9uIHp0KHsgcm9vbTogZSwgcHJvcHM6IHQgfSkge1xuICBjb25zdCBuID0gayhlKSwgeyBjbGFzc05hbWU6IGEsIHJvb21BdWRpb1BsYXliYWNrQWxsb3dlZE9ic2VydmFibGU6IHMsIGhhbmRsZVN0YXJ0QXVkaW9QbGF5YmFjazogYyB9ID0gci51c2VNZW1vKFxuICAgICgpID0+IE1lKCksXG4gICAgW11cbiAgKSwgbyA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBzKG4pLFxuICAgIFtuLCBzXVxuICApLCB7IGNhblBsYXlBdWRpbzogdSB9ID0gYihvLCB7XG4gICAgY2FuUGxheUF1ZGlvOiBuLmNhblBsYXliYWNrQXVkaW9cbiAgfSk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzOiByLnVzZU1lbW8oXG4gICAgKCkgPT4gRSh0LCB7XG4gICAgICBjbGFzc05hbWU6IGEsXG4gICAgICBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIGMobik7XG4gICAgICB9LFxuICAgICAgc3R5bGU6IHsgZGlzcGxheTogdSA/IFwibm9uZVwiIDogXCJibG9ja1wiIH1cbiAgICB9KSxcbiAgICBbdCwgYSwgdSwgYywgbl1cbiAgKSwgY2FuUGxheUF1ZGlvOiB1IH07XG59XG5mdW5jdGlvbiBVdCh7IHJvb206IGUsIHByb3BzOiB0IH0pIHtcbiAgY29uc3QgbiA9IGsoZSksIHsgY2xhc3NOYW1lOiBhLCByb29tVmlkZW9QbGF5YmFja0FsbG93ZWRPYnNlcnZhYmxlOiBzLCBoYW5kbGVTdGFydFZpZGVvUGxheWJhY2s6IGMgfSA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiB5ZSgpLFxuICAgIFtdXG4gICksIG8gPSByLnVzZU1lbW8oXG4gICAgKCkgPT4gcyhuKSxcbiAgICBbbiwgc11cbiAgKSwgeyBjYW5QbGF5VmlkZW86IHUgfSA9IGIobywge1xuICAgIGNhblBsYXlWaWRlbzogbi5jYW5QbGF5YmFja1ZpZGVvXG4gIH0pO1xuICByZXR1cm4geyBtZXJnZWRQcm9wczogci51c2VNZW1vKFxuICAgICgpID0+IEUodCwge1xuICAgICAgY2xhc3NOYW1lOiBhLFxuICAgICAgb25DbGljazogKCkgPT4ge1xuICAgICAgICBjKG4pO1xuICAgICAgfSxcbiAgICAgIHN0eWxlOiB7IGRpc3BsYXk6IHUgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIiB9XG4gICAgfSksXG4gICAgW3QsIGEsIHUsIGMsIG5dXG4gICksIGNhblBsYXlWaWRlbzogdSB9O1xufVxuZnVuY3Rpb24gcXQoZSwgdCA9IHt9KSB7XG4gIGNvbnN0IG4gPSByLnVzZVJlZihudWxsKSwgYSA9IHIudXNlUmVmKG51bGwpLCBzID0gdC5taW5Td2lwZURpc3RhbmNlID8/IDUwLCBjID0gKGkpID0+IHtcbiAgICBhLmN1cnJlbnQgPSBudWxsLCBuLmN1cnJlbnQgPSBpLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgfSwgbyA9IChpKSA9PiB7XG4gICAgYS5jdXJyZW50ID0gaS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFg7XG4gIH0sIHUgPSByLnVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIW4uY3VycmVudCB8fCAhYS5jdXJyZW50KVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGkgPSBuLmN1cnJlbnQgLSBhLmN1cnJlbnQsIGQgPSBpID4gcywgZiA9IGkgPCAtcztcbiAgICBkICYmIHQub25MZWZ0U3dpcGUgJiYgdC5vbkxlZnRTd2lwZSgpLCBmICYmIHQub25SaWdodFN3aXBlICYmIHQub25SaWdodFN3aXBlKCk7XG4gIH0sIFtzLCB0XSk7XG4gIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpID0gZS5jdXJyZW50O1xuICAgIHJldHVybiBpICYmIChpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGMsIHsgcGFzc2l2ZTogITAgfSksIGkuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBvLCB7IHBhc3NpdmU6ICEwIH0pLCBpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB1LCB7IHBhc3NpdmU6ICEwIH0pKSwgKCkgPT4ge1xuICAgICAgaSAmJiAoaS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBjKSwgaS5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIG8pLCBpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB1KSk7XG4gICAgfTtcbiAgfSwgW2UsIHVdKTtcbn1cbmZ1bmN0aW9uIEp0KHsgcHJvcHM6IGUgfSkge1xuICBjb25zdCB7IGRpc3BhdGNoOiB0LCBzdGF0ZTogbiB9ID0geCgpLndpZGdldCwgeyBjbGFzc05hbWU6IGEgfSA9IHIudXNlTWVtbygoKSA9PiBQZSgpLCBbXSk7XG4gIHJldHVybiB7IG1lcmdlZFByb3BzOiByLnVzZU1lbW8oKCkgPT4gRShlLCB7XG4gICAgY2xhc3NOYW1lOiBhLFxuICAgIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIHQgJiYgdCh7IG1zZzogXCJ0b2dnbGVfY2hhdFwiIH0pO1xuICAgIH0sXG4gICAgXCJhcmlhLXByZXNzZWRcIjogbiAhPSBudWxsICYmIG4uc2hvd0NoYXQgPyBcInRydWVcIiA6IFwiZmFsc2VcIixcbiAgICBcImRhdGEtbGstdW5yZWFkLW1zZ3NcIjogbiA/IG4udW5yZWFkTWVzc2FnZXMgPCAxMCA/IG4udW5yZWFkTWVzc2FnZXMudG9GaXhlZCgwKSA6IFwiOStcIiA6IFwiMFwiXG4gIH0pLCBbZSwgYSwgdCwgbl0pIH07XG59XG5mdW5jdGlvbiB4dChlLCB0LCBuID0ge30pIHtcbiAgY29uc3QgW2EsIHNdID0gci51c2VTdGF0ZSh2b2lkIDApO1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHZhciBvO1xuICAgIGlmIChlID09PSB2b2lkIDApXG4gICAgICB0aHJvdyBFcnJvcihcInRva2VuIGVuZHBvaW50IG5lZWRzIHRvIGJlIGRlZmluZWRcIik7XG4gICAgaWYgKCgobyA9IG4udXNlckluZm8pID09IG51bGwgPyB2b2lkIDAgOiBvLmlkZW50aXR5KSA9PT0gdm9pZCAwKVxuICAgICAgcmV0dXJuO1xuICAgIChhc3luYyAoKSA9PiB7XG4gICAgICB3LmRlYnVnKFwiZmV0Y2hpbmcgdG9rZW5cIik7XG4gICAgICBjb25zdCB1ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IC4uLm4udXNlckluZm8sIHJvb21OYW1lOiB0IH0pLCBpID0gYXdhaXQgZmV0Y2goYCR7ZX0/JHt1LnRvU3RyaW5nKCl9YCk7XG4gICAgICBpZiAoIWkub2spIHtcbiAgICAgICAgdy5lcnJvcihcbiAgICAgICAgICBgQ291bGQgbm90IGZldGNoIHRva2VuLiBTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzICR7aS5zdGF0dXN9OiAke2kuc3RhdHVzVGV4dH1gXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW46IGQgfSA9IGF3YWl0IGkuanNvbigpO1xuICAgICAgcyhkKTtcbiAgICB9KSgpO1xuICB9LCBbZSwgdCwgSlNPTi5zdHJpbmdpZnkobildKSwgYTtcbn1cbmZ1bmN0aW9uIFd0KGUpIHtcbiAgdmFyIGMsIG87XG4gIGNvbnN0IHQgPSBSKGUpLCB7IGNsYXNzTmFtZTogbiwgbWVkaWFNdXRlZE9ic2VydmVyOiBhIH0gPSByLnVzZU1lbW8oXG4gICAgKCkgPT4ga2UodCksXG4gICAgW04odCldXG4gICk7XG4gIHJldHVybiB7IGlzTXV0ZWQ6IGIoXG4gICAgYSxcbiAgICAhISgoYyA9IHQucHVibGljYXRpb24pICE9IG51bGwgJiYgYy5pc011dGVkIHx8IChvID0gdC5wYXJ0aWNpcGFudC5nZXRUcmFja1B1YmxpY2F0aW9uKHQuc291cmNlKSkgIT0gbnVsbCAmJiBvLmlzTXV0ZWQpXG4gICksIGNsYXNzTmFtZTogbiB9O1xufVxuZnVuY3Rpb24gR3Qoe1xuICBzb3VyY2U6IGUsXG4gIG9uQ2hhbmdlOiB0LFxuICBpbml0aWFsU3RhdGU6IG4sXG4gIGNhcHR1cmVPcHRpb25zOiBhLFxuICBwdWJsaXNoT3B0aW9uczogcyxcbiAgb25EZXZpY2VFcnJvcjogYyxcbiAgLi4ub1xufSkge1xuICB2YXIgUDtcbiAgY29uc3QgdSA9IEcoKSwgaSA9IChQID0gdSA9PSBudWxsID8gdm9pZCAwIDogdS5sb2NhbFBhcnRpY2lwYW50KSA9PSBudWxsID8gdm9pZCAwIDogUC5nZXRUcmFja1B1YmxpY2F0aW9uKGUpLCBkID0gci51c2VSZWYoITEpLCB7IHRvZ2dsZTogZiwgY2xhc3NOYW1lOiBsLCBwZW5kaW5nT2JzZXJ2ZXI6IHAsIGVuYWJsZWRPYnNlcnZlcjogUyB9ID0gci51c2VNZW1vKFxuICAgICgpID0+IHUgPyBUZShlLCB1LCBhLCBzLCBjKSA6IEVlKCksXG4gICAgW3UsIGUsIEpTT04uc3RyaW5naWZ5KGEpLCBzXVxuICApLCBnID0gYihwLCAhMSksIG0gPSBiKFMsIG4gPz8gISEoaSAhPSBudWxsICYmIGkuaXNFbmFibGVkKSk7XG4gIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICB0ID09IG51bGwgfHwgdChtLCBkLmN1cnJlbnQpLCBkLmN1cnJlbnQgPSAhMTtcbiAgfSwgW20sIHRdKSwgci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIG4gIT09IHZvaWQgMCAmJiAody5kZWJ1ZyhcImZvcmNpbmcgaW5pdGlhbCB0b2dnbGUgc3RhdGVcIiwgZSwgbiksIGYobikpO1xuICB9LCBbXSk7XG4gIGNvbnN0IHkgPSByLnVzZU1lbW8oKCkgPT4gRShvLCB7IGNsYXNzTmFtZTogbCB9KSwgW28sIGxdKSwgaCA9IHIudXNlQ2FsbGJhY2soXG4gICAgKE0pID0+IHtcbiAgICAgIHZhciBPO1xuICAgICAgZC5jdXJyZW50ID0gITAsIGYoKS5jYXRjaCgoKSA9PiBkLmN1cnJlbnQgPSAhMSksIChPID0gby5vbkNsaWNrKSA9PSBudWxsIHx8IE8uY2FsbChvLCBNKTtcbiAgICB9LFxuICAgIFtvLCBmXVxuICApO1xuICByZXR1cm4ge1xuICAgIHRvZ2dsZTogZixcbiAgICBlbmFibGVkOiBtLFxuICAgIHBlbmRpbmc6IGcsXG4gICAgdHJhY2s6IGksXG4gICAgYnV0dG9uUHJvcHM6IHtcbiAgICAgIC4uLnksXG4gICAgICBcImFyaWEtcHJlc3NlZFwiOiBtLFxuICAgICAgXCJkYXRhLWxrLXNvdXJjZVwiOiBlLFxuICAgICAgXCJkYXRhLWxrLWVuYWJsZWRcIjogbSxcbiAgICAgIGRpc2FibGVkOiBnLFxuICAgICAgb25DbGljazogaFxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIFF0KGUgPSBbXG4gIHYuU291cmNlLkNhbWVyYSxcbiAgdi5Tb3VyY2UuTWljcm9waG9uZSxcbiAgdi5Tb3VyY2UuU2NyZWVuU2hhcmUsXG4gIHYuU291cmNlLlNjcmVlblNoYXJlQXVkaW8sXG4gIHYuU291cmNlLlVua25vd25cbl0sIHQgPSB7fSkge1xuICBjb25zdCBuID0gayh0LnJvb20pLCBbYSwgc10gPSByLnVzZVN0YXRlKFtdKSwgW2MsIG9dID0gci51c2VTdGF0ZShbXSksIHUgPSByLnVzZU1lbW8oKCkgPT4gZS5tYXAoKGQpID0+IHdlKGQpID8gZC5zb3VyY2UgOiBkKSwgW0pTT04uc3RyaW5naWZ5KGUpXSk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZCA9IEFlKG4sIHUsIHtcbiAgICAgIGFkZGl0aW9uYWxSb29tRXZlbnRzOiB0LnVwZGF0ZU9ubHlPbixcbiAgICAgIG9ubHlTdWJzY3JpYmVkOiB0Lm9ubHlTdWJzY3JpYmVkXG4gICAgfSkuc3Vic2NyaWJlKCh7IHRyYWNrUmVmZXJlbmNlczogZiwgcGFydGljaXBhbnRzOiBsIH0pID0+IHtcbiAgICAgIHcuZGVidWcoXCJzZXR0aW5nIHRyYWNrIGJ1bmRsZXNcIiwgZiwgbCksIHMoZiksIG8obCk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IGQudW5zdWJzY3JpYmUoKTtcbiAgfSwgW1xuICAgIG4sXG4gICAgSlNPTi5zdHJpbmdpZnkodC5vbmx5U3Vic2NyaWJlZCksXG4gICAgSlNPTi5zdHJpbmdpZnkodC51cGRhdGVPbmx5T24pLFxuICAgIEpTT04uc3RyaW5naWZ5KGUpXG4gIF0pLCByLnVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICgkKGUpKSB7XG4gICAgICBjb25zdCBkID0gYXQoZSwgYyksIGYgPSBBcnJheS5mcm9tKGEpO1xuICAgICAgcmV0dXJuIGMuZm9yRWFjaCgobCkgPT4ge1xuICAgICAgICBkLmhhcyhsLmlkZW50aXR5KSAmJiAoZC5nZXQobC5pZGVudGl0eSkgPz8gW10pLmZvckVhY2goKFMpID0+IHtcbiAgICAgICAgICBpZiAoYS5maW5kKFxuICAgICAgICAgICAgKHsgcGFydGljaXBhbnQ6IG0sIHB1YmxpY2F0aW9uOiB5IH0pID0+IGwuaWRlbnRpdHkgPT09IG0uaWRlbnRpdHkgJiYgeS5zb3VyY2UgPT09IFNcbiAgICAgICAgICApKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIHcuZGVidWcoXG4gICAgICAgICAgICBgQWRkICR7U30gcGxhY2Vob2xkZXIgZm9yIHBhcnRpY2lwYW50ICR7bC5pZGVudGl0eX0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgZyA9IHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50OiBsLFxuICAgICAgICAgICAgc291cmNlOiBTXG4gICAgICAgICAgfTtcbiAgICAgICAgICBmLnB1c2goZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSksIGY7XG4gICAgfSBlbHNlXG4gICAgICByZXR1cm4gYTtcbiAgfSwgW2EsIGMsIGVdKTtcbn1cbmZ1bmN0aW9uIHN0KGUsIHQpIHtcbiAgY29uc3QgbiA9IG5ldyBTZXQoZSk7XG4gIGZvciAoY29uc3QgYSBvZiB0KVxuICAgIG4uZGVsZXRlKGEpO1xuICByZXR1cm4gbjtcbn1cbmZ1bmN0aW9uIGF0KGUsIHQpIHtcbiAgY29uc3QgbiA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGlmICgkKGUpKSB7XG4gICAgY29uc3QgYSA9IGUuZmlsdGVyKChzKSA9PiBzLndpdGhQbGFjZWhvbGRlcikubWFwKChzKSA9PiBzLnNvdXJjZSk7XG4gICAgdC5mb3JFYWNoKChzKSA9PiB7XG4gICAgICBjb25zdCBjID0gcy5nZXRUcmFja1B1YmxpY2F0aW9ucygpLm1hcCgodSkgPT4ge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgcmV0dXJuIChpID0gdS50cmFjaykgPT0gbnVsbCA/IHZvaWQgMCA6IGkuc291cmNlO1xuICAgICAgfSkuZmlsdGVyKCh1KSA9PiB1ICE9PSB2b2lkIDApLCBvID0gQXJyYXkuZnJvbShcbiAgICAgICAgc3QobmV3IFNldChhKSwgbmV3IFNldChjKSlcbiAgICAgICk7XG4gICAgICBvLmxlbmd0aCA+IDAgJiYgbi5zZXQocy5pZGVudGl0eSwgbyk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBydChlKSB7XG4gIGNvbnN0IFt0LCBuXSA9IHIudXNlU3RhdGUoQ2UoZSkpLCB7IHRyYWNrT2JzZXJ2ZXI6IGEgfSA9IHIudXNlTWVtbygoKSA9PiBJZShlKSwgW2UucGFydGljaXBhbnQuc2lkID8/IGUucGFydGljaXBhbnQuaWRlbnRpdHksIGUuc291cmNlXSk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcyA9IGEuc3Vic2NyaWJlKChjKSA9PiB7XG4gICAgICBuKGMpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiBzID09IG51bGwgPyB2b2lkIDAgOiBzLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFthXSksIHtcbiAgICBwYXJ0aWNpcGFudDogZS5wYXJ0aWNpcGFudCxcbiAgICBzb3VyY2U6IGUuc291cmNlID8/IHYuU291cmNlLlVua25vd24sXG4gICAgcHVibGljYXRpb246IHRcbiAgfTtcbn1cbmZ1bmN0aW9uICR0KGUsIHQpIHtcbiAgY29uc3QgbiA9IEEodCk7XG4gIHJldHVybiBydCh7IG5hbWU6IGUsIHBhcnRpY2lwYW50OiBuIH0pO1xufVxuZnVuY3Rpb24gSHQoZSkge1xuICBjb25zdCB0ID0gVCgpLCBuID0gSSh0KSwgYSA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBuID09PSBDLkRpc2Nvbm5lY3RlZCxcbiAgICBbbl1cbiAgKSwgcyA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiBPZSh0LCBlKSxcbiAgICBbdCwgZSwgYV1cbiAgKSwgYyA9IGIocy5pc1NlbmRpbmdPYnNlcnZhYmxlLCAhMSksIG8gPSBiKHMubWVzc2FnZU9ic2VydmFibGUsIFtdKTtcbiAgcmV0dXJuIHsgc2VuZDogcy5zZW5kLCBjaGF0TWVzc2FnZXM6IG8sIGlzU2VuZGluZzogYyB9O1xufVxuZnVuY3Rpb24ganQoZSA9IHt9KSB7XG4gIGNvbnN0IFt0LCBuXSA9IHIudXNlU3RhdGUoXG4gICAgRGUoZS5kZWZhdWx0cywgZS5wcmV2ZW50TG9hZCA/PyAhMSlcbiAgKSwgYSA9IHIudXNlQ2FsbGJhY2soKGkpID0+IHtcbiAgICBuKChkKSA9PiAoeyAuLi5kLCBhdWRpb0VuYWJsZWQ6IGkgfSkpO1xuICB9LCBbXSksIHMgPSByLnVzZUNhbGxiYWNrKChpKSA9PiB7XG4gICAgbigoZCkgPT4gKHsgLi4uZCwgdmlkZW9FbmFibGVkOiBpIH0pKTtcbiAgfSwgW10pLCBjID0gci51c2VDYWxsYmFjaygoaSkgPT4ge1xuICAgIG4oKGQpID0+ICh7IC4uLmQsIGF1ZGlvRGV2aWNlSWQ6IGkgfSkpO1xuICB9LCBbXSksIG8gPSByLnVzZUNhbGxiYWNrKChpKSA9PiB7XG4gICAgbigoZCkgPT4gKHsgLi4uZCwgdmlkZW9EZXZpY2VJZDogaSB9KSk7XG4gIH0sIFtdKSwgdSA9IHIudXNlQ2FsbGJhY2soKGkpID0+IHtcbiAgICBuKChkKSA9PiAoeyAuLi5kLCB1c2VybmFtZTogaSB9KSk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBMZSh0LCBlLnByZXZlbnRTYXZlID8/ICExKTtcbiAgfSwgW3QsIGUucHJldmVudFNhdmVdKSwge1xuICAgIHVzZXJDaG9pY2VzOiB0LFxuICAgIHNhdmVBdWRpb0lucHV0RW5hYmxlZDogYSxcbiAgICBzYXZlVmlkZW9JbnB1dEVuYWJsZWQ6IHMsXG4gICAgc2F2ZUF1ZGlvSW5wdXREZXZpY2VJZDogYyxcbiAgICBzYXZlVmlkZW9JbnB1dERldmljZUlkOiBvLFxuICAgIHNhdmVVc2VybmFtZTogdVxuICB9O1xufVxuZnVuY3Rpb24gWHQoZSwgdCA9IHt9KSB7XG4gIGNvbnN0IG4gPSBBKGUpLCBhID0gayh0LnJvb20pLCBzID0gci51c2VNZW1vKCgpID0+IFJlKGEsIG4pLCBbYSwgbl0pO1xuICByZXR1cm4gYihcbiAgICBzLFxuICAgIG4uaXNMb2NhbCA/IG4uaXNFMkVFRW5hYmxlZCA6ICEhKG4gIT0gbnVsbCAmJiBuLmlzRW5jcnlwdGVkKVxuICApO1xufVxuZnVuY3Rpb24gWXQoZSwgdCA9IHsgZmZ0U2l6ZTogMzIsIHNtb290aGluZ1RpbWVDb25zdGFudDogMCB9KSB7XG4gIGNvbnN0IG4gPSBOZShlKSA/IGUucHVibGljYXRpb24udHJhY2sgOiBlLCBbYSwgc10gPSByLnVzZVN0YXRlKDApO1xuICByZXR1cm4gci51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbiB8fCAhbi5tZWRpYVN0cmVhbSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCB7IGNsZWFudXA6IGMsIGFuYWx5c2VyOiBvIH0gPSBWKG4sIHQpLCB1ID0gby5mcmVxdWVuY3lCaW5Db3VudCwgaSA9IG5ldyBVaW50OEFycmF5KHUpLCBmID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgby5nZXRCeXRlRnJlcXVlbmN5RGF0YShpKTtcbiAgICAgIGxldCBsID0gMDtcbiAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgaS5sZW5ndGg7IHArKykge1xuICAgICAgICBjb25zdCBTID0gaVtwXTtcbiAgICAgICAgbCArPSBTICogUztcbiAgICAgIH1cbiAgICAgIHMoTWF0aC5zcXJ0KGwgLyBpLmxlbmd0aCkgLyAyNTUpO1xuICAgIH0sIDFlMyAvIDMwKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgYygpLCBjbGVhckludGVydmFsKGYpO1xuICAgIH07XG4gIH0sIFtuLCBuID09IG51bGwgPyB2b2lkIDAgOiBuLm1lZGlhU3RyZWFtLCBKU09OLnN0cmluZ2lmeSh0KV0pLCBhO1xufVxuY29uc3QgY3QgPSAoZSkgPT4ge1xuICBjb25zdCB0ID0gKG4pID0+IHtcbiAgICBsZXQgYyA9IDEgLSBNYXRoLm1heCgtMTAwLCBNYXRoLm1pbigtMTAsIG4pKSAqIC0xIC8gMTAwO1xuICAgIHJldHVybiBjID0gTWF0aC5zcXJ0KGMpLCBjO1xuICB9O1xuICByZXR1cm4gZS5tYXAoKG4pID0+IG4gPT09IC0xIC8gMCA/IDAgOiB0KG4pKTtcbn0sIG90ID0ge1xuICBiYW5kczogNSxcbiAgbG9QYXNzOiAxMDAsXG4gIGhpUGFzczogNjAwLFxuICB1cGRhdGVJbnRlcnZhbDogMzIsXG4gIGFuYWx5c2VyT3B0aW9uczogeyBmZnRTaXplOiAyMDQ4IH1cbn07XG5mdW5jdGlvbiBadChlLCB0ID0ge30pIHtcbiAgdmFyIG87XG4gIGNvbnN0IG4gPSBlIGluc3RhbmNlb2YgdiA/IGUgOiAobyA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBvLnRyYWNrLCBhID0geyAuLi5vdCwgLi4udCB9LCBbcywgY10gPSByLnVzZVN0YXRlKFxuICAgIG5ldyBBcnJheShhLmJhbmRzKS5maWxsKDApXG4gICk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFuIHx8ICEobiAhPSBudWxsICYmIG4ubWVkaWFTdHJlYW0pKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHsgYW5hbHlzZXI6IHUsIGNsZWFudXA6IGkgfSA9IFYobiwgYS5hbmFseXNlck9wdGlvbnMpLCBkID0gdS5mcmVxdWVuY3lCaW5Db3VudCwgZiA9IG5ldyBGbG9hdDMyQXJyYXkoZCksIHAgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB1LmdldEZsb2F0RnJlcXVlbmN5RGF0YShmKTtcbiAgICAgIGxldCBTID0gbmV3IEZsb2F0MzJBcnJheShmLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBoID0gMDsgaCA8IGYubGVuZ3RoOyBoKyspXG4gICAgICAgIFNbaF0gPSBmW2hdO1xuICAgICAgUyA9IFMuc2xpY2UodC5sb1Bhc3MsIHQuaGlQYXNzKTtcbiAgICAgIGNvbnN0IGcgPSBjdChTKSwgbSA9IE1hdGguY2VpbChnLmxlbmd0aCAvIGEuYmFuZHMpLCB5ID0gW107XG4gICAgICBmb3IgKGxldCBoID0gMDsgaCA8IGEuYmFuZHM7IGgrKykge1xuICAgICAgICBjb25zdCBQID0gZy5zbGljZShoICogbSwgKGggKyAxKSAqIG0pLnJlZHVjZSgoTSwgTykgPT4gTSArPSBPLCAwKTtcbiAgICAgICAgeS5wdXNoKFAgLyBtKTtcbiAgICAgIH1cbiAgICAgIGMoeSk7XG4gICAgfSwgYS51cGRhdGVJbnRlcnZhbCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGkoKSwgY2xlYXJJbnRlcnZhbChwKTtcbiAgICB9O1xuICB9LCBbbiwgbiA9PSBudWxsID8gdm9pZCAwIDogbi5tZWRpYVN0cmVhbSwgSlNPTi5zdHJpbmdpZnkodCldKSwgcztcbn1cbmNvbnN0IGl0ID0ge1xuICBiYXJDb3VudDogMTIwLFxuICB2b2xNdWx0aXBsaWVyOiA1LFxuICB1cGRhdGVJbnRlcnZhbDogMjBcbn07XG5mdW5jdGlvbiBLdChlLCB0ID0ge30pIHtcbiAgdmFyIGY7XG4gIGNvbnN0IG4gPSBlIGluc3RhbmNlb2YgdiA/IGUgOiAoZiA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pID09IG51bGwgPyB2b2lkIDAgOiBmLnRyYWNrLCBhID0geyAuLi5pdCwgLi4udCB9LCBzID0gci51c2VSZWYobmV3IEZsb2F0MzJBcnJheSgpKSwgYyA9IHIudXNlUmVmKHBlcmZvcm1hbmNlLm5vdygpKSwgbyA9IHIudXNlUmVmKDApLCBbdSwgaV0gPSByLnVzZVN0YXRlKFtdKSwgZCA9IHIudXNlQ2FsbGJhY2soKGwpID0+IHtcbiAgICBpKFxuICAgICAgQXJyYXkuZnJvbShcbiAgICAgICAgZHQobCwgYS5iYXJDb3VudCkubWFwKChwKSA9PiBNYXRoLnNxcnQocCkgKiBhLnZvbE11bHRpcGxpZXIpXG4gICAgICAgIC8vIHdhdmUuc2xpY2UoMCwgb3B0cy5iYXJDb3VudCkubWFwKCh2KSA9PiBzaWdtb2lkKHYgKiBvcHRzLnZvbE11bHRpcGxpZXIsIDAuMDgsIDAuMikpLFxuICAgICAgKVxuICAgICk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW4gfHwgIShuICE9IG51bGwgJiYgbi5tZWRpYVN0cmVhbSkpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgeyBhbmFseXNlcjogbCwgY2xlYW51cDogcCB9ID0gVihuLCB7XG4gICAgICBmZnRTaXplOiBVKGEuYmFyQ291bnQpXG4gICAgfSksIFMgPSBVKGEuYmFyQ291bnQpLCBnID0gbmV3IEZsb2F0MzJBcnJheShTKSwgbSA9ICgpID0+IHtcbiAgICAgIGlmICh5ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG0pLCBsLmdldEZsb2F0VGltZURvbWFpbkRhdGEoZyksIHMuY3VycmVudC5tYXAoKGgsIFApID0+IGggKyBnW1BdKSwgby5jdXJyZW50ICs9IDEsIHBlcmZvcm1hbmNlLm5vdygpIC0gYy5jdXJyZW50ID49IGEudXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgICAgY29uc3QgaCA9IGcubWFwKChQKSA9PiBQIC8gby5jdXJyZW50KTtcbiAgICAgICAgZChoKSwgYy5jdXJyZW50ID0gcGVyZm9ybWFuY2Uubm93KCksIG8uY3VycmVudCA9IDA7XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgeSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShtKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcCgpLCBjYW5jZWxBbmltYXRpb25GcmFtZSh5KTtcbiAgICB9O1xuICB9LCBbbiwgbiA9PSBudWxsID8gdm9pZCAwIDogbi5tZWRpYVN0cmVhbSwgSlNPTi5zdHJpbmdpZnkodCksIGRdKSwge1xuICAgIGJhcnM6IHVcbiAgfTtcbn1cbmZ1bmN0aW9uIFUoZSkge1xuICByZXR1cm4gZSA8IDMyID8gMzIgOiB1dChlKTtcbn1cbmZ1bmN0aW9uIHV0KGUpIHtcbiAgbGV0IHQgPSAyO1xuICBmb3IgKDsgZSA+Pj0gMTsgKVxuICAgIHQgPDw9IDE7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gZHQoZSwgdCkge1xuICBjb25zdCBuID0gTWF0aC5mbG9vcihlLmxlbmd0aCAvIHQpLCBhID0gbmV3IEZsb2F0MzJBcnJheSh0KTtcbiAgZm9yIChsZXQgcyA9IDA7IHMgPCB0OyBzKyspIHtcbiAgICBjb25zdCBjID0gbiAqIHM7XG4gICAgbGV0IG8gPSAwO1xuICAgIGZvciAobGV0IHUgPSAwOyB1IDwgbjsgdSsrKVxuICAgICAgbyA9IG8gKyBNYXRoLmFicyhlW2MgKyB1XSk7XG4gICAgYVtzXSA9IG8gLyBuO1xuICB9XG4gIHJldHVybiBhO1xufVxuZnVuY3Rpb24gcShlLCB0KSB7XG4gIGNvbnN0IG4gPSBUKCksIGEgPSBGKCksIHMgPSB0ID8gbi5nZXRQYXJ0aWNpcGFudEJ5SWRlbnRpdHkodCkgOiBhLCBjID0gci51c2VNZW1vKFxuICAgICgpID0+IHMgPyBGZShzLCB7IHNvdXJjZXM6IGUgfSkgOiB2b2lkIDAsXG4gICAgW3MgPT0gbnVsbCA/IHZvaWQgMCA6IHMuc2lkLCBzID09IG51bGwgPyB2b2lkIDAgOiBzLmlkZW50aXR5LCBKU09OLnN0cmluZ2lmeShlKV1cbiAgKTtcbiAgcmV0dXJuIGIoYywgW10pO1xufVxuZnVuY3Rpb24gbHQoZSkge1xuICB2YXIgbiwgYSwgcztcbiAgY29uc3QgdCA9IHIudXNlTWVtbyhcbiAgICAoKSA9PiB7XG4gICAgICB2YXIgYztcbiAgICAgIHJldHVybiAoYyA9IGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24pICE9IG51bGwgJiYgYy50cmFjayA/IFZlKGUgPT0gbnVsbCA/IHZvaWQgMCA6IGUucHVibGljYXRpb24udHJhY2spIDogdm9pZCAwO1xuICAgIH0sXG4gICAgWyhuID0gZSA9PSBudWxsID8gdm9pZCAwIDogZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IG4udHJhY2tdXG4gICk7XG4gIHJldHVybiBiKHQsIHtcbiAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgcnRwVGltZXN0YW1wOiAocyA9IChhID0gZSA9PSBudWxsID8gdm9pZCAwIDogZS5wdWJsaWNhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IGEudHJhY2spID09IG51bGwgPyB2b2lkIDAgOiBzLnJ0cFRpbWVzdGFtcFxuICB9KTtcbn1cbmNvbnN0IGZ0ID0ge1xuICBidWZmZXJTaXplOiAxMDBcbiAgLy8gbWF4QWdlOiAyXzAwMCxcbn07XG5mdW5jdGlvbiBwdChlLCB0KSB7XG4gIGNvbnN0IG4gPSB7IC4uLmZ0LCAuLi50IH0sIFthLCBzXSA9IHIudXNlU3RhdGUoW10pLCBjID0gbHQoZSksIG8gPSAodSkgPT4ge1xuICAgIHZhciBpO1xuICAgIChpID0gbi5vblRyYW5zY3JpcHRpb24pID09IG51bGwgfHwgaS5jYWxsKG4sIHUpLCBzKFxuICAgICAgKGQpID0+IEJlKFxuICAgICAgICBkLFxuICAgICAgICAvLyB3aGVuIGZpcnN0IHJlY2VpdmluZyBhIHNlZ21lbnQsIGFkZCB0aGUgY3VycmVudCBtZWRpYSB0aW1lc3RhbXAgdG8gaXRcbiAgICAgICAgdS5tYXAoKGYpID0+IHplKGYsIGMpKSxcbiAgICAgICAgbi5idWZmZXJTaXplXG4gICAgICApXG4gICAgKTtcbiAgfTtcbiAgcmV0dXJuIHIudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIShlICE9IG51bGwgJiYgZS5wdWJsaWNhdGlvbikpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgdSA9IF9lKGUucHVibGljYXRpb24pLnN1YnNjcmliZSgoaSkgPT4ge1xuICAgICAgbyguLi5pKTtcbiAgICB9KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdS51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtlICYmIE4oZSksIG9dKSwgeyBzZWdtZW50czogYSB9O1xufVxuZnVuY3Rpb24gYnQoZSA9IHt9KSB7XG4gIGNvbnN0IHQgPSBGKCksIG4gPSBlLnBhcnRpY2lwYW50ID8/IHQsIGEgPSByLnVzZU1lbW8oXG4gICAgLy8gd2VpcmQgdHlwZXNjcmlwdCBjb25zdHJhaW50XG4gICAgKCkgPT4gbiA/IEwobikgOiBMKG4pLFxuICAgIFtuXVxuICApO1xuICByZXR1cm4gYihhLCB7XG4gICAgYXR0cmlidXRlczogbiA9PSBudWxsID8gdm9pZCAwIDogbi5hdHRyaWJ1dGVzXG4gIH0pO1xufVxuZnVuY3Rpb24gZW4oZSwgdCA9IHt9KSB7XG4gIGNvbnN0IG4gPSBBKHQucGFydGljaXBhbnQpLCBbYSwgc10gPSByLnVzZVN0YXRlKG4uYXR0cmlidXRlc1tlXSk7XG4gIHJldHVybiByLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFuKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGMgPSBMKG4pLnN1YnNjcmliZSgobykgPT4ge1xuICAgICAgby5jaGFuZ2VkW2VdICE9PSB2b2lkIDAgJiYgcyhvLmF0dHJpYnV0ZXNbZV0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgfSwgW24sIGVdKSwgYTtcbn1cbmNvbnN0IEogPSBcImxrLmFnZW50LnN0YXRlXCI7XG5mdW5jdGlvbiB0bigpIHtcbiAgY29uc3QgZSA9IEgoKSwgdCA9IGUuZmluZChcbiAgICAobCkgPT4gbC5raW5kID09PSBCLkFHRU5UICYmICEoXCJsay5wdWJsaXNoX29uX2JlaGFsZlwiIGluIGwuYXR0cmlidXRlcylcbiAgKSwgbiA9IGUuZmluZChcbiAgICAobCkgPT4gbC5raW5kID09PSBCLkFHRU5UICYmIGwuYXR0cmlidXRlc1tcImxrLnB1Ymxpc2hfb25fYmVoYWxmXCJdID09PSAodCA9PSBudWxsID8gdm9pZCAwIDogdC5pZGVudGl0eSlcbiAgKSwgYSA9IHEoXG4gICAgW3YuU291cmNlLk1pY3JvcGhvbmUsIHYuU291cmNlLkNhbWVyYV0sXG4gICAgdCA9PSBudWxsID8gdm9pZCAwIDogdC5pZGVudGl0eVxuICApLCBzID0gcShcbiAgICBbdi5Tb3VyY2UuTWljcm9waG9uZSwgdi5Tb3VyY2UuQ2FtZXJhXSxcbiAgICBuID09IG51bGwgPyB2b2lkIDAgOiBuLmlkZW50aXR5XG4gICksIGMgPSBhLmZpbmQoKGwpID0+IGwuc291cmNlID09PSB2LlNvdXJjZS5NaWNyb3Bob25lKSA/PyBzLmZpbmQoKGwpID0+IGwuc291cmNlID09PSB2LlNvdXJjZS5NaWNyb3Bob25lKSwgbyA9IGEuZmluZCgobCkgPT4gbC5zb3VyY2UgPT09IHYuU291cmNlLkNhbWVyYSkgPz8gcy5maW5kKChsKSA9PiBsLnNvdXJjZSA9PT0gdi5Tb3VyY2UuQ2FtZXJhKSwgeyBzZWdtZW50czogdSB9ID0gcHQoYyksIGkgPSBJKCksIHsgYXR0cmlidXRlczogZCB9ID0gYnQoeyBwYXJ0aWNpcGFudDogdCB9KSwgZiA9IHIudXNlTWVtbygoKSA9PiBpID09PSBDLkRpc2Nvbm5lY3RlZCA/IFwiZGlzY29ubmVjdGVkXCIgOiBpID09PSBDLkNvbm5lY3RpbmcgfHwgIXQgfHwgIShkICE9IG51bGwgJiYgZFtKXSkgPyBcImNvbm5lY3RpbmdcIiA6IGRbSl0sIFtkLCB0LCBpXSk7XG4gIHJldHVybiB7XG4gICAgYWdlbnQ6IHQsXG4gICAgc3RhdGU6IGYsXG4gICAgYXVkaW9UcmFjazogYyxcbiAgICB2aWRlb1RyYWNrOiBvLFxuICAgIGFnZW50VHJhbnNjcmlwdGlvbnM6IHUsXG4gICAgYWdlbnRBdHRyaWJ1dGVzOiBkXG4gIH07XG59XG5mdW5jdGlvbiBubihlKSB7XG4gIGNvbnN0IHQgPSBrKGUpLCBuID0gSSh0KSwgYSA9IHIudXNlTWVtbygoKSA9PiBVZSh0KSwgW3QsIG5dKTtcbiAgcmV0dXJuIGIoYSwgdC5pc1JlY29yZGluZyk7XG59XG5mdW5jdGlvbiBtdChlKSB7XG4gIGNvbnN0IHQgPSBUKCksIGEgPSBJKHQpID09PSBDLkRpc2Nvbm5lY3RlZCwgcyA9IHIudXNlTWVtbygoKSA9PiBxZSh0LCBlKSwgW3QsIGVdKTtcbiAgcmV0dXJuIHsgdGV4dFN0cmVhbXM6IGIoYSA/IHZvaWQgMCA6IHMsIFtdKSB9O1xufVxuZnVuY3Rpb24gc24oZSkge1xuICBjb25zdCB7IHBhcnRpY2lwYW50SWRlbnRpdGllczogdCwgdHJhY2tTaWRzOiBuIH0gPSBlID8/IHt9LCB7IHRleHRTdHJlYW1zOiBhIH0gPSBtdChKZS5UUkFOU0NSSVBUSU9OKTtcbiAgcmV0dXJuIHIudXNlTWVtbyhcbiAgICAoKSA9PiBhLmZpbHRlcihcbiAgICAgIChjKSA9PiB0ID8gdC5pbmNsdWRlcyhjLnBhcnRpY2lwYW50SW5mby5pZGVudGl0eSkgOiAhMFxuICAgICkuZmlsdGVyKFxuICAgICAgKGMpID0+IHtcbiAgICAgICAgdmFyIG87XG4gICAgICAgIHJldHVybiBuID8gbi5pbmNsdWRlcygoKG8gPSBjLnN0cmVhbUluZm8uYXR0cmlidXRlcykgPT0gbnVsbCA/IHZvaWQgMCA6IG9bXCJsay50cmFuc2NyaWJlZF90cmFja19pZFwiXSkgPz8gXCJcIikgOiAhMDtcbiAgICAgIH1cbiAgICApLFxuICAgIFthLCB0LCBuXVxuICApO1xufVxuZXhwb3J0IHtcbiAgQXQgYXMgQSxcbiAgRnQgYXMgQixcbiAgZXQgYXMgQyxcbiAgTXQgYXMgRCxcbiAga3QgYXMgRSxcbiAgWmUgYXMgRixcbiAgeiBhcyBHLFxuICBLZSBhcyBILFxuICBEdCBhcyBJLFxuICBMdCBhcyBKLFxuICBOdCBhcyBLLFxuICBWdCBhcyBMLFxuICBIIGFzIE0sXG4gIEJ0IGFzIE4sXG4gIG50IGFzIE8sXG4gIHh0IGFzIFAsXG4gICR0IGFzIFEsXG4gIFl0IGFzIFIsXG4gIEt0IGFzIFMsXG4gIHEgYXMgVCxcbiAgcHQgYXMgVSxcbiAgdG4gYXMgVixcbiAgYnQgYXMgVyxcbiAgZW4gYXMgWCxcbiAgbm4gYXMgWSxcbiAgbXQgYXMgWixcbiAgc24gYXMgXyxcbiAgSSBhcyBhLFxuICBKdCBhcyBiLFxuICBUdCBhcyBjLFxuICBFdCBhcyBkLFxuICBDdCBhcyBlLFxuICB6dCBhcyBmLFxuICBVdCBhcyBnLFxuICBHdCBhcyBoLFxuICBQdCBhcyBpLFxuICBiIGFzIGosXG4gIFd0IGFzIGssXG4gIFJ0IGFzIGwsXG4gIFh0IGFzIG0sXG4gIHd0IGFzIG4sXG4gIE90IGFzIG8sXG4gIHF0IGFzIHAsXG4gIFllIGFzIHEsXG4gIHR0IGFzIHIsXG4gIFp0IGFzIHMsXG4gIFF0IGFzIHQsXG4gIHl0IGFzIHUsXG4gIF90IGFzIHYsXG4gIEh0IGFzIHcsXG4gIGp0IGFzIHgsXG4gIEl0IGFzIHksXG4gIGh0IGFzIHpcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ob29rcy1PSnR3aDRqTy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/hooks-OJtwh4jO.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-react/dist/room-889cObLb.mjs":
/*!***********************************************************************!*\
  !*** ./node_modules/@livekit/components-react/dist/room-889cObLb.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   L: () => (/* binding */ W),\n/* harmony export */   a: () => (/* binding */ G),\n/* harmony export */   c: () => (/* binding */ H),\n/* harmony export */   m: () => (/* binding */ M),\n/* harmony export */   r: () => (/* binding */ T),\n/* harmony export */   u: () => (/* binding */ $),\n/* harmony export */   w: () => (/* binding */ Q)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./contexts-Cm1aSBTs.mjs */ \"(ssr)/./node_modules/@livekit/components-react/dist/contexts-Cm1aSBTs.mjs\");\n/* harmony import */ var livekit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! livekit-client */ \"(ssr)/./node_modules/livekit-client/dist/livekit-client.esm.mjs\");\n\n\n\nfunction L(n) {\n  var e, o, t = \"\";\n  if (typeof n == \"string\" || typeof n == \"number\") t += n;\n  else if (typeof n == \"object\") if (Array.isArray(n)) {\n    var r = n.length;\n    for (e = 0; e < r; e++) n[e] && (o = L(n[e])) && (t && (t += \" \"), t += o);\n  } else for (o in n) n[o] && (t && (t += \" \"), t += o);\n  return t;\n}\nfunction A() {\n  for (var n, e, o = 0, t = \"\", r = arguments.length; o < r; o++) (n = arguments[o]) && (e = L(n)) && (t && (t += \" \"), t += e);\n  return t;\n}\nfunction I(...n) {\n  return (...e) => {\n    for (const o of n)\n      if (typeof o == \"function\")\n        try {\n          o(...e);\n        } catch (t) {\n          console.error(t);\n        }\n  };\n}\nfunction M(...n) {\n  const e = { ...n[0] };\n  for (let o = 1; o < n.length; o++) {\n    const t = n[o];\n    for (const r in t) {\n      const d = e[r], a = t[r];\n      typeof d == \"function\" && typeof a == \"function\" && // This is a lot faster than a regex.\n      r[0] === \"o\" && r[1] === \"n\" && r.charCodeAt(2) >= /* 'A' */\n      65 && r.charCodeAt(2) <= /* 'Z' */\n      90 ? e[r] = I(d, a) : (r === \"className\" || r === \"UNSAFE_className\") && typeof d == \"string\" && typeof a == \"string\" ? e[r] = A(d, a) : e[r] = a !== void 0 ? a : d;\n    }\n  }\n  return e;\n}\nfunction J(n) {\n  return n !== void 0;\n}\nfunction G(...n) {\n  return M(...n.filter(J));\n}\nfunction H(n, e, o) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.Children.map(n, (t) => react__WEBPACK_IMPORTED_MODULE_0__.isValidElement(t) && react__WEBPACK_IMPORTED_MODULE_0__.Children.only(n) ? (t.props.className && (e ?? (e = {}), e.className = A(t.props.className, e.className), e.style = { ...t.props.style, ...e.style }), react__WEBPACK_IMPORTED_MODULE_0__.cloneElement(t, { ...e, key: o })) : t);\n}\nfunction Q(n) {\n  var e, o;\n  if (typeof window < \"u\" && typeof process < \"u\" && // eslint-disable-next-line turbo/no-undeclared-env-vars\n  (((e = process == null ? void 0 : process.env) == null ? void 0 : e.NODE_ENV) === \"dev\" || // eslint-disable-next-line turbo/no-undeclared-env-vars\n  ((o = process == null ? void 0 : process.env) == null ? void 0 : o.NODE_ENV) === \"development\")) {\n    const t = document.querySelector(\".lk-room-container\");\n    t && !getComputedStyle(t).getPropertyValue(\"--lk-has-imported-styles\") && _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\n      \"It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.\"\n    );\n  }\n}\nfunction T(n, e) {\n  return n === \"processor\" && e && typeof e == \"object\" && \"name\" in e ? e.name : n === \"e2ee\" && e ? \"e2ee-enabled\" : e;\n}\nconst q = {\n  connect: !0,\n  audio: !1,\n  video: !1\n};\nfunction $(n) {\n  const {\n    token: e,\n    serverUrl: o,\n    options: t,\n    room: r,\n    connectOptions: d,\n    connect: a,\n    audio: p,\n    video: y,\n    screen: g,\n    onConnected: v,\n    onDisconnected: h,\n    onError: c,\n    onMediaDeviceFailure: b,\n    onEncryptionError: E,\n    simulateParticipants: w,\n    ...N\n  } = { ...q, ...n };\n  t && r && _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\n    \"when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.\"\n  );\n  const [s, O] = react__WEBPACK_IMPORTED_MODULE_0__.useState(), C = react__WEBPACK_IMPORTED_MODULE_0__.useRef(a);\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    O(r ?? new livekit_client__WEBPACK_IMPORTED_MODULE_1__.Room(t));\n  }, [r, JSON.stringify(t, T)]);\n  const F = react__WEBPACK_IMPORTED_MODULE_0__.useMemo(() => {\n    const { className: m } = (0,_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.s)();\n    return M(N, { className: m });\n  }, [N]);\n  return react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (!s) return;\n    const m = () => {\n      const f = s.localParticipant;\n      _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"trying to publish local tracks\"), Promise.all([\n        f.setMicrophoneEnabled(!!p, typeof p != \"boolean\" ? p : void 0),\n        f.setCameraEnabled(!!y, typeof y != \"boolean\" ? y : void 0),\n        f.setScreenShareEnabled(!!g, typeof g != \"boolean\" ? g : void 0)\n      ]).catch((R) => {\n        _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(R), c == null || c(R);\n      });\n    }, P = (f, R) => {\n      const K = livekit_client__WEBPACK_IMPORTED_MODULE_1__.MediaDeviceFailure.getFailure(f);\n      b == null || b(K, R);\n    }, S = (f) => {\n      E == null || E(f);\n    }, k = (f) => {\n      h == null || h(f);\n    }, D = () => {\n      v == null || v();\n    };\n    return s.on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.SignalConnected, m).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, P).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.EncryptionError, S).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Disconnected, k).on(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Connected, D), () => {\n      s.off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.SignalConnected, m).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.MediaDevicesError, P).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.EncryptionError, S).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Disconnected, k).off(livekit_client__WEBPACK_IMPORTED_MODULE_1__.RoomEvent.Connected, D);\n    };\n  }, [\n    s,\n    p,\n    y,\n    g,\n    c,\n    E,\n    b,\n    v,\n    h\n  ]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (s) {\n      if (w) {\n        s.simulateParticipants({\n          participants: {\n            count: w\n          },\n          publish: {\n            audio: !0,\n            useRealTracks: !0\n          }\n        });\n        return;\n      }\n      if (a) {\n        if (C.current = !0, _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"connecting\"), !e) {\n          _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"no token yet\");\n          return;\n        }\n        if (!o) {\n          _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(\"no livekit url provided\"), c == null || c(Error(\"no livekit url provided\"));\n          return;\n        }\n        s.connect(o, e, d).catch((m) => {\n          _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.warn(m), C.current === !0 && (c == null || c(m));\n        });\n      } else\n        _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.debug(\"disconnecting because connect is false\"), C.current = !1, s.disconnect();\n    }\n  }, [\n    a,\n    e,\n    JSON.stringify(d),\n    s,\n    c,\n    o,\n    w\n  ]), react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (s)\n      return () => {\n        _contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.l.info(\"disconnecting on onmount\"), s.disconnect();\n      };\n  }, [s]), { room: s, htmlProps: F };\n}\nconst W = /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function(e, o) {\n  const { room: t, htmlProps: r } = $(e);\n  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { ref: o, ...r }, t && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.R.Provider, { value: t }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_contexts_Cm1aSBTs_mjs__WEBPACK_IMPORTED_MODULE_2__.L.Provider, { value: e.featureFlags }, e.children)));\n});\n\n//# sourceMappingURL=room-889cObLb.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1yZWFjdC9kaXN0L3Jvb20tODg5Y09iTGIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkI7QUFDOEM7QUFDVztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxPQUFPO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDJDQUFVLGVBQWUsaURBQWdCLE9BQU8sMkNBQVUsOENBQThDLGdFQUFnRSw4QkFBOEIsR0FBRywrQ0FBYyxNQUFNLGNBQWM7QUFDcFA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEUscURBQUM7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJO0FBQ1IsWUFBWSxxREFBQztBQUNiO0FBQ0E7QUFDQSxpQkFBaUIsMkNBQVUsUUFBUSx5Q0FBUTtBQUMzQyxFQUFFLDRDQUFXO0FBQ2IsZUFBZSxnREFBQztBQUNoQixHQUFHO0FBQ0gsWUFBWSwwQ0FBUztBQUNyQixZQUFZLGVBQWUsRUFBRSx5REFBQztBQUM5QixrQkFBa0IsY0FBYztBQUNoQyxHQUFHO0FBQ0gsU0FBUyw0Q0FBVztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFEQUFDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHFEQUFDO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxnQkFBZ0IsOERBQUM7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdCQUFnQixxREFBQyx3QkFBd0IscURBQUMsMEJBQTBCLHFEQUFDLHdCQUF3QixxREFBQyxxQkFBcUIscURBQUM7QUFDcEgsWUFBWSxxREFBQyx5QkFBeUIscURBQUMsMkJBQTJCLHFEQUFDLHlCQUF5QixxREFBQyxzQkFBc0IscURBQUM7QUFDcEg7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw0Q0FBVztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixxREFBQztBQUM3QixVQUFVLHFEQUFDO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsVUFBVSxxREFBQztBQUNYO0FBQ0E7QUFDQTtBQUNBLFVBQVUscURBQUM7QUFDWCxTQUFTO0FBQ1QsUUFBUTtBQUNSLFFBQVEscURBQUM7QUFDVDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sNENBQVc7QUFDakI7QUFDQTtBQUNBLFFBQVEscURBQUM7QUFDVDtBQUNBLEdBQUcsVUFBVTtBQUNiO0FBQ0EsMEJBQTBCLDZDQUFZO0FBQ3RDLFVBQVUsd0JBQXdCO0FBQ2xDLHlCQUF5QixnREFBZSxVQUFVLGNBQWMsdUJBQXVCLGdEQUFlLENBQUMscURBQUMsYUFBYSxVQUFVLGtCQUFrQixnREFBZSxDQUFDLHFEQUFDLGFBQWEsdUJBQXVCO0FBQ3RNLENBQUM7QUFTQztBQUNGIiwic291cmNlcyI6WyJEOlxcUHl0aG9uXFx0cmF2ZWwtZGV0YWlsLWRlbW9cXGZyb250ZW5kXFxub2RlX21vZHVsZXNcXEBsaXZla2l0XFxjb21wb25lbnRzLXJlYWN0XFxkaXN0XFxyb29tLTg4OWNPYkxiLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBpIGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbCBhcyB1LCBzIGFzIHgsIFIgYXMgViwgTCBhcyBqIH0gZnJvbSBcIi4vY29udGV4dHMtQ20xYVNCVHMubWpzXCI7XG5pbXBvcnQgeyBSb29tIGFzIFUsIFJvb21FdmVudCBhcyBsLCBNZWRpYURldmljZUZhaWx1cmUgYXMgXyB9IGZyb20gXCJsaXZla2l0LWNsaWVudFwiO1xuZnVuY3Rpb24gTChuKSB7XG4gIHZhciBlLCBvLCB0ID0gXCJcIjtcbiAgaWYgKHR5cGVvZiBuID09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG4gPT0gXCJudW1iZXJcIikgdCArPSBuO1xuICBlbHNlIGlmICh0eXBlb2YgbiA9PSBcIm9iamVjdFwiKSBpZiAoQXJyYXkuaXNBcnJheShuKSkge1xuICAgIHZhciByID0gbi5sZW5ndGg7XG4gICAgZm9yIChlID0gMDsgZSA8IHI7IGUrKykgbltlXSAmJiAobyA9IEwobltlXSkpICYmICh0ICYmICh0ICs9IFwiIFwiKSwgdCArPSBvKTtcbiAgfSBlbHNlIGZvciAobyBpbiBuKSBuW29dICYmICh0ICYmICh0ICs9IFwiIFwiKSwgdCArPSBvKTtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBBKCkge1xuICBmb3IgKHZhciBuLCBlLCBvID0gMCwgdCA9IFwiXCIsIHIgPSBhcmd1bWVudHMubGVuZ3RoOyBvIDwgcjsgbysrKSAobiA9IGFyZ3VtZW50c1tvXSkgJiYgKGUgPSBMKG4pKSAmJiAodCAmJiAodCArPSBcIiBcIiksIHQgKz0gZSk7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gSSguLi5uKSB7XG4gIHJldHVybiAoLi4uZSkgPT4ge1xuICAgIGZvciAoY29uc3QgbyBvZiBuKVxuICAgICAgaWYgKHR5cGVvZiBvID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBvKC4uLmUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcih0KTtcbiAgICAgICAgfVxuICB9O1xufVxuZnVuY3Rpb24gTSguLi5uKSB7XG4gIGNvbnN0IGUgPSB7IC4uLm5bMF0gfTtcbiAgZm9yIChsZXQgbyA9IDE7IG8gPCBuLmxlbmd0aDsgbysrKSB7XG4gICAgY29uc3QgdCA9IG5bb107XG4gICAgZm9yIChjb25zdCByIGluIHQpIHtcbiAgICAgIGNvbnN0IGQgPSBlW3JdLCBhID0gdFtyXTtcbiAgICAgIHR5cGVvZiBkID09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgYSA9PSBcImZ1bmN0aW9uXCIgJiYgLy8gVGhpcyBpcyBhIGxvdCBmYXN0ZXIgdGhhbiBhIHJlZ2V4LlxuICAgICAgclswXSA9PT0gXCJvXCIgJiYgclsxXSA9PT0gXCJuXCIgJiYgci5jaGFyQ29kZUF0KDIpID49IC8qICdBJyAqL1xuICAgICAgNjUgJiYgci5jaGFyQ29kZUF0KDIpIDw9IC8qICdaJyAqL1xuICAgICAgOTAgPyBlW3JdID0gSShkLCBhKSA6IChyID09PSBcImNsYXNzTmFtZVwiIHx8IHIgPT09IFwiVU5TQUZFX2NsYXNzTmFtZVwiKSAmJiB0eXBlb2YgZCA9PSBcInN0cmluZ1wiICYmIHR5cGVvZiBhID09IFwic3RyaW5nXCIgPyBlW3JdID0gQShkLCBhKSA6IGVbcl0gPSBhICE9PSB2b2lkIDAgPyBhIDogZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBKKG4pIHtcbiAgcmV0dXJuIG4gIT09IHZvaWQgMDtcbn1cbmZ1bmN0aW9uIEcoLi4ubikge1xuICByZXR1cm4gTSguLi5uLmZpbHRlcihKKSk7XG59XG5mdW5jdGlvbiBIKG4sIGUsIG8pIHtcbiAgcmV0dXJuIGkuQ2hpbGRyZW4ubWFwKG4sICh0KSA9PiBpLmlzVmFsaWRFbGVtZW50KHQpICYmIGkuQ2hpbGRyZW4ub25seShuKSA/ICh0LnByb3BzLmNsYXNzTmFtZSAmJiAoZSA/PyAoZSA9IHt9KSwgZS5jbGFzc05hbWUgPSBBKHQucHJvcHMuY2xhc3NOYW1lLCBlLmNsYXNzTmFtZSksIGUuc3R5bGUgPSB7IC4uLnQucHJvcHMuc3R5bGUsIC4uLmUuc3R5bGUgfSksIGkuY2xvbmVFbGVtZW50KHQsIHsgLi4uZSwga2V5OiBvIH0pKSA6IHQpO1xufVxuZnVuY3Rpb24gUShuKSB7XG4gIHZhciBlLCBvO1xuICBpZiAodHlwZW9mIHdpbmRvdyA8IFwidVwiICYmIHR5cGVvZiBwcm9jZXNzIDwgXCJ1XCIgJiYgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHR1cmJvL25vLXVuZGVjbGFyZWQtZW52LXZhcnNcbiAgKCgoZSA9IHByb2Nlc3MgPT0gbnVsbCA/IHZvaWQgMCA6IHByb2Nlc3MuZW52KSA9PSBudWxsID8gdm9pZCAwIDogZS5OT0RFX0VOVikgPT09IFwiZGV2XCIgfHwgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHR1cmJvL25vLXVuZGVjbGFyZWQtZW52LXZhcnNcbiAgKChvID0gcHJvY2VzcyA9PSBudWxsID8gdm9pZCAwIDogcHJvY2Vzcy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBvLk5PREVfRU5WKSA9PT0gXCJkZXZlbG9wbWVudFwiKSkge1xuICAgIGNvbnN0IHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxrLXJvb20tY29udGFpbmVyXCIpO1xuICAgIHQgJiYgIWdldENvbXB1dGVkU3R5bGUodCkuZ2V0UHJvcGVydHlWYWx1ZShcIi0tbGstaGFzLWltcG9ydGVkLXN0eWxlc1wiKSAmJiB1Lndhcm4oXG4gICAgICBcIkl0IGxvb2tzIGxpa2UgeW91J3JlIG5vdCB1c2luZyB0aGUgYEBsaXZla2l0L2NvbXBvbmVudHMtc3R5bGVzIHBhY2thZ2VgLiBUbyByZW5kZXIgdGhlIFVJIHdpdGggdGhlIGRlZmF1bHQgc3R5bGluZywgcGxlYXNlIGltcG9ydCBpdCBpbiB5b3VyIGxheW91dCBvciBwYWdlLlwiXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gVChuLCBlKSB7XG4gIHJldHVybiBuID09PSBcInByb2Nlc3NvclwiICYmIGUgJiYgdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiBcIm5hbWVcIiBpbiBlID8gZS5uYW1lIDogbiA9PT0gXCJlMmVlXCIgJiYgZSA/IFwiZTJlZS1lbmFibGVkXCIgOiBlO1xufVxuY29uc3QgcSA9IHtcbiAgY29ubmVjdDogITAsXG4gIGF1ZGlvOiAhMSxcbiAgdmlkZW86ICExXG59O1xuZnVuY3Rpb24gJChuKSB7XG4gIGNvbnN0IHtcbiAgICB0b2tlbjogZSxcbiAgICBzZXJ2ZXJVcmw6IG8sXG4gICAgb3B0aW9uczogdCxcbiAgICByb29tOiByLFxuICAgIGNvbm5lY3RPcHRpb25zOiBkLFxuICAgIGNvbm5lY3Q6IGEsXG4gICAgYXVkaW86IHAsXG4gICAgdmlkZW86IHksXG4gICAgc2NyZWVuOiBnLFxuICAgIG9uQ29ubmVjdGVkOiB2LFxuICAgIG9uRGlzY29ubmVjdGVkOiBoLFxuICAgIG9uRXJyb3I6IGMsXG4gICAgb25NZWRpYURldmljZUZhaWx1cmU6IGIsXG4gICAgb25FbmNyeXB0aW9uRXJyb3I6IEUsXG4gICAgc2ltdWxhdGVQYXJ0aWNpcGFudHM6IHcsXG4gICAgLi4uTlxuICB9ID0geyAuLi5xLCAuLi5uIH07XG4gIHQgJiYgciAmJiB1Lndhcm4oXG4gICAgXCJ3aGVuIHVzaW5nIGEgbWFudWFsbHkgY3JlYXRlZCByb29tLCB0aGUgb3B0aW9ucyBvYmplY3Qgd2lsbCBiZSBpZ25vcmVkLiBzZXQgdGhlIGRlc2lyZWQgb3B0aW9ucyBkaXJlY3RseSB3aGVuIGNyZWF0aW5nIHRoZSByb29tIGluc3RlYWQuXCJcbiAgKTtcbiAgY29uc3QgW3MsIE9dID0gaS51c2VTdGF0ZSgpLCBDID0gaS51c2VSZWYoYSk7XG4gIGkudXNlRWZmZWN0KCgpID0+IHtcbiAgICBPKHIgPz8gbmV3IFUodCkpO1xuICB9LCBbciwgSlNPTi5zdHJpbmdpZnkodCwgVCldKTtcbiAgY29uc3QgRiA9IGkudXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgeyBjbGFzc05hbWU6IG0gfSA9IHgoKTtcbiAgICByZXR1cm4gTShOLCB7IGNsYXNzTmFtZTogbSB9KTtcbiAgfSwgW05dKTtcbiAgcmV0dXJuIGkudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXMpIHJldHVybjtcbiAgICBjb25zdCBtID0gKCkgPT4ge1xuICAgICAgY29uc3QgZiA9IHMubG9jYWxQYXJ0aWNpcGFudDtcbiAgICAgIHUuZGVidWcoXCJ0cnlpbmcgdG8gcHVibGlzaCBsb2NhbCB0cmFja3NcIiksIFByb21pc2UuYWxsKFtcbiAgICAgICAgZi5zZXRNaWNyb3Bob25lRW5hYmxlZCghIXAsIHR5cGVvZiBwICE9IFwiYm9vbGVhblwiID8gcCA6IHZvaWQgMCksXG4gICAgICAgIGYuc2V0Q2FtZXJhRW5hYmxlZCghIXksIHR5cGVvZiB5ICE9IFwiYm9vbGVhblwiID8geSA6IHZvaWQgMCksXG4gICAgICAgIGYuc2V0U2NyZWVuU2hhcmVFbmFibGVkKCEhZywgdHlwZW9mIGcgIT0gXCJib29sZWFuXCIgPyBnIDogdm9pZCAwKVxuICAgICAgXSkuY2F0Y2goKFIpID0+IHtcbiAgICAgICAgdS53YXJuKFIpLCBjID09IG51bGwgfHwgYyhSKTtcbiAgICAgIH0pO1xuICAgIH0sIFAgPSAoZiwgUikgPT4ge1xuICAgICAgY29uc3QgSyA9IF8uZ2V0RmFpbHVyZShmKTtcbiAgICAgIGIgPT0gbnVsbCB8fCBiKEssIFIpO1xuICAgIH0sIFMgPSAoZikgPT4ge1xuICAgICAgRSA9PSBudWxsIHx8IEUoZik7XG4gICAgfSwgayA9IChmKSA9PiB7XG4gICAgICBoID09IG51bGwgfHwgaChmKTtcbiAgICB9LCBEID0gKCkgPT4ge1xuICAgICAgdiA9PSBudWxsIHx8IHYoKTtcbiAgICB9O1xuICAgIHJldHVybiBzLm9uKGwuU2lnbmFsQ29ubmVjdGVkLCBtKS5vbihsLk1lZGlhRGV2aWNlc0Vycm9yLCBQKS5vbihsLkVuY3J5cHRpb25FcnJvciwgUykub24obC5EaXNjb25uZWN0ZWQsIGspLm9uKGwuQ29ubmVjdGVkLCBEKSwgKCkgPT4ge1xuICAgICAgcy5vZmYobC5TaWduYWxDb25uZWN0ZWQsIG0pLm9mZihsLk1lZGlhRGV2aWNlc0Vycm9yLCBQKS5vZmYobC5FbmNyeXB0aW9uRXJyb3IsIFMpLm9mZihsLkRpc2Nvbm5lY3RlZCwgaykub2ZmKGwuQ29ubmVjdGVkLCBEKTtcbiAgICB9O1xuICB9LCBbXG4gICAgcyxcbiAgICBwLFxuICAgIHksXG4gICAgZyxcbiAgICBjLFxuICAgIEUsXG4gICAgYixcbiAgICB2LFxuICAgIGhcbiAgXSksIGkudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocykge1xuICAgICAgaWYgKHcpIHtcbiAgICAgICAgcy5zaW11bGF0ZVBhcnRpY2lwYW50cyh7XG4gICAgICAgICAgcGFydGljaXBhbnRzOiB7XG4gICAgICAgICAgICBjb3VudDogd1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcHVibGlzaDoge1xuICAgICAgICAgICAgYXVkaW86ICEwLFxuICAgICAgICAgICAgdXNlUmVhbFRyYWNrczogITBcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoYSkge1xuICAgICAgICBpZiAoQy5jdXJyZW50ID0gITAsIHUuZGVidWcoXCJjb25uZWN0aW5nXCIpLCAhZSkge1xuICAgICAgICAgIHUuZGVidWcoXCJubyB0b2tlbiB5ZXRcIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbykge1xuICAgICAgICAgIHUud2FybihcIm5vIGxpdmVraXQgdXJsIHByb3ZpZGVkXCIpLCBjID09IG51bGwgfHwgYyhFcnJvcihcIm5vIGxpdmVraXQgdXJsIHByb3ZpZGVkXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcy5jb25uZWN0KG8sIGUsIGQpLmNhdGNoKChtKSA9PiB7XG4gICAgICAgICAgdS53YXJuKG0pLCBDLmN1cnJlbnQgPT09ICEwICYmIChjID09IG51bGwgfHwgYyhtKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlXG4gICAgICAgIHUuZGVidWcoXCJkaXNjb25uZWN0aW5nIGJlY2F1c2UgY29ubmVjdCBpcyBmYWxzZVwiKSwgQy5jdXJyZW50ID0gITEsIHMuZGlzY29ubmVjdCgpO1xuICAgIH1cbiAgfSwgW1xuICAgIGEsXG4gICAgZSxcbiAgICBKU09OLnN0cmluZ2lmeShkKSxcbiAgICBzLFxuICAgIGMsXG4gICAgbyxcbiAgICB3XG4gIF0pLCBpLnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHMpXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB1LmluZm8oXCJkaXNjb25uZWN0aW5nIG9uIG9ubW91bnRcIiksIHMuZGlzY29ubmVjdCgpO1xuICAgICAgfTtcbiAgfSwgW3NdKSwgeyByb29tOiBzLCBodG1sUHJvcHM6IEYgfTtcbn1cbmNvbnN0IFcgPSAvKiBAX19QVVJFX18gKi8gaS5mb3J3YXJkUmVmKGZ1bmN0aW9uKGUsIG8pIHtcbiAgY29uc3QgeyByb29tOiB0LCBodG1sUHJvcHM6IHIgfSA9ICQoZSk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gaS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgcmVmOiBvLCAuLi5yIH0sIHQgJiYgLyogQF9fUFVSRV9fICovIGkuY3JlYXRlRWxlbWVudChWLlByb3ZpZGVyLCB7IHZhbHVlOiB0IH0sIC8qIEBfX1BVUkVfXyAqLyBpLmNyZWF0ZUVsZW1lbnQoai5Qcm92aWRlciwgeyB2YWx1ZTogZS5mZWF0dXJlRmxhZ3MgfSwgZS5jaGlsZHJlbikpKTtcbn0pO1xuZXhwb3J0IHtcbiAgVyBhcyBMLFxuICBHIGFzIGEsXG4gIEggYXMgYyxcbiAgTSBhcyBtLFxuICBUIGFzIHIsXG4gICQgYXMgdSxcbiAgUSBhcyB3XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm9vbS04ODljT2JMYi5tanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-react/dist/room-889cObLb.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@livekit/components-styles/dist/general/index.css":
/*!************************************************************************!*\
  !*** ./node_modules/@livekit/components-styles/dist/general/index.css ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"e0d4a9e27a75\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGxpdmVraXQvY29tcG9uZW50cy1zdHlsZXMvZGlzdC9nZW5lcmFsL2luZGV4LmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsiRDpcXFB5dGhvblxcdHJhdmVsLWRldGFpbC1kZW1vXFxmcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAbGl2ZWtpdFxcY29tcG9uZW50cy1zdHlsZXNcXGRpc3RcXGdlbmVyYWxcXGluZGV4LmNzcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcImUwZDRhOWUyN2E3NVwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@livekit/components-styles/dist/general/index.css\n");

/***/ })

};
;